import{a as be,b as xe,f as De}from"./chunk-T56X74R2.js";import{b as D}from"./chunk-5LL2XCUH.js";import{a as Ne}from"./chunk-ESCTQB4O.js";import{a as Re}from"./chunk-H7J33JRO.js";import{a as H}from"./chunk-TN4DQYXD.js";import{a as Se}from"./chunk-OSSJ2PGW.js";import{a as we,b as X,c as Me,d as T,e as ke,f as Oe,g as v,h as Ee,n as Ie,o as S}from"./chunk-JWYMJBHE.js";import{a as Q,b as J}from"./chunk-PWCTC5DJ.js";import{k as ve}from"./chunk-EYYLYRFR.js";import{a as Pe}from"./chunk-33YDEZ6H.js";import{G as x}from"./chunk-SR2DRA4F.js";import{d as he}from"./chunk-MCFY5JX5.js";import{$b as p,Ac as _e,Bd as Ce,Db as f,Eb as C,Ec as pe,Fc as ge,Hb as j,Ib as z,Jb as _,Kb as a,Kd as Ae,Lb as r,Mb as h,Md as $,Nd as ye,Oc as U,Pc as k,Pd as W,Qb as re,Qc as ue,Rb as ae,Rd as Te,U as V,Wa as P,Wb as w,Wd as b,Yb as E,Zb as se,_a as d,_b as de,bc as s,e as te,fa as u,j as G,jc as le,ka as c,kc as ce,la as m,nb as M,pc as O,qc as N,rc as q,t as oe,uc as I,vc as A,wc as y,xc as me,xd as fe,ya as R}from"./chunk-MRX5UB2X.js";var Be=["inlineEditControl"];function Ge(n,l){if(n&1){let e=w();a(0,"div",1)(1,"input",2,0),y("ngModelChange",function(i){c(e);let o=s();return A(o.value,i)||(o.value=i),m(i)}),p("blur",function(){c(e);let i=s();return m(i.onBlur())})("keydown.enter",function(){c(e);let i=s();return m(i.apply())}),r()()}if(n&2){let e=s();d(),_("required",e.required())("name",e.value)("type",e.type())("placeholder",e.placeholder()),I("ngModel",e.value)}}function je(n,l){if(n&1){let e=w();a(0,"div")(1,"div",3),p("click",function(){c(e);let i=s();return m(i.edit(i.value))})("focus",function(){c(e);let i=s();return m(i.edit(i.value))}),O(2),h(3,"i",4),r()()}if(n&2){let e=s();d(2),q("",e.value,"\xA0")}}var Fe=(()=>{class n{constructor(){this.placeholder=k(""),this.type=k("text"),this.required=k(!1),this.disabled=k(!1),this.endEditRequest=U(),this.editing=!1,this.inlineEditControl=ue("inlineEditControl"),this.editValue="",this.preValue=""}get value(){return this.editValue}set value(e){e!==this.editValue&&(this.editValue=e,this.onChange?.(e))}writeValue(e){this.editValue=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onBlur(){this.editing=!1,this.preValue!==this.editValue&&this.endEditRequest.emit()}apply(){this.editing=!1,this.endEditRequest.emit()}edit(e){this.disabled()||(this.preValue=e,this.editing=!0,setTimeout(()=>{let t=this.inlineEditControl();t?.nativeElement&&t.nativeElement.focus()}))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=M({type:n,selectors:[["app-inline-edit"]],viewQuery:function(t,i){t&1&&le(i.inlineEditControl,Be,5),t&2&&ce()},inputs:{placeholder:[1,"placeholder"],type:[1,"type"],required:[1,"required"],disabled:[1,"disabled"]},outputs:{endEditRequest:"endEditRequest"},features:[_e([{provide:we,useExisting:n,multi:!0}])],decls:2,vars:1,consts:()=>{let e;return e=$localize`:␟32dfa3de9f35ea40a3c19960ab339727b437791f␟2350070440008093526:Click to edit`,[["inlineEditControl",""],[1,"inline-edit-edit"],[3,"ngModelChange","blur","keydown.enter","required","name","type","placeholder","ngModel"],["title",e,"tabindex","0",1,"inline-edit",3,"click","focus"],[1,"icon-edit"]]},template:function(t,i){t&1&&f(0,Ge,3,5,"div",1)(1,je,4,1,"div"),t&2&&C(i.editing?0:1)},dependencies:[S,Me,T,Ie,v],styles:[`.inline-edit{cursor:pointer}.inline-edit i{font-size:.7em}.inline-edit-edit{width:100%;display:block}.inline-edit-edit input{width:100%}
`],encapsulation:2})}}return n})();function ze(n,l){if(n&1){let e=w();a(0,"image-cropper",8),p("imageCropped",function(i){c(e);let o=s();return m(o.imageCropped(i))}),r()}if(n&2){let e=s();_("imageBase64",e.imageBase64)("format",e.format)("maintainAspectRatio",e.maintainAspectRatio)}}function qe(n,l){if(n&1&&(a(0,"div",5),h(1,"img",9),r()),n&2){let e=s();d(),_("src",e.croppedImage,P)}}var Le=(()=>{class n{constructor(){this.data=k(),this.imageEdited=U(),this.imageBase64="",this.maintainAspectRatio=!0,this.format="jpeg",this.unsubscribe=new G,this.jam=u(b),this.folderService=u(D),this.notify=u(x),this.sanitizer=u(he)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}load(){let e=this.data();e&&this.jam.image.imageBinary({id:e.artwork.id}).then(t=>{this.imageBase64=`data:${t.contentType||"image/jpeg"};base64,${xe(t.buffer)}`}).catch(t=>{this.notify.error(t)})}imageCropped(e){e.objectUrl&&(this.croppedImage=this.sanitizer.bypassSecurityTrustUrl(e.objectUrl)),e.blob&&(this.croppedImageFile=e.blob)}ngOnChanges(){this.load()}upload(){let e=this.data();if(!this.croppedImageFile||!e)return;let t=e.folderID,i=new File([this.croppedImageFile],e.artwork.name,{type:this.croppedImageFile.type});this.jam.artwork.update({id:e.artwork.id},i).pipe(V(this.unsubscribe)).subscribe({next:o=>{o.type===fe.Response&&o.body!==null&&(this.folderService.waitForQueueResult("Updating Folder Artwork",o.body,[t]),this.imageEdited.emit())},error:o=>{this.notify.error(o)},complete:()=>{this.notify.success("Upload done")}})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=M({type:n,selectors:[["app-admin-artwork-edit"]],inputs:{data:[1,"data"]},outputs:{imageEdited:"imageEdited"},features:[R],decls:10,vars:4,consts:()=>{let e;e=$localize`:␟9adf24384bd663ce0cf256940aae864e83991330␟6234579371454134968:Maintain Aspect Ratio`;let t;t=$localize`:␟f8c2b6ea1dd59afb3f3f555afbd132af40653bba␟1396820513327307838:Use Cropped Artwork`;let i;return i=$localize`:␟4fc4437088a4fa1764a26dd6b3552dbca6b64541␟777253553934937544:Cropped Image`,[e,t,[1,"image-crop"],["type","checkbox",3,"ngModelChange","ngModel","checked"],[3,"imageBase64","format","maintainAspectRatio"],[1,"image-preview"],[1,"buttons"],[1,"button-on-control",3,"click"],[3,"imageCropped","imageBase64","format","maintainAspectRatio"],["alt",i,3,"src"]]},template:function(t,i){t&1&&(a(0,"div",2)(1,"label")(2,"input",3),y("ngModelChange",function(g){return A(i.maintainAspectRatio,g)||(i.maintainAspectRatio=g),g}),r(),re(3),E(4,0),ae(),r(),f(5,ze,1,3,"image-cropper",4),r(),f(6,qe,2,1,"div",5),a(7,"div",6)(8,"button",7),p("click",function(){return i.upload()}),E(9,1),r()()),t&2&&(d(2),I("ngModel",i.maintainAspectRatio),_("checked",i.maintainAspectRatio),d(3),C(i.imageBase64?5:-1),d(),C(i.croppedImage?6:-1))},dependencies:[S,X,T,v,be],styles:["[_nghost-%COMP%]{width:100%;display:block;text-align:center}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]{width:300px;display:block}[_nghost-%COMP%]   .image-crop[_ngcontent-%COMP%]{display:inline-block;text-align:center;margin-left:10px;margin-right:10px}[_nghost-%COMP%]   .image-preview[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;display:inline-block}[_nghost-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px}"]})}}return n})();function Ue(n,l){if(n&1){let e=w();a(0,"app-admin-artwork-edit",1),p("imageEdited",function(){c(e);let i=s();return m(i.onImageEdited())}),r()}if(n&2){let e=s();_("data",e.data)}}var Ve=(()=>{class n{constructor(){this.loading=!0}dialogInit(e,t){this.data=t.data,this.reference=e}onImageEdited(){this.reference&&this.reference.close()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=M({type:n,selectors:[["app-image-edit-overlay-content"]],decls:1,vars:1,consts:[[3,"data"],[3,"imageEdited","data"]],template:function(t,i){t&1&&f(0,Ue,1,1,"app-admin-artwork-edit",0),t&2&&C(i.data?0:-1)},dependencies:[Le],encapsulation:2})}}return n})();var Xe=(n,l)=>l.artwork.id;function He(n,l){if(n&1){let e=w();a(0,"div",3),p("keydown.enter",function(){let i=c(e).$implicit,o=s();return m(o.editArtwork(i.artwork))}),a(1,"div",4)(2,"img",5),p("clickenter",function(){let i=c(e).$implicit,o=s();return m(o.editArtwork(i.artwork))}),r(),a(3,"div",6),O(4),r(),a(5,"div",7),O(6),r(),a(7,"div",8),E(8,0),r(),a(9,"div",9),O(10),pe(11,"filesize"),r()(),a(12,"div",10)(13,"app-inline-edit",11),y("ngModelChange",function(i){let o=c(e).$implicit;return A(o.name,i)||(o.name=i),m(i)}),p("endEditRequest",function(){let i=c(e).$implicit,o=s();return m(o.editArtworkName(i))}),r(),a(14,"a",12),p("clickenter",function(){let i=c(e).$implicit,o=s();return m(o.removeArtwork(i))}),h(15,"i",13),r()()()}if(n&2){let e=l.$implicit;d(2),_("src",e.thumbnail,P),d(2),N(e.artwork.types),d(2),N(e.artwork.format),d(2),se(e.artwork.width)(e.artwork.height),de(8),d(2),N(ge(11,7,e.artwork.size)),d(3),I("ngModel",e.name)}}function Qe(n){let l=n.split(".");return l.pop(),l.join(".")}function Je(n){return n.split(".").at(-1)??""}var $e=(()=>{class n{constructor(){this.artworks=k(),this.folderID=k(),this.jam=u(b),this.notify=u(x),this.folderService=u(D),this.dialogs=u(Se),this.dialogOverlay=u(ve)}ngOnChanges(){this.displayArtworks()}editArtworkName(e){this.jam.artwork.rename({id:e.artwork.id,newName:e.name}).then(t=>{let i=this.folderID();this.folderService.waitForQueueResult("Renaming Artwork",t,i?[i]:[],[])}).catch(t=>{this.notify.error(t)})}editArtwork(e){this.dialogOverlay.open({childComponent:Ve,title:"Edit Image",data:{artwork:e,folderID:this.folderID()},panelClass:""})}removeArtwork(e){this.dialogs.confirm("Remove Artworks?",`Do you want to delete "${e.artwork.name}"?`,()=>{this.jam.artwork.remove({id:e.artwork.id}).then(t=>{this.nodes&&(this.nodes=this.nodes.filter(o=>o!==e));let i=this.folderID();this.folderService.waitForQueueResult("Removing Artwork",t,i?[i]:[])}).catch(t=>{this.notify.error(t)})})}displayArtworks(){this.nodes=[];let e=this.artworks();e&&(this.nodes=e.map(t=>({name:Qe(t.name),type:Je(t.name),artwork:t,thumbnail:this.jam.image.imageUrl({id:t.id,size:128,format:ye.webp})})))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=M({type:n,selectors:[["app-admin-artwork-list"]],inputs:{artworks:[1,"artworks"],folderID:[1,"folderID"]},features:[R],decls:3,vars:0,consts:()=>{let e;e=$localize`:␟787e502e73191d41bb2ee8adb258a7435c94f5af␟7553271888893131195:Artwork`;let t;t=$localize`:␟4098fa43889421ae01e1548d8123ac604d0a741b␟365085234255662021:Delete Image`;let i;return i=$localize`:␟529bc57f97bc4167977fb632405746401ff67f44␟2349325499864057267:${"\uFFFD0\uFFFD"}:INTERPOLATION:x${"\uFFFD1\uFFFD"}:INTERPOLATION_1:`,[i,["appFocusKeyList","","role","list"],["appFocusKeyListItem","","role","listitem",1,"artwork"],["appFocusKeyListItem","","role","listitem",1,"artwork",3,"keydown.enter"],[1,"artwork-img"],["alt",e,3,"clickenter","src"],[1,"mode"],[1,"format"],[1,"dims"],[1,"size"],[1,"artwork-types"],["type","text",3,"ngModelChange","endEditRequest","ngModel"],["title",t,1,"delete-button",3,"clickenter"],["aria-hidden","true",1,"icon-trash"]]},template:function(t,i){t&1&&(a(0,"div",1),j(1,He,16,9,"div",2,Xe),r()),t&2&&(d(),z(i.nodes))},dependencies:[S,T,v,Fe,H,Q,J,Ne],styles:["[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]{display:inline-block;padding-top:15px;padding-right:15px;font-size:.8em;text-align:center;width:200px}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]{position:relative;overflow:hidden}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .dims[_ngcontent-%COMP%], [_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%], [_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .format[_ngcontent-%COMP%], [_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{position:absolute;padding:5px;background-color:var(--background-transparent);color:var(--on-background-highlight)}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{top:0;left:0}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .format[_ngcontent-%COMP%]{bottom:0;left:0}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .dims[_ngcontent-%COMP%]{top:0;right:0}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{bottom:0;right:0}[_nghost-%COMP%]   .artwork-types[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;overflow:hidden}[_nghost-%COMP%]   .artwork-types[_ngcontent-%COMP%]   app-inline-edit[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .artwork-types[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}"]})}}return n})();var Ye=(n,l)=>l.image;function Ze(n,l){n&1&&h(0,"app-loading")}function et(n,l){n&1&&h(0,"i",17)}function tt(n,l){if(n&1){let e=w();a(0,"input",19),y("ngModelChange",function(i){c(e);let o=s().$implicit;return A(o.checked,i)||(o.checked=i),m(i)}),r()}if(n&2){let e=s().$implicit;_("checked",e.checked),I("ngModel",e.checked)}}function it(n,l){if(n&1){let e=w();a(0,"div",11),p("keydown.enter",function(){let i=c(e).$implicit;return m(i.checked=!i.checked)}),a(1,"div",12),p("clickenter",function(){let i=c(e).$implicit;return m(i.checked=!i.checked)}),h(2,"img",13),r(),a(3,"div",14)(4,"div",15)(5,"form")(6,"span",16),f(7,et,1,0,"i",17)(8,tt,1,2,"input",18),O(9),r()()()()()}if(n&2){let e=l.$implicit;d(2),_("alt",me(e.name))("src",e.thumbnail,P),d(5),C(e.storing?7:8),d(2),q(" ",e.name," ")}}function nt(n,l){if(n&1&&(a(0,"div"),h(1,"app-background-text-list",8),a(2,"div",9),j(3,it,10,5,"div",10,Ye),r()()),n&2){let e=s();d(),_("list",e.nodes),d(2),z(e.nodes)}}function ot(n,l){if(n&1&&h(0,"app-admin-artwork-list",21),n&2){let e=s(),t=s(2);_("folderID",e.folder.id)("artworks",t.artworks)}}function rt(n,l){if(n&1&&(a(0,"div",20)(1,"div",4),E(2,0),r(),f(3,ot,1,2,"app-admin-artwork-list",21),r()),n&2){let e=s(2);d(3),C(e.isArtRefreshing?-1:3)}}function at(n,l){if(n&1&&f(0,rt,4,1,"div",20),n&2){let e,t=s();C((e=t.data())?0:-1,e)}}function st(n,l){n&1&&(a(0,"button",22),h(1,"i",17),r())}function dt(n,l){if(n&1){let e=w();a(0,"button",23),p("click",function(){c(e);let i=s(2);return m(i.use())}),E(1,1),r()}}function lt(n,l){if(n&1&&(a(0,"div"),f(1,st,2,0,"button",22)(2,dt,2,0,"button",22),r()),n&2){let e=s();d(),C(e.isWorking?1:2)}}var We=(()=>{class n{constructor(){this.data=k(),this.isWorking=!1,this.isArtRefreshing=!1,this.searchSource={name:"",url:""},this.unsubscribe=new G,this.jam=u(b),this.notify=u(x),this.folderService=u(D),this.http=u(Ce)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}ngOnChanges(){this.search();let e=this.data();e?.folder&&(e.folder.artworks?this.artworks=e.folder.artworks:this.refreshArtworks())}refreshArtworks(){let e=this.data();e&&(this.isArtRefreshing=!0,this.jam.artwork.search({folderIDs:[e.folder.id]}).then(t=>{this.isArtRefreshing=!1,this.artworks=t.items}).catch(t=>{this.isArtRefreshing=!1,console.error(t)}))}loadWikiDataID(e){return te(this,null,function*(){let i=(yield this.jam.metadata.musicbrainzLookup({type:Ae.artist,mbID:e})).data;if(i?.artist?.relations){let o=i.artist.relations.find(g=>g.type==="wikidata");if(o?.url)return o.url.resource.split("/").pop()}})}loadWikiCommonImage(e){return te(this,null,function*(){let t=yield this.loadWikiDataID(e);if(!t)return;let g=(yield this.jam.metadata.wikidataLookup({wikiDataID:t})).data?.entity?.claims;if(!g)return;let F=Object.keys(g);for(let Y of F){let Z=g[Y];Z=Z.filter(L=>typeof L.mainsnak.datavalue.value=="string"&&De(L.mainsnak.datavalue.value.toLowerCase(),["jpg","jpeg","png"]));let ne=Z.at(0);if(ne){let L=ne.mainsnak.datavalue.value;if(typeof L!="string")return;let Ke=`https://en.wikipedia.org/w/api.php?format=json&action=query&origin=*&titles=File:${L}&prop=imageinfo&iiprop=extmetadata|url&iiextmetadatafilter=LicenseShortName`,ee=yield oe(this.http.get(Ke));if(ee?.query?.pages){let B=ee.query.pages[Object.keys(ee.query.pages)[0]]?.imageinfo[0];if(B)return{name:W.artist,thumbnail:B.url,image:B.url,licence:B.extmetadata.LicenseShortName.value,checked:!0,storing:!1,types:[W.artist]}}}}})}loadWikiCommon(e){this.loadWikiCommonImage(e).then(t=>{this.nodes=[],t&&(t.checked=!0,this.nodes.push(t))}).catch(t=>{this.nodes=[],this.notify.error(t)})}use(){let e=(this.nodes??[]).find(i=>i.checked&&!i.storing),t=this.data()?.folder;e&&t?(this.isWorking=!0,e.storing=!0,this.jam.artwork.createByUrl({folderID:t.id,url:e.image,types:e.types}).then(i=>{this.folderService.waitForQueueResult("Creating Artwork",i,[t.id]).pipe(V(this.unsubscribe)).subscribe(()=>{e.storing=!1,e.checked=!1}),this.use()}).catch(i=>{e.storing=!1,this.notify.error(i)})):this.isWorking=!1}ngOnInit(){this.folderService.foldersChange.pipe(V(this.unsubscribe)).subscribe(e=>{e.id===this.data()?.folder.id&&this.refreshArtworks()})}loadReleaseGroupAndRelease(e,t){this.jam.metadata.coverartarchiveLookup({type:$.releaseGroup,mbID:t}).then(i=>{let o=i.data,g=this.coverArtResponseToNodes(o);this.jam.metadata.coverartarchiveLookup({type:$.release,mbID:e}).then(F=>{let Y=F.data;g=[...g,...this.coverArtResponseToNodes(Y)],this.display(g)}).catch(F=>{this.notify.error(F)})}).catch(i=>{this.notify.error(i)})}loadReleaseGroup(e){this.jam.metadata.coverartarchiveLookup({type:$.releaseGroup,mbID:e}).then(t=>{let i=t.data,o=this.coverArtResponseToNodes(i);this.display(o)}).catch(t=>{this.notify.error(t)})}loadRelease(e){e&&this.jam.metadata.coverartarchiveLookup({type:$.release,mbID:e}).then(t=>{let i=t.data,o=this.coverArtResponseToNodes(i);this.display(o);let g=this.data();o.length===0&&g?.folder.tag?.mbReleaseGroupID&&(this.nodes=void 0,this.loadReleaseGroup(g.folder.tag.mbReleaseGroupID))}).catch(t=>{this.notify.error(t)})}coverArtResponseToNodes(e){return e?.images?e.images.map(t=>{let i=t.types??[];return i.length===0&&i.push("Other"),{name:i.join("/").toLowerCase(),thumbnail:t.thumbnails?.small?this.jam.metadata.coverartarchiveImageUrl({url:t.thumbnails.small}):"",licence:"",image:t.image,types:i.map(o=>o.toLowerCase()),checked:!1,storing:!1,stored:!1}}):[]}search(){let e=this.data();e?.folder.tag&&(e.folder.type===Te.artist?e.folder.tag.mbArtistID&&(this.searchSource={name:"Wiki Commons",url:"https://commons.wikimedia.org"},this.loadWikiCommon(e.folder.tag.mbArtistID)):(this.searchSource={name:"Coverart Archive",url:"https://coverartarchive.org"},e.folder.tag.mbReleaseID&&e.folder.tag.mbReleaseGroupID?this.loadReleaseGroupAndRelease(e.folder.tag.mbReleaseID,e.folder.tag.mbReleaseGroupID):e.folder.tag.mbReleaseID?this.loadRelease(e.folder.tag.mbReleaseID):e.folder.tag.mbReleaseGroupID&&this.loadReleaseGroup(e.folder.tag.mbReleaseGroupID)))}display(e){this.nodes=e;let t=e.find(i=>i.types.length===1&&i.types[0]===W.front);if(t??=e.find(i=>i.types.includes(W.front)),t)for(let i of this.nodes)i.checked=i===t}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=M({type:n,selectors:[["app-admin-folder-artwork-search"]],inputs:{data:[1,"data"]},features:[R],decls:11,vars:5,consts:()=>{let e;e=$localize`:␟7e7b22a71a4180b0fe37ddd31720efbd93a51ce7␟8668694612879894228:Current Images`;let t;return t=$localize`:␟317c5efadc941d938c6171d4890c06afbd8a8db3␟826482080541471028:Use Checked Artwork`,[e,t,[1,"image-selector"],[1,"art-source"],[1,"section"],["rel","noopener","target","_blank",3,"href"],[1,"artwork"],[1,"buttons"],["name","Images",3,"list"],["appFocusKeyList","","role","list",1,"images"],["appFocusKeyListItem","","role","listitem"],["appFocusKeyListItem","","role","listitem",3,"keydown.enter"],[1,"image",3,"clickenter"],[3,"alt","src"],[1,"footer"],[1,"footer-content"],[1,"label"],[1,"icon-spin","icon-spinner"],["type","checkbox",3,"checked","ngModel"],["type","checkbox",3,"ngModelChange","checked","ngModel"],[1,"current"],[3,"folderID","artworks"],[1,"button-on-control"],[1,"button-on-control",3,"click"]]},template:function(t,i){t&1&&(a(0,"div",2)(1,"div",3)(2,"div",4)(3,"a",5),O(4),r()(),f(5,Ze,1,0,"app-loading")(6,nt,5,1,"div"),r(),a(7,"div",6),f(8,at,1,1),r()(),a(9,"div",7),f(10,lt,3,1,"div"),r()),t&2&&(d(3),_("href",i.searchSource.url,P),d(),N(i.searchSource.name),d(),C(i.nodes?6:5),d(3),C(i.artworks?8:-1),d(2),C(i.nodes&&i.nodes.length>0?10:-1))},dependencies:[S,Ee,X,T,ke,v,Oe,$e,H,Q,J,Re,Pe],styles:["[_nghost-%COMP%]   .image-selector[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap;height:calc(100% - 40px)}[_nghost-%COMP%]   .image-buttons[_ngcontent-%COMP%]{height:40px}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]{overflow-y:auto;width:50%;height:100%;padding-left:15px}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]{padding-right:15px;overflow-y:auto;width:50%;height:100%;border-right:1px solid var(--background-border)}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:inline-block;padding-top:15px;padding-right:15px;font-size:.8em}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:185px;min-width:185px;min-height:185px;height:auto}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   .section[_ngcontent-%COMP%]{border-bottom:1px solid var(--background-border);padding-bottom:5px}[_nghost-%COMP%]   .section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background)}"]})}}return n})();var li=(()=>{class n{dialogInit(e,t){this.data=t.data}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=M({type:n,selectors:[["app-dialog-folder-artwork-search"]],decls:1,vars:1,consts:[[3,"data"]],template:function(t,i){t&1&&h(0,"app-admin-folder-artwork-search",0),t&2&&_("data",i.data)},dependencies:[We],encapsulation:2})}}return n})();export{Fe as a,$e as b,li as c};
