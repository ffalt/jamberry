import{a as xe,b as De,f as Fe}from"./chunk-HMP63COV.js";import{b as F}from"./chunk-JNPRJ3MQ.js";import{a as be}from"./chunk-UKXRRTDE.js";import{a as Ne}from"./chunk-6WAGYCOA.js";import{a as Q}from"./chunk-UPKF4LSO.js";import{a as Pe}from"./chunk-N2K5OS3Y.js";import{a as we,b as H,c as ke,d as v,e as Oe,f as Ee,g as S,h as Ie,n as Te,o as P}from"./chunk-Y5Z5ITNC.js";import{a as J,b as Y}from"./chunk-BNP52TDG.js";import{k as Se}from"./chunk-AQDYGNZB.js";import{a as Re}from"./chunk-PZTZCA44.js";import{G as D}from"./chunk-ZVKVGF76.js";import{d as Me}from"./chunk-T6GM3CFW.js";import{$d as x,Aa as N,Ac as A,Bc as _e,Cd as he,Ec as pe,Fd as Ce,Hb as h,Ib as C,Ic as ge,Jc as ue,Lb as z,Mb as q,Nb as p,Ob as s,Pb as a,Pd as ye,Qb as M,Rd as W,Sd as Ae,Ub as ae,Uc as X,Ud as K,Vb as se,Vc as O,Wc as fe,Wd as ve,Y as $,Ya as R,_b as w,ab as l,ac as I,bc as de,cc as le,dc as g,e as ie,fc as d,ia as f,k as j,na as m,nb as k,nc as ce,oa as _,oc as me,tc as E,u as re,uc as b,vc as U,yc as T,zc as y}from"./chunk-H2EXZDP6.js";var Ge=["inlineEditControl"];function je(n,o){if(n&1){let r=w();s(0,"div",1)(1,"input",2,0),A("ngModelChange",function(e){m(r);let i=d();return y(i.value,e)||(i.value=e),_(e)}),g("blur",function(){m(r);let e=d();return _(e.onBlur())})("keydown.enter",function(){m(r);let e=d();return _(e.apply())}),a()()}if(n&2){let r=d();l(),p("required",r.required())("name",r.value)("type",r.type())("placeholder",r.placeholder()),T("ngModel",r.value)}}function ze(n,o){if(n&1){let r=w();s(0,"div")(1,"div",3),g("click",function(){m(r);let e=d();return _(e.edit(e.value))})("focus",function(){m(r);let e=d();return _(e.edit(e.value))}),E(2),M(3,"i",4),a()()}if(n&2){let r=d();l(2),U("",r.value,"\xA0")}}var Le=(()=>{let o=class o{constructor(){this.placeholder=O(""),this.type=O("text"),this.required=O(!1),this.disabled=O(!1),this.endEditRequest=X(),this.editing=!1,this.inlineEditControl=fe("inlineEditControl"),this.editValue="",this.preValue=""}get value(){return this.editValue}set value(t){t!==this.editValue&&(this.editValue=t,this.onChange?.(t))}writeValue(t){this.editValue=t}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}onBlur(){this.editing=!1,this.preValue!==this.editValue&&this.endEditRequest.emit()}apply(){this.editing=!1,this.endEditRequest.emit()}edit(t){this.disabled()||(this.preValue=t,this.editing=!0,setTimeout(()=>{let e=this.inlineEditControl();e?.nativeElement&&e.nativeElement.focus()}))}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=k({type:o,selectors:[["app-inline-edit"]],viewQuery:function(e,i){e&1&&ce(i.inlineEditControl,Ge,5),e&2&&me()},inputs:{placeholder:[1,"placeholder"],type:[1,"type"],required:[1,"required"],disabled:[1,"disabled"]},outputs:{endEditRequest:"endEditRequest"},features:[pe([{provide:we,useExisting:o,multi:!0}])],decls:2,vars:1,consts:()=>{let t;return t=$localize`:␟32dfa3de9f35ea40a3c19960ab339727b437791f␟2350070440008093526:Click to edit`,[["inlineEditControl",""],[1,"inline-edit-edit"],[3,"ngModelChange","blur","keydown.enter","required","name","type","placeholder","ngModel"],["title",t,"tabindex","0",1,"inline-edit",3,"click","focus"],[1,"icon-edit"]]},template:function(e,i){e&1&&h(0,je,3,5,"div",1)(1,ze,4,1,"div"),e&2&&C(i.editing?0:1)},dependencies:[P,ke,v,Te,S],styles:[`.inline-edit{cursor:pointer}.inline-edit i{font-size:.7em}.inline-edit-edit{width:100%;display:block}.inline-edit-edit input{width:100%}
`],encapsulation:2});let n=o;return n})();function qe(n,o){if(n&1){let r=w();s(0,"image-cropper",8),g("imageCropped",function(e){m(r);let i=d();return _(i.imageCropped(e))}),a()}if(n&2){let r=d();p("imageBase64",r.imageBase64)("format",r.format)("maintainAspectRatio",r.maintainAspectRatio)}}function Ue(n,o){if(n&1&&(s(0,"div",5),M(1,"img",9),a()),n&2){let r=d();l(),p("src",r.croppedImage,R)}}var Ve=(()=>{let o=class o{constructor(){this.data=O(),this.imageEdited=X(),this.imageBase64="",this.maintainAspectRatio=!0,this.format="jpeg",this.unsubscribe=new j,this.jam=f(x),this.folderService=f(F),this.notify=f(D),this.sanitizer=f(Me)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}load(){let t=this.data();t&&this.jam.image.imageBinary({id:t.artwork.id}).then(e=>{this.imageBase64=`data:${e.contentType||"image/jpeg"};base64,${De(e.buffer)}`}).catch(e=>{this.notify.error(e)})}imageCropped(t){t.objectUrl&&(this.croppedImage=this.sanitizer.bypassSecurityTrustUrl(t.objectUrl)),t.blob&&(this.croppedImageFile=t.blob)}ngOnChanges(){this.load()}upload(){let t=this.data();if(!this.croppedImageFile||!t)return;let e=t.folderID,i=new File([this.croppedImageFile],t.artwork.name,{type:this.croppedImageFile.type});this.jam.artwork.update({id:t.artwork.id},i).pipe($(this.unsubscribe)).subscribe({next:c=>{c.type===he.Response&&c.body!==null&&(this.folderService.waitForQueueResult("Updating Folder Artwork",c.body,[e]),this.imageEdited.emit())},error:c=>{this.notify.error(c)},complete:()=>{this.notify.success("Upload done")}})}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=k({type:o,selectors:[["app-admin-artwork-edit"]],inputs:{data:[1,"data"]},outputs:{imageEdited:"imageEdited"},features:[N],decls:10,vars:4,consts:()=>{let t;t=$localize`:␟9adf24384bd663ce0cf256940aae864e83991330␟6234579371454134968:Maintain Aspect Ratio`;let e;e=$localize`:␟f8c2b6ea1dd59afb3f3f555afbd132af40653bba␟1396820513327307838:Use Cropped Artwork`;let i;return i=$localize`:␟4fc4437088a4fa1764a26dd6b3552dbca6b64541␟777253553934937544:Cropped Image`,[t,e,[1,"image-crop"],["type","checkbox",3,"ngModelChange","ngModel","checked"],[3,"imageBase64","format","maintainAspectRatio"],[1,"image-preview"],[1,"buttons"],[1,"button-on-control",3,"click"],[3,"imageCropped","imageBase64","format","maintainAspectRatio"],["alt",i,3,"src"]]},template:function(e,i){e&1&&(s(0,"div",2)(1,"label")(2,"input",3),A("ngModelChange",function(u){return y(i.maintainAspectRatio,u)||(i.maintainAspectRatio=u),u}),a(),ae(3),I(4,0),se(),a(),h(5,qe,1,3,"image-cropper",4),a(),h(6,Ue,2,1,"div",5),s(7,"div",6)(8,"button",7),g("click",function(){return i.upload()}),I(9,1),a()()),e&2&&(l(2),T("ngModel",i.maintainAspectRatio),p("checked",i.maintainAspectRatio),l(3),C(i.imageBase64?5:-1),l(),C(i.croppedImage?6:-1))},dependencies:[P,H,v,S,xe],styles:["[_nghost-%COMP%]{width:100%;display:block;text-align:center}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]{width:300px;display:block}[_nghost-%COMP%]   .image-crop[_ngcontent-%COMP%]{display:inline-block;text-align:center;margin-left:10px;margin-right:10px}[_nghost-%COMP%]   .image-preview[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;display:inline-block}[_nghost-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px}"]});let n=o;return n})();function Xe(n,o){if(n&1){let r=w();s(0,"app-admin-artwork-edit",1),g("imageEdited",function(){m(r);let e=d();return _(e.onImageEdited())}),a()}if(n&2){let r=d();p("data",r.data)}}var $e=(()=>{let o=class o{constructor(){this.loading=!0}dialogInit(t,e){this.data=e.data,this.reference=t}onImageEdited(){this.reference&&this.reference.close()}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=k({type:o,selectors:[["app-image-edit-overlay-content"]],decls:1,vars:1,consts:[[3,"data"],[3,"imageEdited","data"]],template:function(e,i){e&1&&h(0,Xe,1,1,"app-admin-artwork-edit",0),e&2&&C(i.data?0:-1)},dependencies:[Ve],encapsulation:2});let n=o;return n})();var He=(n,o)=>o.artwork.id;function Qe(n,o){if(n&1){let r=w();s(0,"div",3),g("keydown.enter",function(){let e=m(r).$implicit,i=d();return _(i.editArtwork(e.artwork))}),s(1,"div",4)(2,"img",5),g("clickenter",function(){let e=m(r).$implicit,i=d();return _(i.editArtwork(e.artwork))}),a(),s(3,"div",6),E(4),a(),s(5,"div",7),E(6),a(),s(7,"div",8),I(8,0),a(),s(9,"div",9),E(10),ge(11,"filesize"),a()(),s(12,"div",10)(13,"app-inline-edit",11),A("ngModelChange",function(e){let i=m(r).$implicit;return y(i.name,e)||(i.name=e),_(e)}),g("endEditRequest",function(){let e=m(r).$implicit,i=d();return _(i.editArtworkName(e))}),a(),s(14,"a",12),g("clickenter",function(){let e=m(r).$implicit,i=d();return _(i.removeArtwork(e))}),M(15,"i",13),a()()()}if(n&2){let r=o.$implicit;l(2),p("src",r.thumbnail,R),l(2),b(r.artwork.types),l(2),b(r.artwork.format),l(2),de(r.artwork.width)(r.artwork.height),le(8),l(2),b(ue(11,7,r.artwork.size)),l(3),T("ngModel",r.name)}}function Je(n){let o=n.split(".");return o.pop(),o.join(".")}function Ye(n){return n.split(".").at(-1)??""}var We=(()=>{let o=class o{constructor(){this.artworks=O(),this.folderID=O(),this.jam=f(x),this.notify=f(D),this.folderService=f(F),this.dialogs=f(Pe),this.dialogOverlay=f(Se)}ngOnChanges(){this.displayArtworks()}editArtworkName(t){this.jam.artwork.rename({id:t.artwork.id,newName:t.name}).then(e=>{let i=this.folderID();this.folderService.waitForQueueResult("Renaming Artwork",e,i?[i]:[],[])}).catch(e=>{this.notify.error(e)})}editArtwork(t){this.dialogOverlay.open({childComponent:$e,title:"Edit Image",data:{artwork:t,folderID:this.folderID()},panelClass:""})}removeArtwork(t){this.dialogs.confirm("Remove Artworks?",`Do you want to delete "${t.artwork.name}"?`,()=>{this.jam.artwork.remove({id:t.artwork.id}).then(e=>{this.nodes&&(this.nodes=this.nodes.filter(c=>c!==t));let i=this.folderID();this.folderService.waitForQueueResult("Removing Artwork",e,i?[i]:[])}).catch(e=>{this.notify.error(e)})})}displayArtworks(){this.nodes=[];let t=this.artworks();t&&(this.nodes=t.map(e=>({name:Je(e.name),type:Ye(e.name),artwork:e,thumbnail:this.jam.image.imageUrl({id:e.id,size:128,format:Ae.webp})})))}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=k({type:o,selectors:[["app-admin-artwork-list"]],inputs:{artworks:[1,"artworks"],folderID:[1,"folderID"]},features:[N],decls:3,vars:0,consts:()=>{let t;t=$localize`:␟787e502e73191d41bb2ee8adb258a7435c94f5af␟7553271888893131195:Artwork`;let e;e=$localize`:␟4098fa43889421ae01e1548d8123ac604d0a741b␟365085234255662021:Delete Image`;let i;return i=$localize`:␟529bc57f97bc4167977fb632405746401ff67f44␟2349325499864057267:${"\uFFFD0\uFFFD"}:INTERPOLATION:x${"\uFFFD1\uFFFD"}:INTERPOLATION_1:`,[i,["appFocusKeyList","","role","list"],["appFocusKeyListItem","","role","listitem",1,"artwork"],["appFocusKeyListItem","","role","listitem",1,"artwork",3,"keydown.enter"],[1,"artwork-img"],["alt",t,3,"clickenter","src"],[1,"mode"],[1,"format"],[1,"dims"],[1,"size"],[1,"artwork-types"],["type","text",3,"ngModelChange","endEditRequest","ngModel"],["title",e,1,"delete-button",3,"clickenter"],["aria-hidden","true",1,"icon-trash"]]},template:function(e,i){e&1&&(s(0,"div",1),z(1,Qe,16,9,"div",2,He),a()),e&2&&(l(),q(i.nodes))},dependencies:[P,v,S,Le,Q,J,Y,be],styles:["[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]{display:inline-block;padding-top:15px;padding-right:15px;font-size:.8em;text-align:center;width:200px}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]{position:relative;overflow:hidden}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .dims[_ngcontent-%COMP%], [_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%], [_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .format[_ngcontent-%COMP%], [_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{position:absolute;padding:5px;background-color:var(--background-transparent);color:var(--on-background-highlight)}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{top:0;left:0}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .format[_ngcontent-%COMP%]{bottom:0;left:0}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .dims[_ngcontent-%COMP%]{top:0;right:0}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{bottom:0;right:0}[_nghost-%COMP%]   .artwork-types[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;overflow:hidden}[_nghost-%COMP%]   .artwork-types[_ngcontent-%COMP%]   app-inline-edit[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .artwork-types[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}"]});let n=o;return n})();var Ze=(n,o)=>o.image;function et(n,o){n&1&&M(0,"app-loading")}function tt(n,o){n&1&&M(0,"i",17)}function it(n,o){if(n&1){let r=w();s(0,"input",19),A("ngModelChange",function(e){m(r);let i=d().$implicit;return y(i.checked,e)||(i.checked=e),_(e)}),a()}if(n&2){let r=d().$implicit;p("checked",r.checked),T("ngModel",r.checked)}}function nt(n,o){if(n&1){let r=w();s(0,"div",11),g("keydown.enter",function(){let e=m(r).$implicit;return _(e.checked=!e.checked)}),s(1,"div",12),g("clickenter",function(){let e=m(r).$implicit;return _(e.checked=!e.checked)}),M(2,"img",13),a(),s(3,"div",14)(4,"div",15)(5,"form")(6,"span",16),h(7,tt,1,0,"i",17)(8,it,1,2,"input",18),E(9),a()()()()()}if(n&2){let r=o.$implicit;l(2),p("alt",_e(r.name))("src",r.thumbnail,R),l(5),C(r.storing?7:8),l(2),U(" ",r.name," ")}}function ot(n,o){if(n&1&&(s(0,"div"),M(1,"app-background-text-list",8),s(2,"div",9),z(3,nt,10,5,"div",10,Ze),a()()),n&2){let r=d();l(),p("list",r.nodes),l(2),q(r.nodes)}}function rt(n,o){if(n&1&&M(0,"app-admin-artwork-list",21),n&2){let r=d(),t=d(2);p("folderID",r.folder.id)("artworks",t.artworks)}}function at(n,o){if(n&1&&(s(0,"div",20)(1,"div",4),I(2,0),a(),h(3,rt,1,2,"app-admin-artwork-list",21),a()),n&2){let r=d(2);l(3),C(r.isArtRefreshing?-1:3)}}function st(n,o){if(n&1&&h(0,at,4,1,"div",20),n&2){let r,t=d();C((r=t.data())?0:-1,r)}}function dt(n,o){n&1&&(s(0,"button",22),M(1,"i",17),a())}function lt(n,o){if(n&1){let r=w();s(0,"button",23),g("click",function(){m(r);let e=d(2);return _(e.use())}),I(1,1),a()}}function ct(n,o){if(n&1&&(s(0,"div"),h(1,dt,2,0,"button",22)(2,lt,2,0,"button",22),a()),n&2){let r=d();l(),C(r.isWorking?1:2)}}var Ke=(()=>{let o=class o{constructor(){this.data=O(),this.isWorking=!1,this.isArtRefreshing=!1,this.searchSource={name:"",url:""},this.unsubscribe=new j,this.jam=f(x),this.notify=f(D),this.folderService=f(F),this.http=f(Ce)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}ngOnChanges(){this.search();let t=this.data();t?.folder&&(t.folder.artworks?this.artworks=t.folder.artworks:this.refreshArtworks())}refreshArtworks(){let t=this.data();t&&(this.isArtRefreshing=!0,this.jam.artwork.search({folderIDs:[t.folder.id]}).then(e=>{this.isArtRefreshing=!1,this.artworks=e.items}).catch(e=>{this.isArtRefreshing=!1,console.error(e)}))}loadWikiDataID(t){return ie(this,null,function*(){let i=(yield this.jam.metadata.musicbrainzLookup({type:ye.artist,mbID:t})).data;if(i?.artist?.relations){let c=i.artist.relations.find(u=>u.type==="wikidata");if(c?.url)return c.url.resource.split("/").pop()}})}loadWikiCommonImage(t){return ie(this,null,function*(){let e=yield this.loadWikiDataID(t);if(!e)return;let u=(yield this.jam.metadata.wikidataLookup({wikiDataID:e})).data?.entity?.claims;if(!u)return;let L=Object.keys(u);for(let Z of L){let ee=u[Z];ee=ee.filter(V=>typeof V.mainsnak.datavalue.value=="string"&&Fe(V.mainsnak.datavalue.value.toLowerCase(),["jpg","jpeg","png"]));let oe=ee.at(0);if(oe){let V=oe.mainsnak.datavalue.value;if(typeof V!="string")return;let Be=`https://en.wikipedia.org/w/api.php?format=json&action=query&origin=*&titles=File:${V}&prop=imageinfo&iiprop=extmetadata|url&iiextmetadatafilter=LicenseShortName`,te=yield re(this.http.get(Be));if(te?.query?.pages){let G=te.query.pages[Object.keys(te.query.pages)[0]]?.imageinfo[0];if(G)return{name:K.artist,thumbnail:G.url,image:G.url,licence:G.extmetadata.LicenseShortName.value,checked:!0,storing:!1,types:[K.artist]}}}}})}loadWikiCommon(t){this.loadWikiCommonImage(t).then(e=>{this.nodes=[],e&&(e.checked=!0,this.nodes.push(e))}).catch(e=>{this.nodes=[],this.notify.error(e)})}use(){let t=(this.nodes??[]).find(i=>i.checked&&!i.storing),e=this.data()?.folder;t&&e?(this.isWorking=!0,t.storing=!0,this.jam.artwork.createByUrl({folderID:e.id,url:t.image,types:t.types}).then(i=>{this.folderService.waitForQueueResult("Creating Artwork",i,[e.id]).pipe($(this.unsubscribe)).subscribe(()=>{t.storing=!1,t.checked=!1}),this.use()}).catch(i=>{t.storing=!1,this.notify.error(i)})):this.isWorking=!1}ngOnInit(){this.folderService.foldersChange.pipe($(this.unsubscribe)).subscribe(t=>{t.id===this.data()?.folder.id&&this.refreshArtworks()})}loadReleaseGroupAndRelease(t,e){this.jam.metadata.coverartarchiveLookup({type:W.releaseGroup,mbID:e}).then(i=>{let c=i.data,u=this.coverArtResponseToNodes(c);this.jam.metadata.coverartarchiveLookup({type:W.release,mbID:t}).then(L=>{let Z=L.data;u=[...u,...this.coverArtResponseToNodes(Z)],this.display(u)}).catch(L=>{this.notify.error(L)})}).catch(i=>{this.notify.error(i)})}loadReleaseGroup(t){this.jam.metadata.coverartarchiveLookup({type:W.releaseGroup,mbID:t}).then(e=>{let i=e.data,c=this.coverArtResponseToNodes(i);this.display(c)}).catch(e=>{this.notify.error(e)})}loadRelease(t){t&&this.jam.metadata.coverartarchiveLookup({type:W.release,mbID:t}).then(e=>{let i=e.data,c=this.coverArtResponseToNodes(i);this.display(c);let u=this.data();c.length===0&&u?.folder.tag?.mbReleaseGroupID&&(this.nodes=void 0,this.loadReleaseGroup(u.folder.tag.mbReleaseGroupID))}).catch(e=>{this.notify.error(e)})}coverArtResponseToNodes(t){return t?.images?t.images.map(e=>{let i=e.types??[];return i.length===0&&i.push("Other"),{name:i.join("/").toLowerCase(),thumbnail:e.thumbnails?.small?this.jam.metadata.coverartarchiveImageUrl({url:e.thumbnails.small}):"",licence:"",image:e.image,types:i.map(c=>c.toLowerCase()),checked:!1,storing:!1,stored:!1}}):[]}search(){let t=this.data();t?.folder.tag&&(t.folder.type===ve.artist?t.folder.tag.mbArtistID&&(this.searchSource={name:"Wiki Commons",url:"https://commons.wikimedia.org"},this.loadWikiCommon(t.folder.tag.mbArtistID)):(this.searchSource={name:"Coverart Archive",url:"https://coverartarchive.org"},t.folder.tag.mbReleaseID&&t.folder.tag.mbReleaseGroupID?this.loadReleaseGroupAndRelease(t.folder.tag.mbReleaseID,t.folder.tag.mbReleaseGroupID):t.folder.tag.mbReleaseID?this.loadRelease(t.folder.tag.mbReleaseID):t.folder.tag.mbReleaseGroupID&&this.loadReleaseGroup(t.folder.tag.mbReleaseGroupID)))}display(t){this.nodes=t;let e=t.find(i=>i.types.length===1&&i.types[0]===K.front);if(e??=t.find(i=>i.types.includes(K.front)),e)for(let i of this.nodes)i.checked=i===e}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=k({type:o,selectors:[["app-admin-folder-artwork-search"]],inputs:{data:[1,"data"]},features:[N],decls:11,vars:5,consts:()=>{let t;t=$localize`:␟7e7b22a71a4180b0fe37ddd31720efbd93a51ce7␟8668694612879894228:Current Images`;let e;return e=$localize`:␟317c5efadc941d938c6171d4890c06afbd8a8db3␟826482080541471028:Use Checked Artwork`,[t,e,[1,"image-selector"],[1,"art-source"],[1,"section"],["rel","noopener","target","_blank",3,"href"],[1,"artwork"],[1,"buttons"],["name","Images",3,"list"],["appFocusKeyList","","role","list",1,"images"],["appFocusKeyListItem","","role","listitem"],["appFocusKeyListItem","","role","listitem",3,"keydown.enter"],[1,"image",3,"clickenter"],[3,"alt","src"],[1,"footer"],[1,"footer-content"],[1,"label"],[1,"icon-spin","icon-spinner"],["type","checkbox",3,"checked","ngModel"],["type","checkbox",3,"ngModelChange","checked","ngModel"],[1,"current"],[3,"folderID","artworks"],[1,"button-on-control"],[1,"button-on-control",3,"click"]]},template:function(e,i){e&1&&(s(0,"div",2)(1,"div",3)(2,"div",4)(3,"a",5),E(4),a()(),h(5,et,1,0,"app-loading")(6,ot,5,1,"div"),a(),s(7,"div",6),h(8,st,1,1),a()(),s(9,"div",7),h(10,ct,3,1,"div"),a()),e&2&&(l(3),p("href",i.searchSource.url,R),l(),b(i.searchSource.name),l(),C(i.nodes?6:5),l(3),C(i.artworks?8:-1),l(2),C(i.nodes&&i.nodes.length>0?10:-1))},dependencies:[P,Ie,H,v,Oe,S,Ee,We,Q,J,Y,Ne,Re],styles:["[_nghost-%COMP%]   .image-selector[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap;height:calc(100% - 40px)}[_nghost-%COMP%]   .image-buttons[_ngcontent-%COMP%]{height:40px}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]{overflow-y:auto;width:50%;height:100%;padding-left:15px}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]{padding-right:15px;overflow-y:auto;width:50%;height:100%;border-right:1px solid var(--background-border)}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:inline-block;padding-top:15px;padding-right:15px;font-size:.8em}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:185px;min-width:185px;min-height:185px;height:auto}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   .section[_ngcontent-%COMP%]{border-bottom:1px solid var(--background-border);padding-bottom:5px}[_nghost-%COMP%]   .section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background)}"]});let n=o;return n})();var ci=(()=>{let o=class o{dialogInit(t,e){this.data=e.data}};o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=k({type:o,selectors:[["app-dialog-folder-artwork-search"]],decls:1,vars:1,consts:[[3,"data"]],template:function(e,i){e&1&&M(0,"app-admin-folder-artwork-search",0),e&2&&p("data",i.data)},dependencies:[Ke],encapsulation:2});let n=o;return n})();export{Le as a,We as b,ci as c};
