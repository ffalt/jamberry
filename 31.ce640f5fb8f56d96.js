"use strict";(self.webpackChunkjamberry=self.webpackChunkjamberry||[]).push([[31],{31:(L,O,a)=>{a.r(O),a.d(O,{UserModule:()=>H});var l=a(6895),r=a(4719),x=a(2364),n=a(4650);let m=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user"]],decls:5,vars:0,consts:[[1,"left"],[1,"split-pane-divider-left"],["role","main",1,"middle"]],template:function(t,o){1&t&&(n.TgZ(0,"aside",0),n._UZ(1,"app-user-sidebar"),n.qZA(),n._UZ(2,"app-splitter",1),n.TgZ(3,"main",2),n._UZ(4,"router-outlet"),n.qZA())},styles:["[_nghost-%COMP%]{width:100%;height:100%;flex:1;display:flex;flex-flow:row nowrap;overflow:hidden;align-items:flex-start;align-content:flex-start}[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:15%;height:100%}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{width:60%;flex-grow:1;height:100%}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{width:25%;height:100%}@media (max-width: 1600px){[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:20%}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{width:55%;flex-grow:1;height:100%}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{width:25%;height:100%}}@media (max-width: 1400px){[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:25%}[_nghost-%COMP%]   .right[_ngcontent-%COMP%], [_nghost-%COMP%]   .split-pane-divider-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 768px){[_nghost-%COMP%]{overflow:auto;flex-flow:row wrap}[_nghost-%COMP%]   app-splitter[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:100%!important;height:auto}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{height:auto}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{width:100%!important;height:auto}}@media (max-width: 522px){[_nghost-%COMP%]{overflow:hidden;height:auto}}"]}),e})();var d=a(3590),C=a(6434),c=a(3689),_=a(9291),h=a(5197);function b(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"div",7)(1,"div",8),n._uU(2),n._UZ(3,"br"),n._uU(4),n.qZA(),n.TgZ(5,"div",9),n._uU(6),n._UZ(7,"br"),n.TgZ(8,"span"),n._uU(9),n.qZA()(),n.TgZ(10,"div",10)(11,"span",11),n._uU(12,"valid until:"),n.qZA(),n._UZ(13,"br"),n._uU(14),n.ALo(15,"date"),n.qZA(),n.TgZ(16,"div",12)(17,"button",13),n.NdJ("click",function(){const g=n.CHM(t).$implicit,M=n.oxw(2);return n.KtG(M.remove(g))}),n._UZ(18,"i",14),n.qZA()()()}if(2&e){const t=i.$implicit;n.xp6(2),n.hij(" ",t.agent,""),n.xp6(2),n.hij(" ",t.os," "),n.xp6(2),n.hij(" ",t.client,""),n.xp6(3),n.Oqu(t.mode),n.xp6(5),n.hij(" ",n.xi3(15,5,t.expires,"long")," ")}}function y(e,i){if(1&e&&(n.TgZ(0,"div",3)(1,"div",4)(2,"div",5),n._uU(3,"Sessions"),n.qZA(),n.YNc(4,b,19,8,"div",6),n.qZA()()),2&e){const t=n.oxw();n.xp6(4),n.Q6J("ngForOf",t.sessions)}}let Z=(()=>{class e{constructor(t,o,s){this.jam=t,this.auth=o,this.notify=s}ngOnInit(){this.auth.isLoggedIn()&&this.refresh()}remove(t){const o=t.id;this.jam.session.remove({id:o}).then(()=>{this.sessions&&(this.sessions=this.sessions.filter(s=>s.id!==o)),this.notify.success("Session Login removed")}).catch(s=>{this.notify.error(s)})}refresh(){this.jam.session.list().then(t=>{this.sessions=t}).catch(t=>{this.notify.error(t)})}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(c.K4),n.Y36(c.$X),n.Y36(_.c))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-sessions-page"]],decls:3,vars:1,consts:[[1,"sessions"],["section","Session Logins"],["class","content",4,"ngIf"],[1,"content"],[1,"session-list"],[1,"section-title"],["class","session",4,"ngFor","ngForOf"],[1,"session"],[1,"agent"],[1,"title"],[1,"expires"],[1,"label"],[1,"remove"],["title","Remove this login",3,"click"],["aria-hidden","true",1,"icon-remove"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0),n._UZ(1,"app-view-header-slim",1),n.YNc(2,y,5,1,"div",2),n.qZA()),2&t&&(n.xp6(2),n.Q6J("ngIf",o.sessions))},dependencies:[h.p,l.sg,l.O5,l.uU],styles:['[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap;-webkit-user-select:none;user-select:none;width:100%;padding-top:5px;background-color:var(--background);color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{min-height:48px;display:flex;flex-flow:row nowrap;align-items:center;align-content:space-evenly;width:100%;padding:10px;line-height:1.25em;margin-bottom:1px;border-top-width:1px;border-top-style:solid;border-bottom-width:0;border-bottom-style:solid;border-bottom-color:var(--background-border);border-top-color:var(--background-border)}@media (max-width: 1000px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{height:auto}}@media (max-width: 522px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{font-size:.9em}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]:last-child{border-bottom-width:1px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .small-screen-icon[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--on-background-active)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--on-background);font-size:.8em}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;display:inline-block;margin:0 10px 0 0}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.8em;vertical-align:middle}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a.title-link[_ngcontent-%COMP%]{font-size:inherit;margin-right:10px;color:var(--on-background-active)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{width:0;margin-left:0;cursor:move}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]{display:inline-block;width:26px;height:8px;transform:rotate(90deg);margin-left:-8px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%], [_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]:before{background-image:radial-gradient(#7b7b7b 40%,transparent 40%);background-size:4px 4px;background-position:0 100%;background-repeat:repeat-x}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]:before{content:"";display:block;width:100%;height:33%}@media (max-width: 1000px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{height:auto;min-height:48px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-left:0}}@media (max-width: 400px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{flex-flow:row wrap;align-items:inherit;width:100%;font-size:.9em}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .small-screen-icon[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{order:2;width:25%;text-align:center}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]{transform:rotate(0)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{order:6;margin-left:0;margin-right:0;padding-right:0;padding-left:0;width:100%}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:0;margin-right:0;padding-right:0;padding-left:0;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;margin-left:0;margin-right:0;overflow:hidden;text-overflow:ellipsis}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%]{width:140px;font-size:.8em;padding-right:10px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{width:260px;font-size:.8em;padding-right:10px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex-grow:1;padding-right:10px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.7em;text-transform:uppercase}@media (max-width: 400px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%], [_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{order:0;width:calc(100% - 30px)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{order:1}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%]{order:2}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{order:3}}']}),e})();var w=a(9369);function U(e,i){if(1&e){const t=n.EpF();n.TgZ(0,"label",8)(1,"input",9),n.NdJ("ngModelChange",function(s){n.CHM(t);const g=n.oxw();return n.KtG(g.app.settings.theme=s)})("ngModelChange",function(){n.CHM(t);const s=n.oxw();return n.KtG(s.onChange())}),n.qZA(),n._uU(2),n.ALo(3,"titlecase"),n.qZA()}if(2&e){const t=i.$implicit,o=n.oxw();n.xp6(1),n.Q6J("ngModel",o.app.settings.theme)("value",t.name),n.xp6(1),n.Oqu(n.lcZ(3,3,t.name))}}let T=(()=>{class e{constructor(t,o,s,g){this.router=t,this.app=o,this.settings=s,this.player=g,this.themes=w.c6.themes}onChange(){this.settings.applySettings()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(d.F0),n.Y36(_.zi),n.Y36(_.G2),n.Y36(_.lk))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-page-settings"]],decls:21,vars:4,consts:[[1,"settings"],["section","Settings"],[1,"content"],[1,"section-title"],["class","select",4,"ngFor","ngForOf"],["type","checkbox","title","Show Waveform of Current Track",3,"ngModel","ngModelChange"],["type","checkbox","value","1",3,"ngModel","ngModelChange"],["type","checkbox","value","1","title","Show Notifications On Tracks Change",3,"ngModel","ngModelChange"],[1,"select"],["type","radio","name","theme",3,"ngModel","value","ngModelChange"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0),n._UZ(1,"app-view-header-slim",1),n.TgZ(2,"div",2)(3,"div",3),n._uU(4,"Design"),n.qZA(),n.TgZ(5,"div")(6,"fieldset"),n.YNc(7,U,4,5,"label",4),n.qZA()(),n.TgZ(8,"div",3),n._uU(9,"Player"),n.qZA(),n.TgZ(10,"label")(11,"input",5),n.NdJ("ngModelChange",function(g){return o.app.settings.showWaveform=g})("ngModelChange",function(){return o.onChange()}),n.qZA(),n._uU(12," Show Waveform of Current Track "),n.qZA(),n.TgZ(13,"div",3),n._uU(14,"Playing"),n.qZA(),n.TgZ(15,"label")(16,"input",6),n.NdJ("ngModelChange",function(g){return o.app.settings.playingTrackInTitle=g})("ngModelChange",function(){return o.onChange()}),n.qZA(),n._uU(17," Show Playing Track Name in Window Title "),n.qZA(),n.TgZ(18,"label")(19,"input",7),n.NdJ("ngModelChange",function(g){return o.app.settings.notificationSong=g})("ngModelChange",function(){return o.onChange()}),n.qZA(),n._uU(20," Show Notification Popup On Track Change "),n.qZA()()()),2&t&&(n.xp6(7),n.Q6J("ngForOf",o.themes),n.xp6(4),n.Q6J("ngModel",o.app.settings.showWaveform),n.xp6(5),n.Q6J("ngModel",o.app.settings.playingTrackInTitle),n.xp6(3),n.Q6J("ngModel",o.app.settings.notificationSong))},dependencies:[r.Fj,r.Wl,r._,r.JJ,r.On,h.p,l.sg,l.rS],styles:["[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;padding-bottom:15px;color:var(--on-background-active)}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-top:-1px;display:inline-block;vertical-align:middle}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{margin-bottom:15px;width:auto;display:inline}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label.select[_ngcontent-%COMP%]{width:auto;padding-top:4px;padding-bottom:4px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label.select[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:10px}"]}),e})();var p=a(7111),u=a(6229),A=a(1362);let k=(()=>{class e{constructor(t,o,s){this.jam=t,this.auth=o,this.notify=s,this.base=[],this.favorites=[],this.played=[]}ngOnInit(){this.auth.isLoggedIn()&&this.refresh()}refresh(){this.jam.stats.user().then(t=>{this.favorites=e.buildStats(t.favorite,"/favorites"),this.played=e.buildStats(t.played,"/recently-played"),this.base=(0,u.$m)([{text:"Bookmarks",link:"/library/bookmarks",value:t.bookmark},{text:"Playlists",link:"/library/playlists",value:t.playlist}],!0)}).catch(t=>{this.notify.error(t)})}static buildStats(t,o=""){return(0,u.$m)([{text:"Artists",link:"artists",value:t.artistTypes.album},...[{type:(0,p.tr)(c.VZ.album),value:t.albumTypes.album},{type:(0,p.tr)(c.VZ.compilation),value:t.albumTypes.compilation}].map(s=>({text:s.type?.text,link:`${s.type?.id}`,value:s.value})),{text:"Series",link:"series",value:t.series},...[{type:(0,p.tr)(c.VZ.audiobook),value:t.albumTypes.audiobook},{type:(0,p.tr)(c.VZ.soundtrack),value:t.albumTypes.soundtrack},{type:(0,p.tr)(c.VZ.live),value:t.albumTypes.live},{type:(0,p.tr)(c.VZ.bootleg),value:t.albumTypes.bootleg},{type:(0,p.tr)(c.VZ.ep),value:t.albumTypes.ep},{type:(0,p.tr)(c.VZ.single),value:t.albumTypes.single}].map(s=>({text:s.type?.text,link:`${s.type?.id}`,value:s.value})),{text:"Folders",link:"folders",value:t.folder},{text:"Tracks",link:"tracks",value:t.track}].map(s=>({...s,link:`/library/${s.link}${o}`})))}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(c.K4),n.Y36(c.$X),n.Y36(_.c))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-stats"]],decls:9,vars:3,consts:[[1,"section-title"],[3,"stats"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0),n._uU(1,"Stats"),n.qZA(),n._UZ(2,"app-stats",1),n.TgZ(3,"div",0),n._uU(4,"Favorites"),n.qZA(),n._UZ(5,"app-stats",1),n.TgZ(6,"div",0),n._uU(7,"Played"),n.qZA(),n._UZ(8,"app-stats",1)),2&t&&(n.xp6(2),n.Q6J("stats",o.base),n.xp6(3),n.Q6J("stats",o.favorites),n.xp6(3),n.Q6J("stats",o.played))},dependencies:[A._],styles:["[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-top:15px;margin-bottom:10px;color:var(--on-control-ambient)}"]}),e})();a(529);var P=a(9100),S=a(8929),F=a(7625),J=a(7254);function z(e,i){1&e&&n._UZ(0,"i",8)}function Y(e,i){1&e&&(n.TgZ(0,"span"),n._uU(1,"Random Image"),n.qZA())}let q=(()=>{class e{constructor(t,o,s,g){this.app=t,this.auth=o,this.jam=s,this.notify=g,this.refreshing=!1,this.unsubscribe=new S.xQ,this.refreshRandom=(0,P.O)()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}onDropFile(t){t.preventDefault(),this.uploadFile(t.dataTransfer?.files)}onDragOverFile(t){t.stopPropagation(),t.preventDefault()}selectFile(t){this.uploadFile(t.target.files)}uploadFile(t){t&&0!==t.length&&this.auth.user&&this.jam.user.uploadUserImage({id:this.auth.user.id},t[0]).pipe((0,F.R)(this.unsubscribe)).subscribe(s=>{},s=>{this.notify.error(s)},()=>{this.refreshRandom=(0,P.O)(),this.notify.success("Upload done")})}randomAvatar(){this.refreshing||!this.auth.user||(this.refreshing=!0,this.jam.user.generateUserImage({id:this.auth.user.id}).then(()=>{this.refreshing=!1,this.refreshRandom=(0,P.O)(),this.notify.success("Image randomized")}).catch(t=>{this.refreshing=!1,this.notify.error(t)}))}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(_.zi),n.Y36(c.$X),n.Y36(c.K4),n.Y36(_.c))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-avatar"]],decls:11,vars:6,consts:[[1,"drop-zone",3,"drop","dragover"],[1,"placeholder"],[3,"coverArtObj","size","round","refreshRandom"],[1,"button-primary",3,"click"],["class","icon-spin icon-spinner",4,"ngIf"],[4,"ngIf"],["id","file","type","file","placeholder","Upload image","accept",".png,.jpeg,.jpg",1,"inputfile",3,"change"],["for","file",1,"button-primary"],[1,"icon-spin","icon-spinner"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0),n.NdJ("drop",function(g){return o.onDropFile(g)})("dragover",function(g){return o.onDragOverFile(g)}),n.TgZ(1,"div",1),n._uU(2," Drag an Image File here "),n.qZA(),n._UZ(3,"app-coverart-image",2),n.TgZ(4,"button",3),n.NdJ("click",function(){return o.randomAvatar()}),n.YNc(5,z,1,0,"i",4),n.YNc(6,Y,2,0,"span",5),n.qZA(),n.TgZ(7,"form")(8,"input",6),n.NdJ("change",function(g){return o.selectFile(g)}),n.qZA(),n.TgZ(9,"label",7),n._uU(10,"Choose a file"),n.qZA()()()),2&t&&(n.xp6(3),n.Q6J("coverArtObj",o.auth.user)("size",100)("round",!0)("refreshRandom",o.refreshRandom),n.xp6(2),n.Q6J("ngIf",o.refreshing),n.xp6(1),n.Q6J("ngIf",!o.refreshing))},dependencies:[r._Y,r.JL,r.F,J.A,l.O5],styles:["[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]{vertical-align:bottom;display:inline-block;min-width:220px;min-height:140px;border-width:2px;margin-bottom:15px;margin-right:15px;border-style:dotted;border-color:var(--secondary);padding-left:15px;padding-right:15px;padding-bottom:15px;text-align:center}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   app-coverart-image[_ngcontent-%COMP%]{margin:0 auto 10px}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .inputfile[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:10px;min-width:80%;display:inline-block}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:inline-block;min-width:80%}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;display:block}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{width:100%;padding-top:15px;padding-bottom:15px;text-align:center;color:var(--on-control-ambient);font-size:.8em;text-transform:uppercase}"]}),e})();function I(e,i){1&e&&(n.TgZ(0,"div"),n._UZ(1,"i",11),n._uU(2," Stream Audio"),n.qZA())}function j(e,i){1&e&&(n.TgZ(0,"div"),n._UZ(1,"i",11),n._uU(2," Manage Podcasts"),n.qZA())}function N(e,i){1&e&&(n.TgZ(0,"div"),n._UZ(1,"i",11),n._uU(2," Upload Audio"),n.qZA())}function Q(e,i){1&e&&(n.TgZ(0,"div"),n._UZ(1,"i",11),n._uU(2," Server Administration"),n.qZA())}function $(e,i){if(1&e&&(n.TgZ(0,"div",3)(1,"div",4)(2,"div",5)(3,"div",6)(4,"div",7),n._uU(5,"Name"),n.qZA(),n.TgZ(6,"div"),n._uU(7),n.qZA()(),n.TgZ(8,"div",6)(9,"div",7),n._uU(10,"Permissions"),n.qZA(),n.TgZ(11,"div",8),n.YNc(12,I,3,0,"div",9),n.YNc(13,j,3,0,"div",9),n.YNc(14,N,3,0,"div",9),n.YNc(15,Q,3,0,"div",9),n.qZA()()(),n.TgZ(16,"div",10)(17,"div",7),n._uU(18,"Avatar"),n.qZA(),n._UZ(19,"app-user-avatar"),n.qZA()(),n.TgZ(20,"div",6),n._UZ(21,"app-user-stats"),n.qZA()()),2&e){const t=n.oxw();n.xp6(7),n.Oqu(t.auth.user.name),n.xp6(5),n.Q6J("ngIf",null==t.auth.user||null==t.auth.user.roles?null:t.auth.user.roles.stream),n.xp6(1),n.Q6J("ngIf",null==t.auth.user||null==t.auth.user.roles?null:t.auth.user.roles.podcast),n.xp6(1),n.Q6J("ngIf",null==t.auth.user||null==t.auth.user.roles?null:t.auth.user.roles.upload),n.xp6(1),n.Q6J("ngIf",null==t.auth.user||null==t.auth.user.roles?null:t.auth.user.roles.admin)}}const v=[{path:"",component:m,children:[{path:"",pathMatch:"full",component:(()=>{class e{constructor(t){this.auth=t}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(c.$X))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-page"]],decls:3,vars:1,consts:[[1,"user"],["section","User"],["class","content",4,"ngIf"],[1,"content"],[1,"row"],[1,"column","first"],[1,"section"],[1,"section-title"],[1,"roles"],[4,"ngIf"],[1,"column"],[1,"icon-checkmark"]],template:function(t,o){1&t&&(n.TgZ(0,"div",0),n._UZ(1,"app-view-header-slim",1),n.YNc(2,$,22,5,"div",2),n.qZA()),2&t&&(n.xp6(2),n.Q6J("ngIf",o.auth.user))},dependencies:[h.p,l.O5,k,q],styles:["[_nghost-%COMP%]   .user[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{padding-bottom:30px}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column.first[_ngcontent-%COMP%]{padding-right:30px}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{flex:1}@media (max-width: 400px){[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{flex-direction:column}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   .column.first[_ngcontent-%COMP%]{padding-right:0}}"]}),e})(),canActivate:[C.aH],data:{name:"User"}},{path:"settings",component:T,canActivate:[C.aH],data:{name:"Settings"}},{path:"sessions",component:Z,canActivate:[C.aH],data:{name:"Sessions",icon:"icon-laptop"}}]}],X=d.Bz.forChild(v);var R=a(327);let D=(()=>{class e{constructor(){this.sections=[];const o=(v[0]?.children||[]).filter(g=>g.path&&g.path.length>0&&g.data?.name).map(g=>({name:g.data?g.data.name:"",icon:g.data&&g.data.icon?g.data.icon:"icon-admin",link:`/user/${g.data?.link?g.data.link:g.path}`}));this.sections=[{name:"User",entries:[{name:"Profile",icon:"icon-user",link:"/user",options:{exact:!0}}].concat(o)}]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-user-sidebar"]],decls:1,vars:1,consts:[[3,"sections"]],template:function(t,o){1&t&&n._UZ(0,"app-sidebar",0),2&t&&n.Q6J("sections",o.sections)},dependencies:[R.k],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block}"]}),e})();var V=a(150);let H=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[r.u5,x.m,l.ez,X]}),e})();n.B6R(m,function(){return[V.H,d.lC,D]},[])}}]);