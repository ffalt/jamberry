import{a as $t}from"./chunk-MVH6HM7T.js";import{a as Ze,b as et,c as Bt,d as Dt,e as Ut,f as Yt,g as Pe}from"./chunk-P3FK4DTD.js";import{a as G,b as ot,c as it}from"./chunk-2V5GUCUD.js";import{a as Lt}from"./chunk-7FJFRFGA.js";import{a as Rt}from"./chunk-F5YR3CZ5.js";import{a as wt,b as At,c as kt,d as ue}from"./chunk-HN4G6ZVV.js";import{a as It}from"./chunk-G33LQQPU.js";import{a as St,b as xt}from"./chunk-HVHUS5QT.js";import{a as Nt}from"./chunk-PCHRCEVH.js";import"./chunk-36SDUMNI.js";import"./chunk-LMBWQPDX.js";import{a as Je,c as S}from"./chunk-4RUMNACR.js";import{a as Tt}from"./chunk-WJJBETCU.js";import{a as ne}from"./chunk-HURYLTUC.js";import{a as ht}from"./chunk-3KEFNAKY.js";import{a as Ce}from"./chunk-WQFPGWWC.js";import{b as se}from"./chunk-2PUJQAN6.js";import{c as yt,d as de}from"./chunk-VZVRBD6P.js";import{b as Mt,c as ft,d as _e}from"./chunk-CDMVSZCB.js";import{a as Ct,c as Ht}from"./chunk-UZYU4GV7.js";import{a as bt}from"./chunk-K4DVWEJI.js";import{a as Ot}from"./chunk-UVO2NCSB.js";import"./chunk-24DMSAFT.js";import{o as tt}from"./chunk-XTLMNK2P.js";import{a as Pt,c as pe,d as vt}from"./chunk-GXCVGDS5.js";import{a as ut}from"./chunk-J5MSA5AP.js";import{a as Et,b as oe,c as R,d as f}from"./chunk-3CQO2UIK.js";import{a as me,b as ge}from"./chunk-PZKV7YRJ.js";import"./chunk-4LEAF22C.js";import"./chunk-EAERQNF5.js";import"./chunk-5EJKCVNW.js";import"./chunk-CQEFCIFT.js";import"./chunk-TT7XXVKE.js";import{a as E,l as st}from"./chunk-5NZQP5GA.js";import{a as w}from"./chunk-QWPA4HIO.js";import"./chunk-CTEOCYOX.js";import"./chunk-EPPWFHNT.js";import"./chunk-K64Q6LJ6.js";import{C as lt,D as ct,G as gt,q as rt,s as at}from"./chunk-ZMFSGBQT.js";import{a as Fe,b as je,c as We,e as pt,f as _t,g as dt,h as le,i as mt,k as ce}from"./chunk-B4HPT77T.js";import{$b as X,Aa as H,Ac as De,Bb as Ee,Cb as u,Db as P,Dc as y,Dd as qe,E as xe,Eb as Ie,Ec as V,Ed as Qe,Fc as Ue,Fd as Ke,Gb as Le,Gc as z,Hb as $e,Hc as Ye,Ib as C,Jb as c,Kb as l,Lb as s,Mb as $,Nb as L,Ob as k,Pb as j,Pc as He,Qb as q,Rc as Z,U as re,Ua as ke,Vb as N,Vd as ae,Wb as Q,Wc as Xe,Wd as ee,Xa as ye,Xb as I,Xd as te,Yd as nt,Za as r,_b as _,a as Se,aa as Y,ac as m,da as Ne,e as K,fa as a,ga as we,ib as be,ic as W,j as ie,jc as J,jd as Ve,ka as h,kc as Be,la as M,lc as U,ma as Ae,mb as g,mc as T,na as Re,nc as Te,oc as O,pc as v,pd as ze,rb as D,sd as Ge}from"./chunk-S3YUDFSI.js";var he=class o{constructor(p,e,t){this.availableTabs=p,this.outletElement=e,this.injector=t,this.activeTabs={}}get currentTabName(){return this.curTab?this.curTab.tab.name:void 0}switchTo(p){let e=this.availableTabs.find(t=>t.name===p);e&&this.switchToTab(e)}switchToTab(p){if(this.curTab?.tab.name===p.name)return;for(let n of this.availableTabs)n.active=!1;p.active=!0,this.detach();let e=this.activateInstance(p),t=this.outletElement.element.nativeElement;for(;t.firstChild;)t.firstChild.remove();e&&(t.append(o.getComponentRootNode(e.componentRef)),this.curTab=e,e.componentRef.instance.onActivate())}detach(){let p=this.curTab;p!==void 0&&(p.portal.setAttachedHost(null),this.curTab=void 0)}dispose(){for(let e of Object.keys(this.activeTabs))this.activeTabs[e]?.dispose();this.outletElement.element.nativeElement.parentNode&&this.outletElement.remove()}static getComponentRootNode(p){return p.hostView.rootNodes[0]}activateInstance(p){return this.activeTabs[p.name]??=this.createComponent(p),this.activeTabs[p.name]}createComponent(p){let e=this.outletElement.createComponent(p.componentClass),t=new rt(p.componentClass,void 0,this.injector);return{tab:p,portal:t,componentRef:e,dispose:()=>{e.destroy()}}}};function nn(o,p){if(o&1){let e=N();c(0,"div",4),_("contextmenu",function(){h(e);let n=m();return M(n.onContextMenu())}),c(1,"div",5),I(2,0),l(),c(3,"div",6)(4,"div",7),s(5,"app-coverart-image",8),l(),c(6,"div",9)(7,"app-fav-icon",10),_("clickenter",function(){let n=h(e),i=m();return M(i.actions.toggleMediaBaseFav(n))}),l(),c(8,"div",11),O(9),l(),c(10,"a",12),_("clickenter",function(){let n=h(e),i=m();return M(i.navig.toTrack(n))}),O(11),l(),c(12,"a",13),_("clickenter",function(){let n=h(e),i=m();return M(i.navig.toMediaAlbum(n))}),O(13),l(),c(14,"a",14),_("clickenter",function(){let n=h(e),i=m();return M(i.navig.toMediaArtist(n))}),O(15),l(),c(16,"div",15)(17,"a",16),_("clickenter",function(){h(e);let n=m();return M(n.onContextMenu())}),O(18,"\u2026"),l()()()(),s(19,"app-lyrics",17),l()}if(o&2){let e=p;r(5),C("coverArtObj",e)("size",135)("alt",e.name),r(2),C("faved",e.state==null?null:e.state.faved),r(2),v(e.tag==null?null:e.tag.year),r(2),v(e.tag==null?null:e.tag.title),r(2),v(e.tag==null?null:e.tag.album),r(2),v(e.tag==null?null:e.tag.artist),r(4),C("trackID",e.id)}}function on(o,p){if(o&1&&(c(0,"div",22)(1,"div",24),O(2),l()()),o&2){let e=m();r(2),v(e.summary)}}function rn(o,p){if(o&1&&s(0,"app-chapters",23),o&2){let e=m();C("episode",e)}}function an(o,p){if(o&1){let e=N();c(0,"div",2)(1,"div",6)(2,"div",7),s(3,"app-coverart-image",8),l(),c(4,"div",9)(5,"app-fav-icon",18),_("click",function(){let n=h(e),i=m();return M(i.actions.toggleMediaBaseFav(n))})("keydown.enter",function(){let n=h(e),i=m();return M(i.actions.toggleMediaBaseFav(n))}),l(),c(6,"div",11),O(7),y(8,"date"),l(),c(9,"a",19),_("click",function(){let n=h(e),i=m();return M(i.navig.toPodcastEpisode(n))})("keydown.enter",function(){let n=h(e),i=m();return M(i.navig.toPodcastEpisode(n))}),O(10),l(),c(11,"a",20),_("click",function(){let n=h(e),i=m();return M(i.navig.toPodcastID(n.podcastID,n.podcastName))})("keydown.enter",function(){let n=h(e),i=m();return M(i.navig.toPodcastID(n.podcastID,n.podcastName))}),O(12),l(),c(13,"div",21),O(14),l(),s(15,"div",15),l()(),u(16,on,3,1,"div",22),u(17,rn,1,1,"app-chapters",23),l()}if(o&2){let e=p;r(3),C("coverArtObj",e)("size",135)("alt",e.name),r(2),C("faved",e.state==null?null:e.state.faved),r(2),v(V(8,10,e.date)),r(3),v((e.tag==null?null:e.tag.title)||e.name),r(2),v(e.podcast),r(2),v(e.author),r(2),P(e.summary?16:-1),r(),P(e&&e.chapters?17:-1)}}function ln(o,p){o&1&&(c(0,"div",3)(1,"div",5),I(2,1),l()())}var Me=(()=>{class o{constructor(){this.player=a(f),this.navig=a(w),this.actions=a(pe)}onActivate(){}onContextMenu(){}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=g({type:o,selectors:[["app-player-current-info"]],decls:3,vars:3,consts:()=>{let e;e=$localize`:␟7ccb95194e15c1e9b056e3e555d02544657c4fda␟4022398858082732270:Toggle Favorite`;let t;t=$localize`:␟41aac9cecddc9f345c263d3742192e68e227e413␟2102825898069375693:Menu`;let n;n=$localize`:␟554fa4d24b46ad3dbc2727a72e5dcdb8fdbd4671␟1577493895947205336: Currently Playing `;let i;i=$localize`:␟7ccb95194e15c1e9b056e3e555d02544657c4fda␟4022398858082732270:Toggle Favorite`;let d;return d=$localize`:␟8473671b5232bc3bbff7e3d33690548a2c5e64c5␟8177455663203610753:No track playing`,[n,d,[1,"player-top-view"],[1,"player-top-view","player-top-centered"],[1,"player-top-view",3,"contextmenu"],[1,"title"],[1,"track-plate"],[1,"art"],[3,"coverArtObj","size","alt"],[1,"meta"],["tabindex","0","title",e,3,"clickenter","faved"],[1,"year"],["tabindex","0",1,"name",3,"clickenter"],["tabindex","0",1,"album",3,"clickenter"],["tabindex","0",1,"artist",3,"clickenter"],[1,"actions"],["tabindex","0","title",t,1,"more",3,"clickenter"],[3,"trackID"],["tabindex","0","title",i,3,"click","keydown.enter","faved"],["tabindex","0",1,"name",3,"click","keydown.enter"],["tabindex","0",1,"album",3,"click","keydown.enter"],[1,"artist"],[1,"description"],[3,"episode"],[1,"note"]]},template:function(t,n){if(t&1&&(u(0,nn,20,9,"div",2),u(1,an,18,12,"div",2),u(2,ln,3,0,"div",3)),t&2){let i,d;P((i=n.player.currentTrack)?0:-1,i),r(),P((d=n.player.currentEpisode)?1:-1,d),r(),P(!n.player.currentTrack&&!n.player.currentEpisode?2:-1)}},dependencies:[Ge,ht,Nt,Pt,ne,xt,ze],styles:["[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]{overflow-y:auto;width:100%;height:80px;min-height:100%;overflow-x:hidden;padding:15px}[_nghost-%COMP%]   .player-top-view.player-top-centered[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:32px;font-weight:100;text-align:center;padding:0 0 10px;margin:0;text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{display:block;padding:15px;border-radius:4px;font-weight:200;font-size:13px;letter-spacing:1px;line-height:1.5em;background-color:var(--background-box);color:var(--on-background-highlight)}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .info-footnote[_ngcontent-%COMP%]{margin-top:15px}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]{border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:var(--background-border);padding:15px;display:flex;flex-flow:row wrap}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .art[_ngcontent-%COMP%]{min-height:135px;min-width:135px;display:block;cursor:pointer}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{width:calc(100% - 152px);margin-left:15px;display:flex;flex-flow:column wrap;position:relative}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   app-fav-icon[_ngcontent-%COMP%]{position:absolute;right:0;top:0;display:none;cursor:pointer;border:1px solid transparent;padding:7px 5px 5px;border-radius:50%;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   app-fav-icon[_ngcontent-%COMP%]:hover{background-color:var(--control-hover);color:var(--on-background-hover)}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;text-overflow:ellipsis;overflow:hidden}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{text-transform:uppercase}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%], [_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .year[_ngcontent-%COMP%], [_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .state[_ngcontent-%COMP%]{letter-spacing:1px;font-size:.8em}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:24px;font-weight:100;color:var(--on-background-highlight)}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background)}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:14px;line-height:1.2em}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:auto}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:5px;margin-right:5px;height:27px;font-weight:500;padding:1px 15px 0}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:scale(1.3);transform-origin:center}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;border:1px solid transparent;padding:4px 9px 7px;border-radius:50%;display:none;position:absolute;right:1px;bottom:0}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--control-hover);color:var(--on-background-hover)}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]:hover   .actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]:hover   app-fav-icon[_ngcontent-%COMP%]{display:inline}@media(max-width:400px){[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]{padding-left:0;padding-right:0}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   .track-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:16px}}[_nghost-%COMP%]   .player-top-view[_ngcontent-%COMP%]   app-chapters[_ngcontent-%COMP%]{display:block;margin-top:15px;margin-left:15px}"]})}}return o})();var Xt=(()=>{class o{constructor(){this.player=a(f),this.navig=a(w)}onActivate(){}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=g({type:o,selectors:[["app-tab-info"]],decls:3,vars:0,consts:[[1,"player-full"],[1,"player-top"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div",1),s(2,"app-player-current-info"),l()())},dependencies:[Me],styles:["[_nghost-%COMP%]   .player-full[_ngcontent-%COMP%]{position:relative;flex:0 1 100%;display:flex;flex-direction:column;height:100%}[_nghost-%COMP%]   .player-top[_ngcontent-%COMP%]{flex-grow:1;overflow-y:hidden;overflow-x:hidden}"]})}}return o})();var Vt=(()=>{class o{onActivate(){}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=g({type:o,selectors:[["app-tab-main"]],decls:1,vars:0,template:function(t,n){t&1&&s(0,"router-outlet")},dependencies:[ce,dt],encapsulation:2})}}return o})();var fe=(()=>{class o{constructor(){this.speedPC=20,this.speedString="Speed: 1x",this.min=0,this.max=3.5,this.player=a(f),this.element=a(H),this.speed=1}ngOnInit(){this.displaySpeed(this.player.getSpeed()),this.player.on(R.SPEED,e=>{this.displaySpeed(e)})}changeSpeed(e){let t=this.calculateSpeedByPosition(e.offsetX),n=(this.max-this.min)*t/100;this.player.speed(n+.5)}displaySpeed(e){this.speed=e,this.speedString=`Speed: ${e.toFixed(2)}x`,this.speedPC=this.calculatePositionPercentBySpeed()}calculatePositionPercentBySpeed(){return(this.speed-.5)/(this.max-this.min)*100}calculateSpeedByPosition(e){let t=this.element.nativeElement.getBoundingClientRect().width||1;return e*100/t}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=g({type:o,selectors:[["app-speed-slider"]],decls:3,vars:3,consts:[[1,"slider",3,"click","title"],[1,"back"],[1,"scrubber","neutral"]],template:function(t,n){t&1&&($(0,"div",0),X("click",function(d){return n.changeSpeed(d)}),k(1,"div",1)(2,"div",2),L()),t&2&&(Q("title",n.speedString),r(2),U("width",n.speedPC,"%"))},styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]{height:28px;float:none;width:100%;position:relative;overflow:visible;cursor:pointer}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{height:8px;position:absolute;inset:9px 0 0;width:100%;pointer-events:none;z-index:1;background-color:var(--control-box)}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .scrubber[_ngcontent-%COMP%]{position:absolute;top:9px;left:0;bottom:0;width:0;height:8px;z-index:3;pointer-events:none;background-color:var(--primary)}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .scrubber.neutral[_ngcontent-%COMP%]{background-color:var(--control-box-border)}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .scrubber[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{display:none;position:absolute;width:20px;height:20px;top:-9px;right:-10px;border-radius:50%;cursor:default;z-index:3}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .scrubber.line[_ngcontent-%COMP%]{border-right-style:solid;border-right-width:3px;top:0;height:28px;background-color:transparent;border-right-color:var(--on-background)}"]})}}return o})();function sn(o,p){o&1&&k(0,"div",1)}function pn(o,p){if(o&1&&($(0,"div",2),Ae(),$(1,"svg",4)(2,"defs")(3,"clipPath",5),k(4,"rect",6),L(),k(5,"path",7),L(),k(6,"use",8)(7,"use",9),L()()),o&2){let e=m();r(),Ee("viewBox",e.svg.viewbox),r(3),U("width",e.timePC,"%"),r(),Ee("d",e.svg.path)}}var Oe=(()=>{class o{constructor(){this.player=a(f),this.jam=a(te),this.app=a(S),this.timePC=0,this.tabindex="0",this.element=a(H)}ngOnInit(){this.player.on(R.TIME,()=>{this.updateTimeIndicator()}),this.player.on(R.TRACK,()=>{this.displayTrack(),this.updateTimeIndicator()}),this.displayTrack(),this.updateTimeIndicator()}displayTrack(){this.updateTimeIndicator(),this.displayWaveForm()}rewind(){this.player.rewind(2)}forward(){this.player.forward(2)}displayWaveForm(){this.svg=void 0,this.app.settings.showWaveform&&this.player.currentMedia&&this.jam.waveform.svg({id:this.player.currentMedia.id,width:this.app.smallscreen?1e3:4e3}).then(e=>{this.svg=St(e)}).catch(e=>{console.error(e)})}updateTimeIndicator(){this.timePC=this.calculatePositionPercentByTime()}calculatePositionPercentByTime(){return this.player.currentPercent()}changePlaybackTime(e){let t=this.player.totalTime;if(t!==void 0){let n=this.element.nativeElement.getBoundingClientRect().width||1,i=e.offsetX/n,d=t*i;setTimeout(()=>{this.player.seek(d)},0)}}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=g({type:o,selectors:[["app-time-slider"]],hostVars:1,hostBindings:function(t,n){t&1&&_("keydown.arrowLeft",function(){return n.rewind()})("keydown.arrowRight",function(){return n.forward()}),t&2&&Q("tabIndex",n.tabindex)},decls:4,vars:6,consts:()=>{let e;return e=$localize`:␟27551d586c79b500503f5aab2739bec723c3c4c6␟5734888861256751765:none`,[[1,"slider",3,"mousedown"],[1,"back"],[1,"waveform"],[1,"scrubber"],["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio",e,2,"fill-rule","evenodd","clip-rule","evenodd"],["id","cut-off-right"],["x","0","y","0","height","256"],["id","waveform-path"],[0,"xlink","href","#waveform-path","stroke","#1ed760","fill","#1ed760"],[0,"xlink","href","#waveform-path","stroke","#2B7343","fill","#2B7343","clip-path","url(#cut-off-right)"]]},template:function(t,n){t&1&&($(0,"div",0),X("mousedown",function(d){return n.changePlaybackTime(d)}),u(1,sn,1,0,"div",1),u(2,pn,8,4,"div",2),k(3,"div",3),L()),t&2&&(r(),P(!n.app.settings.showWaveform||!n.svg?1:-1),r(),P(n.app.settings.showWaveform&&n.svg?2:-1),r(),U("width",n.timePC,"%"),T("line",!!n.svg))},styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]{height:32px;float:none;width:100%;position:relative;overflow:visible;cursor:pointer}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{height:4px;position:absolute;inset:13px 0 0;width:100%;pointer-events:none;z-index:1;background-color:var(--control-box)}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .scrubber[_ngcontent-%COMP%]{position:absolute;top:13px;left:0;bottom:0;width:0;height:4px;z-index:3;pointer-events:none;background-color:var(--primary)}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .scrubber.neutral[_ngcontent-%COMP%]{background-color:var(--control-box-border)}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .scrubber[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{display:none;position:absolute;width:28px;height:28px;top:-13px;right:-14px;border-radius:50%;cursor:default;z-index:3}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .scrubber.line[_ngcontent-%COMP%]{border-right-style:solid;border-right-width:3px;top:0;height:32px;background-color:transparent;border-right-color:var(--on-background)}[_nghost-%COMP%]{vertical-align:middle}[_nghost-%COMP%]   .waveform[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;right:0;width:100%;height:100%;pointer-events:none;z-index:2;color:#1ed760}[_nghost-%COMP%]   .waveform[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:32px}"]})}}return o})();var ve=(()=>{class o{constructor(){this.volumePC=50,this.tabindex="0",this.player=a(f),this.element=a(H),this.volume=0}volumeDown(){this.player.volumeDown()}volumeUp(){this.player.volumeUp()}ngOnInit(){this.displayVolume(this.player.getVolume()),this.player.on(R.VOLUME,e=>{this.displayVolume(e)})}changeVolume(e){let t=this.calculateVolumeByPosition(e.offsetX);this.player.volume(t)}displayVolume(e){this.volume=e,this.volumePC=this.calculatePositionPercentByVolume()}calculatePositionPercentByVolume(){return this.volume}calculateVolumeByPosition(e){let t=this.element.nativeElement.getBoundingClientRect().width||1;return e*100/t}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=g({type:o,selectors:[["app-volume-slider"]],hostVars:1,hostBindings:function(t,n){t&1&&_("keydown.arrowLeft",function(){return n.volumeDown()})("keydown.arrowRight",function(){return n.volumeUp()}),t&2&&Q("tabIndex",n.tabindex)},decls:3,vars:3,consts:[[1,"slider",3,"click","title"],[1,"back"],[1,"scrubber","neutral"]],template:function(t,n){t&1&&($(0,"div",0),X("click",function(d){return n.changeVolume(d)}),k(1,"div",1)(2,"div",2),L()),t&2&&(Q("title",n.volumePC),r(2),U("width",n.volumePC,"%"))},styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]{height:28px;float:none;width:100%;position:relative;overflow:visible;cursor:pointer}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{height:8px;position:absolute;inset:9px 0 0;width:100%;pointer-events:none;z-index:1;background-color:var(--control-box)}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .scrubber[_ngcontent-%COMP%]{position:absolute;top:9px;left:0;bottom:0;width:0;height:8px;z-index:3;pointer-events:none;background-color:var(--primary)}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .scrubber.neutral[_ngcontent-%COMP%]{background-color:var(--control-box-border)}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .scrubber[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{display:none;position:absolute;width:20px;height:20px;top:-9px;right:-10px;border-radius:50%;cursor:default;z-index:3}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .scrubber.line[_ngcontent-%COMP%]{border-right-style:solid;border-right-width:3px;top:0;height:28px;background-color:transparent;border-right-color:var(--on-background)}"]})}}return o})();function _n(o,p){if(o&1){let e=N();c(0,"a",12),_("click",function(){h(e);let n=m();return M(n.player.unmute())}),s(1,"i",13),l()}}function dn(o,p){if(o&1){let e=N();c(0,"a",14),_("click",function(){h(e);let n=m();return M(n.player.mute())}),s(1,"i",15),l()}}var zt=(()=>{class o{constructor(){this.player=a(f),this.navig=a(w)}onActivate(){}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=g({type:o,selectors:[["app-tab-player"]],decls:19,vars:7,consts:()=>{let e;e=$localize`:␟1f689fada9748a830117f5b429a88ef8629082a8␟6453471031802119612:Unmute`;let t;t=$localize`:␟7be9877f3b1042bfc095c728acb0dbeb9c6e8205␟2494293689061559568:Mute`;let n;n=$localize`:␟796e42bec8a6996607cf1f3e80235b86d695804a␟434404492084234684:Volume`;let i;return i=$localize`:␟d1fe6d3a9d6cf3a1e3972a5d19cae96ebf150246␟810461764147293655:Reset Speed`,[[1,"player-info"],[1,"volume"],["title",e],["title",t],["title",n],[1,"player-speed"],["title",i,3,"click"],[1,"icon-speed"],[1,"progress"],[1,"start"],[1,"bar"],[1,"finish"],["title",e,3,"click"],[1,"icon-volume-off"],["title",t,3,"click"],[1,"icon-volume-up"]]},template:function(t,n){t&1&&(s(0,"app-player-current-info"),c(1,"div",0)(2,"div",1),u(3,_n,2,0,"a",2)(4,dn,2,0,"a",3),s(5,"app-volume-slider",4),l(),c(6,"div",5)(7,"a",6),_("click",function(){return n.player.speed(1)}),s(8,"i",7),l(),s(9,"app-speed-slider"),l(),c(10,"div",8)(11,"div",9),O(12),y(13,"mediaduration"),l(),c(14,"div",10),s(15,"app-time-slider"),l(),c(16,"div",11),O(17),y(18,"mediaduration"),l()()()),t&2&&(r(3),P(n.player.isMuted?3:4),r(9),v(V(13,3,n.player.currentTime)),r(5),v(V(18,5,n.player.totalTime)))},dependencies:[Me,ve,fe,Oe,Ce],styles:["[_nghost-%COMP%]{height:100%;position:relative;flex:0 1 100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .player-info[_ngcontent-%COMP%]{padding:15px;background-color:var(--control);border-top-width:1px;border-top-style:solid;border-top-color:var(--control-border)}[_nghost-%COMP%]   .player-info[_ngcontent-%COMP%]   .volume[_ngcontent-%COMP%], [_nghost-%COMP%]   .player-info[_ngcontent-%COMP%]   .player-speed[_ngcontent-%COMP%]{flex:1 1 auto;display:flex;flex-flow:row nowrap;width:100%;margin-bottom:5px}[_nghost-%COMP%]   .player-info[_ngcontent-%COMP%]   .volume[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], [_nghost-%COMP%]   .player-info[_ngcontent-%COMP%]   .player-speed[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--on-control-ambient);font-size:1.5em;display:block}[_nghost-%COMP%]   .player-info[_ngcontent-%COMP%]   .volume[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .player-info[_ngcontent-%COMP%]   .player-speed[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:var(--on-control-ambient-hover)}[_nghost-%COMP%]   .player-info[_ngcontent-%COMP%]   app-volume-slider[_ngcontent-%COMP%], [_nghost-%COMP%]   .player-info[_ngcontent-%COMP%]   app-speed-slider[_ngcontent-%COMP%]{display:block;flex:1;margin-left:15px;margin-top:5px}[_nghost-%COMP%]   .player-info[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{font-size:11px;display:flex;flex-flow:row;justify-content:space-between;align-items:center;color:var(--on-control-ambient)}[_nghost-%COMP%]   .player-info[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .start[_ngcontent-%COMP%], [_nghost-%COMP%]   .player-info[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .finish[_ngcontent-%COMP%]{min-width:30px}[_nghost-%COMP%]   .player-info[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{width:100%;padding-left:12px;padding-right:12px}[_nghost-%COMP%]   app-player-current-info[_ngcontent-%COMP%]{flex-grow:1;overflow-y:hidden;overflow-x:hidden}"]})}}return o})();var Gt=(()=>{class o{onActivate(){}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=g({type:o,selectors:[["app-tab-queue"]],decls:1,vars:0,template:function(t,n){t&1&&s(0,"app-queue")},dependencies:[It],encapsulation:2})}}return o})();var B=(()=>{class o{constructor(){this.infoTab={name:"info-queue",componentClass:Xt},this.playerTab={name:"player",componentClass:zt},this.queueTab={name:"queue",componentClass:Gt},this.mainTab={name:"main",componentClass:Vt},this.tabs=[this.mainTab,this.playerTab,this.queueTab,this.infoTab]}get currentTabName(){return this.tabPortalHost?this.tabPortalHost.currentTabName:void 0}init(e){this.tabPortalHost=e,this.switchToMain()}switchToMain(){this.switchTo(this.mainTab.name)}dispose(){this.tabPortalHost&&(this.tabPortalHost.dispose(),this.tabPortalHost=void 0)}clickInfo(){this.switchTo(this.currentTabName===this.infoTab.name?this.mainTab.name:this.infoTab.name)}clickPlayer(){this.switchTo(this.currentTabName===this.playerTab.name?this.mainTab.name:this.playerTab.name)}clickQueue(){this.switchTo(this.currentTabName===this.queueTab.name?this.mainTab.name:this.queueTab.name)}switchTo(e){this.tabPortalHost&&this.tabPortalHost.switchTo(e)}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275prov=Y({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var mn=["userMenu"];function gn(o,p){o&1&&(s(0,"i",9),j(1),I(2,1),q())}function Cn(o,p){o&1&&(s(0,"i",10),j(1),I(2,2),q())}function un(o,p){o&1&&(s(0,"i",11),j(1),I(2,3),q())}function Pn(o,p){o&1&&(s(0,"i",12),j(1),I(2,4),q())}function hn(o,p){o&1&&(s(0,"i",13),j(1),I(2,5),q())}function Mn(o,p){o&1&&(s(0,"i",14),j(1),I(2,6),q())}var Ft=(()=>{class o{constructor(){this.navig=a(w),this.auth=a(ee),this.contextMenu=Z.required("userMenu")}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=g({type:o,selectors:[["app-context-menu-user"]],viewQuery:function(t,n){t&1&&W(n.contextMenu,mn,5),t&2&&J()},decls:8,vars:1,consts:()=>{let e;e=$localize`:␟994363f08f9fbfa3b3994ff7b35c6904fdff18d8␟4915431133669985304:Profile`;let t;t=$localize`:␟121cc5391cd2a5115bc2b3160379ee5b36cd7716␟4930506384627295710:Settings`;let n;n=$localize`:␟0b319c4dd6d4ddd74cd138b72ab8109ffcc28f36␟7385160636957089888:Library`;let i;i=$localize`:␟b7648e7aced164498aa843b5c4e8f2f1c36a7919␟7844706011418789951:Administration`;let d;d=$localize`:␟004b222ff9ef9dd4771b777950ca1d0e4cd4348a␟1726363342938046830:About`;let x;return x=$localize`:␟bb694b49d408265c91c62799c2b3a7e3151c824d␟3797778920049399855:Logout`,[["userMenu",""],e,t,n,i,d,x,["contextMenuItem","",3,"execute"],["contextMenuItem","",3,"execute","visible"],[1,"icon-user"],[1,"icon-settings"],[1,"icon-browse"],[1,"icon-admin"],[1,"icon-help"],[1,"icon-logout"]]},template:function(t,n){t&1&&(c(0,"context-menu",null,0),D(2,gn,3,0,"ng-template",7),_("execute",function(){return n.navig.toUser()}),D(3,Cn,3,0,"ng-template",7),_("execute",function(){return n.navig.toUserSettings()}),D(4,un,3,0,"ng-template",7),_("execute",function(){return n.navig.toLibraryStart()}),D(5,Pn,3,0,"ng-template",8),_("execute",function(){return n.navig.toAdmin()}),D(6,hn,3,0,"ng-template",7),_("execute",function(){return n.navig.toAbout()}),D(7,Mn,3,0,"ng-template",7),_("execute",function(){return n.navig.toLogout()}),l()),t&2&&(r(5),C("visible",!!(!(n.auth.user==null||n.auth.user.roles==null)&&n.auth.user.roles.admin)))},dependencies:[_e,ft,Mt],encapsulation:2})}}return o})();function fn(o,p){if(o&1&&(c(0,"app-autocomplete-option-header"),O(1),l()),o&2){let e=m().$implicit;r(),v(e.header)}}function On(o,p){if(o&1&&(u(0,fn,2,1,"app-autocomplete-option-header"),c(1,"app-autocomplete-option",8),s(2,"span",9),y(3,"highlight"),l()),o&2){let e=p.$implicit,t=m().control;P(e.header?0:-1),r(),C("option",e)("control",t),r(),C("innerHTML",Ue(3,4,e.data.name,t.query),ke)}}function vn(o,p){if(o&1&&Le(0,On,4,7,null,null,Ie),o&2){let e=p.control;$e(e.options)}}var A={track:"Track",album:"Album",artist:"Artist",playlist:"Playlist",podcast:"Podcast",episode:"Episode",folder:"Folder"},jt=(()=>{class o{constructor(){this.autocomplete=Z(ue),this.searchStateChange=He(),this.jam=a(te),this.navig=a(w)}setSearchActive(e){this.searchStateChange.emit(e)}autocompleteEnter(){}search(){this.autocomplete()?.run()}autocompleteGetData(e){return K(this,null,function*(){let t=yield this.jam.autocomplete.autocomplete({query:e,album:5,artist:5,playlist:5,podcast:5,track:5,episode:5}),n=[{type:A.artist,list:t.artists},{type:A.album,list:t.albums},{type:A.track,list:t.tracks},{type:A.playlist,list:t.playlists},{type:A.podcast,list:t.podcasts},{type:A.episode,list:t.episodes},{type:A.folder,list:t.folders}],i=[];for(let d of n)if(d.list&&d.list.length>0){let x=d.list.map(F=>({data:Se({type:d.type},F)}));x[0].header=d.type,i=[...i,...x]}return i})}autocompleteSelectResult(e){let t=e.data;switch(t.type){case A.track:{this.navig.toTrackID(t.id,t.name);break}case A.episode:{this.navig.toPodcastEpisodeID(t.id,t.name);break}case A.album:{this.navig.toAlbumID(t.id,t.name);break}case A.artist:{this.navig.toArtistID(t.id,t.name);break}case A.playlist:{this.navig.toPlaylistID(t.id,t.name);break}case A.podcast:{this.navig.toPodcastID(t.id,t.name);break}case A.folder:{this.navig.toFolderID(t.id,t.name);break}default:break}return t.name}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=g({type:o,selectors:[["app-search-box"]],viewQuery:function(t,n){t&1&&W(n.autocomplete,ue,5),t&2&&J()},outputs:{searchStateChange:"searchStateChange"},decls:9,vars:2,consts:()=>{let e;e=$localize`:␟7e892ba15f2c6c17e83510e273b3e10fc32ea016␟4580988005648117665:Search`;let t;return t=$localize`:␟7e892ba15f2c6c17e83510e273b3e10fc32ea016␟4580988005648117665:Search`,[["autocomplete","appAutocomplete"],t,["appAutocompleteContent",""],["role","search"],["for","header-search-box",1,"visually-hidden"],["aria-label",e,"autocomplete","off","id","header-search-box","name","query","type","search",3,"blur","focusin","appAutocompleteControl","appAutocomplete"],[3,"click"],["aria-hidden","true",1,"icon-search"],[3,"option","control"],[3,"innerHTML"]]},template:function(t,n){if(t&1&&(c(0,"app-autocomplete",null,0),D(2,vn,2,0,"ng-template",2),l(),c(3,"form",3)(4,"label",4),I(5,1),l(),c(6,"input",5),_("blur",function(){return n.setSearchActive(!1)})("focusin",function(){return n.setSearchActive(!0)}),l(),c(7,"button",6),_("click",function(){return n.search()}),s(8,"i",7),l()()),t&2){let i=Be(1);r(6),C("appAutocompleteControl",n)("appAutocomplete",i)}},dependencies:[At,kt,ue,wt,$t,Rt],styles:["[_nghost-%COMP%]   form[_ngcontent-%COMP%]{border-radius:3px;align-items:center;background-color:var(--control-ambient);border:1px solid var(--control-box-border);color:var(--on-control)}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;min-width:50px;padding-left:3px;padding-right:3px;background-color:var(--control-ambient);color:var(--on-control);min-height:28px}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--on-control);font-size:14px;cursor:pointer}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:var(--on-input-hover)}[_nghost-%COMP%]   form[_ngcontent-%COMP%]:focus-within{background-color:var(--input);border-color:var(--input-border);color:var(--on-input)}[_nghost-%COMP%]   form[_ngcontent-%COMP%]:focus-within   input[_ngcontent-%COMP%]{background-color:var(--input);color:var(--on-input)}[_nghost-%COMP%]   form[_ngcontent-%COMP%]:focus-within   i[_ngcontent-%COMP%]{color:var(--on-input)}[_nghost-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap}"]})}}return o})();var yn=()=>["/library"];function bn(o,p){if(o&1){let e=N();c(0,"button",8),_("click",function(){h(e);let n=m();return M(n.back())}),s(1,"i",9),l()}}function En(o,p){if(o&1){let e=N();c(0,"button",10),_("click",function(n){h(e);let i=m();return M(i.onContextMenu(n))}),s(1,"app-coverart-image",11),l()}if(o&2){let e=m();r(),C("coverArtObj",e.auth.user)("size",28)("round",!0)}}var qt=(()=>{class o{constructor(){this.app=a(S),this.auth=a(ee),this.navig=a(w),this.tabService=a(B),this.searchActive=!1,this.location=a(Ve),this.menuService=a(de)}back(){this.location.back()}toggleMobileNavig(){this.tabService.switchToMain(),this.app.view.currentSidebar?.toggleMobileNavig()}onContextMenu(e){this.menuService.openMenuComponent(Ft,void 0,e)}searchStateChange(e){this.searchActive=e}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=g({type:o,selectors:[["app-header"]],decls:11,vars:7,consts:()=>{let e;e=$localize`:␟b9a009eab846176317fc928e63d0edb0a8a260d2␟4468670264446559048:Navigation Menu`;let t;t=$localize`:␟a67aec1c4d47cdf3a4442a19e616def78fd77388␟734934965373819800:Go back`;let n;n=$localize`:␟bb5f103d944a8504e750eefeea0a9a69fd61935f␟2590140545626587198:Go to Start`;let i;return i=$localize`:␟ffac8783eaf153173408c8a9014a7484fa6a9175␟8767912651395089354:User Menu`,[["title",e,1,"sandwich",3,"click"],["aria-hidden","true",1,"icon-menu"],["title",t,1,"back"],["title",n,1,"logo",3,"routerLink"],[1,"logo-name"],[1,"spacer"],[1,"search",3,"searchStateChange"],["title",i,1,"user"],["title",t,1,"back",3,"click"],["aria-hidden","true",1,"icon-left-bold"],["title",i,1,"user",3,"click"],[3,"coverArtObj","size","round"]]},template:function(t,n){t&1&&(c(0,"header")(1,"button",0),_("click",function(){return n.toggleMobileNavig()}),s(2,"i",1),l(),u(3,bn,2,0,"button",2),c(4,"a",3),s(5,"app-logo-icon"),c(6,"span",4),O(7),l()(),s(8,"div",5),c(9,"app-search-box",6),_("searchStateChange",function(d){return n.searchStateChange(d)}),l(),u(10,En,2,3,"button",7),l()),t&2&&(T("searching",n.searchActive),r(3),P(n.app.standalone?3:-1),r(),C("routerLink",De(6,yn)),r(3),v(n.app.name),r(3),P(n.auth.user!=null&&n.auth.user.name?10:-1))},dependencies:[ce,mt,jt,Tt,ne],styles:["[_nghost-%COMP%]   header[_ngcontent-%COMP%]{background-color:var(--control);color:var(--on-control-ambient);padding:10px;border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:var(--control-border);width:100%;display:flex;flex-flow:row nowrap;align-items:center;justify-content:flex-end}[_nghost-%COMP%]   header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{height:30px}[_nghost-%COMP%]   header[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:30px}[_nghost-%COMP%]   .logo[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px;margin-right:5px;display:flex;flex-wrap:nowrap;justify-content:center;align-items:center}[_nghost-%COMP%]   .logo[_ngcontent-%COMP%]   .logo-name[_ngcontent-%COMP%]{padding-left:5px}[_nghost-%COMP%]   .logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-control);font-size:20px;height:42px;padding-top:2px}[_nghost-%COMP%]   .logo[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-control-hover)}[_nghost-%COMP%]   .logo[_ngcontent-%COMP%]   app-logo-icon[_ngcontent-%COMP%]{height:30px;width:30px}[_nghost-%COMP%]   .spacer[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   app-coverart-image[_ngcontent-%COMP%]{vertical-align:middle}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:10px}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]:hover   app-coverart-image[_ngcontent-%COMP%], [_nghost-%COMP%]   .user[_ngcontent-%COMP%]:focus   app-coverart-image[_ngcontent-%COMP%]{border:1px solid var(--on-control-hover)}[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{transition:all .3s;width:120px}[_nghost-%COMP%]   .sandwich[_ngcontent-%COMP%], [_nghost-%COMP%]   .back[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center;cursor:pointer;-webkit-user-select:none;user-select:none;padding-top:2px;background-color:var(--control);color:var(--on-control);border-radius:50%}[_nghost-%COMP%]   .sandwich.active[_ngcontent-%COMP%], [_nghost-%COMP%]   .sandwich[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .back.active[_ngcontent-%COMP%], [_nghost-%COMP%]   .back[_ngcontent-%COMP%]:hover{background-color:var(--control-hover);color:var(--on-control-hover)}[_nghost-%COMP%]   .sandwich[_ngcontent-%COMP%]{display:none}@media(max-width:768px){[_nghost-%COMP%]   .sandwich[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{margin-right:15px}}@media(max-width:522px){[_nghost-%COMP%]   .logo[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px}[_nghost-%COMP%]   .logo-name[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{flex:1;overflow:hidden;margin-right:5px}}@media(max-width:400px){[_nghost-%COMP%]   .logo[_ngcontent-%COMP%]{padding-right:10px}}@media(max-width:300px){[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{display:none}}[_nghost-%COMP%]   header.searching[_ngcontent-%COMP%]{align-items:flex-end}[_nghost-%COMP%]   header.searching[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%], [_nghost-%COMP%]   header.searching[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%], [_nghost-%COMP%]   header.searching[_ngcontent-%COMP%]   .sandwich[_ngcontent-%COMP%], [_nghost-%COMP%]   header.searching[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   header.searching[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{flex:1;width:100%}"]})}}return o})();function Tn(o,p){if(o&1){let e=N();c(0,"div",13)(1,"div",13)(2,"button",22),_("click",function(){h(e);let n=m();return M(n.player.speed(1))}),s(3,"i",17),l(),s(4,"app-speed-slider"),l()()}}var Qt=(()=>{class o{constructor(){this.app=a(S),this.player=a(f),this.queue=a(oe),this.showSpeed=!1,this.HOTKEYS=E,this.tabService=a(B)}toggleRepeat(){this.player.repeatTrack=!this.player.repeatTrack}togglePlayPause(){this.player.isPlaying||this.player.currentMedia?this.player.togglePlayPause():this.player.next()}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=g({type:o,selectors:[["app-player"]],decls:41,vars:63,consts:()=>{let e;e=$localize`:␟796e42bec8a6996607cf1f3e80235b86d695804a␟434404492084234684:Volume`;let t;return t=$localize`:␟d1fe6d3a9d6cf3a1e3972a5d19cae96ebf150246␟810461764147293655:Reset Speed`,[["role","status",1,"player"],[1,"actions"],[3,"click","disabled","title"],["aria-hidden","true",1,"icon-fast-backward"],[1,"play",3,"click","disabled","title"],["aria-hidden","true"],["aria-hidden","true",1,"icon-fast-forward"],[1,"progress"],[1,"start"],[1,"bar"],[1,"finish"],[1,"options"],[1,"player-slider-controls"],[1,"player-controls"],[1,"player-control",3,"click","title"],["title",e],["aria-hidden","true",1,"icon-loop"],["aria-hidden","true",1,"icon-speed"],[1,"player-control","button-info",3,"click","title"],["aria-hidden","true",1,"icon-info"],[1,"player-control","button-queue",3,"click","title"],["aria-hidden","true",1,"icon-queue"],["title",t,1,"player-control",3,"click"]]},template:function(t,n){t&1&&(c(0,"section",0)(1,"div",1)(2,"button",2),_("click",function(){return n.player.previous()}),s(3,"i",3),l(),c(4,"button",4),y(5,"stringToggle"),_("click",function(){return n.togglePlayPause()}),s(6,"i",5),y(7,"stringToggle"),l(),c(8,"button",2),_("click",function(){return n.player.next()}),s(9,"i",6),l()(),c(10,"div",7)(11,"div",8),O(12),y(13,"mediaduration"),l(),c(14,"div",9),s(15,"app-time-slider"),l(),c(16,"div",10),O(17),y(18,"mediaduration"),l()(),c(19,"div",11)(20,"div",12)(21,"div",13)(22,"button",14),y(23,"stringToggle"),_("click",function(){return n.player.unmute()}),s(24,"i",5),y(25,"stringToggle"),l(),s(26,"app-volume-slider",15),l()(),u(27,Tn,5,0,"div",13),c(28,"div",13)(29,"button",14),y(30,"stringToggle"),_("click",function(){return n.toggleRepeat()}),s(31,"i",16),l(),c(32,"button",14),y(33,"stringToggle"),_("click",function(){return n.showSpeed=!n.showSpeed}),s(34,"i",17),l(),c(35,"button",18),y(36,"stringToggle"),_("click",function(){return n.tabService.clickInfo()}),s(37,"i",19),l(),c(38,"button",20),y(39,"stringToggle"),_("click",function(){return n.tabService.clickQueue()}),s(40,"i",21),l()()()()),t&2&&(r(2),C("disabled",!n.queue.hasPrevious)("title",`Previous Track (${n.HOTKEYS.previousTrack.shortcut})`),r(2),C("disabled",n.queue.isEmpty)("title",Ye(5,26,n.player.isPlaying,"Pause","Play",n.HOTKEYS.playPause.shortcut)),r(2),Te(z(7,31,n.player.isPlaying,"icon-pause","icon-play")),r(2),C("disabled",!n.queue.hasNext)("title",`Next Track (${n.HOTKEYS.nextTrack.shortcut})`),r(4),v(V(13,35,n.player.currentTime)),r(5),v(V(18,37,n.player.totalTime)),r(5),C("title",z(23,39,n.player.isMuted,"Unmute","Mute")),r(2),Te(z(25,43,n.player.isMuted,"icon-volume-off","icon-volume-up")),r(3),P(n.showSpeed?27:-1),r(2),T("active",n.player.repeatTrack),C("title",z(30,47,n.player.repeatTrack,"Stop repeating current track","Repeat current track")),r(3),T("active",n.showSpeed),C("title",z(33,51,n.showSpeed,"Hide Playback Speed Control","Show Playback Speed Control")),r(3),T("active",n.tabService.infoTab.active),C("title",z(36,55,n.tabService.infoTab.active,"Hide Play Info","Show Play Info")),r(3),T("active",n.tabService.queueTab.active),C("title",z(39,59,n.tabService.queueTab.active,"Hide Play Queue","Show Play Queue")))},dependencies:[Oe,ve,fe,Ce,ut],styles:["[_nghost-%COMP%]{background-color:var(--background);color:var(--on-background)}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]{width:100%;border-top-width:1px;border-top-style:solid;border-top-color:var(--control-border);padding:15px 15px 10px;display:flex;flex-flow:row wrap;align-items:center;background-color:var(--control);color:var(--on-control-ambient)}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:var(--on-control-ambient);cursor:pointer;border:1px solid transparent;padding-top:4px}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{color:var(--on-background-highlight);border:1px solid var(--control-active)}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--on-control-ambient-hover)}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{color:var(--on-control-ambient-disabled);cursor:default}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;justify-content:space-between;align-items:center}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:24px}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%]{font-size:36px}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{flex:1;padding:0 15px;font-size:11px;display:flex;flex-flow:row;justify-content:space-between;align-items:center;color:var(--on-control-ambient)}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .start[_ngcontent-%COMP%], [_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .finish[_ngcontent-%COMP%]{min-width:30px}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{width:100%;padding-left:12px;padding-right:12px}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .player-controls[_ngcontent-%COMP%]{width:auto;margin-right:15px;text-align:right;flex:1;flex-wrap:nowrap;white-space:nowrap;display:flex;justify-items:center;align-items:center}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .player-control[_ngcontent-%COMP%]{margin-right:5px;font-size:1.5em;border-radius:2px;line-height:1.5em}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .player-control.button-queue[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   app-volume-slider[_ngcontent-%COMP%], [_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   app-speed-slider[_ngcontent-%COMP%]{display:block;flex:1;min-width:70px;margin-right:5px}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .volume[_ngcontent-%COMP%]{flex:1 1 auto;display:flex;flex-flow:column wrap;align-items:center;max-width:200px;margin-top:2px}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .volume[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:center;width:100%}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .volume[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--on-control-ambient);font-size:1.5em;display:block}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .volume[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:var(--on-control-ambient-hover)}@media(max-width:1400px){[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .player-control.button-queue[_ngcontent-%COMP%]{display:inline}}@media(max-width:1000px){[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{padding-left:15px}}@media(max-width:768px){[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{width:25%}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{width:75%}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{width:100%;padding-left:0;flex:none}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .player-slider-controls[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%] > .player-controls[_ngcontent-%COMP%]{flex:inherit}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{padding-top:15px}}@media(max-width:522px){[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{width:100%;justify-content:space-around;padding:5px 0}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{width:100%;padding:5px 0}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]{padding:5px 0}}@media(max-width:522px){[_nghost-%COMP%]{border-top:1px solid var(--background-border)}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]{border-top:1px solid var(--control-box-border)}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{margin-top:10px}[_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .player-control.button-queue[_ngcontent-%COMP%], [_nghost-%COMP%]   .player[_ngcontent-%COMP%]   .options[_ngcontent-%COMP%]   .player-control.button-info[_ngcontent-%COMP%]{display:none}}"]})}}return o})();function Sn(o,p){if(o&1&&k(0,"div",1)(1,"div",2),o&2){let e=m();r(),U("width",e.timePC,"%")}}var Kt=(()=>{class o{constructor(){this.player=a(f),this.jam=a(te),this.timePC=0,this.element=a(H)}ngOnInit(){this.player.on(R.TIME,()=>{this.updateTimeIndicator()}),this.player.on(R.TRACK,()=>{this.updateTimeIndicator()}),this.updateTimeIndicator()}updateTimeIndicator(){this.timePC=this.calculatePositionPercentByTime()}calculatePositionPercentByTime(){return this.player.currentPercent()}changePlaybackTime(e){let t=this.player.totalTime;if(t!==void 0){let n=this.element.nativeElement.getBoundingClientRect().width||1,i=e.offsetX/n,d=t*i;setTimeout(()=>{this.player.seek(d)},0)}}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=g({type:o,selectors:[["app-mini-time-slider"]],decls:2,vars:1,consts:[[1,"slider",3,"mousedown"],[1,"back"],[1,"scrubber","line"]],template:function(t,n){t&1&&($(0,"div",0),X("mousedown",function(d){return n.changePlaybackTime(d)}),u(1,Sn,2,2),L()),t&2&&(r(),P(n.player.isPlaying?1:-1))},styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]{height:3px;float:none;width:100%;position:relative;overflow:visible;cursor:pointer}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{height:3px;position:absolute;inset:-1px 0 0;width:100%;pointer-events:none;z-index:1;background-color:var(--control-box)}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .scrubber[_ngcontent-%COMP%]{position:absolute;top:-1px;left:0;bottom:0;width:0;height:3px;z-index:3;pointer-events:none;background-color:var(--primary)}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .scrubber.neutral[_ngcontent-%COMP%]{background-color:var(--control-box-border)}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .scrubber[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{display:none;position:absolute;width:0px;height:0px;top:1px;right:0;border-radius:50%;cursor:default;z-index:3}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .scrubber.line[_ngcontent-%COMP%]{border-right-style:solid;border-right-width:3px;top:0;height:3px;background-color:transparent;border-right-color:var(--on-background)}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{background-color:var(--primary)}[_nghost-%COMP%]   .slider[_ngcontent-%COMP%]   .scrubber.line[_ngcontent-%COMP%]{top:-1px;background-color:var(--control-border)}"]})}}return o})();function xn(o,p){if(o&1&&(c(0,"div"),s(1,"app-coverart-image",12),l()),o&2){let e=m();r(),C("coverArtObj",e.player.currentMedia)("size",50)("fill",!0)}}function Nn(o,p){o&1&&s(0,"i",2)}function wn(o,p){if(o&1){let e=N();c(0,"button",13),_("click",function(){h(e);let n=m();return M(n.togglePlayPause())}),s(1,"i",14),l()}}function An(o,p){if(o&1){let e=N();c(0,"button",15),_("click",function(){h(e);let n=m();return M(n.togglePlayPause())}),s(1,"i",16),l()}}var Wt=(()=>{class o{constructor(){this.app=a(S),this.player=a(f),this.queue=a(oe),this.tabService=a(B)}togglePlayPause(){this.player.isPlaying||this.player.currentMedia?this.player.togglePlayPause():this.player.next()}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=g({type:o,selectors:[["app-mini-player"]],decls:16,vars:10,consts:()=>{let e;e=$localize`:␟5bac00dd5db2ba2451d049bcccec71b45c0943f2␟7484336710632233254:Previous Track`;let t;t=$localize`:␟b2838c6165a9672a17db188f4dd9676574353dd8␟9042260521669277115:Pause`;let n;n=$localize`:␟9b00b4b718d67ef6351bba15acd4ad0f2bc47927␟8564202903947049539:Play`;let i;i=$localize`:␟13faa22b2c751a318eaa681690580217f814daeb␟8095317917249912566:Next Track`;let d;return d=$localize`:␟c323b76780c213ddfc9603f673f9d7494c029f69␟3154631950436655267:Album Art`,[[1,"buttons"],[1,"art",3,"click"],["aria-hidden","true",1,"icon-info"],[1,"actions"],["title",e,3,"click","disabled"],["aria-hidden","true",1,"icon-fast-backward"],["title",t,1,"play"],["title",n,1,"play"],["title",i,3,"click","disabled"],["aria-hidden","true",1,"icon-fast-forward"],[3,"click"],["aria-hidden","true",1,"icon-queue"],["alt",d,3,"coverArtObj","size","fill"],["title",t,1,"play",3,"click"],["aria-hidden","true",1,"icon-pause"],["title",n,1,"play",3,"click"],["aria-hidden","true",1,"icon-play"]]},template:function(t,n){t&1&&(s(0,"app-mini-time-slider"),c(1,"div",0)(2,"div")(3,"button",1),_("click",function(){return n.tabService.clickPlayer()}),u(4,xn,2,3,"div")(5,Nn,1,0,"i",2),l()(),c(6,"div",3)(7,"button",4),_("click",function(){return n.player.previous()}),s(8,"i",5),l(),u(9,wn,2,0,"button",6)(10,An,2,0,"button",7),c(11,"button",8),_("click",function(){return n.player.next()}),s(12,"i",9),l()(),c(13,"div")(14,"button",10),_("click",function(){return n.tabService.clickQueue()}),s(15,"i",11),l()()()),t&2&&(T("hidden",n.tabService.playerTab.active),r(3),T("active",n.tabService.playerTab.active),r(),P(n.player.currentMedia?4:5),r(3),C("disabled",!n.queue.hasPrevious),r(2),P(n.player.isPlaying?9:10),r(2),C("disabled",!n.queue.hasNext),r(3),T("active",n.tabService.queueTab.active))},dependencies:[Kt,ne],styles:["[_nghost-%COMP%]{flex-direction:column}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{font-size:24px;color:var(--on-control-ambient);border-radius:5px;padding:5px}[_nghost-%COMP%]   button.play[_ngcontent-%COMP%]{font-size:36px;padding:0}[_nghost-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--on-control-ambient-hover)}[_nghost-%COMP%]   button.active[_ngcontent-%COMP%]{color:var(--on-control-active);background-color:var(--control-active)}[_nghost-%COMP%]   button[_ngcontent-%COMP%]:disabled{color:var(--on-control-ambient-disabled);cursor:default;background-color:transparent}[_nghost-%COMP%]   app-mini-time-slider[_ngcontent-%COMP%]{margin-top:1px}[_nghost-%COMP%]   app-mini-time-slider.hidden[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;flex-direction:row;padding-top:4px;padding-left:15px;padding-right:15px}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;justify-content:space-around;align-items:center}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   .art[_ngcontent-%COMP%]{width:45px;min-width:45px}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   .art[_ngcontent-%COMP%]   app-coverart-image[_ngcontent-%COMP%]{display:block;min-height:35px;max-height:35px;min-width:35px;max-width:35px}"]})}}return o})();var Rn=["tabContentOutlet"];function kn(o,p){o&1&&s(0,"app-header",1)}function In(o,p){o&1&&s(0,"app-player",3)}function Ln(o,p){o&1&&s(0,"app-mini-player",4)}var Jt=(()=>{class o{constructor(){this.tabContentOutlet=Z.required("tabContentOutlet",{read:be}),this.player=a(f),this.app=a(S),this.auth=a(ee),this.tabService=a(B),this.unsubscribe=new ie,this.hotkeysService=a(ot),this.router=a(le),this.deferLoadService=a(se),this.settingsStore=a(Pe),this.themeService=a(et),this.injector=a(Re),this.init()}get expandBody(){return!!this.tabService.mainTab.active}ngOnInit(){this.tabService.init(new he(this.tabService.tabs,this.tabContentOutlet(),this.injector))}ngOnDestroy(){this.tabService.dispose(),this.unsubscribe.next(),this.unsubscribe.complete()}init(){this.settingsStore.settingsChange.pipe(re(this.unsubscribe)).subscribe(()=>{this.setTheme()}),this.auth.loaded||this.auth.load().catch(e=>{console.error(e)}),this.router.events.forEach(()=>{this.tabService.switchToMain()}).catch(e=>{console.error(e)}),this.app.standalone=this.isStandaloneWebApp()||this.isElectronApp()||this.isMacGapApp(),this.setTheme(),this.setKeyboardShortcuts(),this.determinateScreen()}isStandaloneWebApp(){return navigator.standalone===!0||globalThis.matchMedia("(display-mode: standalone)").matches}isElectronApp(){return navigator.userAgent.toLowerCase().includes("electron/")}isMacGapApp(){return navigator.userAgent.includes("MacGap")}setTheme(){this.themeService.setTheme(this.app.settings.theme||"dark")}scrollTrack(){this.deferLoadService.notifyScroll({name:"app"})}resize(){this.determinateScreen(),this.tabService.switchToMain()}determinateScreen(){this.app.smallscreen=window.innerHeight<400||window.innerWidth<522}setKeyboardShortcuts(){this.hotkeysService.add(new G(E.playPause.shortcut,()=>(this.player.togglePlayPause(),!1),void 0,E.playPause.name)),this.hotkeysService.add(new G(E.nextTrack.shortcut,()=>(this.player.next(),!1),void 0,E.nextTrack.name)),this.hotkeysService.add(new G(E.previousTrack.shortcut,()=>(this.player.previous(),!1),void 0,E.previousTrack.name)),this.hotkeysService.add(new G(E.volumeUp.shortcut,()=>(this.player.volumeUp(),!1),void 0,E.volumeUp.name)),this.hotkeysService.add(new G(E.forward.shortcut,()=>(this.player.forward(10),!1),void 0,E.forward.name)),this.hotkeysService.add(new G(E.rewind.shortcut,()=>(this.player.rewind(10),!1),void 0,E.rewind.name)),this.hotkeysService.add(new G(E.volumeDown.shortcut,()=>(this.player.volumeDown(),!1),void 0,E.volumeDown.name))}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=g({type:o,selectors:[["body"]],viewQuery:function(t,n){t&1&&W(n.tabContentOutlet,Rn,5,be),t&2&&J()},hostVars:2,hostBindings:function(t,n){t&1&&_("scroll",function(){return n.scrollTrack()},ye)("resize",function(){return n.resize()},ye),t&2&&T("expand",n.expandBody)},decls:5,vars:5,consts:[["tabContentOutlet",""],[1,"header"],[1,"app-content"],[1,"footer"],[1,"mini-player"]],template:function(t,n){t&1&&(u(0,kn,1,0,"app-header",1),s(1,"div",2,0),u(3,In,1,0,"app-player",3),u(4,Ln,1,0,"app-mini-player",4)),t&2&&(P(n.auth.user?0:-1),r(),T("player-active",n.player.currentMedia),r(2),P(n.auth.user?3:-1),r(),P(n.player.currentMedia?4:-1))},dependencies:[qt,Qt,Wt],styles:['[_nghost-%COMP%]{background-color:var(--background);color:var(--on-background);display:flex;flex-direction:column;height:100%;min-height:100%}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{flex:0 0 auto}[_nghost-%COMP%]   .app-content[_ngcontent-%COMP%]{flex:1 1 auto;position:relative;overflow:hidden;height:100%}[_nghost-%COMP%]   .mini-player[_ngcontent-%COMP%]{display:none;text-align:center;width:100%;min-height:60px;height:60px;max-height:60px;position:fixed;left:0;right:0;bottom:0;z-index:10;border-top-width:1px;border-top-style:solid;border-top-color:var(--control-border);background-color:var(--control)}@keyframes _ngcontent-%COMP%_dash{0%{stroke-dashoffset:0}25%{stroke-dashoffset:100}50%{stroke-dashoffset:0}75%{stroke-dashoffset:100}to{stroke-dashoffset:0}}@keyframes _ngcontent-%COMP%_grow{0%{transform:scaleY(1)}15%{transform:scaleY(1.5)}15%{transform:scaleY(1.5)}30%{transform:scaleY(1)}to{transform:scaleY(1)}}[_nghost-%COMP%]   .mini-player[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{vertical-align:middle;padding-bottom:1px}[_nghost-%COMP%]   .mini-player[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .waveform[_ngcontent-%COMP%] > rect[_ngcontent-%COMP%]{fill:var(--on-background)}[_nghost-%COMP%]   .mini-player[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .waveform[_ngcontent-%COMP%] > rect[_ngcontent-%COMP%]:nth-child(2){animation-delay:.25s}[_nghost-%COMP%]   .mini-player[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .waveform[_ngcontent-%COMP%] > rect[_ngcontent-%COMP%]:nth-child(3){animation-delay:.5s}[_nghost-%COMP%]   .mini-player[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .waveform[_ngcontent-%COMP%] > rect[_ngcontent-%COMP%]:nth-child(4){animation-delay:.75s}[_nghost-%COMP%]   .mini-player[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .waveform[_ngcontent-%COMP%] > rect[_ngcontent-%COMP%]:nth-child(5){animation-delay:1s}[_nghost-%COMP%]   .mini-player[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .waveform[_ngcontent-%COMP%] > rect[_ngcontent-%COMP%]:nth-child(6){animation-delay:1.25s}[_nghost-%COMP%]   .mini-player[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .waveform[_ngcontent-%COMP%] > rect[_ngcontent-%COMP%]:nth-child(7){animation-delay:1.5s}[_nghost-%COMP%]   .mini-player[_ngcontent-%COMP%]   .playing[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]   .waveform[_ngcontent-%COMP%] > rect[_ngcontent-%COMP%]{fill:#1ed760;transform-box:fill-box;transform-origin:50% 50%;animation-name:_ngcontent-%COMP%_grow;animation-duration:1.85s;animation-iteration-count:infinite;animation-timing-function:linear}[_nghost-%COMP%]   .mini-player[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:6px;border-width:1px;border-style:solid;padding:7px 15px;text-transform:uppercase;letter-spacing:1px;font-size:11px;line-height:11px;cursor:pointer;overflow:hidden;position:relative;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .mini-player[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:before{position:absolute;content:"";top:0;left:0;width:0;height:100%;transition:width 20ms ease;z-index:0;background-color:#fff3}[_nghost-%COMP%]   .mini-player[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:before{width:100%}[_nghost-%COMP%]   .mini-player[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--control);border-color:var(--control);color:var(--on-control);flex:1}[_nghost-%COMP%]   .mini-player[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{border-color:var(--control-active)}@media(max-width:522px){.expand[_nghost-%COMP%]{height:auto;overflow-y:auto}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{position:fixed;left:0;right:0;top:0;z-index:10}[_nghost-%COMP%]   .app-content[_ngcontent-%COMP%]{margin-top:60px;height:auto;min-height:calc(100% - 120px)}[_nghost-%COMP%]   .app-content.player-active[_ngcontent-%COMP%]{margin-bottom:60px}[_nghost-%COMP%]   .mini-player[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .footer[_ngcontent-%COMP%]{display:none}}']})}}return o})();var Zt=(()=>{class o{canDeactivate(e){return e.canDeactivate()?!0:confirm("WARNING: You have unsaved changes. Press Cancel to go back and save these changes, or OK to lose these changes.")}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275prov=Y({token:o,factory:o.\u0275fac})}}return o})();var $n=new Ne("window",{providedIn:"root",factory:()=>globalThis}),en=(()=>{class o extends ae{static{this.localStorageName="jam.auth"}constructor(){super(),this.clientDomain=void 0,this.forceSessionUsage=!1,this.localstorage=a(me),this.userStorage=a(ge),this.app=a(S),this.window=a($n);let e=this.app,t=this.window;this.clientName=e.name,this.clientDomain=t.location.origin}domain(){return this.clientDomain??""}fromStorage(){return K(this,null,function*(){return this.localstorage.get(o.localStorageName)})}toStorage(e){return K(this,null,function*(){this.localstorage.set(o.localStorageName,e)})}userChangeNotify(e){return K(this,null,function*(){this.userStorage.notifyUserChange(e)})}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275prov=Y({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var tn=(()=>{class o{constructor(){this.title=a(We),this.titles=[],this.app=a(S),this.player=a(f),this.unsubscribe=new ie,this.router=a(le),this.route=a(_t),this.router.events.pipe(xe(e=>e instanceof pt),re(this.unsubscribe)).subscribe(()=>{this.titles=[];let e=t=>{let n=t.snapshot.data;if(n.name)this.titles.push(n.name);else if(n.names){let i=n.names.find(d=>d.id===t.snapshot.params.id);i&&this.titles.push(i.name)}else{let i=t.snapshot.paramMap.get("name");i&&this.titles.push(i)}for(let i of t.children)e(i)};for(let t of this.route.children)e(t);this.titles.push(this.app.name),this.app.settings.playingTrackInTitle||this.refreshTitle()}),this.player.on(R.FINISH,()=>{this.refreshTitle()}),this.player.on(R.TRACK,e=>{this.app.settings.playingTrackInTitle&&(e?this.refreshTitleSong(e):this.refreshTitle())})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}refreshTitleSong(e){let t=`${e.tag?.title??"Unknown Title"} - ${e.tag?.artist??"Unknown Artist"} \u2022 ${this.app.name}`;this.title.setTitle(t)}refreshTitle(){this.title.setTitle(this.titles.join(" \u2022 "))}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275prov=Y({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();Je.production&&void 0;Fe(Jt,{providers:[Xe(),we(je,tt,nt.forRoot({provide:ae,useFactory:Ut,deps:[en]}),it.forRoot(),lt.forRoot(),_e.forRoot({autoFocus:!0}),st,at,Ht),Ct,Zt,Bt,f,B,vt,tn,S,ct,Lt,me,ge,se,gt,de,Ot,w,oe,pe,bt,yt,Pe,Et,Yt(),qe(Qe(),Ke()),...Ze(Dt)]}).catch(o=>{console.error(o)});
