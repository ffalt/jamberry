"use strict";(self.webpackChunkjamberry=self.webpackChunkjamberry||[]).push([[587],{2587:(en,u,a)=>{a.r(u),a.d(u,{UserModule:()=>tn});var p=a(177),l=a(4341),U=a(5015),n=a(4438);let T=(()=>{class s{static \u0275fac=function(o){return new(o||s)};static \u0275cmp=n.VBU({type:s,selectors:[["app-user"]],decls:5,vars:0,consts:[[1,"left"],[1,"split-pane-divider-left"],["role","main",1,"middle"]],template:function(o,e){1&o&&(n.j41(0,"aside",0),n.nrm(1,"app-user-sidebar"),n.k0s(),n.nrm(2,"app-splitter",1),n.j41(3,"main",2),n.nrm(4,"router-outlet"),n.k0s())},styles:["[_nghost-%COMP%]{width:100%;height:100%;flex:1;display:flex;flex-flow:row nowrap;overflow:hidden;align-items:flex-start;align-content:flex-start}[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:15%;height:100%}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{width:60%;flex-grow:1;height:100%}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{width:25%;height:100%}@media (max-width: 1600px){[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:20%}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{width:55%;flex-grow:1;height:100%}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{width:25%;height:100%}}@media (max-width: 1400px){[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:25%}[_nghost-%COMP%]   .right[_ngcontent-%COMP%], [_nghost-%COMP%]   .split-pane-divider-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 768px){[_nghost-%COMP%]{overflow:auto;flex-flow:row wrap}[_nghost-%COMP%]   app-splitter[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:100%!important;height:auto}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{height:auto}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{width:100%!important;height:auto}}@media (max-width: 522px){[_nghost-%COMP%]{overflow:hidden;height:auto}}"]})}return s})();var E=a(6499),h=a(9476),c=a(6879),d=a(1312),f=a(9359);const G=(s,g)=>g.session.id;function b(s,g){if(1&s){const t=n.RV6();n.j41(0,"div",8)(1,"div",9),n.EFF(2),n.nrm(3,"br"),n.j41(4,"span"),n.EFF(5),n.k0s()(),n.j41(6,"div",10),n.EFF(7),n.nrm(8,"br"),n.EFF(9),n.k0s(),n.j41(10,"div",11)(11,"span",12),n.pXf(12,1),n.k0s(),n.nrm(13,"br"),n.EFF(14),n.nI1(15,"date"),n.k0s(),n.j41(16,"div",13)(17,"button",14),n.bIt("click",function(){const e=n.eBV(t).$implicit,i=n.XpG(2);return n.Njj(i.remove(e.session))}),n.nrm(18,"i",15),n.k0s()()()}if(2&s){const t=g.$implicit;n.AVh("invalid",t.isExpired),n.R7$(2),n.SpI(" ",t.session.client,""),n.R7$(3),n.JRh(t.session.mode),n.R7$(2),n.SpI(" ",t.session.agent,""),n.R7$(2),n.SpI(" ",t.session.os," "),n.R7$(5),n.SpI(" ",n.i5U(15,7,t.session.expires,"long")," ")}}function v(s,g){if(1&s&&(n.j41(0,"div",4)(1,"div",5)(2,"div",6),n.pXf(3,0),n.k0s(),n.Z7z(4,b,19,10,"div",7,G),n.k0s()()),2&s){const t=n.XpG();n.R7$(4),n.Dyx(t.sessions)}}let x=(()=>{class s{jam;auth;notify;sessions;constructor(t,o,e){this.jam=t,this.auth=o,this.notify=e}ngOnInit(){this.auth.isLoggedIn()&&this.refresh()}remove(t){const o=t.id;this.jam.session.remove({id:o}).then(()=>{this.sessions&&(this.sessions=this.sessions.filter(e=>e.session.id!==o)),this.notify.success("Session Login removed")}).catch(e=>{this.notify.error(e)})}refresh(){this.jam.session.list().then(t=>{this.sessions=t.map(o=>({session:o,isExpired:(o.expires||0)<Date.now()}))}).catch(t=>{this.notify.error(t)})}static \u0275fac=function(o){return new(o||s)(n.rXU(c.UA),n.rXU(c.Wc),n.rXU(d.FL))};static \u0275cmp=n.VBU({type:s,selectors:[["app-sessions-page"]],decls:3,vars:1,consts:()=>{let t,o,e,i;return t=$localize`:␟ce54b0509275b0551de870b805c1bb5c426d723f␟877974575580185933:Session Logins`,o=$localize`:␟2744dff891981e67dd84e3a8ceb430704b86ed6a␟721963055036507192:Sessions`,e=$localize`:␟a881e543b0df3a9620cb65a5e6da992c3f38382e␟1021529107572383199:Remove this login`,i=$localize`:␟7ebcbdc49ec3e6c6354f788704a3b4fb5649b74b␟7222262636210875388:valid until:`,[o,i,[1,"sessions"],["section",t],[1,"content"],[1,"session-list"],[1,"section-title"],[1,"session",3,"invalid"],[1,"session"],[1,"title"],[1,"agent"],[1,"expires"],[1,"label"],[1,"remove"],["title",e,3,"click"],["aria-hidden","true",1,"icon-remove"]]},template:function(o,e){1&o&&(n.j41(0,"div",2),n.nrm(1,"app-view-header-slim",3),n.DNE(2,v,6,0,"div",4),n.k0s()),2&o&&(n.R7$(2),n.vxM(2,e.sessions?2:-1))},dependencies:[f.w,p.vh],styles:['[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap;-webkit-user-select:none;user-select:none;width:100%;padding-top:5px;background-color:var(--background);color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{min-height:48px;display:flex;flex-flow:row nowrap;align-items:center;align-content:space-evenly;width:100%;padding:10px;line-height:1.25em;margin-bottom:1px;border-top-width:1px;border-top-style:solid;border-bottom-width:0;border-bottom-style:solid;border-bottom-color:var(--background-border);border-top-color:var(--background-border)}@media (max-width: 1000px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{height:auto}}@media (max-width: 522px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{font-size:.9em}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]:last-child{border-bottom-width:1px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .small-screen-icon[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--on-background);font-size:.8em}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;display:inline-block;margin:0 10px 0 0}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.8em;vertical-align:middle}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a.title-link[_ngcontent-%COMP%]{font-size:inherit;margin-right:10px;color:var(--on-background-highlight)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{width:0;margin-left:0;cursor:move}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]{display:inline-block;width:26px;height:8px;transform:rotate(90deg);margin-left:-8px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%], [_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]:before{background-image:radial-gradient(#7b7b7b 40%,transparent 40%);background-size:4px 4px;background-position:0 100%;background-repeat:repeat-x}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]:before{content:"";display:block;width:100%;height:33%}@media (max-width: 1000px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{height:auto;min-height:48px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-left:0}}@media (max-width: 400px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{flex-flow:row wrap;align-items:inherit;width:100%;font-size:.9em}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .small-screen-icon[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{order:2;width:25%;text-align:center}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]{transform:rotate(0)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{order:6;margin-left:0;margin-right:0;padding-right:0;padding-left:0;width:100%}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:0;margin-right:0;padding-right:0;padding-left:0;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;margin-left:0;margin-right:0;overflow:hidden;text-overflow:ellipsis}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%]{font-size:.8em;flex-grow:1;padding-right:10px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{width:260px;font-size:.8em;padding-right:10px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--on-background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:10px;width:140px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.7em;text-transform:uppercase}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session.invalid[_ngcontent-%COMP%]{color:var(--on-control-ambient-disabled)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session.invalid[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{color:var(--accent)}@media (max-width: 400px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%], [_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{order:0;width:calc(100% - 30px)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{order:1}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%]{order:2}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{order:3}}']})}return s})();var $=a(7733);const y=(s,g)=>g.name;function I(s,g){if(1&s){const t=n.RV6();n.j41(0,"label",10)(1,"input",14),n.mxI("ngModelChange",function(e){n.eBV(t);const i=n.XpG();return n.DH7(i.app.settings.theme,e)||(i.app.settings.theme=e),n.Njj(e)}),n.bIt("ngModelChange",function(){n.eBV(t);const e=n.XpG();return n.Njj(e.onChange())}),n.k0s(),n.EFF(2),n.nI1(3,"titlecase"),n.k0s()}if(2&s){const t=g.$implicit,o=n.XpG();n.R7$(),n.Y8G("value",t.name),n.R50("ngModel",o.app.settings.theme),n.R7$(),n.JRh(n.bMT(3,3,t.name))}}let L=(()=>{class s{router;app;settings;player;themes=$.q_.themes;public;constructor(t,o,e,i){this.router=t,this.app=o,this.settings=e,this.player=i}onChange(){this.settings.applySettings()}static \u0275fac=function(o){return new(o||s)(n.rXU(E.Ix),n.rXU(d.d3),n.rXU(d.y),n.rXU(d.xt))};static \u0275cmp=n.VBU({type:s,selectors:[["app-page-settings"]],decls:25,vars:3,consts:()=>{let t,o,e,i,_,C,S,O,r;return t=$localize`:␟121cc5391cd2a5115bc2b3160379ee5b36cd7716␟4930506384627295710:Settings`,o=$localize`:␟8ba4f3fada9c0278b12e5dc72b25a9213a41f73e␟2696427906168966769:Show Waveform of Current Track`,e=$localize`:␟09775f315171df8237e648a015ef8d926da48748␟4046137991643846566:Show Notifications On Tracks Change`,i=$localize`:␟b307e817a013c5009ff98f7645834d503869db50␟8198980433602946702:Design`,_=$localize`:␟59bdc3dfa4075f92c734588899485db702c8f120␟7683705529753923369:Player`,C=$localize`:␟8ba4f3fada9c0278b12e5dc72b25a9213a41f73e␟2696427906168966769:Show Waveform of Current Track`,S=$localize`:␟7096fbcea9ef94e1ae3e68c75250b6c9bd78b1bb␟3015012963934645778:Playing`,O=$localize`:␟b9c15b2fd4b6fab0a947d1cf0843c3e1ed1cebf3␟2706303691969065868:Show Playing Track Name in Window Title`,r=$localize`:␟c4c1ee09a557adee6dd31c26dc1dc03fc106dffe␟3955518524911882320:Show Notification Popup On Track Change`,[i,_,C,S,O,r,[1,"settings"],["section",t],[1,"content"],[1,"section-title"],[1,"select"],["type","checkbox","title",o,3,"ngModelChange","ngModel"],["type","checkbox","value","1",3,"ngModelChange","ngModel"],["type","checkbox","value","1","title",e,3,"ngModelChange","ngModel"],["type","radio","name","theme",3,"ngModelChange","value","ngModel"]]},template:function(o,e){1&o&&(n.j41(0,"div",6),n.nrm(1,"app-view-header-slim",7),n.j41(2,"div",8)(3,"div",9),n.pXf(4,0),n.k0s(),n.j41(5,"div")(6,"fieldset"),n.Z7z(7,I,4,5,"label",10,y),n.k0s()(),n.j41(9,"div",9),n.pXf(10,1),n.k0s(),n.j41(11,"label")(12,"input",11),n.mxI("ngModelChange",function(_){return n.DH7(e.app.settings.showWaveform,_)||(e.app.settings.showWaveform=_),_}),n.bIt("ngModelChange",function(){return e.onChange()}),n.k0s(),n.qex(13),n.pXf(14,2),n.bVm(),n.k0s(),n.j41(15,"div",9),n.pXf(16,3),n.k0s(),n.j41(17,"label")(18,"input",12),n.mxI("ngModelChange",function(_){return n.DH7(e.app.settings.playingTrackInTitle,_)||(e.app.settings.playingTrackInTitle=_),_}),n.bIt("ngModelChange",function(){return e.onChange()}),n.k0s(),n.qex(19),n.pXf(20,4),n.bVm(),n.k0s(),n.j41(21,"label")(22,"input",13),n.mxI("ngModelChange",function(_){return n.DH7(e.app.settings.notificationSong,_)||(e.app.settings.notificationSong=_),_}),n.bIt("ngModelChange",function(){return e.onChange()}),n.k0s(),n.qex(23),n.pXf(24,5),n.bVm(),n.k0s()()()),2&o&&(n.R7$(7),n.Dyx(e.themes),n.R7$(5),n.R50("ngModel",e.app.settings.showWaveform),n.R7$(6),n.R50("ngModel",e.app.settings.playingTrackInTitle),n.R7$(4),n.R50("ngModel",e.app.settings.notificationSong))},dependencies:[l.me,l.Zm,l.Fm,l.BC,l.vS,f.w,p.PV],styles:["[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;padding-bottom:15px;color:var(--on-background)}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-top:-1px;display:inline-block;vertical-align:middle}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{margin-bottom:15px;width:auto;display:inline}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label.select[_ngcontent-%COMP%]{width:auto;padding-top:4px;padding-bottom:4px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label.select[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:10px}"]})}return s})();var P=a(3132),A=a(3564),k=a(6695);let X=(()=>{class s{jam;auth;notify;base=[];favorites=[];played=[];constructor(t,o,e){this.jam=t,this.auth=o,this.notify=e}ngOnInit(){this.auth.isLoggedIn()&&this.refresh()}refresh(){this.jam.stats.user().then(t=>{this.favorites=s.buildStats(t.favorite,"/favorites"),this.played=s.buildStats(t.played,"/recently-played"),this.base=(0,A.sc)([{text:"Bookmarks",link:"/library/bookmarks",value:t.bookmark},{text:"Playlists",link:"/library/playlists",value:t.playlist}],!0)}).catch(t=>{this.notify.error(t)})}static buildStats(t,o=""){return(0,A.sc)([{text:"Artists",link:"artists",value:t.artistTypes.album},...[{type:(0,P.xs)(c._m.album),value:t.albumTypes.album},{type:(0,P.xs)(c._m.compilation),value:t.albumTypes.compilation}].map(e=>({text:e.type?.text,link:`${e.type?.id}`,value:e.value})),{text:"Series",link:"series",value:t.series},...[{type:(0,P.xs)(c._m.audiobook),value:t.albumTypes.audiobook},{type:(0,P.xs)(c._m.soundtrack),value:t.albumTypes.soundtrack},{type:(0,P.xs)(c._m.live),value:t.albumTypes.live},{type:(0,P.xs)(c._m.bootleg),value:t.albumTypes.bootleg},{type:(0,P.xs)(c._m.ep),value:t.albumTypes.ep},{type:(0,P.xs)(c._m.single),value:t.albumTypes.single}].map(e=>({text:e.type?.text,link:`${e.type?.id}`,value:e.value})),{text:"Folders",link:"folders",value:t.folder},{text:"Tracks",link:"tracks",value:t.track}].map(e=>({...e,link:`/library/${e.link}${o}`})))}static \u0275fac=function(o){return new(o||s)(n.rXU(c.UA),n.rXU(c.Wc),n.rXU(d.FL))};static \u0275cmp=n.VBU({type:s,selectors:[["app-user-stats"]],decls:9,vars:3,consts:()=>{let t,o,e;return t=$localize`:␟299f97b8ee9c62d45f2cc01961aa1e5101d6d05a␟4088311569349098646:Stats`,o=$localize`:␟0add707baf7b167d0c0e9cdeb80f946aa1bd2223␟4085930761302974863:Favorites`,e=$localize`:␟73565b2d231303b7ff6f28663a72abb1b3bd1890␟7754730602038897709:Played`,[t,o,e,[1,"section-title"],[3,"stats"]]},template:function(o,e){1&o&&(n.j41(0,"div",3),n.pXf(1,0),n.k0s(),n.nrm(2,"app-stats",4),n.j41(3,"div",3),n.pXf(4,1),n.k0s(),n.nrm(5,"app-stats",4),n.j41(6,"div",3),n.pXf(7,2),n.k0s(),n.nrm(8,"app-stats",4)),2&o&&(n.R7$(2),n.Y8G("stats",e.base),n.R7$(3),n.Y8G("stats",e.favorites),n.R7$(3),n.Y8G("stats",e.played))},dependencies:[k.x],styles:["[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-top:15px;margin-bottom:10px;color:var(--on-control-ambient)}"]})}return s})();a(1626);var m=a(9589),w=a(1413),D=a(6977),j=a(801);function z(s,g){1&s&&n.nrm(0,"i",7)}function F(s,g){1&s&&(n.j41(0,"span"),n.pXf(1,2),n.k0s())}let V=(()=>{class s{app;auth;jam;notify;refreshRandom;refreshing=!1;unsubscribe=new w.B;constructor(t,o,e,i){this.app=t,this.auth=o,this.jam=e,this.notify=i,this.refreshRandom=(0,m.D)()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}onDropFile(t){t.preventDefault(),this.uploadFile(t.dataTransfer?.files)}onDragOverFile(t){t.stopPropagation(),t.preventDefault()}selectFile(t){this.uploadFile(t.target.files)}uploadFile(t){t&&0!==t.length&&this.auth.user&&this.jam.user.uploadUserImage({id:this.auth.user.id},t[0]).pipe((0,D.Q)(this.unsubscribe)).subscribe(e=>{},e=>{this.notify.error(e)},()=>{this.refreshRandom=(0,m.D)(),this.notify.success("Upload done")})}randomAvatar(){this.refreshing||!this.auth.user||(this.refreshing=!0,this.jam.user.generateUserImage({id:this.auth.user.id}).then(()=>{this.refreshing=!1,this.refreshRandom=(0,m.D)(),this.notify.success("Image randomized")}).catch(t=>{this.refreshing=!1,this.notify.error(t)}))}static \u0275fac=function(o){return new(o||s)(n.rXU(d.d3),n.rXU(c.Wc),n.rXU(c.UA),n.rXU(d.FL))};static \u0275cmp=n.VBU({type:s,selectors:[["app-user-avatar"]],decls:11,vars:6,consts:()=>{let t,o,e,i;return t=$localize`:␟d833321cc90a0b0a52714c6d5ec97fbe6c7cfa5c␟2501989539336327542:Upload image`,o=$localize`:␟0966612784a5dcf0e05406cebe6e47c69999665a␟4001363701577936593: Drag an Image File here `,e=$localize`:␟3a2a9bb12d904f3dd84e42cfad37afef4a6b35f6␟3825771792569625715:Choose a file`,i=$localize`:␟c1ba8ac278d9bdb189e23866675d475089dce2ae␟4360279154190126867:Random Image`,[o,e,i,[1,"drop-zone",3,"drop","dragover"],[1,"placeholder"],[3,"coverArtObj","size","round","refreshRandom"],[1,"button-primary",3,"click"],[1,"icon-spin","icon-spinner"],["id","file","type","file","placeholder",t,"accept",".png,.jpeg,.jpg",1,"inputfile",3,"change"],["for","file",1,"button-primary"]]},template:function(o,e){1&o&&(n.j41(0,"div",3),n.bIt("drop",function(_){return e.onDropFile(_)})("dragover",function(_){return e.onDragOverFile(_)}),n.j41(1,"div",4),n.pXf(2,0),n.k0s(),n.nrm(3,"app-coverart-image",5),n.j41(4,"button",6),n.bIt("click",function(){return e.randomAvatar()}),n.DNE(5,z,1,0,"i",7)(6,F,2,0,"span"),n.k0s(),n.j41(7,"form")(8,"input",8),n.bIt("change",function(_){return e.selectFile(_)}),n.k0s(),n.j41(9,"label",9),n.pXf(10,1),n.k0s()()()),2&o&&(n.R7$(3),n.Y8G("coverArtObj",e.auth.user)("size",100)("round",!0)("refreshRandom",e.refreshRandom),n.R7$(2),n.vxM(5,e.refreshing?5:-1),n.R7$(),n.vxM(6,e.refreshing?-1:6))},dependencies:[l.qT,l.cb,l.cV,j.P],styles:["[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]{vertical-align:bottom;display:inline-block;min-width:220px;min-height:140px;border-width:2px;margin-bottom:15px;margin-right:15px;border-style:dotted;border-color:var(--secondary);padding-left:15px;padding-right:15px;padding-bottom:15px;text-align:center}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   app-coverart-image[_ngcontent-%COMP%]{margin:0 auto 10px}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .inputfile[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:10px;min-width:80%;display:inline-block}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:inline-block;min-width:80%}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;display:block}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{width:100%;padding-top:15px;padding-bottom:15px;text-align:center;color:var(--on-control-ambient);font-size:.8em;text-transform:uppercase}"]})}return s})();function B(s,g){1&s&&(n.j41(0,"div"),n.nrm(1,"i",16),n.qex(2),n.pXf(3,3),n.bVm(),n.k0s())}function W(s,g){1&s&&(n.j41(0,"div"),n.nrm(1,"i",16),n.qex(2),n.pXf(3,4),n.bVm(),n.k0s())}function H(s,g){1&s&&(n.j41(0,"div"),n.nrm(1,"i",16),n.qex(2),n.pXf(3,5),n.bVm(),n.k0s())}function Y(s,g){1&s&&(n.j41(0,"div"),n.nrm(1,"i",16),n.qex(2),n.pXf(3,6),n.bVm(),n.k0s())}function J(s,g){if(1&s&&(n.j41(0,"div",14)(1,"div",12),n.pXf(2,2),n.k0s(),n.j41(3,"div",15),n.DNE(4,B,4,0,"div")(5,W,4,0,"div")(6,H,4,0,"div")(7,Y,4,0,"div"),n.k0s()()),2&s){const t=n.XpG(2);n.R7$(4),n.vxM(4,t.auth.user.roles.stream?4:-1),n.R7$(),n.vxM(5,t.auth.user.roles.podcast?5:-1),n.R7$(),n.vxM(6,t.auth.user.roles.upload?6:-1),n.R7$(),n.vxM(7,t.auth.user.roles.admin?7:-1)}}function Z(s,g){if(1&s&&(n.j41(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12),n.pXf(4,0),n.k0s(),n.nrm(5,"app-user-avatar"),n.k0s(),n.j41(6,"div",13)(7,"div",14)(8,"div",12),n.pXf(9,1),n.k0s(),n.j41(10,"div"),n.EFF(11),n.k0s()(),n.DNE(12,J,8,4,"div",14),n.k0s()(),n.j41(13,"div",14),n.nrm(14,"app-user-stats"),n.k0s()()),2&s){const t=n.XpG();n.R7$(11),n.JRh(t.auth.user.name),n.R7$(),n.vxM(12,t.auth.user&&t.auth.user.roles?12:-1)}}const N=[{path:"",component:T,children:[{path:"",pathMatch:"full",component:(()=>{class s{auth;constructor(t){this.auth=t}static \u0275fac=function(o){return new(o||s)(n.rXU(c.Wc))};static \u0275cmp=n.VBU({type:s,selectors:[["app-user-page"]],decls:3,vars:1,consts:()=>{let t,o,e,i,_,C,S,O;return t=$localize`:␟e08a77594f3d89311cdf6da5090044270909c194␟2392488717875840729:User`,o=$localize`:␟cebb7f27b5028c62b4426da3bb3e3bd3f4a3443b␟6525109356951792180:Avatar`,e=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,i=$localize`:␟70f45880fce6ac5d8e468e25e82aefbba8098cfe␟7314814725704332646:Permissions`,_=$localize`:␟0c1153af20b06ee1f31e7d07eebfada81b9a19b2␟7231504695490320052:Stream Audio`,C=$localize`:␟f47ba1cd01c3dfd801fe7f66c3d28d698dcc0479␟1291164613191345064:Manage Podcasts`,S=$localize`:␟7876f698ec2db992452b14bd66e0ed1261d890e8␟5793950743388475134:Upload Audio`,O=$localize`:␟76046fa6f13fb0524ca1d3777247ab13d73660c8␟2210415377969858551:Server Administration`,[o,e,i,_,C,S,O,[1,"user"],["section",t],[1,"content"],[1,"row"],[1,"column","first"],[1,"section-title"],[1,"column"],[1,"section"],[1,"roles"],[1,"icon-checkmark"]]},template:function(o,e){1&o&&(n.j41(0,"div",7),n.nrm(1,"app-view-header-slim",8),n.DNE(2,Z,15,2,"div",9),n.k0s()),2&o&&(n.R7$(2),n.vxM(2,e.auth.user?2:-1))},dependencies:[f.w,X,V],styles:["[_nghost-%COMP%]   .user[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{padding-bottom:30px}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:5px}@media (max-width: 400px){[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{flex-direction:column}}"]})}return s})(),canActivate:[h.HU],data:{name:"User"}},{path:"settings",component:L,canActivate:[h.HU],data:{name:"Settings"}},{path:"sessions",component:x,canActivate:[h.HU],data:{name:"Sessions",icon:"icon-laptop"}}]}],Q=E.iI.forChild(N);var K=a(3539);let q=(()=>{class s{sections=[];constructor(){const o=(N[0]?.children||[]).filter(i=>i.path&&i.path.length>0&&i.data?.name).map(i=>({name:i.data?i.data.name:"",icon:i.data&&i.data.icon?i.data.icon:"icon-admin",link:`/user/${i.data?.link?i.data.link:i.path}`}));this.sections=[{name:"User",entries:[{name:"Profile",icon:"icon-user",link:"/user",options:{exact:!0}}].concat(o)}]}static \u0275fac=function(o){return new(o||s)};static \u0275cmp=n.VBU({type:s,selectors:[["app-user-sidebar"]],decls:1,vars:1,consts:[[3,"sections"]],template:function(o,e){1&o&&n.nrm(0,"app-sidebar",0),2&o&&n.Y8G("sections",e.sections)},dependencies:[K.k],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block}"]})}return s})();var nn=a(7311);let tn=(()=>{class s{static \u0275fac=function(o){return new(o||s)};static \u0275mod=n.$C({type:s});static \u0275inj=n.G2t({imports:[l.YN,U.G,p.MD,Q]})}return s})();n.wjB(T,function(){return[nn.H,E.n3,q]},[])}}]);