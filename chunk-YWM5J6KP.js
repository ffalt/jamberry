import{a as k}from"./chunk-PVVJLI4O.js";import"./chunk-JNPRJ3MQ.js";import{a as ge}from"./chunk-6T4XJRB7.js";import{a as Me}from"./chunk-NV464EDQ.js";import{a as Te}from"./chunk-6WAGYCOA.js";import{a as Ce}from"./chunk-N2K5OS3Y.js";import"./chunk-24DMSAFT.js";import{c as oe,d as ne,e as ie,f as _e,g as re,h as ae,j as le,o as se}from"./chunk-Y5Z5ITNC.js";import"./chunk-DYCPZPVS.js";import{a as ce,b as Oe}from"./chunk-BNP52TDG.js";import"./chunk-F6BYEP4R.js";import"./chunk-VP6KNDS4.js";import{k as w}from"./chunk-AQDYGNZB.js";import"./chunk-4HNSRH53.js";import{G as B}from"./chunk-ZVKVGF76.js";import{k as de}from"./chunk-T6GM3CFW.js";import{Ac as L,Fc as V,Hb as u,Ib as P,Ic as Y,Kc as Z,Lb as q,Mb as J,Nb as g,Ob as a,Pb as _,Qb as T,Ub as R,Vb as f,Vc as ee,Vd as v,Y as U,_b as x,ab as s,ac as d,dc as S,e as A,fc as l,ia as p,k as H,na as O,nb as h,oa as C,tc as y,td as te,uc as D,vc as Q,wd as G,yc as E,zc as I}from"./chunk-H2EXZDP6.js";var Se=()=>({standalone:!0});function pe(n,r){if(n&1){let i=x();a(0,"form")(1,"div",7)(2,"label",8),d(3,0),_(),a(4,"input",9),L("ngModelChange",function(e){O(i);let t=l();return I(t.edit.name,e)||(t.edit.name=e),C(e)}),_()(),a(5,"div",7)(6,"label",10),d(7,1),_(),a(8,"input",11),L("ngModelChange",function(e){O(i);let t=l();return I(t.edit.path,e)||(t.edit.path=e),C(e)}),_()(),a(9,"div",7)(10,"label",12),d(11,2),_(),a(12,"fieldset",13)(13,"label",14)(14,"input",15),L("ngModelChange",function(e){O(i);let t=l();return I(t.edit.strategy,e)||(t.edit.strategy=e),C(e)}),_(),R(15),d(16,3),f(),_(),a(17,"label",14)(18,"input",15),L("ngModelChange",function(e){O(i);let t=l();return I(t.edit.strategy,e)||(t.edit.strategy=e),C(e)}),_(),R(19),d(20,4),f(),_(),a(21,"label",14)(22,"input",15),L("ngModelChange",function(e){O(i);let t=l();return I(t.edit.strategy,e)||(t.edit.strategy=e),C(e)}),_(),R(23),d(24,5),f(),_(),a(25,"label",14)(26,"input",15),L("ngModelChange",function(e){O(i);let t=l();return I(t.edit.strategy,e)||(t.edit.strategy=e),C(e)}),_(),R(27),d(28,6),f(),_()()()()}if(n&2){let i=l();s(4),g("ngModelOptions",V(12,Se)),E("ngModel",i.edit.name),s(4),g("ngModelOptions",V(13,Se)),E("ngModel",i.edit.path),s(6),g("value",i.RootScanStrategy.auto),E("ngModel",i.edit.strategy),s(4),g("value",i.RootScanStrategy.artistalbum),E("ngModel",i.edit.strategy),s(4),g("value",i.RootScanStrategy.compilation),E("ngModel",i.edit.strategy),s(4),g("value",i.RootScanStrategy.audiobook),E("ngModel",i.edit.strategy)}}var X=(()=>{let r=class r{constructor(){this.RootScanStrategy=v}dialogInit(o,e){this.edit=e.data}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=h({type:r,selectors:[["app-dialog-root"]],decls:1,vars:1,consts:()=>{let o;o=$localize`:␟ddfade2974824bcfebc98d94ccca4f02a52a5e65␟2965783636506266611:Root name`;let e;e=$localize`:␟766c66ad5cc981c531aaf3fe3a2a7a346ddc8d83␟8911059720204770105:Path`;let t;t=$localize`:␟1236bc5dce6e5821e26178cec6dc8d6994036e10␟1620750203195539416:Scan Strategy`;let c;c=$localize`:␟5fb13fb4a8447e59cdf05dc196ade39c02a6f8aa␟616064537937996961:Auto`;let N;N=$localize`:␟88f9a766c7fa0449925eb62ba3acba24e86312f3␟9062842966881378285:Artist/Album`;let b;b=$localize`:␟1120f45b24301f0a6a137929f189c3b51e4038ae␟5240807861057959896:Compilations`;let $;return $=$localize`:␟ec1bae0fe9a2b7e56d8f8473a9ffced030abc60b␟7565550399152163566:Audiobook`,[o,e,t,c,N,b,$,[1,"root-form-control"],["for","root-name"],["id","root-name","type","text",3,"ngModelChange","ngModelOptions","ngModel"],["for","root-path"],["id","root-path","type","text",3,"ngModelChange","ngModelOptions","ngModel"],["for","strategy"],["id","strategy"],[1,"select"],["type","radio","name","strategy",3,"ngModelChange","value","ngModel"]]},template:function(e,t){e&1&&u(0,pe,29,14,"form"),e&2&&P(t.edit?0:-1)},dependencies:[se,ae,oe,le,ne,ie,re,_e],styles:["[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;line-height:1.3em;padding:5px;min-width:300px}[_nghost-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:5px}[_nghost-%COMP%]   .root-form-control[_ngcontent-%COMP%]{margin-bottom:8px;display:block}[_nghost-%COMP%]   .select[_ngcontent-%COMP%]{margin-right:15px;display:block;font-size:.8em;line-height:1.5em}"]});let n=r;return n})();var Re=(n,r)=>r.id;function fe(n,r){if(n&1&&(a(0,"span",28),R(1),d(2,5),f(),T(3,"br"),y(4),_()),n&2){let i=l(2).$implicit;s(4),D(i.status.error)}}function ue(n,r){n&1&&(R(0),d(1,6),f())}function Pe(n,r){if(n&1&&(R(0),d(1,7),f(),T(2,"br"),y(3),Y(4,"date")),n&2){let i=l(3).$implicit;s(3),Q("",Z(4,1,i.status.lastScan,"medium")," ")}}function Ee(n,r){if(n&1&&(a(0,"span"),u(1,ue,2,0,"ng-container")(2,Pe,5,4),_()),n&2){let i=l(2).$implicit;s(),P(i.status.scanning?1:2)}}function Ie(n,r){if(n&1&&u(0,fe,5,1,"span",28)(1,Ee,3,1,"span"),n&2){let i=l().$implicit;P(i.status.error?0:1)}}function Le(n,r){n&1&&(a(0,"span"),d(1,8),_())}function Ae(n,r){if(n&1){let i=x();a(0,"tr",18),S("dblclick",function(){let e=O(i).$implicit,t=l(3);return C(t.editRoot(e))})("keydown.enter",function(){let e=O(i).$implicit,t=l(3);return C(t.editRoot(e))}),a(1,"td",12),y(2),_(),a(3,"td",13),y(4),_(),a(5,"td",14),y(6),_(),a(7,"td",15),u(8,Ie,2,1)(9,Le,2,0,"span"),_(),a(10,"td",16)(11,"div",19)(12,"button",20),S("click",function(){let e=O(i).$implicit,t=l(3);return C(t.refreshRoot(e))}),T(13,"i",21),_(),a(14,"button",22),S("click",function(){let e=O(i).$implicit,t=l(3);return C(t.refreshRootMeta(e))}),T(15,"i",23),_(),a(16,"button",24),S("click",function(){let e=O(i).$implicit,t=l(3);return C(t.editRoot(e))}),T(17,"i",25),_(),a(18,"button",26),S("click",function(){let e=O(i).$implicit,t=l(3);return C(t.deleteRoot(e))}),T(19,"i",27),_()()()()}if(n&2){let i=r.$implicit;s(2),D(i.name),s(2),D(i.path),s(2),D(i.strategy),s(2),P(i.status?8:9)}}function he(n,r){if(n&1&&(a(0,"table",10)(1,"tr",11)(2,"td",12),d(3,0),_(),a(4,"td",13),d(5,1),_(),a(6,"td",14),d(7,2),_(),a(8,"td",15),d(9,3),_(),a(10,"td",16),d(11,4),_()(),q(12,Ae,20,4,"tr",17,Re),_()),n&2){let i=l();s(12),J(i)}}function ye(n,r){n&1&&u(0,he,14,0,"table",10),n&2&&P(r.length>0?0:-1)}var me=(()=>{let r=class r{constructor(){this.roots=ee([]),this.notify=p(B),this.dialogs=p(Ce),this.rootService=p(k),this.dialogOverlay=p(w)}refreshRoot(o){this.rootService.rescanRoot(o)}refreshRootMeta(o){this.rootService.refreshRootMeta(o)}editRoot(o){let e={root:o,name:o.name,path:o.path,strategy:o.strategy};this.dialogOverlay.open({childComponent:X,title:"Edit Root",data:e,onOkBtn:()=>A(this,null,function*(){try{yield this.rootService.applyDialogRoot(e)}catch(t){return this.notify.error(t),Promise.reject(t)}}),onCancelBtn:()=>A(this,null,function*(){return Promise.resolve()})})}deleteRoot(o){this.dialogs.confirm("Delete Root","Do you want to the delete the root folder?",()=>{this.rootService.removeRoot(o)})}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=h({type:r,selectors:[["app-admin-root-list"]],inputs:{roots:[1,"roots"]},decls:2,vars:2,consts:()=>{let o;o=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`;let e;e=$localize`:␟766c66ad5cc981c531aaf3fe3a2a7a346ddc8d83␟8911059720204770105:Path`;let t;t=$localize`:␟05f5612d42b02be4d6d9e0a99585ae7e30a91780␟1617785425462022303:Strategy`;let c;c=$localize`:␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`;let N;N=$localize`:␟030b4423b92167200e39519599f9b863b4f7c62c␟3193976279273491157:Actions`;let b;b=$localize`:␟96613e9bbc5b95316e56df72d323766b54c4964e␟1020564942829121638:Rescan Root`;let $;$=$localize`:␟046a16565d1a08a0b5c251255c63e873f64c4f61␟1228008259662169871:Refresh Root Meta`;let m;m=$localize`:␟b9bf82da3451056e15340d89a4bcbf22fe45752b␟5936613369747810049:Edit Root`;let z;z=$localize`:␟b2fb8fb0d8eda1e65e01bfe666f42b8d4a853caa␟4674133541672494865:Delete Root`;let F;F=$localize`:␟45dd81fcbde051783b05fe60c8d0bab8e7e097a9␟4606091236515013460:Error:`;let W;W=$localize`:␟4fc06dce435cdd51107afcf0ca206bbbba026b0c␟1188193109474903303:Working…`;let j;j=$localize`:␟8ba85460d8f8515d276c46a9a1876a2ee143482e␟5743221119363707616:Last Change:`;let K;return K=$localize`:␟ff46a8749717b5199040c5eed9fe1e4c3ecc5624␟3875750134082688342:Not scanned`,[o,e,t,c,N,F,W,j,K,["name","Roots",3,"list"],["appFocusKeyList","","role","list",1,"roots"],[1,"root","heading"],[1,"title"],[1,"path"],[1,"strategy"],[1,"status"],[1,"actions"],["appFocusKeyListItem","","role","listitem",1,"root"],["appFocusKeyListItem","","role","listitem",1,"root",3,"dblclick","keydown.enter"],[1,"action-buttons"],["title",b,"appClickStop","",3,"click"],["aria-hidden","true",1,"icon-rescan"],["title",$,"appClickStop","",3,"click"],["aria-hidden","true",1,"icon-broom"],["title",m,"appClickStop","",3,"click"],["aria-hidden","true",1,"icon-edit"],["title",z,"appClickStop","",3,"click"],["aria-hidden","true",1,"icon-remove"],[1,"error"]]},template:function(e,t){if(e&1&&(T(0,"app-background-text-list",9),u(1,ye,1,1)),e&2){let c;g("list",t.roots()),s(),P((c=t.roots())?1:-1,c)}},dependencies:[G,Me,ce,Oe,Te,te],styles:["[_nghost-%COMP%]{width:100%;overflow:auto;display:block}[_nghost-%COMP%]   .roots[_ngcontent-%COMP%]{padding:15px;font-size:.9em;width:100%}[_nghost-%COMP%]   .root[_ngcontent-%COMP%]{height:60px;border-bottom:1px solid var(--control-border)}[_nghost-%COMP%]   .root[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px}[_nghost-%COMP%]   .root[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .root.selected[_ngcontent-%COMP%]{background-color:var(--background-active)}[_nghost-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--accent)}[_nghost-%COMP%]   .heading[_ngcontent-%COMP%]{height:40px;font-size:.9em}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{width:100px}[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px;flex:50%;margin:0;display:inline-block;color:var(--on-control);border:1px solid transparent}[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--on-control-active);border:1px solid var(--control-active)}"]});let n=r;return n})();var lt=(()=>{let r=class r{constructor(){this.unsubscribe=new H,this.notify=p(B),this.rootService=p(k),this.dialogOverlay=p(w)}static getSortValue(o,e){switch(o){case"name":return e.name;case"path":return e.path;default:return}}ngOnInit(){this.rootService.rootsChange.pipe(U(this.unsubscribe)).subscribe({next:o=>{this.roots=o.sort((e,t)=>e.name.localeCompare(t.name))},error:o=>{this.notify.error(o)}}),this.rootService.refreshRoots()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}refresh(){this.rootService.refreshRoots()}newRoot(){let o={name:"",path:"",strategy:v.auto};this.dialogOverlay.open({childComponent:X,title:"New Root",data:o,onOkBtn:()=>A(this,null,function*(){try{yield this.rootService.applyDialogRoot(o)}catch(e){return this.notify.error(e),Promise.reject(e)}}),onCancelBtn:()=>A(this,null,function*(){return Promise.resolve()})})}refreshRoots(){this.rootService.rescanRoots()}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=h({type:r,selectors:[["app-admin-root"]],decls:11,vars:1,consts:()=>{let o;o=$localize`:␟2f248600386a30236db69832ef4f910600ec943b␟7732274825567857654:Roots`;let e;e=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`;let t;t=$localize`:␟e13ccbc99042ea4870ebde4a4038672a4298adaf␟3093922570235029600:New Root…`;let c;return c=$localize`:␟c45553c26a8d0a2887def846473f015706ceb1c2␟4238145957469001439:Rescan all Roots`,[[1,"roots"],["section",o],[1,"actions"],["title",e,1,"button-on-control",3,"click"],[1,"icon-reload"],["title",t,1,"button-on-control",3,"click"],[1,"icon-plus"],["title",c,1,"button-on-control",3,"click"],[1,"icon-rescan"],[1,"content"],[3,"roots"]]},template:function(e,t){e&1&&(a(0,"div",0)(1,"app-view-header-slim",1)(2,"div",2)(3,"button",3),S("click",function(){return t.refresh()}),T(4,"i",4),_(),a(5,"button",5),S("click",function(){return t.newRoot()}),T(6,"i",6),_(),a(7,"button",7),S("click",function(){return t.refreshRoots()}),T(8,"i",8),_()()(),a(9,"div",9),T(10,"app-admin-root-list",10),_()()),e&2&&(s(10),g("roots",t.roots))},dependencies:[G,de,me,ge],styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:auto;display:block}[_nghost-%COMP%]   .roots[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .roots[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}"]});let n=r;return n})();export{lt as AdminRootComponent};
