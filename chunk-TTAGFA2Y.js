import{a as De}from"./chunk-UOI3LTUY.js";import"./chunk-EYASUWYN.js";import{a as J}from"./chunk-RQOW2HPH.js";import"./chunk-XRTDXO4N.js";import"./chunk-UU66A4EB.js";import{a as B}from"./chunk-N53LHSAL.js";import{$ as l,Ab as Oe,Ba as g,Dd as Ie,E as ce,Ea as C,Fa as m,He as u,I as P,J as ge,O as $,Oe as ke,P as w,Qa as O,Ra as R,Sa as L,Sb as Ee,Tb as fe,Ub as he,Va as k,Vb as ue,Wa as D,Wb as Te,Wc as h,Xa as X,Xb as Ae,Yb as Ne,Zc as N,Zd as $e,_ as r,_a as de,_b as ve,_c as b,a as se,b as _e,cb as V,cd as G,db as Pe,dc as Re,eb as pe,ge as U,ha as A,i as ae,id as W,ka as S,ma as le,nd as be,oa as p,od as Ge,ra as z,rd as Ue,re as we,sa as j,se as q,ta as _,te as Le,ua as i,ub as Ce,va as c,vb as Me,vd as xe,wa as E,wd as ye,xa as f,yb as Se,z as re,za as F,zb as me}from"./chunk-H26ZKUNV.js";function Fe(o,d){o&1&&c(0,"i",7)}function Ve(o,d){o&1&&(_(0,"span"),g(1,2),i())}var Y=(()=>{class o{app;auth;jam;notify;refreshRandom;refreshing=!1;unsubscribe=new ae;constructor(e,t,n,s){this.app=e,this.auth=t,this.jam=n,this.notify=s,this.refreshRandom=J()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}onDropFile(e){e.preventDefault(),this.uploadFile(e.dataTransfer?.files)}onDragOverFile(e){e.stopPropagation(),e.preventDefault()}selectFile(e){this.uploadFile(e.target.files)}uploadFile(e){if(!e||e.length===0||!this.auth.user)return;let t=e[0];this.jam.user.uploadUserImage({id:this.auth.user.id},t).pipe(re(this.unsubscribe)).subscribe(n=>{n.type===me.UploadProgress||n instanceof Oe},n=>{this.notify.error(n)},()=>{this.refreshRandom=J(),this.notify.success("Upload done")})}randomAvatar(){this.refreshing||!this.auth.user||(this.refreshing=!0,this.jam.user.generateUserImage({id:this.auth.user.id}).then(()=>{this.refreshing=!1,this.refreshRandom=J(),this.notify.success("Image randomized")}).catch(e=>{this.refreshing=!1,this.notify.error(e)}))}static \u0275fac=function(t){return new(t||o)(l(W),l(N),l(b),l(G))};static \u0275cmp=P({type:o,selectors:[["app-user-avatar"]],decls:11,vars:6,consts:()=>{let e;e=$localize`:␟d833321cc90a0b0a52714c6d5ec97fbe6c7cfa5c␟2501989539336327542:Upload image`;let t;t=$localize`:␟0966612784a5dcf0e05406cebe6e47c69999665a␟4001363701577936593: Drag an Image File here `;let n;n=$localize`:␟3a2a9bb12d904f3dd84e42cfad37afef4a6b35f6␟3825771792569625715:Choose a file`;let s;return s=$localize`:␟c1ba8ac278d9bdb189e23866675d475089dce2ae␟4360279154190126867:Random Image`,[t,n,s,[1,"drop-zone",3,"drop","dragover"],[1,"placeholder"],[3,"coverArtObj","size","round","refreshRandom"],[1,"button-primary",3,"click"],[1,"icon-spin","icon-spinner"],["id","file","type","file","placeholder",e,"accept",".png,.jpeg,.jpg",1,"inputfile",3,"change"],["for","file",1,"button-primary"]]},template:function(t,n){t&1&&(_(0,"div",3),C("drop",function(a){return n.onDropFile(a)})("dragover",function(a){return n.onDragOverFile(a)}),_(1,"div",4),g(2,0),i(),c(3,"app-coverart-image",5),_(4,"button",6),C("click",function(){return n.randomAvatar()}),A(5,Fe,1,0,"i",7)(6,Ve,2,0,"span"),i(),_(7,"form")(8,"input",8),C("change",function(a){return n.selectFile(a)}),i(),_(9,"label",9),g(10,1),i()()()),t&2&&(r(3),S("coverArtObj",n.auth.user)("size",100)("round",!0)("refreshRandom",n.refreshRandom),r(2),p(n.refreshing?5:-1),r(),p(n.refreshing?-1:6))},dependencies:[Ne,ue,Te,$e],styles:["[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]{vertical-align:bottom;display:inline-block;min-width:220px;min-height:140px;border-width:2px;margin-bottom:15px;margin-right:15px;border-style:dotted;border-color:var(--secondary);padding-left:15px;padding-right:15px;padding-bottom:15px;text-align:center}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   app-coverart-image[_ngcontent-%COMP%]{margin:0 auto 10px}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .inputfile[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:10px;min-width:80%;display:inline-block}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:inline-block;min-width:80%}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;display:block}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{width:100%;padding-top:15px;padding-bottom:15px;text-align:center;color:var(--on-control-ambient);font-size:.8em;text-transform:uppercase}"]})}return o})();var Je=(o,d)=>d.session.id;function He(o,d){if(o&1){let e=F();_(0,"div",8)(1,"div",9),O(2),c(3,"br"),_(4,"span"),O(5),i()(),_(6,"div",10),O(7),c(8,"br"),O(9),i(),_(10,"div",11)(11,"span",12),g(12,1),i(),c(13,"br"),O(14),V(15,"date"),i(),_(16,"div",13)(17,"button",14),C("click",function(){let n=$(e).$implicit,s=m(2);return w(s.remove(n.session))}),c(18,"i",15),i()()()}if(o&2){let e=d.$implicit;le("invalid",e.isExpired),r(2),L(" ",e.session.client,""),r(3),R(e.session.mode),r(2),L(" ",e.session.agent,""),r(2),L(" ",e.session.os," "),r(5),L(" ",pe(15,7,e.session.expires,"long")," ")}}function qe(o,d){if(o&1&&(_(0,"div",4)(1,"div",5)(2,"div",6),g(3,0),i(),z(4,He,19,10,"div",7,Je),i()()),o&2){let e=m();r(4),j(e.sessions)}}var Z=(()=>{class o{jam;auth;notify;sessions;constructor(e,t,n){this.jam=e,this.auth=t,this.notify=n}ngOnInit(){this.auth.isLoggedIn()&&this.refresh()}remove(e){let t=e.id;this.jam.session.remove({id:t}).then(()=>{this.sessions&&(this.sessions=this.sessions.filter(n=>n.session.id!==t)),this.notify.success("Session Login removed")}).catch(n=>{this.notify.error(n)})}refresh(){this.jam.session.list().then(e=>{this.sessions=e.map(t=>({session:t,isExpired:(t.expires||0)<Date.now()}))}).catch(e=>{this.notify.error(e)})}static \u0275fac=function(t){return new(t||o)(l(b),l(N),l(G))};static \u0275cmp=P({type:o,selectors:[["app-sessions-page"]],decls:3,vars:1,consts:()=>{let e;e=$localize`:␟ce54b0509275b0551de870b805c1bb5c426d723f␟877974575580185933:Session Logins`;let t;t=$localize`:␟2744dff891981e67dd84e3a8ceb430704b86ed6a␟721963055036507192:Sessions`;let n;n=$localize`:␟a881e543b0df3a9620cb65a5e6da992c3f38382e␟1021529107572383199:Remove this login`;let s;return s=$localize`:␟7ebcbdc49ec3e6c6354f788704a3b4fb5649b74b␟7222262636210875388:valid until:`,[t,s,[1,"sessions"],["section",e],[1,"content"],[1,"session-list"],[1,"section-title"],[1,"session",3,"invalid"],[1,"session"],[1,"title"],[1,"agent"],[1,"expires"],[1,"label"],[1,"remove"],["title",n,3,"click"],["aria-hidden","true",1,"icon-remove"]]},template:function(t,n){t&1&&(_(0,"div",2),c(1,"app-view-header-slim",3),A(2,qe,6,0,"div",4),i()),t&2&&(r(2),p(n.sessions?2:-1))},dependencies:[U,Me],styles:['[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap;-webkit-user-select:none;user-select:none;width:100%;padding-top:5px;background-color:var(--background);color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{min-height:48px;display:flex;flex-flow:row nowrap;align-items:center;align-content:space-evenly;width:100%;padding:10px;line-height:1.25em;margin-bottom:1px;border-top-width:1px;border-top-style:solid;border-bottom-width:0;border-bottom-style:solid;border-bottom-color:var(--background-border);border-top-color:var(--background-border)}@media (max-width: 1000px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{height:auto}}@media (max-width: 522px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{font-size:.9em}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]:last-child{border-bottom-width:1px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .small-screen-icon[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--on-background);font-size:.8em}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;display:inline-block;margin:0 10px 0 0}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.8em;vertical-align:middle}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a.title-link[_ngcontent-%COMP%]{font-size:inherit;margin-right:10px;color:var(--on-background-highlight)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{width:0;margin-left:0;cursor:move}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]{display:inline-block;width:26px;height:8px;transform:rotate(90deg);margin-left:-8px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%], [_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]:before{background-image:radial-gradient(#7b7b7b 40%,transparent 40%);background-size:4px 4px;background-position:0 100%;background-repeat:repeat-x}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]:before{content:"";display:block;width:100%;height:33%}@media (max-width: 1000px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{height:auto;min-height:48px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-left:0}}@media (max-width: 400px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{flex-flow:row wrap;align-items:inherit;width:100%;font-size:.9em}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .small-screen-icon[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{order:2;width:25%;text-align:center}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]{transform:rotate(0)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{order:6;margin-left:0;margin-right:0;padding-right:0;padding-left:0;width:100%}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:0;margin-right:0;padding-right:0;padding-left:0;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;margin-left:0;margin-right:0;overflow:hidden;text-overflow:ellipsis}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%]{font-size:.8em;flex-grow:1;padding-right:10px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{width:260px;font-size:.8em;padding-right:10px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--on-background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:10px;width:140px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.7em;text-transform:uppercase}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session.invalid[_ngcontent-%COMP%]{color:var(--on-control-ambient-disabled)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session.invalid[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{color:var(--accent)}@media (max-width: 400px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%], [_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{order:0;width:calc(100% - 30px)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{order:1}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%]{order:2}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{order:3}}']})}return o})();var Qe=(o,d)=>d.name;function Ye(o,d){if(o&1){let e=F();_(0,"label",10)(1,"input",14),X("ngModelChange",function(n){$(e);let s=m();return D(s.app.settings.theme,n)||(s.app.settings.theme=n),w(n)}),C("ngModelChange",function(){$(e);let n=m();return w(n.onChange())}),i(),O(2),V(3,"titlecase"),i()}if(o&2){let e=d.$implicit,t=m();r(),S("value",e.name),k("ngModel",t.app.settings.theme),r(),R(Pe(3,3,e.name))}}var ee=(()=>{class o{router;app;settings;player;themes=De.themes;public;constructor(e,t,n,s){this.router=e,this.app=t,this.settings=n,this.player=s}onChange(){this.settings.applySettings()}static \u0275fac=function(t){return new(t||o)(l(Ge),l(W),l(ye),l(xe))};static \u0275cmp=P({type:o,selectors:[["app-page-settings"]],decls:25,vars:3,consts:()=>{let e;e=$localize`:␟121cc5391cd2a5115bc2b3160379ee5b36cd7716␟4930506384627295710:Settings`;let t;t=$localize`:␟8ba4f3fada9c0278b12e5dc72b25a9213a41f73e␟2696427906168966769:Show Waveform of Current Track`;let n;n=$localize`:␟09775f315171df8237e648a015ef8d926da48748␟4046137991643846566:Show Notifications On Tracks Change`;let s;s=$localize`:␟b307e817a013c5009ff98f7645834d503869db50␟8198980433602946702:Design`;let a;a=$localize`:␟59bdc3dfa4075f92c734588899485db702c8f120␟7683705529753923369:Player`;let x;x=$localize`:␟8ba4f3fada9c0278b12e5dc72b25a9213a41f73e␟2696427906168966769:Show Waveform of Current Track`;let y;y=$localize`:␟7096fbcea9ef94e1ae3e68c75250b6c9bd78b1bb␟3015012963934645778:Playing`;let I;I=$localize`:␟b9c15b2fd4b6fab0a947d1cf0843c3e1ed1cebf3␟2706303691969065868:Show Playing Track Name in Window Title`;let M;return M=$localize`:␟c4c1ee09a557adee6dd31c26dc1dc03fc106dffe␟3955518524911882320:Show Notification Popup On Track Change`,[s,a,x,y,I,M,[1,"settings"],["section",e],[1,"content"],[1,"section-title"],[1,"select"],["type","checkbox","title",t,3,"ngModelChange","ngModel"],["type","checkbox","value","1",3,"ngModelChange","ngModel"],["type","checkbox","value","1","title",n,3,"ngModelChange","ngModel"],["type","radio","name","theme",3,"ngModelChange","value","ngModel"]]},template:function(t,n){t&1&&(_(0,"div",6),c(1,"app-view-header-slim",7),_(2,"div",8)(3,"div",9),g(4,0),i(),_(5,"div")(6,"fieldset"),z(7,Ye,4,5,"label",10,Qe),i()(),_(9,"div",9),g(10,1),i(),_(11,"label")(12,"input",11),X("ngModelChange",function(a){return D(n.app.settings.showWaveform,a)||(n.app.settings.showWaveform=a),a}),C("ngModelChange",function(){return n.onChange()}),i(),E(13),g(14,2),f(),i(),_(15,"div",9),g(16,3),i(),_(17,"label")(18,"input",12),X("ngModelChange",function(a){return D(n.app.settings.playingTrackInTitle,a)||(n.app.settings.playingTrackInTitle=a),a}),C("ngModelChange",function(){return n.onChange()}),i(),E(19),g(20,4),f(),i(),_(21,"label")(22,"input",13),X("ngModelChange",function(a){return D(n.app.settings.notificationSong,a)||(n.app.settings.notificationSong=a),a}),C("ngModelChange",function(){return n.onChange()}),i(),E(23),g(24,5),f(),i()()()),t&2&&(r(7),j(n.themes),r(5),k("ngModel",n.app.settings.showWaveform),r(6),k("ngModel",n.app.settings.playingTrackInTitle),r(4),k("ngModel",n.app.settings.notificationSong))},dependencies:[fe,Ee,ve,he,Ae,U,Ce],styles:["[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;padding-bottom:15px;color:var(--on-background)}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-top:-1px;display:inline-block;vertical-align:middle}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{margin-bottom:15px;width:auto;display:inline}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label.select[_ngcontent-%COMP%]{width:auto;padding-top:4px;padding-bottom:4px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label.select[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:10px}"]})}return o})();var ne=(()=>{class o{jam;auth;notify;base=[];favorites=[];played=[];constructor(e,t,n){this.jam=e,this.auth=t,this.notify=n}ngOnInit(){this.auth.isLoggedIn()&&this.refresh()}refresh(){this.jam.stats.user().then(e=>{this.favorites=o.buildStats(e.favorite,"/favorites"),this.played=o.buildStats(e.played,"/recently-played"),this.base=q([{text:"Bookmarks",link:"/library/bookmarks",value:e.bookmark},{text:"Playlists",link:"/library/playlists",value:e.playlist}],!0)}).catch(e=>{this.notify.error(e)})}static buildStats(e,t=""){return q([{text:"Artists",link:"artists",value:e.artistTypes.album},...[{type:u(h.album),value:e.albumTypes.album},{type:u(h.compilation),value:e.albumTypes.compilation}].map(n=>({text:n.type?.text,link:`${n.type?.id}`,value:n.value})),{text:"Series",link:"series",value:e.series},...[{type:u(h.audiobook),value:e.albumTypes.audiobook},{type:u(h.soundtrack),value:e.albumTypes.soundtrack},{type:u(h.live),value:e.albumTypes.live},{type:u(h.bootleg),value:e.albumTypes.bootleg},{type:u(h.ep),value:e.albumTypes.ep},{type:u(h.single),value:e.albumTypes.single}].map(n=>({text:n.type?.text,link:`${n.type?.id}`,value:n.value})),{text:"Folders",link:"folders",value:e.folder},{text:"Tracks",link:"tracks",value:e.track}].map(n=>_e(se({},n),{link:`/library/${n.link}${t}`})))}static \u0275fac=function(t){return new(t||o)(l(b),l(N),l(G))};static \u0275cmp=P({type:o,selectors:[["app-user-stats"]],decls:9,vars:3,consts:()=>{let e;e=$localize`:␟299f97b8ee9c62d45f2cc01961aa1e5101d6d05a␟4088311569349098646:Stats`;let t;t=$localize`:␟0add707baf7b167d0c0e9cdeb80f946aa1bd2223␟4085930761302974863:Favorites`;let n;return n=$localize`:␟73565b2d231303b7ff6f28663a72abb1b3bd1890␟7754730602038897709:Played`,[e,t,n,[1,"section-title"],[3,"stats"]]},template:function(t,n){t&1&&(_(0,"div",3),g(1,0),i(),c(2,"app-stats",4),_(3,"div",3),g(4,1),i(),c(5,"app-stats",4),_(6,"div",3),g(7,2),i(),c(8,"app-stats",4)),t&2&&(r(2),S("stats",n.base),r(3),S("stats",n.favorites),r(3),S("stats",n.played))},dependencies:[Le],styles:["[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-top:15px;margin-bottom:10px;color:var(--on-control-ambient)}"]})}return o})();function en(o,d){o&1&&(_(0,"div"),c(1,"i",16),E(2),g(3,3),f(),i())}function nn(o,d){o&1&&(_(0,"div"),c(1,"i",16),E(2),g(3,4),f(),i())}function tn(o,d){o&1&&(_(0,"div"),c(1,"i",16),E(2),g(3,5),f(),i())}function on(o,d){o&1&&(_(0,"div"),c(1,"i",16),E(2),g(3,6),f(),i())}function sn(o,d){if(o&1&&(_(0,"div",14)(1,"div",12),g(2,2),i(),_(3,"div",15),A(4,en,4,0,"div")(5,nn,4,0,"div")(6,tn,4,0,"div")(7,on,4,0,"div"),i()()),o&2){let e=m(2);r(4),p(e.auth.user.roles.stream?4:-1),r(),p(e.auth.user.roles.podcast?5:-1),r(),p(e.auth.user.roles.upload?6:-1),r(),p(e.auth.user.roles.admin?7:-1)}}function _n(o,d){if(o&1&&(_(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12),g(4,0),i(),c(5,"app-user-avatar"),i(),_(6,"div",13)(7,"div",14)(8,"div",12),g(9,1),i(),_(10,"div"),O(11),i()(),A(12,sn,8,4,"div",14),i()(),_(13,"div",14),c(14,"app-user-stats"),i()()),o&2){let e=m();r(11),R(e.auth.user.name),r(),p(e.auth.user&&e.auth.user.roles?12:-1)}}var te=(()=>{class o{auth;constructor(e){this.auth=e}static \u0275fac=function(t){return new(t||o)(l(N))};static \u0275cmp=P({type:o,selectors:[["app-user-page"]],decls:3,vars:1,consts:()=>{let e;e=$localize`:␟e08a77594f3d89311cdf6da5090044270909c194␟2392488717875840729:User`;let t;t=$localize`:␟cebb7f27b5028c62b4426da3bb3e3bd3f4a3443b␟6525109356951792180:Avatar`;let n;n=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`;let s;s=$localize`:␟70f45880fce6ac5d8e468e25e82aefbba8098cfe␟7314814725704332646:Permissions`;let a;a=$localize`:␟0c1153af20b06ee1f31e7d07eebfada81b9a19b2␟7231504695490320052:Stream Audio`;let x;x=$localize`:␟f47ba1cd01c3dfd801fe7f66c3d28d698dcc0479␟1291164613191345064:Manage Podcasts`;let y;y=$localize`:␟7876f698ec2db992452b14bd66e0ed1261d890e8␟5793950743388475134:Upload Audio`;let I;return I=$localize`:␟76046fa6f13fb0524ca1d3777247ab13d73660c8␟2210415377969858551:Server Administration`,[t,n,s,a,x,y,I,[1,"user"],["section",e],[1,"content"],[1,"row"],[1,"column","first"],[1,"section-title"],[1,"column"],[1,"section"],[1,"roles"],[1,"icon-checkmark"]]},template:function(t,n){t&1&&(_(0,"div",7),c(1,"app-view-header-slim",8),A(2,_n,15,2,"div",9),i()),t&2&&(r(2),p(n.auth.user?2:-1))},dependencies:[U,ne,Y],styles:["[_nghost-%COMP%]   .user[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{padding-bottom:30px}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:5px}@media (max-width: 400px){[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{flex-direction:column}}"]})}return o})();var H=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275cmp=P({type:o,selectors:[["app-user"]],decls:5,vars:0,consts:[[1,"left"],[1,"split-pane-divider-left"],["role","main",1,"middle"]],template:function(t,n){t&1&&(_(0,"aside",0),c(1,"app-user-sidebar"),i(),c(2,"app-splitter",1),_(3,"main",2),c(4,"router-outlet"),i())},styles:["[_nghost-%COMP%]{width:100%;height:100%;flex:1;display:flex;flex-flow:row nowrap;overflow:hidden;align-items:flex-start;align-content:flex-start}[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:15%;height:100%}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{width:60%;flex-grow:1;height:100%}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{width:25%;height:100%}@media (max-width: 1600px){[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:20%}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{width:55%;flex-grow:1;height:100%}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{width:25%;height:100%}}@media (max-width: 1400px){[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:25%}[_nghost-%COMP%]   .right[_ngcontent-%COMP%], [_nghost-%COMP%]   .split-pane-divider-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 768px){[_nghost-%COMP%]{overflow:auto;flex-flow:row wrap}[_nghost-%COMP%]   app-splitter[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:100%!important;height:auto}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{height:auto}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{width:100%!important;height:auto}}@media (max-width: 522px){[_nghost-%COMP%]{overflow:hidden;height:auto}}"]})}return o})();var oe=[{path:"",component:H,children:[{path:"",pathMatch:"full",component:te,canActivate:[B],data:{name:"User"}},{path:"settings",component:ee,canActivate:[B],data:{name:"Settings"}},{path:"sessions",component:Z,canActivate:[B],data:{name:"Sessions",icon:"icon-laptop"}}]}],ze=Ue.forChild(oe);var ie=(()=>{class o{sections=[];constructor(){let t=(oe[0]?.children||[]).filter(s=>s.path&&s.path.length>0&&s.data?.name).map(s=>{let a=s.data?.link?s.data.link:s.path;return{name:s.data?s.data.name:"",icon:s.data&&s.data.icon?s.data.icon:"icon-admin",link:`/user/${a}`}}),n={name:"Profile",icon:"icon-user",link:"/user",options:{exact:!0}};this.sections=[{name:"User",entries:[n].concat(t)}]}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=P({type:o,selectors:[["app-user-sidebar"]],decls:1,vars:1,consts:[[3,"sections"]],template:function(t,n){t&1&&c(0,"app-sidebar",0),t&2&&S("sections",n.sections)},dependencies:[Ie],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block}"]})}return o})();var tt=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=ge({type:o});static \u0275inj=ce({imports:[Re,ke,Se,ze]})}return o})();de(H,function(){return[we,be,ie]},[]);export{tt as UserModule};
