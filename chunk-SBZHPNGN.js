import{a as n}from"./chunk-TOONS3AW.js";import{b as S}from"./chunk-DJYMAW3B.js";import"./chunk-UO5UMZSC.js";import"./chunk-JP4K5MFN.js";import"./chunk-SCLJ3VCI.js";import"./chunk-DGTK7RHM.js";import"./chunk-PEPRZYDQ.js";import"./chunk-AFPGMN6L.js";import"./chunk-L6NQU2BC.js";import"./chunk-4UFWK3HC.js";import"./chunk-24DMSAFT.js";import"./chunk-SCY3FOMN.js";import"./chunk-FU6C5Z5T.js";import"./chunk-6WISUSLE.js";import"./chunk-NWR5JEWI.js";import"./chunk-3XAJ3MB2.js";import"./chunk-3VLHYTEX.js";import"./chunk-AKA224Y7.js";import"./chunk-RJHPSDKR.js";import"./chunk-MTB5HHEE.js";import"./chunk-TT7XXVKE.js";import"./chunk-ZBZLQTZR.js";import"./chunk-6SWJ3F4P.js";import"./chunk-N4AK7Z46.js";import"./chunk-FQC6PRY2.js";import{a as y}from"./chunk-ITVL4IJL.js";import"./chunk-JI2YWTPQ.js";import{G as v}from"./chunk-3LOKQP2Q.js";import{f as b}from"./chunk-MFAW4R34.js";import{$b as g,Db as d,Eb as u,Jb as s,Kb as h,Lb as f,Mb as m,Qc as M,U as l,Wd as _,_a as a,fa as r,j as p,jc as k,kc as C,nb as c}from"./chunk-XLNNDSL4.js";function x(o,T){o&1&&m(0,"app-loading")}var B=(()=>{class o{constructor(){this.loadMore=M.required(n),this.jam=r(_),this.notify=r(v),this.route=r(b),this.unsubscribe=new p}ngOnInit(){this.route.parent&&this.route.parent.paramMap.pipe(l(this.unsubscribe)).subscribe(e=>{this.id=e.get("id")??void 0,this.refresh()})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}loadSimilar(){let e=this.id;e&&this.jam.track.similar({id:e,trackIncState:!0,trackIncTag:!0,skip:this.loadMore().skip(),take:this.loadMore().take()}).then(t=>{if(this.id===e){this.similar=[...this.similar??[],...t.items];let i=this.loadMore();i.hasMore.set(this.similar.length<(t.total??0)),i.total.set(t.total)}}).catch(t=>{this.notify.error(t)})}refresh(){this.similar=void 0,this.loadMore().skip.set(0),this.loadSimilar()}static{this.\u0275fac=function(t){return new(t||o)}}static{this.\u0275cmp=c({type:o,selectors:[["app-track-similar"]],viewQuery:function(t,i){t&1&&k(i.loadMore,n,5),t&2&&C()},decls:3,vars:4,consts:[[3,"showArtist","tracks"],[3,"requestLoad","loading"]],template:function(t,i){t&1&&(d(0,x,1,0,"app-loading"),m(1,"app-track-list",0),h(2,"app-load-more-button",1),g("requestLoad",function(){return i.loadSimilar()}),f()),t&2&&(u(i.similar?-1:0),a(),s("showArtist",!0)("tracks",i.similar),a(),s("loading",!i.similar))},dependencies:[S,n,y],styles:["[_nghost-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media(max-width:522px){[_nghost-%COMP%]{padding-left:10px;padding-right:10px}}"]})}}return o})();export{B as TrackSimilarComponent};
