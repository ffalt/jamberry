import{a as f}from"./chunk-RQOW2HPH.js";import{a as C}from"./chunk-3T5XCEXC.js";import"./chunk-EUAKOWGB.js";import"./chunk-ILDEMCQX.js";import"./chunk-3QJCEZQC.js";import"./chunk-LMBWQPDX.js";import"./chunk-HJOPBEHX.js";import"./chunk-VTBMZQVI.js";import"./chunk-TUZFBHPK.js";import"./chunk-HURYLTUC.js";import"./chunk-PWX7D7BF.js";import"./chunk-LXRIBXQ3.js";import"./chunk-3KEFNAKY.js";import"./chunk-2PUJQAN6.js";import{i as x}from"./chunk-QH72VV2F.js";import"./chunk-VZVRBD6P.js";import"./chunk-CDMVSZCB.js";import"./chunk-UZYU4GV7.js";import{a as v}from"./chunk-K4DVWEJI.js";import"./chunk-UVO2NCSB.js";import"./chunk-24DMSAFT.js";import"./chunk-XTLMNK2P.js";import{d as g}from"./chunk-GXCVGDS5.js";import"./chunk-J5MSA5AP.js";import"./chunk-3CQO2UIK.js";import"./chunk-PZKV7YRJ.js";import"./chunk-4LEAF22C.js";import"./chunk-EAERQNF5.js";import"./chunk-5EJKCVNW.js";import"./chunk-CQEFCIFT.js";import"./chunk-TT7XXVKE.js";import{e as m,f as T}from"./chunk-LV2G3RH6.js";import"./chunk-5NZQP5GA.js";import"./chunk-QWPA4HIO.js";import"./chunk-CTEOCYOX.js";import"./chunk-EPPWFHNT.js";import"./chunk-K64Q6LJ6.js";import"./chunk-ZMFSGBQT.js";import{f as c}from"./chunk-B4HPT77T.js";import{Cb as p,Db as o,Hd as i,Ib as d,Lb as y,Td as b,U as n,ac as u,fa as r,j as a,mb as h}from"./chunk-S3YUDFSI.js";function _(s,L){if(s&1&&y(0,"app-obj-loader",0),s&2){let e=u();d("loader",e.loader)("listQuery",e.listQuery)("loadAll",e.loadAll)("showParent",!0)("changeTrigger",e.changeTrigger)}}var J=(()=>{class s{constructor(){this.loadAll=!1,this.valid=!1,this.library=r(x),this.route=r(c),this.playlistService=r(g),this.podcastService=r(v),this.unsubscribe=new a,this.unsubscribeRefresh=new a}ngOnInit(){this.subscribe_to_url(),this.subscribe_to_parent_url()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete(),this.unsubscribeRefresh.next(),this.unsubscribeRefresh.complete()}subscribe_to_url(){this.route.url.pipe(n(this.unsubscribe)).subscribe(e=>{let t=e.length>0?e[0].path:void 0;this.listType=t?T[t]:void 0})}subscribe_to_parent_url(){this.route.parent&&this.route.parent.url.pipe(n(this.unsubscribe)).subscribe(e=>{this.resetState();let t=m(e);this.jamType=t?.type,this.handleJamType(t)})}resetState(){this.valid=!1,this.loadAll=!1,this.albumType=void 0,this.loader=void 0}handleJamType(e){if(!this.jamType)return;let l={[i.folder]:()=>{this.handleFolderType()},[i.playlist]:()=>{this.handlePlaylistType()},[i.podcast]:()=>{this.handlePodcastType()},[i.series]:()=>{this.handleSeriesType()},[i.album]:()=>{this.handleAlbumType(e?.albumType)},[i.artist]:()=>{this.handleArtistType()},[i.genre]:()=>{this.handleGenreType()}}[this.jamType];l&&l()}handleFolderType(){this.loader=this.library.folderLoader,this.listType&&(this.listQuery={listType:this.listType,albumType:this.albumType},this.valid=!0)}handlePlaylistType(){this.loader=this.library.playlistLoader,this.listQuery=this.listType?{listType:this.listType}:void 0,this.loadAll=!this.listType,this.setupChangeListener(this.playlistService.playlistsChange),this.valid=!0}handlePodcastType(){this.loader=this.library.podcastLoader,this.listQuery=this.listType?{listType:this.listType}:void 0,this.loadAll=!this.listType,this.setupChangeListener(this.podcastService.podcastsChange),this.valid=!0}handleSeriesType(){this.loader=this.library.seriesLoader,this.listType&&(this.listQuery={listType:this.listType,albumType:this.albumType},this.valid=!0)}handleAlbumType(e){this.loader=this.library.albumLoader,this.listType&&(this.albumType=e,this.valid=!!this.albumType,this.listQuery={listType:this.listType,albumType:this.albumType})}handleArtistType(){this.loader=this.library.artistLoader,this.listType&&(this.listQuery={listType:this.listType,albumType:b.album},this.valid=!0)}handleGenreType(){this.loader=this.library.genreLoader,this.listType&&(this.listQuery={listType:this.listType},this.valid=!0)}setupChangeListener(e){this.unsubscribeRefresh.next(),this.unsubscribeRefresh.complete(),this.unsubscribeRefresh=new a,e.pipe(n(this.unsubscribeRefresh)).subscribe(()=>{this.changeTrigger=f()})}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=h({type:s,selectors:[["app-objs-loader-page-by-type"]],decls:1,vars:1,consts:[[3,"loader","listQuery","loadAll","showParent","changeTrigger"]],template:function(t,l){t&1&&p(0,_,1,5,"app-obj-loader",0),t&2&&o(l.valid?0:-1)},dependencies:[C],styles:["[_nghost-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media(max-width:522px){[_nghost-%COMP%]{padding-left:10px;padding-right:10px}}"]})}}return s})();export{J as ObjsLoaderByTypeComponent};
