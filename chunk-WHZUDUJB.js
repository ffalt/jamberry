import{$ as O,D as L,Ea as A,Fa as d,I as lt,Kb as yt,Ma as K,N as pt,Na as $,Nb as Ct,O as u,Oa as J,P as f,T as E,U as gt,Y as mt,Z as dt,Za as xt,_ as B,a as S,b as st,f as R,ha as Q,ja as N,ka as k,kb as wt,la as V,lb as Mt,ma as D,o as W,q as G,sb as _t,ta as M,ua as _,v as ct,va as z,wa as ut,xa as ft,z as ht,za as j}from"./chunk-NKPKIXYP.js";var It=["wrapper"],Ot=["sourceImage"];function Et(c,n){if(c&1){let o=j();M(0,"img",5,1),A("load",function(){u(o);let e=d();return f(e.imageLoadedInView())})("mousedown",function(e){u(o);let i=d();return f(i.startMove(e,i.moveTypes.Drag))})("touchstart",function(e){u(o);let i=d();return f(i.startMove(e,i.moveTypes.Drag))})("error",function(e){u(o);let i=d();return f(i.loadImageError(e))}),_()}if(c&2){let o=d();V("visibility",o.imageVisible?"visible":"hidden")("transform",o.safeTransformStyle),D("ngx-ic-draggable",!o.disabled&&o.allowMoveImage),k("src",o.safeImgDataUrl,mt),N("alt",o.imageAltText)}}function Tt(c,n){if(c&1){let o=j();ut(0),M(1,"span",9),A("mousedown",function(e){u(o);let i=d(2);return f(i.startMove(e,i.moveTypes.Resize,"topleft"))})("touchstart",function(e){u(o);let i=d(2);return f(i.startMove(e,i.moveTypes.Resize,"topleft"))}),z(2,"span",10),_(),M(3,"span",11),z(4,"span",10),_(),M(5,"span",12),A("mousedown",function(e){u(o);let i=d(2);return f(i.startMove(e,i.moveTypes.Resize,"topright"))})("touchstart",function(e){u(o);let i=d(2);return f(i.startMove(e,i.moveTypes.Resize,"topright"))}),z(6,"span",10),_(),M(7,"span",13),z(8,"span",10),_(),M(9,"span",14),A("mousedown",function(e){u(o);let i=d(2);return f(i.startMove(e,i.moveTypes.Resize,"bottomright"))})("touchstart",function(e){u(o);let i=d(2);return f(i.startMove(e,i.moveTypes.Resize,"bottomright"))}),z(10,"span",10),_(),M(11,"span",15),z(12,"span",10),_(),M(13,"span",16),A("mousedown",function(e){u(o);let i=d(2);return f(i.startMove(e,i.moveTypes.Resize,"bottomleft"))})("touchstart",function(e){u(o);let i=d(2);return f(i.startMove(e,i.moveTypes.Resize,"bottomleft"))}),z(14,"span",10),_(),M(15,"span",17),z(16,"span",10),_(),M(17,"span",18),A("mousedown",function(e){u(o);let i=d(2);return f(i.startMove(e,i.moveTypes.Resize,"top"))})("touchstart",function(e){u(o);let i=d(2);return f(i.startMove(e,i.moveTypes.Resize,"top"))}),_(),M(18,"span",19),A("mousedown",function(e){u(o);let i=d(2);return f(i.startMove(e,i.moveTypes.Resize,"right"))})("touchstart",function(e){u(o);let i=d(2);return f(i.startMove(e,i.moveTypes.Resize,"right"))}),_(),M(19,"span",20),A("mousedown",function(e){u(o);let i=d(2);return f(i.startMove(e,i.moveTypes.Resize,"bottom"))})("touchstart",function(e){u(o);let i=d(2);return f(i.startMove(e,i.moveTypes.Resize,"bottom"))}),_(),M(20,"span",21),A("mousedown",function(e){u(o);let i=d(2);return f(i.startMove(e,i.moveTypes.Resize,"left"))})("touchstart",function(e){u(o);let i=d(2);return f(i.startMove(e,i.moveTypes.Resize,"left"))}),_(),ft()}}function Ht(c,n){if(c&1){let o=j();M(0,"div",6),A("keydown",function(e){u(o);let i=d();return f(i.keyboardAccess(e))}),M(1,"div",7),A("mousedown",function(e){u(o);let i=d();return f(i.startMove(e,i.moveTypes.Move))})("touchstart",function(e){u(o);let i=d();return f(i.startMove(e,i.moveTypes.Move))}),_(),Q(2,Tt,21,0,"ng-container",8),_()}if(c&2){let o=d();V("top",o.cropper.y1,"px")("left",o.cropper.x1,"px")("width",o.cropper.x2-o.cropper.x1,"px")("height",o.cropper.y2-o.cropper.y1,"px")("margin-left",o.alignImage==="center"?o.marginLeft:null)("visibility",o.imageVisible?"visible":"hidden"),D("ngx-ic-round",o.roundCropper),N("aria-label",o.cropperFrameAriaLabel),B(2),k("ngIf",!o.hideResizeSquares)}}var Z=class{constructor(){this.format="png",this.output="blob",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resetCropOnAspectRatioChange=!0,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperFrameAriaLabel="Crop photo",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(n){Object.keys(n).filter(o=>o in this).forEach(o=>this[o]=n[o]),this.validateOptions()}setOptionsFromChanges(n){Object.keys(n).filter(o=>o in this).forEach(o=>this[o]=n[o].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}},b=function(c){return c.Drag="drag",c.Move="move",c.Resize="resize",c.Pinch="pinch",c}(b||{});function Vt(c){switch(c){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}function Wt(c){switch(c){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}function Bt(c,n){switch(c){case"ArrowUp":return{clientX:0,clientY:n*-1};case"ArrowRight":return{clientX:n,clientY:0};case"ArrowDown":return{clientX:0,clientY:n};case"ArrowLeft":default:return{clientX:n*-1,clientY:0}}}function kt(c,n,o){let t=c.width,e=c.height;n=Math.round(n),o=Math.round(o);let i=t/n,r=e/o,a=Math.ceil(i/2),s=Math.ceil(r/2),h=c.getContext("2d");if(h){let l=h.getImageData(0,0,t,e),p=h.createImageData(n,o),g=l.data,y=p.data;for(let m=0;m<o;m++)for(let x=0;x<n;x++){let C=(x+m*n)*4,v=m*r,w=0,I=0,tt=0,et=0,it=0,rt=0,at=0,vt=Math.floor(x*i),St=Math.floor(m*r),P=Math.ceil((x+1)*i),q=Math.ceil((m+1)*r);P=Math.min(P,t),q=Math.min(q,e);for(let F=St;F<q;F++){let nt=Math.abs(v-F)/s,Rt=x*i,zt=nt*nt;for(let U=vt;U<P;U++){let ot=Math.abs(Rt-U)/a,T=Math.sqrt(zt+ot*ot);if(T>=1)continue;w=2*T*T*T-3*T*T+1;let H=4*(U+F*t);at+=w*g[H+3],tt+=w,g[H+3]<255&&(w=w*g[H+3]/250),et+=w*g[H],it+=w*g[H+1],rt+=w*g[H+2],I+=w}}y[C]=et/I,y[C+1]=it/I,y[C+2]=rt/I,y[C+3]=at/tt}c.width=n,c.height=o,h.putImageData(p,0,0)}}function At(c,n){return c/100*n}var Ft=(()=>{let n=class n{crop(t,e,i,r,a){let s=this.getImagePosition(t,e,i,a),h=s.x2-s.x1,l=s.y2-s.y1,p=document.createElement("canvas");p.width=h,p.height=l;let g=p.getContext("2d");if(!g)return null;i.backgroundColor!=null&&(g.fillStyle=i.backgroundColor,g.fillRect(0,0,h,l));let y=(i.transform.scale||1)*(i.transform.flipH?-1:1),m=(i.transform.scale||1)*(i.transform.flipV?-1:1),{translateH:x,translateV:C}=this.getCanvasTranslate(t,i,a),v=t.transformed;g.setTransform(y,0,0,m,v.size.width/2+x,v.size.height/2+C),g.translate(-s.x1/y,-s.y1/m),g.rotate((i.transform.rotate||0)*Math.PI/180),g.drawImage(v.image,-v.size.width/2,-v.size.height/2);let w={width:h,height:l,imagePosition:s,cropperPosition:S({},e)};i.containWithinAspectRatio&&(w.offsetImagePosition=this.getOffsetImagePosition(t,e,i,a));let I=this.getResizeRatio(h,l,i);return I!==1&&(w.width=Math.round(h*I),w.height=i.maintainAspectRatio?Math.round(w.width/i.aspectRatio):Math.round(l*I),kt(p,w.width,w.height)),r==="blob"?this.cropToBlob(w,p,i):(w.base64=p.toDataURL("image/"+i.format,this.getQuality(i)),w)}cropToBlob(t,e,i){return R(this,null,function*(){return t.blob=yield new Promise(r=>e.toBlob(r,"image/"+i.format,this.getQuality(i))),t.blob&&(t.objectUrl=URL.createObjectURL(t.blob)),t})}getCanvasTranslate(t,e,i){if(e.transform.translateUnit==="px"){let r=this.getRatio(t,i);return{translateH:(e.transform.translateH||0)*r,translateV:(e.transform.translateV||0)*r}}else return{translateH:e.transform.translateH?At(e.transform.translateH,t.transformed.size.width):0,translateV:e.transform.translateV?At(e.transform.translateV,t.transformed.size.height):0}}getRatio(t,e){return t.transformed.size.width/e.width}getImagePosition(t,e,i,r){let a=this.getRatio(t,r),s={x1:Math.round(e.x1*a),y1:Math.round(e.y1*a),x2:Math.round(e.x2*a),y2:Math.round(e.y2*a)};return i.containWithinAspectRatio||(s.x1=Math.max(s.x1,0),s.y1=Math.max(s.y1,0),s.x2=Math.min(s.x2,t.transformed.size.width),s.y2=Math.min(s.y2,t.transformed.size.height)),s}getOffsetImagePosition(t,e,i,r){let a=i.canvasRotation+t.exifTransform.rotate,s=this.getRatio(t,r),h,l;a%2?(h=(t.transformed.size.width-t.original.size.height)/2,l=(t.transformed.size.height-t.original.size.width)/2):(h=(t.transformed.size.width-t.original.size.width)/2,l=(t.transformed.size.height-t.original.size.height)/2);let p={x1:Math.round(e.x1*s)-h,y1:Math.round(e.y1*s)-l,x2:Math.round(e.x2*s)-h,y2:Math.round(e.y2*s)-l};return i.containWithinAspectRatio||(p.x1=Math.max(p.x1,0),p.y1=Math.max(p.y1,0),p.x2=Math.min(p.x2,t.transformed.size.width),p.y2=Math.min(p.y2,t.transformed.size.height)),p}getResizeRatio(t,e,i){let r=i.resizeToWidth/t,a=i.resizeToHeight/e,s=new Array;i.resizeToWidth>0&&s.push(r),i.resizeToHeight>0&&s.push(a);let h=s.length===0?1:Math.min(...s);return h>1&&!i.onlyScaleDown?h:Math.min(h,1)}getQuality(t){return Math.min(1,Math.max(0,t.imageQuality/100))}};n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"});let c=n;return c})(),Ut=(()=>{let n=class n{resetCropperPosition(t,e,i,r){if(t?.nativeElement)if(i.cropperStaticHeight&&i.cropperStaticWidth)e.x1=0,e.x2=r.width>i.cropperStaticWidth?i.cropperStaticWidth:r.width,e.y1=0,e.y2=r.height>i.cropperStaticHeight?i.cropperStaticHeight:r.height;else{let a=Math.min(i.cropperScaledMaxWidth,r.width),s=Math.min(i.cropperScaledMaxHeight,r.height);if(!i.maintainAspectRatio)e.x1=0,e.x2=a,e.y1=0,e.y2=s;else if(r.width/i.aspectRatio<r.height){e.x1=0,e.x2=a;let h=a/i.aspectRatio;e.y1=(r.height-h)/2,e.y2=e.y1+h}else{e.y1=0,e.y2=s;let h=s*i.aspectRatio;e.x1=(r.width-h)/2,e.x2=e.x1+h}}}move(t,e,i){let r=this.getClientX(t)-e.clientX,a=this.getClientY(t)-e.clientY;i.x1=e.x1+r,i.y1=e.y1+a,i.x2=e.x2+r,i.y2=e.y2+a}resize(t,e,i,r,a){let s=this.getClientX(t)-e.clientX,h=this.getClientY(t)-e.clientY;switch(e.position){case"left":i.x1=Math.min(Math.max(e.x1+s,i.x2-a.cropperScaledMaxWidth),i.x2-a.cropperScaledMinWidth);break;case"topleft":i.x1=Math.min(Math.max(e.x1+s,i.x2-a.cropperScaledMaxWidth),i.x2-a.cropperScaledMinWidth),i.y1=Math.min(Math.max(e.y1+h,i.y2-a.cropperScaledMaxHeight),i.y2-a.cropperScaledMinHeight);break;case"top":i.y1=Math.min(Math.max(e.y1+h,i.y2-a.cropperScaledMaxHeight),i.y2-a.cropperScaledMinHeight);break;case"topright":i.x2=Math.max(Math.min(e.x2+s,i.x1+a.cropperScaledMaxWidth),i.x1+a.cropperScaledMinWidth),i.y1=Math.min(Math.max(e.y1+h,i.y2-a.cropperScaledMaxHeight),i.y2-a.cropperScaledMinHeight);break;case"right":i.x2=Math.max(Math.min(e.x2+s,i.x1+a.cropperScaledMaxWidth),i.x1+a.cropperScaledMinWidth);break;case"bottomright":i.x2=Math.max(Math.min(e.x2+s,i.x1+a.cropperScaledMaxWidth),i.x1+a.cropperScaledMinWidth),i.y2=Math.max(Math.min(e.y2+h,i.y1+a.cropperScaledMaxHeight),i.y1+a.cropperScaledMinHeight);break;case"bottom":i.y2=Math.max(Math.min(e.y2+h,i.y1+a.cropperScaledMaxHeight),i.y1+a.cropperScaledMinHeight);break;case"bottomleft":i.x1=Math.min(Math.max(e.x1+s,i.x2-a.cropperScaledMaxWidth),i.x2-a.cropperScaledMinWidth),i.y2=Math.max(Math.min(e.y2+h,i.y1+a.cropperScaledMaxHeight),i.y1+a.cropperScaledMinHeight);break;case"center":let l=t.scale,p=Math.min(Math.max(a.cropperScaledMinWidth,Math.abs(e.x2-e.x1)*l),a.cropperScaledMaxWidth),g=Math.min(Math.max(a.cropperScaledMinHeight,Math.abs(e.y2-e.y1)*l),a.cropperScaledMaxHeight);i.x1=e.clientX-p/2,i.x2=e.clientX+p/2,i.y1=e.clientY-g/2,i.y2=e.clientY+g/2,i.x1<0?(i.x2-=i.x1,i.x1=0):i.x2>r.width&&(i.x1-=i.x2-r.width,i.x2=r.width),i.y1<0?(i.y2-=i.y1,i.y1=0):i.y2>r.height&&(i.y1-=i.y2-r.height,i.y2=r.height);break}a.maintainAspectRatio&&this.checkAspectRatio(e.position,i,r,a)}checkAspectRatio(t,e,i,r){let a=0,s=0;switch(t){case"top":e.x2=e.x1+(e.y2-e.y1)*r.aspectRatio,a=Math.max(e.x2-i.width,0),s=Math.max(0-e.y1,0),(a>0||s>0)&&(e.x2-=s*r.aspectRatio>a?s*r.aspectRatio:a,e.y1+=s*r.aspectRatio>a?s:a/r.aspectRatio);break;case"bottom":e.x2=e.x1+(e.y2-e.y1)*r.aspectRatio,a=Math.max(e.x2-i.width,0),s=Math.max(e.y2-i.height,0),(a>0||s>0)&&(e.x2-=s*r.aspectRatio>a?s*r.aspectRatio:a,e.y2-=s*r.aspectRatio>a?s:a/r.aspectRatio);break;case"topleft":e.y1=e.y2-(e.x2-e.x1)/r.aspectRatio,a=Math.max(0-e.x1,0),s=Math.max(0-e.y1,0),(a>0||s>0)&&(e.x1+=s*r.aspectRatio>a?s*r.aspectRatio:a,e.y1+=s*r.aspectRatio>a?s:a/r.aspectRatio);break;case"topright":e.y1=e.y2-(e.x2-e.x1)/r.aspectRatio,a=Math.max(e.x2-i.width,0),s=Math.max(0-e.y1,0),(a>0||s>0)&&(e.x2-=s*r.aspectRatio>a?s*r.aspectRatio:a,e.y1+=s*r.aspectRatio>a?s:a/r.aspectRatio);break;case"right":case"bottomright":e.y2=e.y1+(e.x2-e.x1)/r.aspectRatio,a=Math.max(e.x2-i.width,0),s=Math.max(e.y2-i.height,0),(a>0||s>0)&&(e.x2-=s*r.aspectRatio>a?s*r.aspectRatio:a,e.y2-=s*r.aspectRatio>a?s:a/r.aspectRatio);break;case"left":case"bottomleft":e.y2=e.y1+(e.x2-e.x1)/r.aspectRatio,a=Math.max(0-e.x1,0),s=Math.max(e.y2-i.height,0),(a>0||s>0)&&(e.x1+=s*r.aspectRatio>a?s*r.aspectRatio:a,e.y2-=s*r.aspectRatio>a?s:a/r.aspectRatio);break;case"center":e.x2=e.x1+(e.y2-e.y1)*r.aspectRatio,e.y2=e.y1+(e.x2-e.x1)/r.aspectRatio;let h=Math.max(0-e.x1,0),l=Math.max(e.x2-i.width,0),p=Math.max(e.y2-i.height,0),g=Math.max(0-e.y1,0);(h>0||l>0||p>0||g>0)&&(e.x1+=p*r.aspectRatio>h?p*r.aspectRatio:h,e.x2-=g*r.aspectRatio>l?g*r.aspectRatio:l,e.y1+=g*r.aspectRatio>l?g:l/r.aspectRatio,e.y2-=p*r.aspectRatio>h?p:h/r.aspectRatio);break}}getClientX(t){return"touches"in t&&t.touches[0]?t.touches[0].clientX:"clientX"in t?t.clientX:0}getClientY(t){return"touches"in t&&t.touches[0]?t.touches[0].clientY:"clientX"in t?t.clientY:0}};n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"});let c=n;return c})(),Lt="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==";function Qt(){return new Promise(c=>{let n=new Image;n.onload=()=>{let o=n.width===1&&n.height===2;c(o)},n.src=Lt})}function Dt(c){switch(typeof c=="object"&&(c=jt(c)),c){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}function jt(c){let n=new DataView(c);if(n.getUint16(0,!1)!==65496)return-2;let o=n.byteLength,t=2;for(;t<o;){if(n.getUint16(t+2,!1)<=8)return-1;let e=n.getUint16(t,!1);if(t+=2,e==65505){if(n.getUint32(t+=2,!1)!==1165519206)return-1;let i=n.getUint16(t+=6,!1)==18761;t+=n.getUint32(t+4,i);let r=n.getUint16(t,i);t+=2;for(let a=0;a<r;a++)if(n.getUint16(t+a*12,i)==274)return n.getUint16(t+a*12+8,i)}else{if((e&65280)!==65280)break;t+=n.getUint16(t,!1)}}return-1}var Yt=(()=>{let n=class n{constructor(){this.autoRotateSupported=Qt()}loadImageFile(t,e){return R(this,null,function*(){let i=yield t.arrayBuffer();return yield this.checkImageTypeAndLoadImageFromArrayBuffer(i,t.type,e)})}checkImageTypeAndLoadImageFromArrayBuffer(t,e,i){return this.isValidImageType(e)?this.loadImageFromArrayBuffer(t,i,e):Promise.reject(new Error("Invalid image type"))}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|svg|webp|x-icon|vnd.microsoft.icon)/.test(t)}loadImageFromURL(t,e){return R(this,null,function*(){let r=yield(yield fetch(t)).blob(),a=yield r.arrayBuffer();return yield this.loadImageFromArrayBuffer(a,e,r.type)})}loadBase64Image(t,e){let i=this.base64ToArrayBuffer(t);return this.loadImageFromArrayBuffer(i,e)}base64ToArrayBuffer(t){t=t.replace(/^data:([^;]+);base64,/gmi,"");let e=atob(t),i=e.length,r=new Uint8Array(i);for(let a=0;a<i;a++)r[a]=e.charCodeAt(a);return r.buffer}loadImageFromArrayBuffer(t,e,i){return R(this,null,function*(){let r=yield new Promise((a,s)=>R(this,null,function*(){try{let h=new Blob([t],i?{type:i}:void 0),l=URL.createObjectURL(h),p=new Image,y=i==="image/svg+xml"?yield this.getSvgImageSize(h):void 0;p.onload=()=>a({originalImage:p,originalImageSize:y,originalObjectUrl:l,originalArrayBuffer:t}),p.onerror=s,p.src=l}catch(h){s(h)}}));return yield this.transformImageFromArrayBuffer(r,e,r.originalImageSize!=null)})}getSvgImageSize(t){return R(this,null,function*(){let r=new DOMParser().parseFromString(yield t.text(),"image/svg+xml").querySelector("svg");if(!r)throw Error("Failed to parse SVG image");let a=r.getAttribute("width"),s=r.getAttribute("height");if(a&&s)return null;let h=r.getAttribute("viewBox")||r.getAttribute("viewbox");if(h){let l=h.split(" ");return{width:+l[2],height:+l[3]}}throw Error("Failed to load SVG image. SVG must have width + height or viewBox definition.")})}transformImageFromArrayBuffer(t,e,i=!1){return R(this,null,function*(){let r=yield this.autoRotateSupported,a=Dt(r?-1:t.originalArrayBuffer);if(!t.originalImage||!t.originalImage.complete)return Promise.reject(new Error("No image loaded"));let s={original:{objectUrl:t.originalObjectUrl,image:t.originalImage,size:t.originalImageSize??{width:t.originalImage.naturalWidth,height:t.originalImage.naturalHeight}},exifTransform:a};return this.transformLoadedImage(s,e,i)})}transformLoadedImage(t,e,i=!1){return R(this,null,function*(){let r=e.canvasRotation+t.exifTransform.rotate,a=t.original.size;if(!i&&r===0&&!t.exifTransform.flip&&!e.containWithinAspectRatio)return{original:{objectUrl:t.original.objectUrl,image:t.original.image,size:S({},a)},transformed:{objectUrl:t.original.objectUrl,image:t.original.image,size:S({},a)},exifTransform:t.exifTransform};let s=this.getTransformedSize(a,t.exifTransform,e),h=document.createElement("canvas");h.width=s.width,h.height=s.height;let l=h.getContext("2d");l?.setTransform(t.exifTransform.flip?-1:1,0,0,1,h.width/2,h.height/2),l?.rotate(Math.PI*(r/2)),l?.drawImage(t.original.image,-a.width/2,-a.height/2);let p=yield new Promise(m=>h.toBlob(m,e.format));if(!p)throw new Error("Failed to get Blob for transformed image.");let g=URL.createObjectURL(p),y=yield this.loadImageFromObjectUrl(g);return{original:{objectUrl:t.original.objectUrl,image:t.original.image,size:S({},a)},transformed:{objectUrl:g,image:y,size:{width:y.width,height:y.height}},exifTransform:t.exifTransform}})}loadImageFromObjectUrl(t){return new Promise((e,i)=>{let r=new Image;r.onload=()=>e(r),r.onerror=i,r.src=t})}getTransformedSize(t,e,i){let r=i.canvasRotation+e.rotate;if(i.containWithinAspectRatio)if(r%2){let a=t.width*i.aspectRatio,s=t.height/i.aspectRatio;return{width:Math.max(t.height,a),height:Math.max(t.width,s)}}else{let a=t.height*i.aspectRatio,s=t.width/i.aspectRatio;return{width:Math.max(t.width,a),height:Math.max(t.height,s)}}return r%2?{height:t.width,width:t.height}:{width:t.width,height:t.height}}};n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=L({token:n,factory:n.\u0275fac,providedIn:"root"});let c=n;return c})(),de=(()=>{let n=class n{constructor(t,e,i,r,a,s,h){this.cropService=t,this.cropperPositionService=e,this.loadImageService=i,this.sanitizer=r,this.cd=a,this.zone=s,this.hammerLoader=h,this.settings=new Z,this.setImageMaxSizeRetries=0,this.resizedWhileHidden=!1,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=b,this.imageVisible=!1,this.cropperFrameAriaLabel=this.settings.cropperFrameAriaLabel,this.output=this.settings.output,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resetCropOnAspectRatioChange=this.settings.resetCropOnAspectRatioChange,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.hidden=!1,this.imageCropped=new E,this.startCropImage=new E,this.imageLoaded=new E,this.cropperReady=new E,this.loadImageFailed=new E,this.transformChange=new E,this.reset()}ngOnChanges(t){this.onChangesUpdateSettings(t),this.onChangesInputImage(t),this.loadedImage?.original.image.complete&&(t.containWithinAspectRatio||t.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e)),(t.cropper||t.maintainAspectRatio||t.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.maintainAspectRatio&&(this.resetCropOnAspectRatioChange||!this.aspectRatioIsCorrect())&&(t.maintainAspectRatio||t.aspectRatio)?this.resetCropperPosition():t.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop())),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop()),t.hidden&&this.resizedWhileHidden&&!this.hidden&&setTimeout(()=>{this.onResize(),this.resizedWhileHidden=!1})}onChangesUpdateSettings(t){this.settings.setOptionsFromChanges(t),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&(this.hideResizeSquares=!0,this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1}))}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.reset(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){let t=this.imageChangedEvent?.target?.files;return t instanceof FileList&&t.length>0}setCssTransform(){let t=this.transform?.translateUnit||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${t}, ${this.transform.translateV||0}${t}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(t){this.loadImageService.loadImageFile(t,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e))}loadBase64Image(t){this.loadImageService.loadBase64Image(t,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e))}loadImageFromURL(t){this.loadImageService.loadImageFromURL(t,this.settings).then(e=>this.setLoadedImage(e)).catch(e=>this.loadImageError(e))}setLoadedImage(t){this.loadedImage=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t.transformed.objectUrl),this.cd.markForCheck()}loadImageError(t){console.error(t),this.loadImageFailed.emit()}imageLoadedInView(){this.loadedImage!=null&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit(S({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage?.nativeElement?.offsetWidth>0}onResize(){if(this.loadedImage)if(this.hidden)this.resizedWhileHidden=!0;else{let t=S({},this.maxSize);this.setMaxSize(),this.resizeCropperPosition(t),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize()}}activatePinchGesture(){return R(this,null,function*(){yield this.hammerLoader?.();let t=window?.Hammer||null;if(t){let e=new t(this.wrapper.nativeElement);e.get("pinch").set({enable:!0}),e.on("pinchmove",this.onPinch.bind(this)),e.on("pinchend",this.pinchStop.bind(this)),e.on("pinchstart",this.startPinch.bind(this))}else wt()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")})}resizeCropperPosition(t){(t.width!==this.maxSize.width||t.height!==this.maxSize.height)&&(this.cropper.x1=this.cropper.x1*this.maxSize.width/t.width,this.cropper.x2=this.cropper.x2*this.maxSize.width/t.width,this.cropper.y1=this.cropper.y1*this.maxSize.height/t.height,this.cropper.y2=this.cropper.y2*this.maxSize.height/t.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings,this.maxSize),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){let e=+t.key;e>=1&&e<=9&&(this.settings.stepSize=e)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;let i=t.shiftKey?b.Resize:b.Move,r=t.altKey?Wt(t.key):Vt(t.key),a=Bt(t.key,this.settings.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},i,r),this.handleMouseMove(a),this.handleMouseUp()}startMove(t,e,i=null){this.disabled||this.moveStart?.active&&this.moveStart?.type===b.Pinch||e===b.Drag&&!this.allowMoveImage||("preventDefault"in t&&t.preventDefault(),this.moveStart=S({active:!0,type:e,position:i,transform:S({},this.transform),clientX:this.cropperPositionService.getClientX(t),clientY:this.cropperPositionService.getClientY(t)},this.cropper),this.initMouseMove())}initMouseMove(){G(W(document,"mousemove"),W(document,"touchmove")).pipe(ht(G(W(document,"mouseup"),W(document,"touchend")).pipe(ct()))).subscribe({next:t=>this.zone.run(()=>{this.handleMouseMove(t),this.cd.markForCheck()}),complete:()=>this.zone.run(()=>{this.handleMouseUp(),this.cd.markForCheck()})})}startPinch(t){this.safeImgDataUrl&&(t.preventDefault&&t.preventDefault(),this.moveStart=S({active:!0,type:b.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}handleMouseMove(t){if(this.moveStart.active){if("stopPropagation"in t&&t.stopPropagation(),"preventDefault"in t&&t.preventDefault(),this.moveStart.type===b.Move)this.cropperPositionService.move(t,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===b.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===b.Drag){let e=this.cropperPositionService.getClientX(t)-this.moveStart.clientX,i=this.cropperPositionService.getClientY(t)-this.moveStart.clientY;this.transform=st(S({},this.transform),{translateH:(this.moveStart.transform?.translateH||0)+e,translateV:(this.moveStart.transform?.translateV||0)+i}),this.setCssTransform()}}}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===b.Pinch&&(this.cropperPositionService.resize(t,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.markForCheck())}setMaxSize(){if(this.sourceImage){let t=getComputedStyle(this.sourceImage.nativeElement);this.maxSize.width=parseFloat(t.width),this.maxSize.height=parseFloat(t.height),this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.loadedImage?.transformed?.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.maintainAspectRatio?this.settings.cropperScaledMinHeight=Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?this.settings.cropperScaledMinHeight=Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):this.settings.cropperScaledMinHeight=20}setCropperScaledMaxSize(){if(this.loadedImage?.transformed?.image){let t=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/t:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/t:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}handleMouseUp(){this.moveStart.active&&(this.moveStart.active=!1,this.moveStart?.type===b.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(t=this.settings.output){if(this.loadedImage?.transformed?.image!=null){if(this.startCropImage.emit(),t==="blob")return this.cropToBlob();if(t==="base64")return this.cropToBase64()}return null}cropToBlob(){return new Promise((t,e)=>this.zone.run(()=>R(this,null,function*(){let i=yield this.cropService.crop(this.loadedImage,this.cropper,this.settings,"blob",this.maxSize);i?(this.imageCropped.emit(i),t(i)):e("Crop image failed")})))}cropToBase64(){let t=this.cropService.crop(this.loadedImage,this.cropper,this.settings,"base64",this.maxSize);return t?(this.imageCropped.emit(t),t):null}aspectRatioIsCorrect(){return(this.cropper.x2-this.cropper.x1)/(this.cropper.y2-this.cropper.y1)===this.aspectRatio}};n.\u0275fac=function(e){return new(e||n)(O(Ft),O(Ut),O(Yt),O(Ct),O(Mt),O(gt),O(yt,8))},n.\u0275cmp=lt({type:n,selectors:[["image-cropper"]],viewQuery:function(e,i){if(e&1&&(K(It,7),K(Ot,5)),e&2){let r;$(r=J())&&(i.wrapper=r.first),$(r=J())&&(i.sourceImage=r.first)}},hostVars:6,hostBindings:function(e,i){e&1&&A("resize",function(){return i.onResize()},!1,dt),e&2&&(V("text-align",i.alignImage),D("disabled",i.disabled)("ngx-ix-hidden",i.hidden))},inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",imageAltText:"imageAltText",cropperFrameAriaLabel:"cropperFrameAriaLabel",output:"output",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resetCropOnAspectRatioChange:"resetCropOnAspectRatioChange",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled",hidden:"hidden"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},standalone:!0,features:[pt,xt],decls:5,vars:10,consts:[["wrapper",""],["sourceImage",""],["class","ngx-ic-source-image","role","presentation",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart","error",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],["role","presentation",1,"ngx-ic-source-image",3,"load","mousedown","touchstart","error","src"],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],["role","presentation",1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],["role","presentation",1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],["role","presentation",1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],["role","presentation",1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:function(e,i){e&1&&(M(0,"div",null,0),Q(2,Et,2,8,"img",2),z(3,"div",3),Q(4,Ht,3,16,"div",4),_()),e&2&&(V("background",i.imageVisible&&i.backgroundColor),B(2),k("ngIf",i.safeImgDataUrl),B(),V("width",i.maxSize.width,"px")("height",i.maxSize.height,"px")("margin-left",i.alignImage==="center"?i.marginLeft:null),B(),k("ngIf",i.imageVisible))},dependencies:[_t],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";inset:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}.ngx-ix-hidden[_nghost-%COMP%]{display:none}'],changeDetection:0});let c=n;return c})();function ue(c){let n=c.split(","),o=n[0].replace("data:","").replace(";base64",""),t=atob(n[1]),e=new ArrayBuffer(t.length),i=new Uint8Array(e);for(let r=0;r<t.length;r+=1)i[r]=t.charCodeAt(r);return new Blob([e],{type:o})}function Xt(c,n){let o=[],t=0,e;for(let i=0;i<=n.length;i++)for(let r=0;r<=c.length;r++)i&&r?e=c.charAt(r-1)===n.charAt(i-1)?t:Math.min(o[r],o[r-1],t)+1:e=i+r,t=o[r],o[r]=e;return o.pop()||0}function Pt(c,n){if(c===void 0&&n===void 0)throw new Error("Trying to compare two undefined values");if(c===void 0||n===void 0)return 0;let o=String(c),t=String(n),e=Xt(o,t);return o.length>t.length?1-e/o.length:1-e/t.length}function qt(c,n){let o=/[^\w, ]+/,t=n||2,e=`-${c.toLowerCase().replace(o,"")}-`,i=[];for(let r=0;r<e.length-t+1;r+=1)i.push(e.slice(r,r+t));return i}function bt(c,n){let o={};return qt(c,n||2).forEach(e=>{e in o?o[e]+=1:o[e]=1}),o}function Gt(c){for(let n in c)if(Object.prototype.hasOwnProperty.call(c,n))return!1;return!0}function Y(c){if(typeof c!="string")throw new Error("Must use a string as argument to FuzzySet functions");return c.toLowerCase()}var X=class{version="0.0.1";arr;useLevenshtein;gramSizeLower;gramSizeUpper;exactSet={};matchDict={};items={};constructor(n,o,t,e){this.arr=n||[],this.useLevenshtein=o||!0,this.gramSizeLower=t||2,this.gramSizeUpper=e||3;for(let i=this.gramSizeLower;i<this.gramSizeUpper+1;i+=1)this.items[i]=[];this.arr.forEach(i=>{this.add(i)})}get(n,o){let t=this.getVal(n);return!t&&o?o:t}add(n){if(!(Y(n)in this.exactSet))for(let t=this.gramSizeLower;t<this.gramSizeUpper+1;t+=1)this.addVal(n,t)}length(){let n=0;for(let o in this.exactSet)Object.prototype.hasOwnProperty.call(this.exactSet,o)&&(n+=1);return n}isEmpty(){for(let n in this.exactSet)if(Object.prototype.hasOwnProperty.call(this.exactSet,n))return!1;return!0}values(){let n=[];for(let o in this.exactSet)Object.prototype.hasOwnProperty.call(this.exactSet,o)&&n.push(this.exactSet[o]);return n}getVal(n){let o=Y(n),t=this.exactSet[o];if(t)return[[1,t]];for(let e=this.gramSizeUpper;e>=this.gramSizeLower;e-=1){let i=this.getValGram(n,e);if(i)return i}}getValGram(n,o){let t=Y(n),e={},i=bt(t,o),r=this.items[o],a=0,s;for(let m in i)if(Object.prototype.hasOwnProperty.call(i,m)){let x=i[m];if(a+=Math.pow(x,2),m in this.matchDict)for(let C of this.matchDict[m]){let v=C[0];s=C[1],v in e?e[v]+=x*s:e[v]=x*s}}if(Gt(e))return;let h=Math.sqrt(a),l=[],p;Object.keys(e).forEach(m=>{p=e[m];let x=parseInt(m,10);l.push([p/(h*r[x][0]),r[x][1]])});let g=(m,x)=>m[0]<x[0]?1:m[0]>x[0]?-1:0;if(l.sort(g),this.useLevenshtein){let m=[],x=Math.min(50,l.length);for(let C=0;C<x;C+=1)m.push([Pt(l[C][1],t),l[C][1]]);l=m,l.sort(g)}let y=[];for(let m of l)m[0]===l[0][0]&&y.push([m[0],this.exactSet[m[1]]]);return y}addVal(n,o){let t=Y(n),e=this.items[o]||[],i=e.length;e.push(0);let r=bt(t,o),a=0;for(let h in r)if(Object.prototype.hasOwnProperty.call(r,h)){let l=r[h];a+=Math.pow(l,2),h in this.matchDict?this.matchDict[h].push([i,l]):this.matchDict[h]=[[i,l]]}let s=Math.sqrt(a);e[i]=[s,t],this.items[o]=e,this.exactSet[t]=n}};function _e(c){return c.split(/[.,\\/ -]/).map(n=>n.trim()).filter(n=>n.length>0)}function Nt(c){return c.replace(/\.[^/.]+$/,"")}function Kt(c){return c.substring(c.lastIndexOf(".")+1,c.length)||c}function ye(c,n){return n.includes(Kt(c))}function Ce(c,n){return c.toString().replace(/:/g," - ").replace(/[?/!\\]/g,n)}function Ae(c){if(!c)return 0;let o=Nt(c).split(/[ \-_.:;?!~,`"&|()<>{}[\]\r\n/\\]+/).map(Number).filter(t=>!isNaN(t));return o.length>0?o[0]:0}function be(c,n){let o=new X;o.add(c);let t=o.get(n);return t?t[0][0]:0}function Se(c){let n="",o=new Uint8Array(c),t=o.byteLength;for(let e=0;e<t;e++)n+=String.fromCharCode(o[e]);return window.btoa(n)}export{de as a,ue as b,_e as c,Nt as d,Kt as e,ye as f,Ce as g,Ae as h,be as i,Se as j};
