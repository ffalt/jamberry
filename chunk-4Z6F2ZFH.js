import{a as Ne,b as xe,f as De}from"./chunk-7LPD4TRQ.js";import{b as D}from"./chunk-CERT6F7Z.js";import{a as be}from"./chunk-3I6TICGI.js";import{a as Pe}from"./chunk-LXRIBXQ3.js";import{a as H}from"./chunk-3KEFNAKY.js";import{a as Se}from"./chunk-UVO2NCSB.js";import{a as we,b as X,c as Me,d as T,e as ke,f as Oe,g as v,h as Ie,n as Ee,o as S}from"./chunk-XTLMNK2P.js";import{a as Q,b as J}from"./chunk-5EJKCVNW.js";import{k as ve}from"./chunk-5NZQP5GA.js";import{a as Re}from"./chunk-EPPWFHNT.js";import{G as x}from"./chunk-ZMFSGBQT.js";import{d as Ce}from"./chunk-B4HPT77T.js";import{Cb as f,Cd as he,Db as h,Dc as pe,Ec as ge,Gb as G,Hb as z,Ib as _,Jb as a,Kb as r,Lb as C,Ld as Ae,Nd as $,Od as ye,Pb as re,Pc as q,Qb as ae,Qc as k,Qd as W,Rc as ue,Sd as Te,U as V,Va as R,Vb as w,Xb as I,Xd as N,Yb as se,Za as l,Zb as le,_b as p,ac as s,e as te,fa as u,ic as de,j as B,jc as ce,ka as c,la as m,mb as M,oc as O,pc as b,qc as U,t as oe,tc as E,uc as A,vc as y,wc as me,xa as P,yd as fe,zc as _e}from"./chunk-S3YUDFSI.js";var Be=["inlineEditControl"];function Ge(n,d){if(n&1){let e=w();a(0,"div",1)(1,"input",2,0),y("ngModelChange",function(i){c(e);let o=s();return A(o.value,i)||(o.value=i),m(i)}),p("blur",function(){c(e);let i=s();return m(i.onBlur())})("keydown.enter",function(){c(e);let i=s();return m(i.apply())}),r()()}if(n&2){let e=s();l(),_("required",e.required())("name",e.value)("type",e.type())("placeholder",e.placeholder()),E("ngModel",e.value)}}function ze(n,d){if(n&1){let e=w();a(0,"div")(1,"div",3),p("click",function(){c(e);let i=s();return m(i.edit(i.value))})("focus",function(){c(e);let i=s();return m(i.edit(i.value))}),O(2),C(3,"i",4),r()()}if(n&2){let e=s();l(2),U("",e.value,"\xA0")}}var Fe=(()=>{class n{constructor(){this.placeholder=k(""),this.type=k("text"),this.required=k(!1),this.disabled=k(!1),this.endEditRequest=q(),this.editing=!1,this.inlineEditControl=ue("inlineEditControl"),this.editValue="",this.preValue=""}get value(){return this.editValue}set value(e){e!==this.editValue&&(this.editValue=e,this.onChange?.(e))}writeValue(e){this.editValue=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onBlur(){this.editing=!1,this.preValue!==this.editValue&&this.endEditRequest.emit()}apply(){this.editing=!1,this.endEditRequest.emit()}edit(e){this.disabled()||(this.preValue=e,this.editing=!0,setTimeout(()=>{let t=this.inlineEditControl();t?.nativeElement&&t.nativeElement.focus()}))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=M({type:n,selectors:[["app-inline-edit"]],viewQuery:function(t,i){t&1&&de(i.inlineEditControl,Be,5),t&2&&ce()},inputs:{placeholder:[1,"placeholder"],type:[1,"type"],required:[1,"required"],disabled:[1,"disabled"]},outputs:{endEditRequest:"endEditRequest"},features:[_e([{provide:we,useExisting:n,multi:!0}])],decls:2,vars:1,consts:()=>{let e;return e=$localize`:␟32dfa3de9f35ea40a3c19960ab339727b437791f␟2350070440008093526:Click to edit`,[["inlineEditControl",""],[1,"inline-edit-edit"],[3,"ngModelChange","blur","keydown.enter","required","name","type","placeholder","ngModel"],["title",e,"tabindex","0",1,"inline-edit",3,"click","focus"],[1,"icon-edit"]]},template:function(t,i){t&1&&f(0,Ge,3,5,"div",1)(1,ze,4,1,"div"),t&2&&h(i.editing?0:1)},dependencies:[S,Me,T,Ee,v],styles:[`.inline-edit{cursor:pointer}.inline-edit i{font-size:.7em}.inline-edit-edit{width:100%;display:block}.inline-edit-edit input{width:100%}
`],encapsulation:2})}}return n})();function Le(n){if(!n.startsWith("blob:"))return!1;try{return new URL(n).protocol==="blob:"}catch(d){return!1}}function Ue(n,d){if(n&1){let e=w();a(0,"image-cropper",8),p("imageCropped",function(i){c(e);let o=s();return m(o.imageCropped(i))}),r()}if(n&2){let e=s();_("imageBase64",e.imageBase64)("format",e.format)("maintainAspectRatio",e.maintainAspectRatio)}}function qe(n,d){if(n&1&&(a(0,"div",5),C(1,"img",9),r()),n&2){let e=s();l(),_("src",e.croppedImage,R)}}var Ve=(()=>{class n{constructor(){this.data=k(),this.imageEdited=q(),this.imageBase64="",this.maintainAspectRatio=!0,this.format="jpeg",this.unsubscribe=new B,this.jam=u(N),this.folderService=u(D),this.notify=u(x),this.sanitizer=u(Ce)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}load(){let e=this.data();e&&this.jam.image.imageBinary({id:e.artwork.id}).then(t=>{this.imageBase64=`data:${t.contentType||"image/jpeg"};base64,${xe(t.buffer)}`}).catch(t=>{this.notify.error(t)})}ngOnChanges(){this.load()}imageCropped(e){e.objectUrl&&(Le(e.objectUrl)?this.croppedImage=this.sanitizer.bypassSecurityTrustUrl(e.objectUrl):(console.error("Invalid object URL from image cropper:",e.objectUrl),this.notify.error("Invalid image URL generated by cropper"),this.croppedImage=void 0)),e.blob&&(this.croppedImageFile=e.blob)}upload(){let e=this.data();if(!this.croppedImageFile||!e)return;let t=e.folderID,i=new File([this.croppedImageFile],e.artwork.name,{type:this.croppedImageFile.type});this.jam.artwork.update({id:e.artwork.id},i).pipe(V(this.unsubscribe)).subscribe({next:o=>{o.type===fe.Response&&o.body!==null&&(this.folderService.waitForQueueResult("Updating Folder Artwork",o.body,[t]),this.imageEdited.emit())},error:o=>{this.notify.error(o)},complete:()=>{this.notify.success("Upload done")}})}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=M({type:n,selectors:[["app-admin-artwork-edit"]],inputs:{data:[1,"data"]},outputs:{imageEdited:"imageEdited"},features:[P],decls:10,vars:4,consts:()=>{let e;e=$localize`:␟9adf24384bd663ce0cf256940aae864e83991330␟6234579371454134968:Maintain Aspect Ratio`;let t;t=$localize`:␟f8c2b6ea1dd59afb3f3f555afbd132af40653bba␟1396820513327307838:Use Cropped Artwork`;let i;return i=$localize`:␟4fc4437088a4fa1764a26dd6b3552dbca6b64541␟777253553934937544:Cropped Image`,[e,t,[1,"image-crop"],["type","checkbox",3,"ngModelChange","ngModel","checked"],[3,"imageBase64","format","maintainAspectRatio"],[1,"image-preview"],[1,"buttons"],[1,"button-on-control",3,"click"],[3,"imageCropped","imageBase64","format","maintainAspectRatio"],["alt",i,3,"src"]]},template:function(t,i){t&1&&(a(0,"div",2)(1,"label")(2,"input",3),y("ngModelChange",function(g){return A(i.maintainAspectRatio,g)||(i.maintainAspectRatio=g),g}),r(),re(3),I(4,0),ae(),r(),f(5,Ue,1,3,"image-cropper",4),r(),f(6,qe,2,1,"div",5),a(7,"div",6)(8,"button",7),p("click",function(){return i.upload()}),I(9,1),r()()),t&2&&(l(2),E("ngModel",i.maintainAspectRatio),_("checked",i.maintainAspectRatio),l(3),h(i.imageBase64?5:-1),l(),h(i.croppedImage?6:-1))},dependencies:[S,X,T,v,Ne],styles:["[_nghost-%COMP%]{width:100%;display:block;text-align:center}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]{width:300px;display:block}[_nghost-%COMP%]   .image-crop[_ngcontent-%COMP%]{display:inline-block;text-align:center;margin-left:10px;margin-right:10px}[_nghost-%COMP%]   .image-preview[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;display:inline-block}[_nghost-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px}"]})}}return n})();function Xe(n,d){if(n&1){let e=w();a(0,"app-admin-artwork-edit",1),p("imageEdited",function(){c(e);let i=s();return m(i.onImageEdited())}),r()}if(n&2){let e=s();_("data",e.data)}}var $e=(()=>{class n{constructor(){this.loading=!0}dialogInit(e,t){this.data=t.data,this.reference=e}onImageEdited(){this.reference&&this.reference.close()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=M({type:n,selectors:[["app-image-edit-overlay-content"]],decls:1,vars:1,consts:[[3,"data"],[3,"imageEdited","data"]],template:function(t,i){t&1&&f(0,Xe,1,1,"app-admin-artwork-edit",0),t&2&&h(i.data?0:-1)},dependencies:[Ve],encapsulation:2})}}return n})();var He=(n,d)=>d.artwork.id;function Qe(n,d){if(n&1){let e=w();a(0,"div",3),p("keydown.enter",function(){let i=c(e).$implicit,o=s();return m(o.editArtwork(i.artwork))}),a(1,"div",4)(2,"img",5),p("clickenter",function(){let i=c(e).$implicit,o=s();return m(o.editArtwork(i.artwork))}),r(),a(3,"div",6),O(4),r(),a(5,"div",7),O(6),r(),a(7,"div",8),I(8,0),r(),a(9,"div",9),O(10),pe(11,"filesize"),r()(),a(12,"div",10)(13,"app-inline-edit",11),y("ngModelChange",function(i){let o=c(e).$implicit;return A(o.name,i)||(o.name=i),m(i)}),p("endEditRequest",function(){let i=c(e).$implicit,o=s();return m(o.editArtworkName(i))}),r(),a(14,"a",12),p("clickenter",function(){let i=c(e).$implicit,o=s();return m(o.removeArtwork(i))}),C(15,"i",13),r()()()}if(n&2){let e=d.$implicit;l(2),_("src",e.thumbnail,R),l(2),b(e.artwork.types),l(2),b(e.artwork.format),l(2),se(e.artwork.width)(e.artwork.height),le(8),l(2),b(ge(11,7,e.artwork.size)),l(3),E("ngModel",e.name)}}function Je(n){let d=n.split(".");return d.pop(),d.join(".")}function Ye(n){return n.split(".").at(-1)??""}var We=(()=>{class n{constructor(){this.artworks=k(),this.folderID=k(),this.jam=u(N),this.notify=u(x),this.folderService=u(D),this.dialogs=u(Se),this.dialogOverlay=u(ve)}ngOnChanges(){this.displayArtworks()}editArtworkName(e){this.jam.artwork.rename({id:e.artwork.id,newName:e.name}).then(t=>{let i=this.folderID();this.folderService.waitForQueueResult("Renaming Artwork",t,i?[i]:[],[])}).catch(t=>{this.notify.error(t)})}editArtwork(e){this.dialogOverlay.open({childComponent:$e,title:"Edit Image",data:{artwork:e,folderID:this.folderID()},panelClass:""})}removeArtwork(e){this.dialogs.confirm("Remove Artworks?",`Do you want to delete "${e.artwork.name}"?`,()=>{this.jam.artwork.remove({id:e.artwork.id}).then(t=>{this.nodes&&(this.nodes=this.nodes.filter(o=>o!==e));let i=this.folderID();this.folderService.waitForQueueResult("Removing Artwork",t,i?[i]:[])}).catch(t=>{this.notify.error(t)})})}displayArtworks(){this.nodes=[];let e=this.artworks();e&&(this.nodes=e.map(t=>({name:Je(t.name),type:Ye(t.name),artwork:t,thumbnail:this.jam.image.imageUrl({id:t.id,size:128,format:ye.webp})})))}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=M({type:n,selectors:[["app-admin-artwork-list"]],inputs:{artworks:[1,"artworks"],folderID:[1,"folderID"]},features:[P],decls:3,vars:0,consts:()=>{let e;e=$localize`:␟787e502e73191d41bb2ee8adb258a7435c94f5af␟7553271888893131195:Artwork`;let t;t=$localize`:␟4098fa43889421ae01e1548d8123ac604d0a741b␟365085234255662021:Delete Image`;let i;return i=$localize`:␟529bc57f97bc4167977fb632405746401ff67f44␟2349325499864057267:${"\uFFFD0\uFFFD"}:INTERPOLATION:x${"\uFFFD1\uFFFD"}:INTERPOLATION_1:`,[i,["appFocusKeyList","","role","list"],["appFocusKeyListItem","","role","listitem",1,"artwork"],["appFocusKeyListItem","","role","listitem",1,"artwork",3,"keydown.enter"],[1,"artwork-img"],["alt",e,3,"clickenter","src"],[1,"mode"],[1,"format"],[1,"dims"],[1,"size"],[1,"artwork-types"],["type","text",3,"ngModelChange","endEditRequest","ngModel"],["title",t,1,"delete-button",3,"clickenter"],["aria-hidden","true",1,"icon-trash"]]},template:function(t,i){t&1&&(a(0,"div",1),G(1,Qe,16,9,"div",2,He),r()),t&2&&(l(),z(i.nodes))},dependencies:[S,T,v,Fe,H,Q,J,be],styles:["[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]{display:inline-block;padding-top:15px;padding-right:15px;font-size:.8em;text-align:center;width:200px}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]{position:relative;overflow:hidden}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .dims[_ngcontent-%COMP%], [_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%], [_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .format[_ngcontent-%COMP%], [_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{position:absolute;padding:5px;background-color:var(--background-transparent);color:var(--on-background-highlight)}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{top:0;left:0}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .format[_ngcontent-%COMP%]{bottom:0;left:0}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .dims[_ngcontent-%COMP%]{top:0;right:0}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{bottom:0;right:0}[_nghost-%COMP%]   .artwork-types[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;overflow:hidden}[_nghost-%COMP%]   .artwork-types[_ngcontent-%COMP%]   app-inline-edit[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .artwork-types[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}"]})}}return n})();var Ze=(n,d)=>d.image;function et(n,d){n&1&&C(0,"app-loading")}function tt(n,d){n&1&&C(0,"i",17)}function it(n,d){if(n&1){let e=w();a(0,"input",19),y("ngModelChange",function(i){c(e);let o=s().$implicit;return A(o.checked,i)||(o.checked=i),m(i)}),r()}if(n&2){let e=s().$implicit;_("checked",e.checked),E("ngModel",e.checked)}}function nt(n,d){if(n&1){let e=w();a(0,"div",11),p("keydown.enter",function(){let i=c(e).$implicit;return m(i.checked=!i.checked)}),a(1,"div",12),p("clickenter",function(){let i=c(e).$implicit;return m(i.checked=!i.checked)}),C(2,"img",13),r(),a(3,"div",14)(4,"div",15)(5,"form")(6,"span",16),f(7,tt,1,0,"i",17)(8,it,1,2,"input",18),O(9),r()()()()()}if(n&2){let e=d.$implicit;l(2),_("alt",me(e.name))("src",e.thumbnail,R),l(5),h(e.storing?7:8),l(2),U(" ",e.name," ")}}function ot(n,d){if(n&1&&(a(0,"div"),C(1,"app-background-text-list",8),a(2,"div",9),G(3,nt,10,5,"div",10,Ze),r()()),n&2){let e=s();l(),_("list",e.nodes),l(2),z(e.nodes)}}function rt(n,d){if(n&1&&C(0,"app-admin-artwork-list",21),n&2){let e=s(),t=s(2);_("folderID",e.folder.id)("artworks",t.artworks)}}function at(n,d){if(n&1&&(a(0,"div",20)(1,"div",4),I(2,0),r(),f(3,rt,1,2,"app-admin-artwork-list",21),r()),n&2){let e=s(2);l(3),h(e.isArtRefreshing?-1:3)}}function st(n,d){if(n&1&&f(0,at,4,1,"div",20),n&2){let e,t=s();h((e=t.data())?0:-1,e)}}function lt(n,d){n&1&&(a(0,"button",22),C(1,"i",17),r())}function dt(n,d){if(n&1){let e=w();a(0,"button",23),p("click",function(){c(e);let i=s(2);return m(i.use())}),I(1,1),r()}}function ct(n,d){if(n&1&&(a(0,"div"),f(1,lt,2,0,"button",22)(2,dt,2,0,"button",22),r()),n&2){let e=s();l(),h(e.isWorking?1:2)}}var Ke=(()=>{class n{constructor(){this.data=k(),this.isWorking=!1,this.isArtRefreshing=!1,this.searchSource={name:"",url:""},this.unsubscribe=new B,this.jam=u(N),this.notify=u(x),this.folderService=u(D),this.http=u(he)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}ngOnChanges(){this.search();let e=this.data();e?.folder&&(e.folder.artworks?this.artworks=e.folder.artworks:this.refreshArtworks())}refreshArtworks(){let e=this.data();e&&(this.isArtRefreshing=!0,this.jam.artwork.search({folderIDs:[e.folder.id]}).then(t=>{this.isArtRefreshing=!1,this.artworks=t.items}).catch(t=>{this.isArtRefreshing=!1,console.error(t)}))}loadWikiDataID(e){return te(this,null,function*(){let i=(yield this.jam.metadata.musicbrainzLookup({type:Ae.artist,mbID:e})).data;if(i?.artist?.relations){let o=i.artist.relations.find(g=>g.type==="wikidata");if(o?.url)return o.url.resource.split("/").pop()}})}loadWikiCommonImage(e){return te(this,null,function*(){let t=yield this.loadWikiDataID(e);if(!t)return;let g=(yield this.jam.metadata.wikidataLookup({wikiDataID:t})).data?.entity?.claims;if(!g)return;let F=Object.keys(g);for(let Y of F){let Z=g[Y];Z=Z.filter(L=>typeof L.mainsnak.datavalue.value=="string"&&De(L.mainsnak.datavalue.value.toLowerCase(),["jpg","jpeg","png"]));let ne=Z.at(0);if(ne){let L=ne.mainsnak.datavalue.value;if(typeof L!="string")return;let je=`https://en.wikipedia.org/w/api.php?format=json&action=query&origin=*&titles=File:${L}&prop=imageinfo&iiprop=extmetadata|url&iiextmetadatafilter=LicenseShortName`,ee=yield oe(this.http.get(je));if(ee?.query?.pages){let j=ee.query.pages[Object.keys(ee.query.pages)[0]]?.imageinfo[0];if(j)return{name:W.artist,thumbnail:j.url,image:j.url,licence:j.extmetadata.LicenseShortName.value,checked:!0,storing:!1,types:[W.artist]}}}}})}loadWikiCommon(e){this.loadWikiCommonImage(e).then(t=>{this.nodes=[],t&&(t.checked=!0,this.nodes.push(t))}).catch(t=>{this.nodes=[],this.notify.error(t)})}use(){let e=(this.nodes??[]).find(i=>i.checked&&!i.storing),t=this.data()?.folder;e&&t?(this.isWorking=!0,e.storing=!0,this.jam.artwork.createByUrl({folderID:t.id,url:e.image,types:e.types}).then(i=>{this.folderService.waitForQueueResult("Creating Artwork",i,[t.id]).pipe(V(this.unsubscribe)).subscribe(()=>{e.storing=!1,e.checked=!1}),this.use()}).catch(i=>{e.storing=!1,this.notify.error(i)})):this.isWorking=!1}ngOnInit(){this.folderService.foldersChange.pipe(V(this.unsubscribe)).subscribe(e=>{e.id===this.data()?.folder.id&&this.refreshArtworks()})}loadReleaseGroupAndRelease(e,t){this.jam.metadata.coverartarchiveLookup({type:$.releaseGroup,mbID:t}).then(i=>{let o=i.data,g=this.coverArtResponseToNodes(o);this.jam.metadata.coverartarchiveLookup({type:$.release,mbID:e}).then(F=>{let Y=F.data;g=[...g,...this.coverArtResponseToNodes(Y)],this.display(g)}).catch(F=>{this.notify.error(F)})}).catch(i=>{this.notify.error(i)})}loadReleaseGroup(e){this.jam.metadata.coverartarchiveLookup({type:$.releaseGroup,mbID:e}).then(t=>{let i=t.data,o=this.coverArtResponseToNodes(i);this.display(o)}).catch(t=>{this.notify.error(t)})}loadRelease(e){e&&this.jam.metadata.coverartarchiveLookup({type:$.release,mbID:e}).then(t=>{let i=t.data,o=this.coverArtResponseToNodes(i);this.display(o);let g=this.data();o.length===0&&g?.folder.tag?.mbReleaseGroupID&&(this.nodes=void 0,this.loadReleaseGroup(g.folder.tag.mbReleaseGroupID))}).catch(t=>{this.notify.error(t)})}coverArtResponseToNodes(e){return e?.images?e.images.map(t=>{let i=t.types??[];return i.length===0&&i.push("Other"),{name:i.join("/").toLowerCase(),thumbnail:t.thumbnails?.small?this.jam.metadata.coverartarchiveImageUrl({url:t.thumbnails.small}):"",licence:"",image:t.image,types:i.map(o=>o.toLowerCase()),checked:!1,storing:!1,stored:!1}}):[]}search(){let e=this.data();e?.folder.tag&&(e.folder.type===Te.artist?e.folder.tag.mbArtistID&&(this.searchSource={name:"Wiki Commons",url:"https://commons.wikimedia.org"},this.loadWikiCommon(e.folder.tag.mbArtistID)):(this.searchSource={name:"Coverart Archive",url:"https://coverartarchive.org"},e.folder.tag.mbReleaseID&&e.folder.tag.mbReleaseGroupID?this.loadReleaseGroupAndRelease(e.folder.tag.mbReleaseID,e.folder.tag.mbReleaseGroupID):e.folder.tag.mbReleaseID?this.loadRelease(e.folder.tag.mbReleaseID):e.folder.tag.mbReleaseGroupID&&this.loadReleaseGroup(e.folder.tag.mbReleaseGroupID)))}display(e){this.nodes=e;let t=e.find(i=>i.types.length===1&&i.types[0]===W.front);if(t??=e.find(i=>i.types.includes(W.front)),t)for(let i of this.nodes)i.checked=i===t}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=M({type:n,selectors:[["app-admin-folder-artwork-search"]],inputs:{data:[1,"data"]},features:[P],decls:11,vars:5,consts:()=>{let e;e=$localize`:␟7e7b22a71a4180b0fe37ddd31720efbd93a51ce7␟8668694612879894228:Current Images`;let t;return t=$localize`:␟317c5efadc941d938c6171d4890c06afbd8a8db3␟826482080541471028:Use Checked Artwork`,[e,t,[1,"image-selector"],[1,"art-source"],[1,"section"],["rel","noopener","target","_blank",3,"href"],[1,"artwork"],[1,"buttons"],["name","Images",3,"list"],["appFocusKeyList","","role","list",1,"images"],["appFocusKeyListItem","","role","listitem"],["appFocusKeyListItem","","role","listitem",3,"keydown.enter"],[1,"image",3,"clickenter"],[3,"alt","src"],[1,"footer"],[1,"footer-content"],[1,"label"],[1,"icon-spin","icon-spinner"],["type","checkbox",3,"checked","ngModel"],["type","checkbox",3,"ngModelChange","checked","ngModel"],[1,"current"],[3,"folderID","artworks"],[1,"button-on-control"],[1,"button-on-control",3,"click"]]},template:function(t,i){t&1&&(a(0,"div",2)(1,"div",3)(2,"div",4)(3,"a",5),O(4),r()(),f(5,et,1,0,"app-loading")(6,ot,5,1,"div"),r(),a(7,"div",6),f(8,st,1,1),r()(),a(9,"div",7),f(10,ct,3,1,"div"),r()),t&2&&(l(3),_("href",i.searchSource.url,R),l(),b(i.searchSource.name),l(),h(i.nodes?6:5),l(3),h(i.artworks?8:-1),l(2),h(i.nodes&&i.nodes.length>0?10:-1))},dependencies:[S,Ie,X,T,ke,v,Oe,We,H,Q,J,Pe,Re],styles:["[_nghost-%COMP%]   .image-selector[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap;height:calc(100% - 40px)}[_nghost-%COMP%]   .image-buttons[_ngcontent-%COMP%]{height:40px}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]{overflow-y:auto;width:50%;height:100%;padding-left:15px}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]{padding-right:15px;overflow-y:auto;width:50%;height:100%;border-right:1px solid var(--background-border)}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:inline-block;padding-top:15px;padding-right:15px;font-size:.8em}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:185px;min-width:185px;min-height:185px;height:auto}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   .section[_ngcontent-%COMP%]{border-bottom:1px solid var(--background-border);padding-bottom:5px}[_nghost-%COMP%]   .section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background)}"]})}}return n})();var _i=(()=>{class n{dialogInit(e,t){this.data=t.data}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=M({type:n,selectors:[["app-dialog-folder-artwork-search"]],decls:1,vars:1,consts:[[3,"data"]],template:function(t,i){t&1&&C(0,"app-admin-folder-artwork-search",0),t&2&&_("data",i.data)},dependencies:[Ke],encapsulation:2})}}return n})();export{Fe as a,We as b,_i as c};
