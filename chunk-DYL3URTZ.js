import{D as l,Ga as f,I as b,W as m,aa as p,fa as a,j as c,ra as h,vd as u}from"./chunk-XLNNDSL4.js";var s=class i{static{this.empty=new i(0,0,0,0)}constructor(t,r,e,o){this.left=t,this.top=r,this.right=e,this.bottom=o}static fromElement(t){let{left:r,top:e,right:o,bottom:n}=t.getBoundingClientRect();return new i(r,e,o,n)}static fromWindow(t){return new i(0,0,t.innerWidth,t.innerHeight)}inflate(t){this.left-=t,this.top-=t,this.right+=t,this.bottom+=t}intersectsWith(t){return t.left<this.right&&this.left<t.right&&t.top<this.bottom&&this.top<t.bottom}intersectsWithY(t){return t.top<this.bottom&&this.top<t.bottom}getIntersectionWith(t){let r=Math.max(this.left,t.left),e=Math.max(this.top,t.top),o=Math.min(this.right,t.right),n=Math.min(this.bottom,t.bottom);return o>=r&&n>=e?new i(r,e,o,n):i.empty}};var W=(()=>{class i{constructor(){this.scrollNotify=new h,this.observeNotify=new h,this.currentViewport=new s(0,0,0,0),this.platformId=a(f),this.scrollSubject=new c,this.isBrowser=u(this.platformId),this.hasIntersectionObserver=i.checkIntersectionObserver();let r=this.scrollSubject.asObservable();this.scrollObservable=l(r.pipe(m(300)),r.pipe(b(100))),this.scrollObservable.subscribe(e=>{this.scrollNotify.emit(e)}),this.currentViewport=s.fromWindow(globalThis)}getObserver(){return this.intersectionObserver?this.intersectionObserver:(this.intersectionObserver=new IntersectionObserver(r=>{this.observeNotify.next(r)},{threshold:0}),this.intersectionObserver)}notifyScroll(r){if(this.hasIntersectionObserver)return;let e=r.element?s.fromElement(r.element):s.fromWindow(globalThis),o=e.bottom-e.top;e.bottom+=o,e.top-=o,this.currentViewport=e,this.scrollSubject.next({rect:e})}static checkIntersectionObserver(){return"IntersectionObserver"in globalThis}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=p({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{s as a,W as b};
