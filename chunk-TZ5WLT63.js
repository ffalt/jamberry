import{a as Q}from"./chunk-JSUNL6NZ.js";import{a as q}from"./chunk-22DBVRPI.js";import{a as K}from"./chunk-AVB7SNA4.js";import{a as H}from"./chunk-OJKXV56N.js";import"./chunk-FQC6PRY2.js";import{a as J}from"./chunk-PZTZCA44.js";import{a as j}from"./chunk-4HNSRH53.js";import{G as E}from"./chunk-ZVKVGF76.js";import{f as Y}from"./chunk-T6GM3CFW.js";import{$d as N,Aa as k,Cc as w,Hb as M,Ib as u,Ic as L,Jc as R,Kb as C,Lb as g,Mb as f,Nb as B,Ob as r,Pb as l,Pd as X,Qb as b,Ub as P,Vb as v,Vc as z,Y as D,Ya as U,ab as o,ac as p,bc as I,cc as S,fc as A,ia as m,k as $,nb as T,tc as d,uc as s,vc as G}from"./chunk-H2EXZDP6.js";function Z(t,i){if(t&1&&(r(0,"div",18)(1,"div"),d(2),l(),r(3,"div"),d(4),l()()),t&2){let n=i.$implicit;o(2),s(n.name),o(2),s(n.value)}}function ee(t,i){if(t&1&&(r(0,"div",13)(1,"div",9),d(2),l(),g(3,Z,5,2,"div",18,C),l()),t&2){let n=i.$implicit;o(2),s(n.name),o(),f(n.infos)}}function te(t,i){if(t&1&&(r(0,"div",14)(1,"div"),d(2),r(3,"span",19),d(4),l()()()),t&2){let n=i.$implicit;o(2),G("",n.date," "),o(2),s(n.area.name)}}function ne(t,i){if(t&1&&(r(0,"div"),d(1),l()),t&2){let n=A().$implicit;o(),s(n.label==null?null:n.label.disambiguation)}}function ie(t,i){if(t&1&&(r(0,"div",15)(1,"div",19),d(2),l(),M(3,ne,2,1,"div"),r(4,"div"),P(5),p(6,4),v(),r(7,"span",19),d(8),l()()()),t&2){let n=i.$implicit;o(2),s(n.label==null?null:n.label.name),o(),u(n.label!=null&&n.label.disambiguation?3:-1),o(5),s(n.catalogNumber)}}function oe(t,i){if(t&1&&(r(0,"div",20)(1,"div"),p(2,6),L(3,"mediaduration"),l(),r(4,"div")(5,"span",19),d(6),l(),P(7),p(8,7),v(),r(9,"span",19),d(10),L(11,"mbArtistCredits"),l()()()),t&2){let n=i.$implicit;o(3),I(n.number)(R(3,4,n.length)),S(2),o(3),s(n.title||n.position),o(4),s(R(11,6,n.artistCredit))}}function ae(t,i){if(t&1&&(r(0,"div",16)(1,"div",9),p(2,5),l(),g(3,oe,12,8,"div",20,C),l()),t&2){let n=i.$implicit;o(2),I(n.format)(n.position)(n.trackCount),S(2),o(),f(n.tracks)}}function re(t,i){if(t&1&&(r(0,"div",8)(1,"div",9),P(2),p(3,0),v(),r(4,"a",10),b(5,"app-mb-icon",11),P(6),p(7,1),v(),l()(),r(8,"div",12),g(9,ee,5,1,"div",13,C),l(),r(11,"div",9),p(12,2),l(),g(13,te,5,2,"div",14,C),r(15,"div",9),p(16,3),l(),g(17,ie,9,3,"div",15,C),g(19,ae,5,3,"div",16,C),b(21,"app-mb-relations",17),l()),t&2){let n=A();o(4),B("href",w("https://musicbrainz.org/release/",n.mbAlbum.id),U),o(),B("size",18),o(4),f(n.infoGroups),o(4),f(n.mbAlbum.releaseEvents),o(4),f(n.mbAlbum.labelInfo),o(2),f(n.mbAlbum.media),o(2),B("relations",n.mbAlbum.relations)}}var V=(()=>{let i=class i{constructor(){this.mbAlbumID=z(),this.infoGroups=[],this.jam=m(N),this.notify=m(E)}ngOnChanges(){this.refresh()}refresh(){let e=this.mbAlbumID();e&&this.jam.metadata.musicbrainzLookup({type:X.release,mbID:e}).then(a=>{let _=a.data;this.display(_.release)}).catch(a=>{this.notify.error(a)})}display(e){this.mbAlbum=e;let a=e.tags??[];a.length===0&&(a=e.releaseGroup.tags??[]);let _={name:"Release information",infos:[{name:"Title",value:e.title},{name:"Artist",value:this.compactArtist(e.artistCredit)},{name:"Disambiguation",value:e.disambiguation},{name:"Date",value:e.date},{name:"First Release Date",value:e.releaseGroup.firstReleaseDate},{name:"Country",value:e.country},{name:"Tags",value:a.map(O=>O.name).join(" / ")},{name:"Album Type",value:[e.releaseGroup.primaryType,...e.releaseGroup.secondaryTypes??[]].join(" / ")},{name:"Status",value:e.status},{name:"Packaging",value:e.packaging},{name:"Release ID",value:e.id},{name:"Release Group ID",value:e.releaseGroup.id},{name:"Barcode",value:e.barcode},{name:"ASIN",value:e.asin},{name:"Data Quality",value:e.quality}].filter(O=>!!O.value)};this.infoGroups=[_]}compactArtist(e){return e?.length?e.map(a=>a.name+(a.joinphrase||" ")).join("").trim():""}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=T({type:i,selectors:[["app-mb-album"]],inputs:{mbAlbumID:[1,"mbAlbumID"]},features:[k],decls:1,vars:1,consts:()=>{let e;e=$localize`:␟480ada975a20ad77e5ee0a3c3a96f5ab8412bbec␟1745698093359416419:Album Information by`;let a;a=$localize`:␟34100dfbca19b60a804776a1133a5f7e799ca0ce␟7492127250511388743:MusicBrainz`;let _;_=$localize`:␟dff1ecccc8ae98ac469b87a95d5c6998ddacb9d7␟7454521195203716701:Release Events`;let O;O=$localize`:␟2af7efecfae8d7fed3b07f718a623eca1ad8163f␟546766753072101168:Labels`;let h;h=$localize`:␟42be824d27bc983122a6e4311e1f57fefa46c501␟2878302443401355927:Catalog Number`;let y;y=$localize`:␟702dd4c2aac167a4c21cbbc421cf3679e15d3c83␟5099997522384804866:Media: ${"\uFFFD0\uFFFD"}:INTERPOLATION: ${"\uFFFD1\uFFFD"}:INTERPOLATION_1: (${"\uFFFD2\uFFFD"}:INTERPOLATION_2: Tracks)`;let F;F=$localize`:␟7ea8ad4a0abc19bc786881ed25e72381576a6df6␟5426820798626074795:Track ${"\uFFFD0\uFFFD"}:INTERPOLATION: - ${"\uFFFD1\uFFFD"}:INTERPOLATION_1:`;let x;return x=$localize`:␟7026bd1cbbf23864700f501e89df017d0b8d755d␟1719091699885493218:by`,[e,a,_,O,h,y,F,x,[1,"mbalbum"],[1,"section-title"],["target","_blank","rel","noopener",3,"href"],[3,"size"],[1,"info-groups"],[1,"info-group"],[1,"releaseEvent"],[1,"labelInfo"],[1,"media"],[3,"relations"],[1,"key-value-row"],[1,"value"],[1,"track"]]},template:function(a,_){a&1&&M(0,re,22,4,"div",8),a&2&&u(_.mbAlbum?0:-1)},dependencies:[q,K,Q,H],styles:["[_nghost-%COMP%]   .section[_ngcontent-%COMP%]{margin-bottom:30px}[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{padding-top:30px;padding-bottom:15px}[_nghost-%COMP%]   .key-value-row[_ngcontent-%COMP%]{border-top-width:1px;border-top-style:solid;border-top-color:var(--background-border);display:flex;flex-flow:row nowrap;flex-wrap:nowrap;align-items:center}[_nghost-%COMP%]   .key-value-row[_ngcontent-%COMP%]:last-of-type{border-bottom-color:var(--background-border);border-bottom-width:1px;border-bottom-style:solid}[_nghost-%COMP%]   .key-value-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{width:30%;min-width:100px}[_nghost-%COMP%]   .key-value-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type{padding-left:15px;width:60%;color:var(--on-background-highlight)}[_nghost-%COMP%]   .key-value-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type   a[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .key-value-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type   a[_ngcontent-%COMP%]:hover{color:var(--on-background)}[_nghost-%COMP%]   .key-value-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}[_nghost-%COMP%]   .key-value-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;padding-right:15px}[_nghost-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .track[_ngcontent-%COMP%], [_nghost-%COMP%]   .labelInfo[_ngcontent-%COMP%]{margin-bottom:10px}"]});let t=i;return t})();function le(t,i){t&1&&b(0,"app-loading")}function _e(t,i){if(t&1&&b(0,"app-mb-album",0),t&2){let n=A();B("mbAlbumID",n.mbReleaseID)}}function de(t,i){t&1&&b(0,"app-background-text",1)}var Ie=(()=>{let i=class i{constructor(){this.jam=m(N),this.notify=m(E),this.route=m(Y),this.unsubscribe=new $}ngOnInit(){this.route.parent&&this.route.parent.paramMap.pipe(D(this.unsubscribe)).subscribe(e=>{this.id=e.get("id")??void 0,this.refresh()})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}refresh(){this.album=void 0,this.id&&this.jam.album.id({id:this.id}).then(e=>{this.album=e,this.mbReleaseID=e.mbReleaseID}).catch(e=>{this.notify.error(e)})}};i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=T({type:i,selectors:[["app-album-mb"]],decls:3,vars:3,consts:()=>{let e;return e=$localize`:␟0038953528872613d2eff0ed3912b109d9e9b5cf␟4893616715766810081:No data available`,[[3,"mbAlbumID"],["text",e]]},template:function(a,_){a&1&&(M(0,le,1,0,"app-loading"),M(1,_e,1,1,"app-mb-album",0),M(2,de,1,0,"app-background-text",1)),a&2&&(u(_.album?-1:0),o(),u(_.mbReleaseID?1:-1),o(),u(_.album&&!_.mbReleaseID?2:-1))},dependencies:[V,j,J],styles:["[_nghost-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]{padding-left:10px;padding-right:10px}}"]});let t=i;return t})();export{Ie as AlbumMbComponent};
