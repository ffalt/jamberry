import{$ as c,A as N,Cc as nt,Dc as D,E as R,Ea as v,Ec as rt,Fa as w,Ga as y,Ha as C,I as l,J as q,K as d,L as K,La as G,Ma as J,N as j,Na as _,Oa as O,Od as st,Pb as it,Qd as pt,Sd as lt,T as V,Td as ct,Ud as at,V as F,Vd as ut,Wd as mt,_ as $,a as A,aa as B,ab as Z,da as Q,f as h,ha as g,hb as tt,i as f,ka as L,m as I,ma as X,n as T,o as P,oa as Y,r as s,s as S,ta as z,tb as et,u as M,ua as U,y as H,ya as W,yb as ot,z as p}from"./chunk-NKPKIXYP.js";var E=(()=>{class o{tpl;constructor(e){this.tpl=e}static \u0275fac=function(t){return new(t||o)(c(B))};static \u0275dir=d({type:o,selectors:[["","appAutocompleteContent",""]]})}return o})();var ht=["root"],ft=o=>({control:o});function dt(o,u){o&1&&W(0)}function gt(o,u){if(o&1&&(z(0,"div",1),g(1,dt,1,0,"ng-container",2),U()),o&2){let e=w().control,t=w();$(),L("ngTemplateOutlet",t.content.tpl)("ngTemplateOutletContext",Z(2,ft,e))}}function vt(o,u){if(o&1&&g(0,gt,2,4,"div",1),o&2){let e=u.control;Y(e!=null&&e.isVisible?0:-1)}}var yt=(()=>{class o{rootTemplate;content;static \u0275fac=function(t){return new(t||o)};static \u0275cmp=l({type:o,selectors:[["app-autocomplete"]],contentQueries:function(t,i,r){if(t&1&&G(r,E,7),t&2){let n;_(n=O())&&(i.content=n.first)}},viewQuery:function(t,i){if(t&1&&J(ht,7),t&2){let r;_(r=O())&&(i.rootTemplate=r.first)}},exportAs:["appAutocomplete"],decls:2,vars:0,consts:[["root",""],[1,"ac-content"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,i){t&1&&g(0,vt,1,1,"ng-template",null,0,tt)},dependencies:[et],styles:[".ac-content[_ngcontent-%COMP%]{width:100%;display:block;overflow-y:auto;background-color:var(--control);color:var(--on-control);box-shadow:var(--control-box-shadow);border-color:var(--control-box-border);border-width:1px;border-style:solid;border-radius:0;font-size:14px}"]})}return o})();function Ct(o){return o.target.value}var m=-1;function xt(o,u){return P(document,"click").pipe(s(e=>{let t=e.target,i=t!==u,r=!!o&&!o.overlayElement.contains(t);return i&&r}),p(o.detachments()))}var bt=(()=>{class o{host;vcr;overlay;appAutocomplete;appAutocompleteControl;appAutocompleteSettings;appAutocompleteNavigKeyDown=new V;isVisible=!1;activeIndex=m;query="";options=[];unsubscribe=new f;overlayRef;keydown$=new f;keyup$=new f;settings={allowEmpty:!1,debounceTime:300};isCreated=!1;constructor(e,t,i){this.host=e,this.vcr=t,this.overlay=i}ngOnInit(){this.filterEnterEvent(this.keydown$),this.listenAndSuggest(this.keyup$),this.navigateSuggestionsWithArrows(this.keydown$)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}ngOnChanges(e){e.appAutocompleteSettings&&(this.settings=A(A({},this.settings),this.appAutocompleteSettings))}selectOption(e){this.hide(),this.appAutocompleteControl&&(this.query=this.appAutocompleteControl.autocompleteSelectResult(e))}handleEsc(e){mt(e)&&(this.hide(),e.preventDefault()),this.keydown$.next(e)}onkeyup(e){e.preventDefault(),e.stopPropagation(),this.keyup$.next(e)}run(){!this.query||this.query.length==0||this.request(this.query).then(e=>{this.activeIndex=m,this.options=e,this.display()}).catch(e=>console.error(e))}static resolveNextIndex(e,t,i){let r=t?1:-1,n=i.length-1,k=m,x=e+r,b=x;return x===n+1&&(b=k),x===k-1&&(b=n),b}updateIndex(e){this.activeIndex=o.resolveNextIndex(this.activeIndex,at(e),this.options)}listenAndSuggest(e){e.pipe(s(t=>!st(t)),I(Ct),S(this.settings.debounceTime),T,M(),N(t=>h(this,null,function*(){return this.query=t})),s(t=>this.settings.allowEmpty||t.length>0),H(t=>h(this,null,function*(){return this.request(t)})),p(this.unsubscribe)).subscribe(t=>{this.activeIndex=m,this.options=t,this.display()})}display(){if(!this.options||this.options.length===0){this.isVisible=!1;return}this.isCreated||this.openDropdown(),this.isVisible=this.options&&this.options.length>0}request(e){return h(this,null,function*(){return this.appAutocompleteControl?this.appAutocompleteControl.autocompleteGetData(e):[]})}filterEnterEvent(e){e.pipe(s(ut),p(this.unsubscribe)).subscribe(()=>{if(!this.isVisible){this.query=this.host.nativeElement.value,this.appAutocompleteControl&&this.appAutocompleteControl.autocompleteEnter(this.query);return}let t=this.options[this.activeIndex];this.hide(),t?this.selectOption(t):this.appAutocompleteControl&&this.appAutocompleteControl.autocompleteEnter(this.query)})}navigateSuggestionsWithArrows(e){e.pipe(s(pt),p(this.unsubscribe)).subscribe(t=>{lt(t)?(this.hide(),this.host.nativeElement.selectionStart===this.host.nativeElement.value.length&&this.appAutocompleteNavigKeyDown.next(t)):ct(t)?(this.hide(),this.host.nativeElement.selectionEnd===0&&this.appAutocompleteNavigKeyDown.next(t)):this.isVisible?(this.updateIndex(t),this.display()):this.appAutocompleteNavigKeyDown.next(t)})}openDropdown(){if(!this.appAutocomplete?.rootTemplate)return;this.overlayRef=this.createOverlay();let e=new it(this.appAutocomplete.rootTemplate,this.vcr,{control:this});this.overlayRef.attach(e),xt(this.overlayRef,this.host.nativeElement).pipe(p(this.unsubscribe)).subscribe(()=>{this.close()}),this.isCreated=!0,this.isVisible=!0}hide(){this.isVisible=!1,this.activeIndex=m}close(){this.overlayRef&&(this.overlayRef.detach(),this.overlayRef=void 0),this.isCreated=!1}createOverlay(){return this.overlay.create(this.getOverlayConfig())}getOverlayConfig(){return new nt({hasBackdrop:!1,backdropClass:"",panelClass:"ngx-autocomplete",scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:this.getOverlayPosition()})}getOverlayPosition(){let e=[new D({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new D({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"})];return this.overlay.position().flexibleConnectedTo(this.host).withFlexibleDimensions(!1).withPositions(e).withPush(!1)}static \u0275fac=function(t){return new(t||o)(c(F),c(Q),c(rt))};static \u0275dir=d({type:o,selectors:[["","appAutocomplete",""]],hostBindings:function(t,i){t&1&&v("keydown",function(n){return i.handleEsc(n)})("keyup",function(n){return i.onkeyup(n)})},inputs:{appAutocomplete:"appAutocomplete",appAutocompleteControl:"appAutocompleteControl",appAutocompleteSettings:"appAutocompleteSettings"},outputs:{appAutocompleteNavigKeyDown:"appAutocompleteNavigKeyDown"},features:[j]})}return o})();var At=(()=>{class o{transform(e,t){let i=t.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");i=i.split(" ").filter(n=>n.length>0).join("|");let r=new RegExp(i,"gi");return t?e.replace(r,n=>`<b>${n}</b>`):e}static \u0275fac=function(t){return new(t||o)};static \u0275pipe=K({name:"highlight",type:o,pure:!0})}return o})();var wt=["*"],_t=(()=>{class o{option;control;get getActive(){return this.control?this.control.options[this.control.activeIndex]===this.option:!1}mouseDownEvent(e){this.control&&this.option&&(this.control.selectOption(this.option),e.stopPropagation())}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=l({type:o,selectors:[["app-autocomplete-option"]],hostVars:2,hostBindings:function(t,i){t&1&&v("mousedown",function(n){return i.mouseDownEvent(n)}),t&2&&X("active",i.getActive)},inputs:{option:"option",control:"control"},ngContentSelectors:wt,decls:1,vars:0,template:function(t,i){t&1&&(y(),C(0))},styles:["[_nghost-%COMP%]{display:block;padding:5px;cursor:pointer}[_nghost-%COMP%]:hover{background-color:var(--control-hover);color:var(--on-control-hover)}.active[_nghost-%COMP%]{background-color:var(--control-active);color:var(--on-control-active)}[_nghost-%COMP%]     b{color:var(--on-control-active)}"],changeDetection:0})}return o})();var Ot=["*"],Dt=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275cmp=l({type:o,selectors:[["app-autocomplete-option-header"]],ngContentSelectors:Ot,decls:1,vars:0,template:function(t,i){t&1&&(y(),C(0))},styles:["[_nghost-%COMP%]{display:block;padding:5px;font-size:11px;background-color:var(--control-box);color:var(--on-control);text-transform:uppercase;letter-spacing:1px}"]})}return o})();var te=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=q({type:o});static \u0275inj=R({imports:[ot]})}return o})();export{E as a,yt as b,bt as c,Dt as d,At as e,_t as f,te as g};
