import{a as C}from"./chunk-NMVXKGSB.js";import"./chunk-5LL2XCUH.js";import{a as B}from"./chunk-7VT65XM2.js";import{a as X}from"./chunk-VSJ2RSKQ.js";import"./chunk-TN4DQYXD.js";import"./chunk-24DMSAFT.js";import"./chunk-U7OXVLBO.js";import"./chunk-PWCTC5DJ.js";import"./chunk-5TIVVKYZ.js";import"./chunk-TT7XXVKE.js";import"./chunk-SR2DRA4F.js";import{e as x,f as w,g as F,h as y,i as $,j as k,k as G}from"./chunk-MCFY5JX5.js";import{$b as u,Cc as d,Db as h,Eb as p,Jb as s,Kb as i,Lb as r,Mb as g,Qb as f,Qc as I,Rb as m,U as P,Yb as a,_a as _,bc as T,fa as O,j as A,jc as L,kc as D,nb as S,nc as R}from"./chunk-MRX5UB2X.js";var z=["overview","tags","health","tracks","tracks-health"];var j=t=>["/admin/folder",t,"overview"],H=t=>["/admin/folder",t,"tracks"],U=t=>["/admin/folder",t,"sub-folders"],Q=t=>["/admin/folder",t,"tags"],q=t=>["/admin/folder",t,"health"],V=t=>["/admin/folder",t,"tracks-health"];function J(t,E){t&1&&(i(0,"a"),g(1,"i",15),f(2),a(3,0),m(),r())}function K(t,E){t&1&&(i(0,"a"),g(1,"i",16),f(2),a(3,1),m(),r())}function W(t,E){if(t&1&&(i(0,"nav",13)(1,"ul",17)(2,"li",18)(3,"a"),a(4,2),r()(),i(5,"li",18)(6,"a"),a(7,3),r()(),i(8,"li",18)(9,"a"),a(10,4),r()(),i(11,"li",18)(12,"a"),a(13,5),r()(),i(14,"li",18)(15,"a"),a(16,6),r()(),i(17,"li",18)(18,"a"),a(19,7),r()()()()),t&2){let n=T();_(2),s("routerLink",d(6,j,n.id)),_(3),s("routerLink",d(8,H,n.id)),_(3),s("routerLink",d(10,U,n.id)),_(3),s("routerLink",d(12,Q,n.id)),_(3),s("routerLink",d(14,q,n.id)),_(3),s("routerLink",d(16,V,n.id))}}var sn=(()=>{class t{constructor(){this.rightActive=!1,this.tree=I(C),this.unsubscribe=new A,this.route=O(w),this.router=O(y),this.uiState=O(X),this.mode="overview"}refresh(){let n=this.tree();n&&n.refresh()}selectionChange(n){this.router.navigate([`/admin/folder/${n.id}/${this.mode}`]).catch(e=>{console.error(e)})}onFolderUpdate(n){let e=this.tree();e&&e.onFolderUpdate(n)}ngOnInit(){this.router.events.pipe(P(this.unsubscribe)).subscribe(e=>{if(e instanceof x&&this.route.firstChild?.snapshot.url[0]){let o=this.route.firstChild.snapshot.url[0].path;z.includes(o)&&(this.mode=o)}}),this.route.paramMap.pipe(P(this.unsubscribe)).subscribe(e=>{let o=e.get("id")??void 0;this.id=o,this.tree()&&o&&setTimeout(()=>{let c=this.tree();c&&c.selectFolderByID(o)})});let n=this.tree();n&&(n.expandIDs=this.uiState.get("app-admin-folders",[])),this.refresh()}ngOnDestroy(){let n=this.tree();n&&this.uiState.put("app-admin-folders",n.expandIDs),this.unsubscribe.next(),this.unsubscribe.complete()}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275cmp=S({type:t,selectors:[["app-admin-folder"]],viewQuery:function(e,o){e&1&&L(o.tree,C,5),e&2&&D()},hostVars:2,hostBindings:function(e,o){e&2&&R("right-active",o.rightActive)},decls:11,vars:2,consts:()=>{let n;n=$localize`:␟916b83c8c6c89e399186184c2198e5b4a760361b␟3376465991526605180:Show Folder Tree`;let e;e=$localize`:␟7ec7b22d8039675be42abd55ef2b6adad32ba322␟6821898315173685664:Show Folder Tools`;let o;o=$localize`:␟e95ae009d0bdb45fcc656e8b65248cf7396080d5␟2614607010577950577:Overview`;let c;c=$localize`:␟cb98522066062d775f3b81f29c898a7cc76292c0␟1575810254412583888:Tracks`;let M;M=$localize`:␟3fde556358b58d910adc30abaaff2433f0bb5f6c␟1205037876874222931:Folders`;let b;b=$localize`:␟cafc87479686947e2590b9f588a88040aeaf660b␟7886570921510760899:Tags`;let N;N=$localize`:␟d2bcd3296d2850de762fb943060b7e086a893181␟2041675390931385838:Health`;let v;return v=$localize`:␟a12d1012d8918ce2725b84077784140cb3381cd7␟4537451926022625647:Track Health`,[n,e,o,c,M,b,N,v,[1,"toggle",3,"click"],[1,"content"],[1,"left-content"],[3,"selectionChange"],[1,"right-content"],[1,"navigation"],[1,"router-content"],[1,"icon-left"],[1,"icon-right"],[1,"tabs"],["routerLinkActive","active",3,"routerLink"]]},template:function(e,o){e&1&&(i(0,"button",8),u("click",function(){return o.rightActive=!o.rightActive}),h(1,J,4,0,"a")(2,K,4,0,"a"),r(),i(3,"div",9)(4,"div",10)(5,"app-admin-folder-tree",11),u("selectionChange",function(M){return o.selectionChange(M)}),r()(),g(6,"app-splitter"),i(7,"div",12),h(8,W,20,18,"nav",13),i(9,"div",14),g(10,"router-outlet"),r()()()),e&2&&(_(),p(o.rightActive?1:2),_(7),p(o.id?8:-1))},dependencies:[G,F,$,k,C,B],styles:["[_nghost-%COMP%]{overflow-y:auto;overflow-x:hidden;height:100%;width:100%;min-height:100%;flex:1 1 auto;position:relative;display:flex;flex-direction:column;overflow:hidden}[_nghost-%COMP%]   .toggle[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]{width:100%;z-index:1;display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center;background-color:var(--background-transparent);color:var(--on-control)}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{padding-left:0;margin-top:0;margin-bottom:0;list-style:none;border:none;display:flex;flex-flow:row wrap;width:100%}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative;display:block;margin-bottom:-1px;flex:1;align-self:stretch;border-top-width:4px;border-top-style:solid;border-top-color:transparent;border-bottom-width:4px;border-bottom-style:solid;border-bottom-color:transparent;padding:0}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover{background-color:var(--control-hover);transition:all .4s ease;border-bottom-width:4px;border-bottom-style:solid;border-bottom-color:transparent}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:15px}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{padding:10px 0;text-align:center;align-items:center;align-content:center;justify-content:center;margin-right:2px;line-height:1.42857143;border-radius:4px 4px 0 0;position:relative;display:flex;cursor:pointer;border:none;font-size:14px;text-transform:uppercase;letter-spacing:.5px;height:100%;color:var(--on-control);-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{background-color:unset;border:none;color:var(--on-control-hover)}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%]{cursor:default;border-bottom-color:var(--primary)!important}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:default;background-color:unset;color:var(--on-control-hover)}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%]:hover{border-bottom-color:var(--primary)}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.disabled[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:var(--on-control-ambient-disabled)}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.disabled[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.disabled[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{color:var(--on-control-ambient-disabled);text-decoration:none;cursor:not-allowed;background-color:transparent}@media(max-width:768px){[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{align-items:center;align-content:center;justify-content:center}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding:5px;min-width:33%}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{font-size:.8em}}@media(max-width:400px){[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding:0 5px}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{font-size:.7em}}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs.mini[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{flex:0}@media(max-width:768px){[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs.mini[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{min-width:20px}}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs.mini[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;flex:1;display:flex;flex-flow:row nowrap;overflow:hidden;align-items:flex-start;align-content:flex-start;padding:0;min-height:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .left-content[_ngcontent-%COMP%]{height:100%;width:20%;display:block;border-right:1px solid var(--background-border);min-width:240px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]{width:80%;flex-shrink:1;flex-grow:1;height:100%;display:flex;flex-flow:column nowrap;position:relative;overflow:hidden}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]   .router-content[_ngcontent-%COMP%]{width:100%;height:100%;display:block;overflow:hidden}@media(max-width:522px){[_nghost-%COMP%]{height:100%;width:100%;min-height:100%;overflow:hidden}[_nghost-%COMP%]   .toggle[_ngcontent-%COMP%]{display:block;position:relative;width:100%;height:33px;text-align:center;padding-top:5px;border-bottom:1px solid var(--background-border)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:calc(100% - 33px);min-height:calc(100% - 33px);overflow:hidden;display:block;flex:none;position:relative}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   app-splitter[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .left-content[_ngcontent-%COMP%]{display:flex;height:100%;width:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]{display:none;height:100%;width:100%}.right-active[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .left-content[_ngcontent-%COMP%]{display:none}.right-active[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]{display:flex}}"]})}}return t})();export{sn as AdminFolderComponent};
