import{a as Wn}from"./chunk-MBKU2WLP.js";import"./chunk-3JQWYJA2.js";import{a as H}from"./chunk-RQOW2HPH.js";import"./chunk-AXFH7JSP.js";import"./chunk-RSXWGYLA.js";import{a as J}from"./chunk-ROAYP7FD.js";import{$ as p,$b as xn,$c as L,Ab as hn,Ad as kn,Ca as E,Da as C,E as Sn,Fe as N,I as U,J as x,Ma as Cn,Me as Fn,Oa as m,Ob as Tn,Pa as y,Pb as An,Qa as D,Qb as Nn,Rb as Rn,Sb as bn,Ta as X,Tb as vn,Tc as A,Ua as z,Ub as Gn,Ud as Dn,V as a,Va as j,Wb as Un,Wc as G,Wd as Xn,Xc as w,Z as d,_a as pn,_d as zn,a as cn,aa as Pn,b as ln,cb as W,db as Mn,eb as En,ee as k,f as K,fd as B,i as gn,ka as S,kd as yn,la as P,ld as In,oa as V,od as $n,pa as F,pe as jn,qa as u,qe as Q,ra as s,rb as On,re as Vn,sa as i,sb as mn,sd as wn,ta as l,td as Ln,ua as h,va as T,vb as fn,xa as $,z as dn,za as r,zb as un}from"./chunk-RPULQAHC.js";function qn(t,g){t&1&&l(0,"i",7)}function Kn(t,g){t&1&&(s(0,"span"),r(1,2),i())}var nn=(()=>{class t{app;auth;jam;notify;refreshRandom;refreshing=!1;unsubscribe=new gn;constructor(n,o,e,_){this.app=n,this.auth=o,this.jam=e,this.notify=_,this.refreshRandom=H()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}onDropFile(n){n.preventDefault(),this.uploadFile(n.dataTransfer?.files)}onDragOverFile(n){n.stopPropagation(),n.preventDefault()}selectFile(n){this.uploadFile(n.target.files)}uploadFile(n){if(!n||n.length===0||!this.auth.user)return;let o=n[0];this.jam.user.uploadUserImage({id:this.auth.user.id},o).pipe(dn(this.unsubscribe)).subscribe(e=>{e.type===un.UploadProgress||e instanceof hn},e=>{this.notify.error(e)},()=>{this.refreshRandom=H(),this.notify.success("Upload done")})}randomAvatar(){this.refreshing||!this.auth.user||(this.refreshing=!0,this.jam.user.generateUserImage({id:this.auth.user.id}).then(()=>{this.refreshing=!1,this.refreshRandom=H(),this.notify.success("Image randomized")}).catch(n=>{this.refreshing=!1,this.notify.error(n)}))}static \u0275fac=function(o){return new(o||t)(d(B),d(G),d(w),d(L))};static \u0275cmp=p({type:t,selectors:[["app-user-avatar"]],standalone:!1,decls:11,vars:6,consts:()=>{let n;n=$localize`:␟d833321cc90a0b0a52714c6d5ec97fbe6c7cfa5c␟2501989539336327542:Upload image`;let o;o=$localize`:␟0966612784a5dcf0e05406cebe6e47c69999665a␟4001363701577936593: Drag an Image File here `;let e;e=$localize`:␟3a2a9bb12d904f3dd84e42cfad37afef4a6b35f6␟3825771792569625715:Choose a file`;let _;return _=$localize`:␟c1ba8ac278d9bdb189e23866675d475089dce2ae␟4360279154190126867:Random Image`,[o,e,_,[1,"drop-zone",3,"drop","dragover"],[1,"placeholder"],[3,"coverArtObj","size","round","refreshRandom"],[1,"button-primary",3,"click"],[1,"icon-spin","icon-spinner"],["id","file","type","file","placeholder",n,"accept",".png,.jpeg,.jpg",1,"inputfile",3,"change"],["for","file",1,"button-primary"]]},template:function(o,e){o&1&&(s(0,"div",3),E("drop",function(c){return e.onDropFile(c)})("dragover",function(c){return e.onDragOverFile(c)}),s(1,"div",4),r(2,0),i(),l(3,"app-coverart-image",5),s(4,"button",6),E("click",function(){return e.randomAvatar()}),S(5,qn,1,0,"i",7),S(6,Kn,2,0,"span"),i(),s(7,"form")(8,"input",8),E("change",function(c){return e.selectFile(c)}),i(),s(9,"label",9),r(10,1),i()()()),o&2&&(a(3),u("coverArtObj",e.auth.user)("size",100)("round",!0)("refreshRandom",e.refreshRandom),a(2),P(e.refreshing?5:-1),a(),P(e.refreshing?-1:6))},dependencies:[Gn,Rn,bn,Xn],styles:["[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]{vertical-align:bottom;display:inline-block;min-width:220px;min-height:140px;border-width:2px;margin-bottom:15px;margin-right:15px;border-style:dotted;border-color:var(--secondary);padding-left:15px;padding-right:15px;padding-bottom:15px;text-align:center}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   app-coverart-image[_ngcontent-%COMP%]{margin:0 auto 10px}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .inputfile[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:10px;min-width:80%;display:inline-block}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:inline-block;min-width:80%}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;display:block}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{width:100%;padding-top:15px;padding-bottom:15px;text-align:center;color:var(--on-control-ambient);font-size:.8em;text-transform:uppercase}"]})}return t})();var Zn=(t,g)=>g.session.id;function ne(t,g){if(t&1&&(s(0,"div",17),r(1,4),i(),s(2,"div")(3,"code"),m(4),i()()),t&2){let n=C(3);a(4),y(n.subsonicToken==null?null:n.subsonicToken.token)}}function ee(t,g){if(t&1){let n=$();s(0,"div"),r(1,2),i(),s(2,"button",16),E("click",function(){U(n);let e=C(2);return x(e.generateSubsonicToken())}),r(3,3),i(),S(4,ne,5,1)}if(t&2){let n=C(2);a(4),P(n.subsonicToken!=null&&n.subsonicToken.token?4:-1)}}function te(t,g){if(t&1){let n=$();s(0,"div"),r(1,5),i(),s(2,"button",16),E("click",function(){U(n);let e=C(2);return x(e.unlockSubsonicToken())}),r(3,6),i()}}function oe(t,g){t&1&&(s(0,"span"),r(1,7),i())}function ie(t,g){if(t&1&&(s(0,"span",25),r(1,8),i(),l(2,"br"),m(3),W(4,"date")),t&2){let n=C().$implicit;a(3),D(" ",En(4,1,n.session.expires,"long")," ")}}function se(t,g){if(t&1){let n=$();s(0,"div",18)(1,"div",19),m(2),l(3,"br"),s(4,"span"),m(5),i()(),s(6,"div",20),m(7),l(8,"br"),m(9),i(),s(10,"div",21),S(11,oe,2,0,"span")(12,ie,5,4),i(),s(13,"div",22)(14,"button",23),E("click",function(){let e=U(n).$implicit,_=C(2);return x(_.remove(e.session))}),l(15,"i",24),i()()()}if(t&2){let n=g.$implicit;Cn("invalid",n.isExpired),a(2),D(" ",n.session.client),a(3),y(n.session.mode),a(2),D(" ",n.session.agent),a(2),D(" ",n.session.os," "),a(2),P(n.session.expires===void 0?11:12)}}function _e(t,g){if(t&1&&(s(0,"div",11)(1,"div",12)(2,"div",13),r(3,0),i(),S(4,ee,5,1)(5,te,4,0),i(),s(6,"div",14)(7,"div",13),r(8,1),i(),V(9,se,16,7,"div",15,Zn),i()()),t&2){let n=C();a(4),P(n.isUnlocked?4:5),a(5),F(n.sessions)}}var en=(()=>{class t{jam;auth;notify;dialogOverlay;sessions;isUnlocked=!1;lock={pass:""};subsonicToken;constructor(n,o,e,_){this.jam=n,this.auth=o,this.notify=e,this.dialogOverlay=_}generateSubsonicToken(){!this.isUnlocked||!this.auth.user||this.jam.user.generateSubsonicToken({id:this.auth.user.id,password:this.lock.pass}).then(n=>{this.subsonicToken=n,this.isUnlocked=!0,this.refresh(),this.notify.success("Token generated")}).catch(n=>{this.subsonicToken=void 0,this.isUnlocked=!1,this.notify.error(n)})}unlockSubsonicToken(){this.dialogOverlay.open({childComponent:zn,data:this.lock,onOkBtn:()=>K(this,null,function*(){this.isUnlocked=!0}),onCancelBtn:()=>K(this,null,function*(){return Promise.resolve()})})}ngOnInit(){this.auth.isLoggedIn()&&this.refresh()}remove(n){let o=n.id;this.jam.session.remove({id:o}).then(()=>{this.sessions&&(this.sessions=this.sessions.filter(e=>e.session.id!==o)),this.notify.success("Session Login removed")}).catch(e=>{this.notify.error(e)})}refresh(){this.jam.session.list().then(n=>{this.sessions=n.map(o=>({session:o,isExpired:o.expires!==void 0&&o.expires<Date.now()}))}).catch(n=>{this.notify.error(n)})}static \u0275fac=function(o){return new(o||t)(d(w),d(G),d(L),d(Dn))};static \u0275cmp=p({type:t,selectors:[["app-sessions-page"]],standalone:!1,decls:3,vars:1,consts:()=>{let n;n=$localize`:␟ce54b0509275b0551de870b805c1bb5c426d723f␟877974575580185933:Session Logins`;let o;o=$localize`:␟68d17f5d1beeee03406372494fc0bc306ed24f72␟2707659021126588033:Subsonic Token`;let e;e=$localize`:␟2744dff891981e67dd84e3a8ceb430704b86ed6a␟721963055036507192:Sessions`;let _;_=$localize`:␟29fcf6bfc99e542abcb128de5a04337412c00b10␟5380285610371362253:Click to generate or update a Subsonic Token. Warning: Existing token will no longer be valid.`;let c;c=$localize`:␟7eac06d83d2276d35aa4dc8aa51324b891722583␟5034015365836681485:Generate New Subsonic Token`;let R;R=$localize`:␟b603efccecf2b3f80a7807d375cf44b1cdaa6403␟1776712759383883061:This is your Subsonic Token. Please copy and store, you can not see it here again.`;let b;b=$localize`:␟1d23380d15fcbebe8a5ee64117725125d2860c6e␟5629769933636183639:Enter your Jam password to generate or update a Subsonic Token.`;let v;v=$localize`:␟e13796974274fd6b6bbc61a60fac4e14e6e29b6d␟8191371354890763172:Enter Password`;let M;M=$localize`:␟a881e543b0df3a9620cb65a5e6da992c3f38382e␟1021529107572383199:Remove this login`;let O;O=$localize`:␟6c2d15914e6ea1e9bb2ec041d69ae3b5f89c73cf␟8896757418171595787:Does not expire`;let rn;return rn=$localize`:␟7ebcbdc49ec3e6c6354f788704a3b4fb5649b74b␟7222262636210875388:valid until:`,[o,e,_,c,R,b,v,O,rn,[1,"sessions"],["section",n],[1,"content"],[1,"subsonic"],[1,"section-title"],[1,"session-list"],[1,"session",3,"invalid"],[1,"button-primary",3,"click"],[1,"token"],[1,"session"],[1,"title"],[1,"agent"],[1,"expires"],[1,"remove"],["title",M,3,"click"],["aria-hidden","true",1,"icon-remove"],[1,"label"]]},template:function(o,e){o&1&&(s(0,"div",9),l(1,"app-view-header-slim",10),S(2,_e,11,1,"div",11),i()),o&2&&(a(2),P(e.sessions?2:-1))},dependencies:[k,mn],styles:['[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]{padding-bottom:30px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]{margin-top:20px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{padding:20px;display:inline-block;background-color:var(--control);color:var(--on-control-ambient)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:15px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap;-webkit-user-select:none;user-select:none;width:100%;padding-top:5px;background-color:var(--background);color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{min-height:48px;display:flex;flex-flow:row nowrap;align-items:center;align-content:space-evenly;width:100%;padding:10px;line-height:1.25em;margin-bottom:1px;border-top-width:1px;border-top-style:solid;border-bottom-width:0;border-bottom-style:solid;border-bottom-color:var(--background-border);border-top-color:var(--background-border)}@media (max-width: 1000px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{height:auto}}@media (max-width: 522px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{font-size:.9em}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]:last-child{border-bottom-width:1px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .small-screen-icon[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--on-background);font-size:.8em}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;display:inline-block;margin:0 10px 0 0}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.8em;vertical-align:middle}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a.title-link[_ngcontent-%COMP%]{font-size:inherit;margin-right:10px;color:var(--on-background-highlight)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{width:0;margin-left:0;cursor:move}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]{display:inline-block;width:26px;height:8px;transform:rotate(90deg);margin-left:-8px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%], [_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]:before{background-image:radial-gradient(#7b7b7b 40%,transparent 40%);background-size:4px 4px;background-position:0 100%;background-repeat:repeat-x}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]:before{content:"";display:block;width:100%;height:33%}@media (max-width: 1000px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{height:auto;min-height:48px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-left:0}}@media (max-width: 400px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{flex-flow:row wrap;align-items:inherit;width:100%;font-size:.9em}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .small-screen-icon[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{order:2;width:25%;text-align:center}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]{transform:rotate(0)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{order:6;margin-left:0;margin-right:0;padding-right:0;padding-left:0;width:100%}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:0;margin-right:0;padding-right:0;padding-left:0;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;margin-left:0;margin-right:0;overflow:hidden;text-overflow:ellipsis}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%]{font-size:.8em;flex-grow:1;padding-right:10px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{width:260px;font-size:.8em;padding-right:10px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--on-background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:10px;width:140px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.7em;text-transform:uppercase}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session.invalid[_ngcontent-%COMP%]{color:var(--on-control-ambient-disabled)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session.invalid[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{color:var(--accent)}@media (max-width: 400px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%], [_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{order:0;width:calc(100% - 30px)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{order:1}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%]{order:2}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{order:3}}']})}return t})();var re=(t,g)=>g.name;function ce(t,g){if(t&1){let n=$();s(0,"label",10)(1,"input",14),j("ngModelChange",function(e){U(n);let _=C();return z(_.app.settings.theme,e)||(_.app.settings.theme=e),x(e)}),E("ngModelChange",function(){U(n);let e=C();return x(e.onChange())}),i(),m(2),W(3,"titlecase"),i()}if(t&2){let n=g.$implicit,o=C();a(),u("value",n.name),X("ngModel",o.app.settings.theme),a(),y(Mn(3,3,n.name))}}var tn=(()=>{class t{router;app;settings;player;themes=Wn.themes;public;constructor(n,o,e,_){this.router=n,this.app=o,this.settings=e,this.player=_}onChange(){this.settings.applySettings()}static \u0275fac=function(o){return new(o||t)(d(In),d(B),d(Ln),d(wn))};static \u0275cmp=p({type:t,selectors:[["app-page-settings"]],standalone:!1,decls:25,vars:3,consts:()=>{let n;n=$localize`:␟121cc5391cd2a5115bc2b3160379ee5b36cd7716␟4930506384627295710:Settings`;let o;o=$localize`:␟8ba4f3fada9c0278b12e5dc72b25a9213a41f73e␟2696427906168966769:Show Waveform of Current Track`;let e;e=$localize`:␟09775f315171df8237e648a015ef8d926da48748␟4046137991643846566:Show Notifications On Tracks Change`;let _;_=$localize`:␟b307e817a013c5009ff98f7645834d503869db50␟8198980433602946702:Design`;let c;c=$localize`:␟59bdc3dfa4075f92c734588899485db702c8f120␟7683705529753923369:Player`;let R;R=$localize`:␟8ba4f3fada9c0278b12e5dc72b25a9213a41f73e␟2696427906168966769:Show Waveform of Current Track`;let b;b=$localize`:␟7096fbcea9ef94e1ae3e68c75250b6c9bd78b1bb␟3015012963934645778:Playing`;let v;v=$localize`:␟b9c15b2fd4b6fab0a947d1cf0843c3e1ed1cebf3␟2706303691969065868:Show Playing Track Name in Window Title`;let M;return M=$localize`:␟c4c1ee09a557adee6dd31c26dc1dc03fc106dffe␟3955518524911882320:Show Notification Popup On Track Change`,[_,c,R,b,v,M,[1,"settings"],["section",n],[1,"content"],[1,"section-title"],[1,"select"],["type","checkbox","title",o,3,"ngModelChange","ngModel"],["type","checkbox","value","1",3,"ngModelChange","ngModel"],["type","checkbox","value","1","title",e,3,"ngModelChange","ngModel"],["type","radio","name","theme",3,"ngModelChange","value","ngModel"]]},template:function(o,e){o&1&&(s(0,"div",6),l(1,"app-view-header-slim",7),s(2,"div",8)(3,"div",9),r(4,0),i(),s(5,"div")(6,"fieldset"),V(7,ce,4,5,"label",10,re),i()(),s(9,"div",9),r(10,1),i(),s(11,"label")(12,"input",11),j("ngModelChange",function(c){return z(e.app.settings.showWaveform,c)||(e.app.settings.showWaveform=c),c}),E("ngModelChange",function(){return e.onChange()}),i(),h(13),r(14,2),T(),i(),s(15,"div",9),r(16,3),i(),s(17,"label")(18,"input",12),j("ngModelChange",function(c){return z(e.app.settings.playingTrackInTitle,c)||(e.app.settings.playingTrackInTitle=c),c}),E("ngModelChange",function(){return e.onChange()}),i(),h(19),r(20,4),T(),i(),s(21,"label")(22,"input",13),j("ngModelChange",function(c){return z(e.app.settings.notificationSong,c)||(e.app.settings.notificationSong=c),c}),E("ngModelChange",function(){return e.onChange()}),i(),h(23),r(24,5),T(),i()()()),o&2&&(a(7),F(e.themes),a(5),X("ngModel",e.app.settings.showWaveform),a(6),X("ngModel",e.app.settings.playingTrackInTitle),a(4),X("ngModel",e.app.settings.notificationSong))},dependencies:[An,Tn,Un,Nn,vn,k,On],styles:["[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;padding-bottom:15px;color:var(--on-background)}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-top:-1px;display:inline-block;vertical-align:middle}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{margin-bottom:15px;width:auto;display:inline}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label.select[_ngcontent-%COMP%]{width:auto;padding-top:4px;padding-bottom:4px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label.select[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:10px}"]})}return t})();var on=(()=>{class t{jam;auth;notify;base=[];favorites=[];played=[];constructor(n,o,e){this.jam=n,this.auth=o,this.notify=e}ngOnInit(){this.auth.isLoggedIn()&&this.refresh()}refresh(){this.jam.stats.user().then(n=>{this.favorites=t.buildStats(n.favorite,"/favorites"),this.played=t.buildStats(n.played,"/recently-played"),this.base=Q([{text:"Bookmarks",link:"/library/bookmarks",value:n.bookmark},{text:"Playlists",link:"/library/playlists",value:n.playlist}],!0)}).catch(n=>{this.notify.error(n)})}static buildStats(n,o=""){return Q([{text:"Artists",link:"artists",value:n.artistTypes.album},...[{type:N(A.album),value:n.albumTypes.album},{type:N(A.compilation),value:n.albumTypes.compilation}].map(e=>({text:e.type?.text,link:`${e.type?.id}`,value:e.value})),{text:"Series",link:"series",value:n.series},...[{type:N(A.audiobook),value:n.albumTypes.audiobook},{type:N(A.soundtrack),value:n.albumTypes.soundtrack},{type:N(A.live),value:n.albumTypes.live},{type:N(A.bootleg),value:n.albumTypes.bootleg},{type:N(A.ep),value:n.albumTypes.ep},{type:N(A.single),value:n.albumTypes.single}].map(e=>({text:e.type?.text,link:`${e.type?.id}`,value:e.value})),{text:"Folders",link:"folders",value:n.folder},{text:"Tracks",link:"tracks",value:n.track}].map(e=>ln(cn({},e),{link:`/library/${e.link}${o}`})))}static \u0275fac=function(o){return new(o||t)(d(w),d(G),d(L))};static \u0275cmp=p({type:t,selectors:[["app-user-stats"]],standalone:!1,decls:9,vars:3,consts:()=>{let n;n=$localize`:␟299f97b8ee9c62d45f2cc01961aa1e5101d6d05a␟4088311569349098646:Stats`;let o;o=$localize`:␟0add707baf7b167d0c0e9cdeb80f946aa1bd2223␟4085930761302974863:Favorites`;let e;return e=$localize`:␟73565b2d231303b7ff6f28663a72abb1b3bd1890␟7754730602038897709:Played`,[n,o,e,[1,"section-title"],[3,"stats"]]},template:function(o,e){o&1&&(s(0,"div",3),r(1,0),i(),l(2,"app-stats",4),s(3,"div",3),r(4,1),i(),l(5,"app-stats",4),s(6,"div",3),r(7,2),i(),l(8,"app-stats",4)),o&2&&(a(2),u("stats",e.base),a(3),u("stats",e.favorites),a(3),u("stats",e.played))},dependencies:[Vn],styles:["[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-top:15px;margin-bottom:10px;color:var(--on-control-ambient)}"]})}return t})();function ge(t,g){t&1&&(s(0,"div"),l(1,"i",16),h(2),r(3,3),T(),i())}function de(t,g){t&1&&(s(0,"div"),l(1,"i",16),h(2),r(3,4),T(),i())}function Se(t,g){t&1&&(s(0,"div"),l(1,"i",16),h(2),r(3,5),T(),i())}function Pe(t,g){t&1&&(s(0,"div"),l(1,"i",16),h(2),r(3,6),T(),i())}function Ce(t,g){if(t&1&&(s(0,"div",14)(1,"div",12),r(2,2),i(),s(3,"div",15),S(4,ge,4,0,"div"),S(5,de,4,0,"div"),S(6,Se,4,0,"div"),S(7,Pe,4,0,"div"),i()()),t&2){let n=C(2);a(4),P(n.auth.user.roles.stream?4:-1),a(),P(n.auth.user.roles.podcast?5:-1),a(),P(n.auth.user.roles.upload?6:-1),a(),P(n.auth.user.roles.admin?7:-1)}}function pe(t,g){if(t&1&&(s(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12),r(4,0),i(),l(5,"app-user-avatar"),i(),s(6,"div",13)(7,"div",14)(8,"div",12),r(9,1),i(),s(10,"div"),m(11),i()(),S(12,Ce,8,4,"div",14),i()(),s(13,"div",14),l(14,"app-user-stats"),i()()),t&2){let n=C();a(11),y(n.auth.user.name),a(),P(n.auth.user&&n.auth.user.roles?12:-1)}}var sn=(()=>{class t{auth;constructor(n){this.auth=n}static \u0275fac=function(o){return new(o||t)(d(G))};static \u0275cmp=p({type:t,selectors:[["app-user-page"]],standalone:!1,decls:3,vars:1,consts:()=>{let n;n=$localize`:␟e08a77594f3d89311cdf6da5090044270909c194␟2392488717875840729:User`;let o;o=$localize`:␟cebb7f27b5028c62b4426da3bb3e3bd3f4a3443b␟6525109356951792180:Avatar`;let e;e=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`;let _;_=$localize`:␟70f45880fce6ac5d8e468e25e82aefbba8098cfe␟7314814725704332646:Permissions`;let c;c=$localize`:␟0c1153af20b06ee1f31e7d07eebfada81b9a19b2␟7231504695490320052:Stream Audio`;let R;R=$localize`:␟f47ba1cd01c3dfd801fe7f66c3d28d698dcc0479␟1291164613191345064:Manage Podcasts`;let b;b=$localize`:␟7876f698ec2db992452b14bd66e0ed1261d890e8␟5793950743388475134:Upload Audio`;let v;return v=$localize`:␟76046fa6f13fb0524ca1d3777247ab13d73660c8␟2210415377969858551:Server Administration`,[o,e,_,c,R,b,v,[1,"user"],["section",n],[1,"content"],[1,"row"],[1,"column","first"],[1,"section-title"],[1,"column"],[1,"section"],[1,"roles"],[1,"icon-checkmark"]]},template:function(o,e){o&1&&(s(0,"div",7),l(1,"app-view-header-slim",8),S(2,pe,15,2,"div",9),i()),o&2&&(a(2),P(e.auth.user?2:-1))},dependencies:[k,on,nn],styles:["[_nghost-%COMP%]   .user[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{padding-bottom:30px}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:5px}@media (max-width: 400px){[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{flex-direction:column}}"]})}return t})();var q=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275cmp=p({type:t,selectors:[["app-user"]],standalone:!1,decls:5,vars:0,consts:[[1,"left"],[1,"split-pane-divider-left"],["role","main",1,"middle"]],template:function(o,e){o&1&&(s(0,"aside",0),l(1,"app-user-sidebar"),i(),l(2,"app-splitter",1),s(3,"main",2),l(4,"router-outlet"),i())},styles:["[_nghost-%COMP%]{width:100%;height:100%;flex:1;display:flex;flex-flow:row nowrap;overflow:hidden;align-items:flex-start;align-content:flex-start}[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:15%;height:100%}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{width:60%;flex-grow:1;height:100%}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{width:25%;height:100%}@media (max-width: 1600px){[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:20%}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{width:55%;flex-grow:1;height:100%}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{width:25%;height:100%}}@media (max-width: 1400px){[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:25%}[_nghost-%COMP%]   .right[_ngcontent-%COMP%], [_nghost-%COMP%]   .split-pane-divider-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 768px){[_nghost-%COMP%]{overflow:auto;flex-flow:row wrap}[_nghost-%COMP%]   app-splitter[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:100%!important;height:auto}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{height:auto}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{width:100%!important;height:auto}}@media (max-width: 522px){[_nghost-%COMP%]{overflow:hidden;height:auto}}"]})}return t})();var _n=[{path:"",component:q,children:[{path:"",pathMatch:"full",component:sn,canActivate:[J],data:{name:"User"}},{path:"settings",component:tn,canActivate:[J],data:{name:"Settings"}},{path:"sessions",component:en,canActivate:[J],data:{name:"Sessions",icon:"icon-laptop"}}]}],Jn=$n.forChild(_n);var an=(()=>{class t{sections=[];constructor(){let o=(_n[0]?.children||[]).filter(_=>_.path&&_.path.length>0&&_.data?.name).map(_=>{let c=_.data?.link?_.data.link:_.path;return{name:_.data?_.data.name:"",icon:_.data&&_.data.icon?_.data.icon:"icon-admin",link:`/user/${c}`}}),e={name:"Profile",icon:"icon-user",link:"/user",options:{exact:!0}};this.sections=[{name:"User",entries:[e].concat(o)}]}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=p({type:t,selectors:[["app-user-sidebar"]],standalone:!1,decls:1,vars:1,consts:[[3,"sections"]],template:function(o,e){o&1&&l(0,"app-sidebar",0),o&2&&u("sections",e.sections)},dependencies:[kn],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block}"]})}return t})();var Ct=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275mod=Pn({type:t});static \u0275inj=Sn({imports:[xn,Fn,fn,Jn]})}return t})();pn(q,function(){return[jn,yn,an]},[]);export{Ct as UserModule};
