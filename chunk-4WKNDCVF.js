import{a as Se}from"./chunk-6T4XJRB7.js";import{b as F,c as H,d as J,g as K,i as Q,k as Y,l as Z,m as ee,o as ne}from"./chunk-Y5Z5ITNC.js";import{a as oe}from"./chunk-PZTZCA44.js";import{G as ie}from"./chunk-ZVKVGF76.js";import{k as _e}from"./chunk-T6GM3CFW.js";import{$d as te,Ac as C,Hb as k,Ib as j,Ob as _,Pb as t,Qb as O,Ub as I,Vb as c,_b as U,ab as E,ac as S,dc as g,fc as s,ia as P,na as l,nb as W,oa as T,wd as q,yc as d,zc as r}from"./chunk-H2EXZDP6.js";function Ne(a,M){if(a&1){let N=U();_(0,"div")(1,"div",25),S(2,1),t(),_(3,"div",26)(4,"label")(5,"input",27),C("ngModelChange",function(e){l(N);let i=s();return r(i.settings.library.scanAtStart,e)||(i.settings.library.scanAtStart=e),T(e)}),g("ngModelChange",function(){l(N);let e=s();return T(e.onChange())}),t(),I(6),S(7,2),c(),t()()(),_(8,"div")(9,"div",25),S(10,3),t(),_(11,"div",26)(12,"label")(13,"input",27),C("ngModelChange",function(e){l(N);let i=s();return r(i.settings.externalServices.enabled,e)||(i.settings.externalServices.enabled=e),T(e)}),g("ngModelChange",function(){l(N);let e=s();return T(e.onChange())}),t(),I(14),S(15,4),c(),t()()(),_(16,"div")(17,"div",25),S(18,5),t(),_(19,"div",26)(20,"label",28),S(21,6),t(),_(22,"input",29),C("ngModelChange",function(e){l(N);let i=s();return r(i.settings.chat.maxMessages,e)||(i.settings.chat.maxMessages=e),T(e)}),g("ngModelChange",function(){l(N);let e=s();return T(e.onChange())}),t()(),_(23,"div",26)(24,"div",30)(25,"label",31),S(26,7),t(),_(27,"input",32),C("ngModelChange",function(e){l(N);let i=s();return r(i.settings.chat.maxAge.value,e)||(i.settings.chat.maxAge.value=e),T(e)}),g("ngModelChange",function(){l(N);let e=s();return T(e.onChange())}),t()(),_(28,"select",33),C("ngModelChange",function(e){l(N);let i=s();return r(i.settings.chat.maxAge.unit,e)||(i.settings.chat.maxAge.unit=e),T(e)}),g("ngModelChange",function(){l(N);let e=s();return T(e.onChange())}),_(29,"option",34),S(30,8),t(),_(31,"option",35),S(32,9),t(),_(33,"option",36),S(34,10),t(),_(35,"option",37),S(36,11),t(),_(37,"option",38),S(38,12),t(),_(39,"option",39),S(40,13),t(),_(41,"option",40),S(42,14),t(),_(43,"option",41),S(44,15),t(),_(45,"option",42),S(46,16),t(),_(47,"option",43),S(48,17),t()()()(),_(49,"div")(50,"div",25),S(51,18),t(),_(52,"div",26)(53,"label",44),S(54,19),t(),_(55,"textarea",45),C("ngModelChange",function(e){l(N);let i=s();return r(i.ignoreArticles,e)||(i.ignoreArticles=e),T(e)}),g("ngModelChange",function(){l(N);let e=s();return T(e.onChange())}),t()()()}if(a&2){let N=s();E(5),d("ngModel",N.settings.library.scanAtStart),E(8),d("ngModel",N.settings.externalServices.enabled),E(9),d("ngModel",N.settings.chat.maxMessages),E(5),d("ngModel",N.settings.chat.maxAge.value),E(),d("ngModel",N.settings.chat.maxAge.unit),E(27),d("ngModel",N.ignoreArticles)}}function se(a,M){a&1&&O(0,"app-loading")}var Ae=(()=>{let M=class M{constructor(){this.ignoreArticles="",this.jam=P(te),this.notify=P(ie)}ngOnInit(){this.refresh()}onChange(){}refresh(){this.jam.admin.settings().then(n=>{this.display(n)}).catch(n=>{this.notify.error(n)})}save(){let n=this.settings;n&&(n.index.ignoreArticles=this.ignoreArticles.split(`
`).map(e=>e.trim()).filter(e=>e.length>0),this.settings=void 0,this.jam.admin.settingsUpdate(n).then(()=>{this.notify.success("Settings updated"),this.settings=n}).catch(e=>{this.notify.error(e),this.settings=n}))}display(n){this.settings=n,this.ignoreArticles=n.index.ignoreArticles.join(`
`)}};M.\u0275fac=function(e){return new(e||M)},M.\u0275cmp=W({type:M,selectors:[["app-admin-settings"]],decls:9,vars:1,consts:()=>{let n;n=$localize`:␟05cd06e631edc939a19ce22d609504b7f570723d␟8116289374261643531:Admin Settings`;let e;e=$localize`:␟52c9a103b812f258bcddc3d90a6e3f46871d25fe␟3768927257183755959:Save`;let i;i=$localize`:␟32e65202f89b91a77d0239f6387009535f18c004␟263473846992399517:Save Settings`;let A;A=$localize`:␟f0f78754451cc705b4bc6aafa1b733b8219c383a␟4950570181842731349:Unit of Age`;let m;m=$localize`:␟905882c0fe09eee755ee6730ecf10e3b85cb6d9c␟2188854519574316630:Server`;let G;G=$localize`:␟a0e8cc93872a4a7c74ebd4fd165751ad9bb55bc0␟7635936183047857561:Scan all Roots on Server Start`;let f;f=$localize`:␟d813ec2b4e4dbb4f1a3f2596a34bb94b324dd64b␟5721522774620057803:External Services`;let u;u=$localize`:␟e47c0675b7122c899137fd211528f276baefa9f3␟8918946905429464030:Allow Request to External Services`;let p;p=$localize`:␟5adf337be1ad12c915ae18012f1bfa1f2ca4628b␟2299187798995800780:Chat`;let $;$=$localize`:␟52318b5079ce3bda0877053b52a550fbde67130a␟6088560830023353456:Maximum Number of Messages`;let L;L=$localize`:␟3391bd7ac225b712137a44a47653ba5912ba6e14␟845892119032308787:Maximum Age of Message`;let R;R=$localize`:␟752daa6baad0f8b4684b5c6775345b02bed6746e␟6479044529603381727:year`;let h;h=$localize`:␟e6bbe25e83a1e135e8e1d3e2ceddadb8529c45e9␟7658073495909471632:years`;let D;D=$localize`:␟2790ad2c08306240a508576e942fcfdf271f5a79␟7178101913251976451:month`;let b;b=$localize`:␟0fcdd5427274550312ee512bcd5b61ec077e0b5f␟6169402792391433667:months`;let x;x=$localize`:␟f64c76c7c7c71baddef3dc6a93e4394b8fdb69f4␟6320319413541466015:day`;let y;y=$localize`:␟fc34f2683c4cb526ed7095c5b1cdd66d672ba932␟7036284206110282007:days`;let B;B=$localize`:␟cff3ed26f8073fa2fe757d97880662060c39a1fa␟5405071297219936776:minute`;let v;v=$localize`:␟cd25ef11e2d8843297caf4202937023dc02d0ba8␟982745398054129955:minutes`;let w;w=$localize`:␟c40875920fa824ba8029cf99315da474625354f9␟7479425239631237410:second`;let X;X=$localize`:␟38bd5794dbe84081cfa7867e876245e1ddae93e7␟227749613426254192:seconds`;let V;V=$localize`:␟38484614389a6a41930e95b82c891780a99be9ce␟225617230946350058:Artist Index`;let z;return z=$localize`:␟cb8e8c81accbef16924070ba1c4e2e28f7bae96a␟3077366211526620849:Ignored Articles in Artist Names`,[i,m,G,f,u,p,$,L,R,h,D,b,x,y,B,v,w,X,V,z,[1,"settings"],["section",n],["title",e,1,"button-on-control",3,"click"],[1,"icon-floppy"],[1,"content"],[1,"section-title"],[1,"section-entry"],["type","checkbox",3,"ngModelChange","ngModel"],["for","max_messages"],["id","max_messages","type","number",3,"ngModelChange","ngModel"],[1,"chat-max-age"],["for","max_age"],["id","max_age","type","number",3,"ngModelChange","ngModel"],["title",A,3,"ngModelChange","ngModel"],["value","year"],["value","years"],["value","month"],["value","months"],["value","day"],["value","days"],["value","minute"],["value","minutes"],["value","second"],["value","seconds"],["for","ignore_articles"],["id","ignore_articles","rows","10","cols","20",3,"ngModelChange","ngModel"]]},template:function(e,i){e&1&&(_(0,"div",20)(1,"app-view-header-slim",21)(2,"button",22),g("click",function(){return i.save()}),O(3,"i",23),I(4),S(5,0),c(),t()(),_(6,"div",24),k(7,Ne,56,6)(8,se,1,0,"app-loading"),t()()),e&2&&(E(7),j(i.settings?7:8))},dependencies:[q,_e,ne,Z,ee,H,Q,F,Y,J,K,oe,Se],styles:["[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;height:100%}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 0}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .chat-max-age[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-entry[_ngcontent-%COMP%]{padding-bottom:15px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;padding-bottom:3px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-top:-1px;display:inline-block;vertical-align:middle;margin-right:10px}"]});let a=M;return a})();export{Ae as AdminSettingsComponent};
