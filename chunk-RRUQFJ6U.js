import{a as Vn}from"./chunk-OD72VCY4.js";import"./chunk-QFFIV5EV.js";import{a as H}from"./chunk-RQOW2HPH.js";import"./chunk-OEGYTHMD.js";import"./chunk-E5W2C2IH.js";import{a as J}from"./chunk-LBZDZZ2H.js";import{$ as dn,$d as kn,Aa as S,Cb as mn,Cd as In,Db as fn,E as gn,Ge as N,H as d,I as U,J as x,La as Sn,Na as m,Ne as zn,Oa as y,Pa as D,Rb as un,Sa as X,Sb as hn,Ta as z,Tb as Tn,Ua as V,Ub as An,V as a,Vb as Nn,Vd as wn,Wb as Rn,Wc as A,Xb as bn,Xd as Ln,Za as Pn,Zb as Gn,Zc as v,_ as P,_c as w,a as an,b as rn,bb as j,cb as Cn,cc as vn,cd as L,db as Mn,f as K,fe as k,i as cn,ia as C,id as B,ja as M,ma as F,na as W,nd as Un,oa as u,pa as s,qa as i,qe as Dn,ra as l,rd as xn,re as Q,sa as h,se as Xn,ta as T,ub as pn,va as I,vb as En,vd as yn,wa as r,wd as $n,yb as On,z as ln,za as E}from"./chunk-2CUFB47X.js";function Bn(e,g){e&1&&l(0,"i",7)}function Jn(e,g){e&1&&(s(0,"span"),r(1,2),i())}var Y=(()=>{class e{refreshRandom;refreshing=!1;auth=d(v);app=d(B);unsubscribe=new cn;jam=d(w);notify=d(L);constructor(){this.refreshRandom=H()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}onDropFile(n){n.preventDefault(),this.uploadFile(n.dataTransfer?.files)}onDragOverFile(n){n.stopPropagation(),n.preventDefault()}selectFile(n){this.uploadFile(n.target.files)}uploadFile(n){if(!n||n.length===0||!this.auth.user)return;let o=n[0];this.jam.user.uploadUserImage({id:this.auth.user.id},o).pipe(ln(this.unsubscribe)).subscribe(t=>{t.type===mn.UploadProgress||t instanceof fn},t=>{this.notify.error(t)},()=>{this.refreshRandom=H(),this.notify.success("Upload done")})}randomAvatar(){this.refreshing||!this.auth.user||(this.refreshing=!0,this.jam.user.generateUserImage({id:this.auth.user.id}).then(()=>{this.refreshing=!1,this.refreshRandom=H(),this.notify.success("Image randomized")}).catch(n=>{this.refreshing=!1,this.notify.error(n)}))}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=P({type:e,selectors:[["app-user-avatar"]],standalone:!1,decls:11,vars:5,consts:()=>{let n;n=$localize`:␟d833321cc90a0b0a52714c6d5ec97fbe6c7cfa5c␟2501989539336327542:Upload image`;let o;o=$localize`:␟0966612784a5dcf0e05406cebe6e47c69999665a␟4001363701577936593: Drag an Image File here `;let t;t=$localize`:␟3a2a9bb12d904f3dd84e42cfad37afef4a6b35f6␟3825771792569625715:Choose a file`;let _;return _=$localize`:␟c1ba8ac278d9bdb189e23866675d475089dce2ae␟4360279154190126867:Random Image`,[o,t,_,[1,"drop-zone",3,"drop","dragover"],[1,"placeholder"],[3,"coverArtObj","size","round","refreshRandom"],[1,"button-primary",3,"click"],[1,"icon-spin","icon-spinner"],["id","file","type","file","placeholder",n,"accept",".png,.jpeg,.jpg",1,"inputfile",3,"change"],["for","file",1,"button-primary"]]},template:function(o,t){o&1&&(s(0,"div",3),E("drop",function(c){return t.onDropFile(c)})("dragover",function(c){return t.onDragOverFile(c)}),s(1,"div",4),r(2,0),i(),l(3,"app-coverart-image",5),s(4,"button",6),E("click",function(){return t.randomAvatar()}),C(5,Bn,1,0,"i",7)(6,Jn,2,0,"span"),i(),s(7,"form")(8,"input",8),E("change",function(c){return t.selectFile(c)}),i(),s(9,"label",9),r(10,1),i()()()),o&2&&(a(3),u("coverArtObj",t.auth.user)("size",100)("round",!0)("refreshRandom",t.refreshRandom),a(2),M(t.refreshing?5:6))},dependencies:[bn,An,Nn,Ln],styles:["[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]{vertical-align:bottom;display:inline-block;min-width:220px;min-height:140px;border-width:2px;margin-bottom:15px;margin-right:15px;border-style:dotted;border-color:var(--secondary);padding-left:15px;padding-right:15px;padding-bottom:15px;text-align:center}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   app-coverart-image[_ngcontent-%COMP%]{margin:0 auto 10px}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .inputfile[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:10px;min-width:80%;display:inline-block}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:inline-block;min-width:80%}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;display:block}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{width:100%;padding-top:15px;padding-bottom:15px;text-align:center;color:var(--on-control-ambient);font-size:.8em;text-transform:uppercase}"]})}return e})();var Kn=(e,g)=>g.session.id;function Qn(e,g){if(e&1&&(s(0,"div",17),r(1,4),i(),s(2,"div")(3,"code"),m(4),i()()),e&2){let n=S(3);a(4),y(n.subsonicToken==null?null:n.subsonicToken.token)}}function Yn(e,g){if(e&1){let n=I();s(0,"div"),r(1,2),i(),s(2,"button",16),E("click",function(){U(n);let t=S(2);return x(t.generateSubsonicToken())}),r(3,3),i(),C(4,Qn,5,1)}if(e&2){let n=S(2);a(4),M(n.subsonicToken!=null&&n.subsonicToken.token?4:-1)}}function Zn(e,g){if(e&1){let n=I();s(0,"div"),r(1,5),i(),s(2,"button",16),E("click",function(){U(n);let t=S(2);return x(t.unlockSubsonicToken())}),r(3,6),i()}}function ne(e,g){e&1&&(s(0,"span"),r(1,7),i())}function ee(e,g){if(e&1&&(s(0,"span",25),r(1,8),i(),l(2,"br"),m(3),j(4,"date")),e&2){let n=S().$implicit;a(3),D(" ",Mn(4,1,n.session.expires,"long")," ")}}function te(e,g){if(e&1){let n=I();s(0,"div",18)(1,"div",19),m(2),l(3,"br"),s(4,"span"),m(5),i()(),s(6,"div",20),m(7),l(8,"br"),m(9),i(),s(10,"div",21),C(11,ne,2,0,"span")(12,ee,5,4),i(),s(13,"div",22)(14,"button",23),E("click",function(){let t=U(n).$implicit,_=S(2);return x(_.remove(t.session))}),l(15,"i",24),i()()()}if(e&2){let n=g.$implicit;Sn("invalid",n.isExpired),a(2),D(" ",n.session.client),a(3),y(n.session.mode),a(2),D(" ",n.session.agent),a(2),D(" ",n.session.os," "),a(2),M(n.session.expires===void 0?11:12)}}function oe(e,g){if(e&1&&(s(0,"div",11)(1,"div",12)(2,"div",13),r(3,0),i(),C(4,Yn,5,1)(5,Zn,4,0),i(),s(6,"div",14)(7,"div",13),r(8,1),i(),F(9,te,16,7,"div",15,Kn),i()()),e&2){let n=S();a(4),M(n.isUnlocked?4:5),a(5),W(n.sessions)}}var Z=(()=>{class e{sessions;isUnlocked=!1;lock={pass:""};subsonicToken;jam=d(w);auth=d(v);dialogOverlay=d(wn);notify=d(L);generateSubsonicToken(){!this.isUnlocked||!this.auth.user||this.jam.user.generateSubsonicToken({id:this.auth.user.id,password:this.lock.pass}).then(n=>{this.subsonicToken=n,this.isUnlocked=!0,this.refresh(),this.notify.success("Token generated")}).catch(n=>{this.subsonicToken=void 0,this.isUnlocked=!1,this.notify.error(n)})}unlockSubsonicToken(){this.dialogOverlay.open({childComponent:kn,data:this.lock,onOkBtn:()=>K(this,null,function*(){this.isUnlocked=!0}),onCancelBtn:()=>K(this,null,function*(){return Promise.resolve()})})}ngOnInit(){this.auth.isLoggedIn()&&this.refresh()}remove(n){let o=n.id;this.jam.session.remove({id:o}).then(()=>{this.sessions&&(this.sessions=this.sessions.filter(t=>t.session.id!==o)),this.notify.success("Session Login removed")}).catch(t=>{this.notify.error(t)})}refresh(){this.jam.session.list().then(n=>{this.sessions=n.map(o=>({session:o,isExpired:o.expires!==void 0&&o.expires<Date.now()}))}).catch(n=>{this.notify.error(n)})}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=P({type:e,selectors:[["app-sessions-page"]],standalone:!1,decls:3,vars:1,consts:()=>{let n;n=$localize`:␟ce54b0509275b0551de870b805c1bb5c426d723f␟877974575580185933:Session Logins`;let o;o=$localize`:␟68d17f5d1beeee03406372494fc0bc306ed24f72␟2707659021126588033:Subsonic Token`;let t;t=$localize`:␟2744dff891981e67dd84e3a8ceb430704b86ed6a␟721963055036507192:Sessions`;let _;_=$localize`:␟29fcf6bfc99e542abcb128de5a04337412c00b10␟5380285610371362253:Click to generate or update a Subsonic Token. Warning: Existing token will no longer be valid.`;let c;c=$localize`:␟7eac06d83d2276d35aa4dc8aa51324b891722583␟5034015365836681485:Generate New Subsonic Token`;let R;R=$localize`:␟b603efccecf2b3f80a7807d375cf44b1cdaa6403␟1776712759383883061:This is your Subsonic Token. Please copy and store, you can not see it here again.`;let b;b=$localize`:␟1d23380d15fcbebe8a5ee64117725125d2860c6e␟5629769933636183639:Enter your Jam password to generate or update a Subsonic Token.`;let G;G=$localize`:␟e13796974274fd6b6bbc61a60fac4e14e6e29b6d␟8191371354890763172:Enter Password`;let p;p=$localize`:␟a881e543b0df3a9620cb65a5e6da992c3f38382e␟1021529107572383199:Remove this login`;let O;O=$localize`:␟6c2d15914e6ea1e9bb2ec041d69ae3b5f89c73cf␟8896757418171595787:Does not expire`;let _n;return _n=$localize`:␟7ebcbdc49ec3e6c6354f788704a3b4fb5649b74b␟7222262636210875388:valid until:`,[o,t,_,c,R,b,G,O,_n,[1,"sessions"],["section",n],[1,"content"],[1,"subsonic"],[1,"section-title"],[1,"session-list"],[1,"session",3,"invalid"],[1,"button-primary",3,"click"],[1,"token"],[1,"session"],[1,"title"],[1,"agent"],[1,"expires"],[1,"remove"],["title",p,3,"click"],["aria-hidden","true",1,"icon-remove"],[1,"label"]]},template:function(o,t){o&1&&(s(0,"div",9),l(1,"app-view-header-slim",10),C(2,oe,11,1,"div",11),i()),o&2&&(a(2),M(t.sessions?2:-1))},dependencies:[k,En],styles:['[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]{padding-bottom:30px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]{margin-top:20px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{padding:20px;display:inline-block;background-color:var(--control);color:var(--on-control-ambient)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:15px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap;-webkit-user-select:none;user-select:none;width:100%;padding-top:5px;background-color:var(--background);color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{min-height:48px;display:flex;flex-flow:row nowrap;align-items:center;align-content:space-evenly;width:100%;padding:10px;line-height:1.25em;margin-bottom:1px;border-top-width:1px;border-top-style:solid;border-bottom-width:0;border-bottom-style:solid;border-bottom-color:var(--background-border);border-top-color:var(--background-border)}@media (max-width: 1000px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{height:auto}}@media (max-width: 522px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{font-size:.9em}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]:last-child{border-bottom-width:1px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .small-screen-icon[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--on-background);font-size:.8em}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;display:inline-block;margin:0 10px 0 0}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.8em;vertical-align:middle}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a.title-link[_ngcontent-%COMP%]{font-size:inherit;margin-right:10px;color:var(--on-background-highlight)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{width:0;margin-left:0;cursor:move}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]{display:inline-block;width:26px;height:8px;transform:rotate(90deg);margin-left:-8px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%], [_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]:before{background-image:radial-gradient(#7b7b7b 40%,transparent 40%);background-size:4px 4px;background-position:0 100%;background-repeat:repeat-x}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]:before{content:"";display:block;width:100%;height:33%}@media (max-width: 1000px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{height:auto;min-height:48px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-left:0}}@media (max-width: 400px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{flex-flow:row wrap;align-items:inherit;width:100%;font-size:.9em}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .small-screen-icon[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{order:2;width:25%;text-align:center}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]{transform:rotate(0)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{order:6;margin-left:0;margin-right:0;padding-right:0;padding-left:0;width:100%}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:0;margin-right:0;padding-right:0;padding-left:0;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;margin-left:0;margin-right:0;overflow:hidden;text-overflow:ellipsis}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%]{font-size:.8em;flex-grow:1;padding-right:10px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{width:260px;font-size:.8em;padding-right:10px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--on-background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:10px;width:140px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.7em;text-transform:uppercase}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session.invalid[_ngcontent-%COMP%]{color:var(--on-control-ambient-disabled)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session.invalid[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{color:var(--accent)}@media (max-width: 400px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%], [_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{order:0;width:calc(100% - 30px)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{order:1}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%]{order:2}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{order:3}}']})}return e})();var ie=(e,g)=>g.name;function se(e,g){if(e&1){let n=I();s(0,"label",10)(1,"input",14),V("ngModelChange",function(t){U(n);let _=S();return z(_.app.settings.theme,t)||(_.app.settings.theme=t),x(t)}),E("ngModelChange",function(){U(n);let t=S();return x(t.onChange())}),i(),m(2),j(3,"titlecase"),i()}if(e&2){let n=g.$implicit,o=S();a(),u("value",n.name),X("ngModel",o.app.settings.theme),a(),y(Cn(3,3,n.name))}}var nn=(()=>{class e{app=d(B);player=d(yn);themes=Vn.themes;settings=d($n);onChange(){this.settings.applySettings()}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=P({type:e,selectors:[["app-page-settings"]],standalone:!1,decls:25,vars:3,consts:()=>{let n;n=$localize`:␟121cc5391cd2a5115bc2b3160379ee5b36cd7716␟4930506384627295710:Settings`;let o;o=$localize`:␟8ba4f3fada9c0278b12e5dc72b25a9213a41f73e␟2696427906168966769:Show Waveform of Current Track`;let t;t=$localize`:␟09775f315171df8237e648a015ef8d926da48748␟4046137991643846566:Show Notifications On Tracks Change`;let _;_=$localize`:␟b307e817a013c5009ff98f7645834d503869db50␟8198980433602946702:Design`;let c;c=$localize`:␟59bdc3dfa4075f92c734588899485db702c8f120␟7683705529753923369:Player`;let R;R=$localize`:␟8ba4f3fada9c0278b12e5dc72b25a9213a41f73e␟2696427906168966769:Show Waveform of Current Track`;let b;b=$localize`:␟7096fbcea9ef94e1ae3e68c75250b6c9bd78b1bb␟3015012963934645778:Playing`;let G;G=$localize`:␟b9c15b2fd4b6fab0a947d1cf0843c3e1ed1cebf3␟2706303691969065868:Show Playing Track Name in Window Title`;let p;return p=$localize`:␟c4c1ee09a557adee6dd31c26dc1dc03fc106dffe␟3955518524911882320:Show Notification Popup On Track Change`,[_,c,R,b,G,p,[1,"settings"],["section",n],[1,"content"],[1,"section-title"],[1,"select"],["type","checkbox","title",o,3,"ngModelChange","ngModel"],["type","checkbox","value","1",3,"ngModelChange","ngModel"],["type","checkbox","value","1","title",t,3,"ngModelChange","ngModel"],["type","radio","name","theme",3,"ngModelChange","value","ngModel"]]},template:function(o,t){o&1&&(s(0,"div",6),l(1,"app-view-header-slim",7),s(2,"div",8)(3,"div",9),r(4,0),i(),s(5,"div")(6,"fieldset"),F(7,se,4,5,"label",10,ie),i()(),s(9,"div",9),r(10,1),i(),s(11,"label")(12,"input",11),V("ngModelChange",function(c){return z(t.app.settings.showWaveform,c)||(t.app.settings.showWaveform=c),c}),E("ngModelChange",function(){return t.onChange()}),i(),h(13),r(14,2),T(),i(),s(15,"div",9),r(16,3),i(),s(17,"label")(18,"input",12),V("ngModelChange",function(c){return z(t.app.settings.playingTrackInTitle,c)||(t.app.settings.playingTrackInTitle=c),c}),E("ngModelChange",function(){return t.onChange()}),i(),h(19),r(20,4),T(),i(),s(21,"label")(22,"input",13),V("ngModelChange",function(c){return z(t.app.settings.notificationSong,c)||(t.app.settings.notificationSong=c),c}),E("ngModelChange",function(){return t.onChange()}),i(),h(23),r(24,5),T(),i()()()),o&2&&(a(7),W(t.themes),a(5),X("ngModel",t.app.settings.showWaveform),a(6),X("ngModel",t.app.settings.playingTrackInTitle),a(4),X("ngModel",t.app.settings.notificationSong))},dependencies:[hn,un,Gn,Tn,Rn,k,pn],styles:["[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;padding-bottom:15px;color:var(--on-background)}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-top:-1px;display:inline-block;vertical-align:middle}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{margin-bottom:15px;width:auto;display:inline}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label.select[_ngcontent-%COMP%]{width:auto;padding-top:4px;padding-bottom:4px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label.select[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:10px}"]})}return e})();var en=(()=>{class e{base=[];favorites=[];played=[];jam=d(w);auth=d(v);notify=d(L);ngOnInit(){this.auth.isLoggedIn()&&this.refresh()}refresh(){this.jam.stats.user().then(n=>{this.favorites=e.buildStats(n.favorite,"/favorites"),this.played=e.buildStats(n.played,"/recently-played"),this.base=Q([{text:"Bookmarks",link:"/library/bookmarks",value:n.bookmark},{text:"Playlists",link:"/library/playlists",value:n.playlist}],!0)}).catch(n=>{this.notify.error(n)})}static buildStats(n,o=""){return Q([{text:"Artists",link:"artists",value:n.artistTypes.album},...[{type:N(A.album),value:n.albumTypes.album},{type:N(A.compilation),value:n.albumTypes.compilation}].map(t=>({text:t.type?.text,link:`${t.type?.id}`,value:t.value})),{text:"Series",link:"series",value:n.series},...[{type:N(A.audiobook),value:n.albumTypes.audiobook},{type:N(A.soundtrack),value:n.albumTypes.soundtrack},{type:N(A.live),value:n.albumTypes.live},{type:N(A.bootleg),value:n.albumTypes.bootleg},{type:N(A.ep),value:n.albumTypes.ep},{type:N(A.single),value:n.albumTypes.single}].map(t=>({text:t.type?.text,link:`${t.type?.id}`,value:t.value})),{text:"Folders",link:"folders",value:n.folder},{text:"Tracks",link:"tracks",value:n.track}].map(t=>rn(an({},t),{link:`/library/${t.link}${o}`})))}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=P({type:e,selectors:[["app-user-stats"]],standalone:!1,decls:9,vars:3,consts:()=>{let n;n=$localize`:␟299f97b8ee9c62d45f2cc01961aa1e5101d6d05a␟4088311569349098646:Stats`;let o;o=$localize`:␟0add707baf7b167d0c0e9cdeb80f946aa1bd2223␟4085930761302974863:Favorites`;let t;return t=$localize`:␟73565b2d231303b7ff6f28663a72abb1b3bd1890␟7754730602038897709:Played`,[n,o,t,[1,"section-title"],[3,"stats"]]},template:function(o,t){o&1&&(s(0,"div",3),r(1,0),i(),l(2,"app-stats",4),s(3,"div",3),r(4,1),i(),l(5,"app-stats",4),s(6,"div",3),r(7,2),i(),l(8,"app-stats",4)),o&2&&(a(2),u("stats",t.base),a(3),u("stats",t.favorites),a(3),u("stats",t.played))},dependencies:[Xn],styles:["[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-top:15px;margin-bottom:10px;color:var(--on-control-ambient)}"]})}return e})();function ae(e,g){e&1&&(s(0,"div"),l(1,"i",16),h(2),r(3,3),T(),i())}function re(e,g){e&1&&(s(0,"div"),l(1,"i",16),h(2),r(3,4),T(),i())}function ce(e,g){e&1&&(s(0,"div"),l(1,"i",16),h(2),r(3,5),T(),i())}function le(e,g){e&1&&(s(0,"div"),l(1,"i",16),h(2),r(3,6),T(),i())}function ge(e,g){if(e&1&&(s(0,"div",14)(1,"div",12),r(2,2),i(),s(3,"div",15),C(4,ae,4,0,"div"),C(5,re,4,0,"div"),C(6,ce,4,0,"div"),C(7,le,4,0,"div"),i()()),e&2){let n=S(2);a(4),M(n.auth.user.roles.stream?4:-1),a(),M(n.auth.user.roles.podcast?5:-1),a(),M(n.auth.user.roles.upload?6:-1),a(),M(n.auth.user.roles.admin?7:-1)}}function de(e,g){if(e&1&&(s(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12),r(4,0),i(),l(5,"app-user-avatar"),i(),s(6,"div",13)(7,"div",14)(8,"div",12),r(9,1),i(),s(10,"div"),m(11),i()(),C(12,ge,8,4,"div",14),i()(),s(13,"div",14),l(14,"app-user-stats"),i()()),e&2){let n=S();a(11),y(n.auth.user.name),a(),M(n.auth.user.roles?12:-1)}}var tn=(()=>{class e{auth=d(v);static \u0275fac=function(o){return new(o||e)};static \u0275cmp=P({type:e,selectors:[["app-user-page"]],standalone:!1,decls:3,vars:1,consts:()=>{let n;n=$localize`:␟e08a77594f3d89311cdf6da5090044270909c194␟2392488717875840729:User`;let o;o=$localize`:␟cebb7f27b5028c62b4426da3bb3e3bd3f4a3443b␟6525109356951792180:Avatar`;let t;t=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`;let _;_=$localize`:␟70f45880fce6ac5d8e468e25e82aefbba8098cfe␟7314814725704332646:Permissions`;let c;c=$localize`:␟0c1153af20b06ee1f31e7d07eebfada81b9a19b2␟7231504695490320052:Stream Audio`;let R;R=$localize`:␟f47ba1cd01c3dfd801fe7f66c3d28d698dcc0479␟1291164613191345064:Manage Podcasts`;let b;b=$localize`:␟7876f698ec2db992452b14bd66e0ed1261d890e8␟5793950743388475134:Upload Audio`;let G;return G=$localize`:␟76046fa6f13fb0524ca1d3777247ab13d73660c8␟2210415377969858551:Server Administration`,[o,t,_,c,R,b,G,[1,"user"],["section",n],[1,"content"],[1,"row"],[1,"column","first"],[1,"section-title"],[1,"column"],[1,"section"],[1,"roles"],[1,"icon-checkmark"]]},template:function(o,t){o&1&&(s(0,"div",7),l(1,"app-view-header-slim",8),C(2,de,15,2,"div",9),i()),o&2&&(a(2),M(t.auth.user?2:-1))},dependencies:[k,en,Y],styles:["[_nghost-%COMP%]   .user[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{padding-bottom:30px}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:5px}@media (max-width: 400px){[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{flex-direction:column}}"]})}return e})();var q=(()=>{class e{static \u0275fac=function(o){return new(o||e)};static \u0275cmp=P({type:e,selectors:[["app-user"]],standalone:!1,decls:5,vars:0,consts:[[1,"left"],[1,"split-pane-divider-left"],["role","main",1,"middle"]],template:function(o,t){o&1&&(s(0,"aside",0),l(1,"app-user-sidebar"),i(),l(2,"app-splitter",1),s(3,"main",2),l(4,"router-outlet"),i())},styles:["[_nghost-%COMP%]{width:100%;height:100%;flex:1;display:flex;flex-flow:row nowrap;overflow:hidden;align-items:flex-start;align-content:flex-start}[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:15%;height:100%}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{width:60%;flex-grow:1;height:100%}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{width:25%;height:100%}@media (max-width: 1600px){[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:20%}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{width:55%;flex-grow:1;height:100%}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{width:25%;height:100%}}@media (max-width: 1400px){[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:25%}[_nghost-%COMP%]   .right[_ngcontent-%COMP%], [_nghost-%COMP%]   .split-pane-divider-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 768px){[_nghost-%COMP%]{overflow:auto;flex-flow:row wrap}[_nghost-%COMP%]   app-splitter[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:100%!important;height:auto}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{height:auto}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{width:100%!important;height:auto}}@media (max-width: 522px){[_nghost-%COMP%]{overflow:hidden;height:auto}}"]})}return e})();var on=[{path:"",component:q,children:[{path:"",pathMatch:"full",component:tn,canActivate:[J],data:{name:"User"}},{path:"settings",component:nn,canActivate:[J],data:{name:"Settings"}},{path:"sessions",component:Z,canActivate:[J],data:{name:"Sessions",icon:"icon-laptop"}}]}],Wn=xn.forChild(on);var sn=(()=>{class e{sections=[];constructor(){let o=(on[0]?.children||[]).filter(_=>_.path&&_.path.length>0&&_.data?.name).map(_=>{let c=_.data?.link?_.data.link:_.path;return{name:_.data?_.data.name:"",icon:_.data&&_.data.icon?_.data.icon:"icon-admin",link:`/user/${c}`}}),t={name:"Profile",icon:"icon-user",link:"/user",options:{exact:!0}};this.sections=[{name:"User",entries:[t].concat(o)}]}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=P({type:e,selectors:[["app-user-sidebar"]],standalone:!1,decls:1,vars:1,consts:[[3,"sections"]],template:function(o,t){o&1&&l(0,"app-sidebar",0),o&2&&u("sections",t.sections)},dependencies:[In],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block}"]})}return e})();var Gt=(()=>{class e{static \u0275fac=function(o){return new(o||e)};static \u0275mod=dn({type:e});static \u0275inj=gn({imports:[vn,zn,On,Wn]})}return e})();Pn(q,function(){return[Dn,Un,sn]},[]);export{Gt as UserModule};
