import{a as at}from"./chunk-N2Q3XI4X.js";import{a as X}from"./chunk-6VWQ7JC4.js";import{a as rt}from"./chunk-SDBHHTA3.js";import{a as Y,b as K,c as Q,d as W,e as Z,f as tt,g as et,h as nt,i as ot}from"./chunk-NNT52QCM.js";import"./chunk-6UV7XVIR.js";import"./chunk-SDT7PSNL.js";import"./chunk-4K2FA6DD.js";import"./chunk-AIQOHZWK.js";import"./chunk-N2K5OS3Y.js";import"./chunk-24DMSAFT.js";import"./chunk-Y5Z5ITNC.js";import"./chunk-ORVGIZVG.js";import"./chunk-K7RVMPTP.js";import"./chunk-MHPFTM2Z.js";import"./chunk-T2QKBMPN.js";import"./chunk-DYCPZPVS.js";import"./chunk-CXISAAQ7.js";import"./chunk-BNP52TDG.js";import"./chunk-F6BYEP4R.js";import"./chunk-VP6KNDS4.js";import{e as U}from"./chunk-D2CLWX7O.js";import"./chunk-AQDYGNZB.js";import"./chunk-W76RWN3H.js";import"./chunk-FQC6PRY2.js";import{a as it}from"./chunk-PZTZCA44.js";import"./chunk-4HNSRH53.js";import{G}from"./chunk-ZVKVGF76.js";import{f as F,g as L,k as $}from"./chunk-T6GM3CFW.js";import{$d as w,Aa as T,Hb as O,Ib as P,Kb as E,Lb as B,Ld as d,Mb as D,Nb as C,Ob as r,Pb as c,Qb as p,Sd as q,Ub as J,Uc as k,Vb as R,Vc as l,Y as y,_b as f,ab as s,ac as N,dc as h,e as j,fc as g,gc as z,hc as V,ia as m,k as I,na as _,nb as x,oa as u,pb as S,qc as A,rc as H,tc as M,uc as b}from"./chunk-H2EXZDP6.js";var ct=(()=>{let n=class n{constructor(){this.backgroundImageID=l(void 0,{alias:"appBackgroundImage"}),this.jam=m(w)}ngOnChanges(t){t.backgroundImageID&&(this.backgroundImage=t.backgroundImageID.currentValue?`url(${this.jam.image.imageUrl({id:t.backgroundImageID.currentValue,size:600,format:q.webp})})`:void 0)}};n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=S({type:n,selectors:[["","appBackgroundImage",""]],hostVars:2,hostBindings:function(e,a){e&2&&A("background-image",a.backgroundImage)},inputs:{backgroundImageID:[1,"appBackgroundImage","backgroundImageID"]},features:[T]});let i=n;return i})();var lt=["*"];function pt(i,n){if(i&1){let o=f();r(0,"div",10),M(1),c(),r(2,"div",11),h("click",function(){let e=_(o).$implicit,a=g(2);return u(a.clickItem(e))}),M(3),c()}if(i&2){let o=n.$implicit;s(),b(o.label),s(),H("clickable",o.click),s(),b(o.value)}}function mt(i,n){if(i&1){let o=f();r(0,"div",0)(1,"div",2),p(2,"app-coverart-image",3),c(),r(3,"div",4)(4,"div",5),M(5),c(),r(6,"div",6),M(7),c(),r(8,"div",7),V(9),c()(),r(10,"div",8),B(11,pt,4,4,null,null,E),r(13,"a",9),h("click",function(e){_(o);let a=g();return u(a.contextmenuEvent(e))})("keydown.enter",function(e){_(o);let a=g();return u(a.contextmenuEvent(e))}),M(14,"\u2026"),c()()()}if(i&2){let o=n,t=g();s(2),C("coverArtObj",o)("size",150)("fill",!0)("alt",o.name)("allowEnlarge",!0),s(3),b(t.sectionType()),s(2),b(t.section()),s(4),D(t.infos())}}var gt=(()=>{let n=class n{constructor(){this.base=l(),this.section=l(),this.sectionType=l(),this.hasContextMenu=l(!1),this.tabs=l(),this.infos=l([]),this.contextMenuRequest=k(),this.playRequest=k()}contextmenuEvent(t){this.contextMenuRequest.emit(t)}clickItem(t){t.click&&t.click()}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=x({type:n,selectors:[["app-view-header-jam-base"]],hostBindings:function(e,a){e&1&&h("contextmenu",function(dt){return a.contextmenuEvent(dt)})},inputs:{base:[1,"base"],section:[1,"section"],sectionType:[1,"sectionType"],hasContextMenu:[1,"hasContextMenu"],tabs:[1,"tabs"],infos:[1,"infos"]},outputs:{contextMenuRequest:"contextMenuRequest",playRequest:"playRequest"},ngContentSelectors:lt,decls:2,vars:2,consts:[[1,"info"],[1,"navigation",3,"tabs"],[1,"img"],[3,"coverArtObj","size","fill","alt","allowEnlarge"],[1,"meta"],[1,"type"],[1,"name"],[1,"actions"],[1,"header-infos"],["tabindex","0",1,"more",3,"click","keydown.enter"],[1,"label"],[1,"count",3,"click"]],template:function(e,a){if(e&1&&(z(),O(0,mt,15,7,"div",0),p(1,"app-view-header-tabs",1)),e&2){let v;P((v=a.base())?0:-1,v),s(),C("tabs",a.tabs())}},dependencies:[X,rt],styles:['[_nghost-%COMP%]{background-color:var(--background-view-header);min-height:260px;position:relative;background-size:cover;background-position:center;background-repeat:no-repeat;background-origin:padding-box;overflow:visible;display:flex;flex-flow:row wrap;justify-content:space-between;align-items:flex-end;background-color:var(--background)}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]{padding:15px;z-index:1;width:100%;margin-top:30px;display:flex;flex-flow:row nowrap;justify-content:space-between;align-items:center;color:var(--on-control-ambient)}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{margin-right:15px;flex:0 0 160px;height:160px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{flex:1 1}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .year[_ngcontent-%COMP%], [_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .artist[_ngcontent-%COMP%], [_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], [_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{color:var(--on-control-ambient)}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{text-transform:uppercase;font-size:11px;letter-spacing:1px;margin-left:2px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:52px;font-weight:100;padding:0 0 10px;margin:0;text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .year[_ngcontent-%COMP%]{font-size:16px;font-weight:100;padding:0 0 10px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .artist[_ngcontent-%COMP%]{font-size:16px;font-weight:100;padding:0 0 10px;cursor:pointer}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]{max-width:30%;padding:15px;text-align:right;font-weight:100;font-size:16px;letter-spacing:1px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:300;text-transform:uppercase;font-size:12px;letter-spacing:1px;vertical-align:middle;color:var(--on-control-ambient)}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{padding-bottom:10px;color:var(--on-control-ambient-hover);overflow:hidden;text-overflow:ellipsis;vertical-align:middle}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .count.clickable[_ngcontent-%COMP%]{color:var(--on-control-ambient-hover);cursor:pointer}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .count.clickable[_ngcontent-%COMP%]:hover{color:var(--on-control-ambient)}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;padding:4px 9px 10px;margin-right:-9px;border-radius:50%;border:1px solid transparent;color:var(--on-control)}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]:hover{background-color:var(--control-hover);color:var(--on-control-hover)}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]{width:100%;display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center;background-color:var(--background-transparent)}@media (max-width: 1000px){[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:36px}}@media (max-width: 768px){[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{visibility:inherit}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]{margin:-1px}}@media (max-width: 522px){[_nghost-%COMP%]{height:auto;flex-flow:column wrap;min-height:100px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]{padding:10px;margin-top:0;width:100%;display:block;text-align:center}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{margin-right:0;width:30%;display:inline-block;height:auto}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{width:70%;display:inline-block;text-align:center;vertical-align:top;padding-left:15px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:24px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{margin-top:10px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{justify-content:center}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]{width:100%;text-align:center;padding-left:0;padding-right:0;padding-bottom:0;max-width:100%}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:inline-block;text-align:right;font-size:.8em;width:50%;padding-right:10px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{padding-left:0;font-size:.8em;padding-bottom:0;display:inline-block;text-align:left;width:50%}}@media (max-width: 300px){[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{width:100%}}.slim[_nghost-%COMP%]{min-height:130px}@media (max-width: 522px){.slim[_nghost-%COMP%]{min-height:100px;padding-left:15px;padding-right:15px}.slim[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:inherit}.slim[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{padding-left:0;margin-left:0;width:100%}}[_nghost-%COMP%]:before{content:" ";display:block;position:absolute;left:0;top:0;width:100%;height:100%;z-index:0;background-color:var(--background-transparent)}'],changeDetection:0});let i=n;return i})();function _t(i,n){if(i&1&&p(0,"app-episode-state-button",3),i&2){let o=g(2);C("episode",o.asPodcastEpisode)("showTitle",!0)}}function ut(i,n){if(i&1){let o=f();r(0,"button",6),h("click",function(){_(o);let e=g(2);return u(e.obj.play())}),p(1,"i",7),J(2),N(3,0),R(),c()}}function ht(i,n){if(i&1){let o=f();r(0,"div",1)(1,"app-view-header-jam-base",2),h("contextMenuRequest",function(e){_(o);let a=g();return u(a.obj.onContextMenu(e,!0))}),O(2,_t,1,2,"app-episode-state-button",3)(3,ut,4,0,"button",4),c(),r(4,"div",5),p(5,"router-outlet"),c()()}if(i&2){let o=g();s(),C("appBackgroundImage",o.obj.id)("section",o.obj.name)("sectionType",o.obj.mediaType)("base",o.obj.base)("infos",o.infos)("tabs",o.tabs),s(),P(o.isPodcastEpisode?2:3)}}function Ct(i,n){i&1&&p(0,"app-loading")}var qt=(()=>{let n=class n{constructor(){this.infos=[],this.tabs=[],this.isPodcastEpisode=!1,this.jam=m(w),this.notify=m(G),this.route=m(F),this.unsubscribe=new I,this.library=m(ot)}get asPodcastEpisode(){return this.obj}ngOnInit(){this.route.url.pipe(y(this.unsubscribe)).subscribe(t=>{this.type=U(t),this.isPodcastEpisode=this.type?.type===d.episode}),this.route.paramMap.pipe(y(this.unsubscribe)).subscribe(t=>{this.id=t.get("id")??void 0,this.refresh()})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}display(t){this.obj=t,t&&(this.infos=t.getInfos(),this.tabs=this.type?.id?this.library.buildIDTabs(this.type.id,t.id):[])}refresh(){this.obj=void 0,this.id&&this.type&&this.get(this.id).then(t=>{this.display(t)}).catch(t=>{this.notify.error(t)})}get(t){return j(this,null,function*(){switch(this.type?.type){case d.album:{let e=yield this.jam.album.id({id:t,albumIncState:!0});return new Y(e,this.library)}case d.series:{let e=yield this.jam.series.id({id:t,seriesIncState:!0});return new tt(e,this.library)}case d.artist:{let e=yield this.jam.artist.id({id:t,artistIncState:!0});return new Q(e,this.library)}case d.podcast:{let e=yield this.jam.podcast.id({id:t,podcastIncState:!0});return new et(e,this.library)}case d.playlist:{let e=yield this.jam.playlist.id({id:t,playlistIncState:!0});return new W(e,this.library)}case d.track:{let e=yield this.jam.track.id({id:t,trackIncState:!0,trackIncTag:!0});return new Z(e,this.library)}case d.episode:{let e=yield this.jam.episode.id({id:t,episodeIncState:!0,episodeIncTag:!0});return new nt(e,this.library)}case d.folder:{let e=yield this.jam.folder.id({id:t,folderIncState:!0,folderIncTag:!0});return new K(e,this.library)}default:return}})}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=x({type:n,selectors:[["app-page-obj"]],decls:2,vars:1,consts:()=>{let t;return t=$localize`:␟9b00b4b718d67ef6351bba15acd4ad0f2bc47927␟8564202903947049539:Play`,[t,[1,"obj"],[3,"contextMenuRequest","appBackgroundImage","section","sectionType","base","infos","tabs"],[3,"episode","showTitle"],[1,"button-primary"],[1,"content"],[1,"button-primary",3,"click"],[1,"icon-play"]]},template:function(e,a){e&1&&O(0,ht,6,7,"div",1)(1,Ct,1,0,"app-loading"),e&2&&P(a.obj?0:1)},dependencies:[$,L,at,ct,gt,it],styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:hidden;flex:0 1 100%}[_nghost-%COMP%]   .obj[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .obj[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .obj[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .obj[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}"]});let i=n;return i})();export{qt as ObjPageComponent};
