import{a as at}from"./chunk-ROAYP7FD.js";import{$ as H,$a as B,$b as J,$c as Q,Ca as h,Da as m,E as w,I as f,J as u,Le as ot,Me as ct,Oa as E,Pa as A,Pb as X,Qb as Y,T as $,Ta as v,Tb as V,Ua as L,V as s,Va as D,Xb as j,Xc as K,Yb as F,Yd as nt,Z as P,Zb as W,aa as U,ce as et,fd as Z,ka as p,la as O,na as T,oa as R,od as q,pa as N,pd as tt,qa as l,ra as a,sa as i,ta as S,ua as b,va as x,vb as z,xa as k,za as g}from"./chunk-RPULQAHC.js";var st=()=>({standalone:!0});function rt(e,C){e&1&&S(0,"app-loading",13),e&2&&l("time",0)}function dt(e,C){e&1&&(a(0,"div"),g(1,2),i())}function Ct(e,C){if(e&1&&S(0,"img",17),e&2){let t=m().$implicit;l("src",t.logoUrl,$)}}function Pt(e,C){if(e&1&&(a(0,"option",24),E(1),i()),e&2){let t=C.$implicit;l("ngValue",t),s(),A(t.displayURL)}}function gt(e,C){if(e&1){let t=k();a(0,"div",15)(1,"div",16),p(2,Ct,1,1,"img",17),i(),a(3,"div",18)(4,"div",19),g(5,3),i(),a(6,"div",20),E(7),i(),a(8,"div",21),E(9),i(),a(10,"div",22)(11,"select",23),D("ngModelChange",function(n){let c=f(t).$implicit;return L(c.selected,n)||(c.selected=n),u(n)}),R(12,Pt,2,2,"option",24,T),i(),a(14,"button",25),h("click",function(){let n=f(t).$implicit,c=m(2);return u(c.subscribe(n.selected))}),S(15,"i",26),b(16),g(17,4),x(),i()()()()}if(e&2){let t=C.$implicit;s(2),O(t.logoUrl?2:-1),s(5),A(t.name),s(2),A(t.description),s(2),v("ngModel",t.selected),s(),N(t.pods)}}function pt(e,C){if(e&1&&(a(0,"div",14),p(1,dt,2,0,"div"),a(2,"div"),R(3,gt,18,4,"div",15,T),i()()),e&2){let t=m();s(),O(t.podcasts.length===0?1:-1),s(2),N(t.podcasts)}}var _t=(()=>{class e{app;jam;navig;notify;podcastService;podcasts;searchValue="";isSearching=!1;constructor(t,o,n,c,r){this.app=t,this.jam=o,this.navig=n,this.notify=c,this.podcastService=r,this.searchValue=""}subscribe(t){t&&this.jam.podcast.create({url:t.url.toString()}).then(()=>{this.notify.success("Podcast subscribed")}).catch(o=>{this.notify.error(o)})}search(t){this.podcasts=void 0,t&&t.length>0&&(this.isSearching=!0,this.jam.podcast.discover({query:t}).then(o=>{this.searchValue===t&&(this.buildSearchResults(o),this.isSearching=!1)}).catch(o=>{this.isSearching=!1,this.notify.error(o)}))}buildSearchResults(t){let o={};t.forEach(n=>{let c=new URL(n.url);if(!["feedburner.com","www.feedburner.com"].includes(c.hostname))return;let _=o[n.title];_||(_={name:n.title,logoUrl:n.scaled_logo_url,description:n.description,pods:[]},o[n.title]=_),(!_.description||_.description.length===0)&&(_.description=n.description),(!_.logoUrl||_.logoUrl.length===0)&&(_.logoUrl=n.scaled_logo_url),_.pods.find(M=>M.url.toString()===c.toString())||_.pods.push({result:n,url:c,displayURL:c.toString()})}),this.podcasts=Object.keys(o).map(n=>{let c=o[n];return c.selected=c.pods.find(r=>r.url.pathname.includes("mp3")),c.selected||(c.selected=c.pods[0]),c})}static \u0275fac=function(o){return new(o||e)(P(Z),P(K),P(tt),P(Q),P(ot))};static \u0275cmp=H({type:e,selectors:[["app-page-podcast-search"]],standalone:!1,decls:13,vars:5,consts:()=>{let t;t=$localize`:␟bcf0cf926b1e905efa525be7b6c2882e30336d84␟1357676316058684153:icon-podcast`;let o;o=$localize`:␟2a7eeaf2b2848fdb9ee7413abb25112c5bbdbaf9␟4930940035022738997:New Podcasts`;let n;n=$localize`:␟3139a6aecd219e16271f27a9ea62a62440ade0e6␟5108862386290980810:Search Podcast or paste feed url`;let c;c=$localize`:␟596d65263456e81ac98fb7f8d616bf01adfc17a8␟7933384538978087776:Powered by`;let r;r=$localize`:␟5793742019cf278a58428fa27054e1ea7993113d␟1865604754847434933:gpodder.net`;let _;_=$localize`:␟850f8ce88f2d1eedf4965af96f6c4e03e86220b4␟8161264306826042917:No Results`;let M;M=$localize`:␟7f37d036d722d1c188cc50c7343f1193682df80a␟6294189837610631338:Podcast Image`;let G;G=$localize`:␟70b989779eb53e6ff14d810336677dbc3bde4202␟7944777648309302794:Feed URL`;let y;y=$localize`:␟ca427f6920d12a392d55ee77947267c699197915␟2605658322936929408:Podcast`;let I;return I=$localize`:␟d0336848b0c375a1c25ba369b3481ee383217a4f␟1144407473317535723:Subscribe`,[c,r,_,y,I,[1,"search-podcasts"],["icon",t,"section",o],[1,"input-box"],["name","podcast-search","placeholder",n,"type","text",3,"ngModelChange","keydown.enter","ngModelOptions","ngModel"],[1,"icon-search",3,"click"],[1,"reference"],["href","https://gpodder.net","target","_blank","rel","noopener"],[1,"content"],[3,"time"],[1,"podcasts"],[1,"search-podcast-plate"],[1,"art"],["alt",M,3,"src"],[1,"meta"],[1,"type"],[1,"name"],[1,"description"],[1,"actions"],["title",G,3,"ngModelChange","ngModel"],[3,"ngValue"],[1,"button-on-background",3,"click"],[1,"icon-list-add"]]},template:function(o,n){o&1&&(a(0,"div",5)(1,"app-view-header-icon-section",6)(2,"div",7)(3,"input",8),D("ngModelChange",function(r){return L(n.searchValue,r)||(n.searchValue=r),r}),h("keydown.enter",function(){return n.search(n.searchValue)}),i(),a(4,"i",9),h("click",function(){return n.search(n.searchValue)}),i()(),a(5,"div",10),b(6),g(7,0),x(),a(8,"a",11),g(9,1),i()()(),a(10,"div",12),p(11,rt,1,1,"app-loading",13),p(12,pt,5,1,"div",14),i()()),o&2&&(s(3),l("ngModelOptions",B(4,st)),v("ngModel",n.searchValue),s(8),O(n.isSearching?11:-1),s(),O(n.podcasts?12:-1))},dependencies:[F,W,X,j,Y,V,et,nt],styles:["[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{border-radius:3px;padding-left:3px;padding-right:3px;align-items:center;background-color:var(--input);border:1px solid var(--input-border)}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;min-height:20px;background-color:var(--input);color:var(--on-input)}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--on-input);font-size:14px;cursor:pointer}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:var(--on-input-hover)}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{width:100%;display:flex;min-height:30px}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:calc(100% - 24px)}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .reference[_ngcontent-%COMP%]{padding-top:5px;font-size:.8em}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]{width:100%;margin-top:30px}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:15px;display:block;max-width:100%}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]{border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:var(--background-border);padding:15px;display:flex;flex-flow:row wrap}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .art[_ngcontent-%COMP%]{min-width:64px;min-height:64px;max-width:64px;display:block;cursor:pointer}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .art[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:64px;height:auto}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{margin-left:15px;display:flex;flex-flow:column wrap;position:relative;width:calc(100% - 120px)}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;text-overflow:ellipsis;overflow:hidden}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{text-transform:uppercase}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%], [_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .year[_ngcontent-%COMP%], [_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .state[_ngcontent-%COMP%]{letter-spacing:1px;font-size:.8em}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:24px;font-weight:100;color:var(--on-background-highlight)}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background)}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:14px;line-height:1.2em}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:auto}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:5px;margin-right:5px;height:27px;font-weight:500;padding:1px 15px 0}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:scale(1.3);transform-origin:center}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;border:1px solid transparent;padding:4px 9px 7px;border-radius:50%;display:none;position:absolute;right:1px;bottom:0}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--control-hover);color:var(--on-background-hover)}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]:hover   .actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]:hover   app-fav-icon[_ngcontent-%COMP%]{display:inline}@media (max-width: 400px){[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]{padding-left:0;padding-right:0}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:16px}}"]})}return e})();var Ot=[{path:"",component:_t,canActivate:[at],data:{name:"Podcast Search"}}],vt=(()=>{class e{static \u0275fac=function(o){return new(o||e)};static \u0275mod=U({type:e});static \u0275inj=w({imports:[z,J,ct,q.forChild(Ot)]})}return e})();export{vt as PodcastSearchPageModule};
