import{a as it}from"./chunk-TUZFBHPK.js";import{a as U}from"./chunk-HURYLTUC.js";import{a as at}from"./chunk-YNWWGJWK.js";import{a as X,b as Y,c as K,d as Q,e as W,f as Z,g as tt,h as et,i as ot}from"./chunk-QH72VV2F.js";import"./chunk-VZVRBD6P.js";import"./chunk-CDMVSZCB.js";import"./chunk-UZYU4GV7.js";import"./chunk-K4DVWEJI.js";import"./chunk-UVO2NCSB.js";import"./chunk-24DMSAFT.js";import"./chunk-XTLMNK2P.js";import"./chunk-GXCVGDS5.js";import"./chunk-J5MSA5AP.js";import"./chunk-3CQO2UIK.js";import"./chunk-PZKV7YRJ.js";import"./chunk-4LEAF22C.js";import"./chunk-EAERQNF5.js";import"./chunk-5EJKCVNW.js";import"./chunk-CQEFCIFT.js";import"./chunk-TT7XXVKE.js";import{e as G}from"./chunk-LV2G3RH6.js";import"./chunk-5NZQP5GA.js";import"./chunk-QWPA4HIO.js";import"./chunk-CTEOCYOX.js";import{a as nt}from"./chunk-EPPWFHNT.js";import"./chunk-K64Q6LJ6.js";import{G as $}from"./chunk-ZMFSGBQT.js";import{f as q,g as F,k as L}from"./chunk-B4HPT77T.js";import{Cb as M,Db as P,Fb as S,Gb as E,Hb as B,Hd as g,Ib as h,Jb as i,Kb as r,Lb as l,Od as H,Pb as D,Pc as y,Qb as J,Qc as d,U as w,Vb as f,Xb as R,Xd as v,Za as a,_b as C,ac as c,bc as N,cc as z,e as k,fa as m,j,ka as _,la as u,lc as V,mb as x,mc as A,ob as T,oc as O,pc as b,xa as I}from"./chunk-S3YUDFSI.js";var st=(()=>{class n{constructor(){this.backgroundImageID=d(void 0,{alias:"appBackgroundImage"}),this.jam=m(v)}ngOnChanges(t){t.backgroundImageID&&(this.backgroundImage=t.backgroundImageID.currentValue?`url(${this.jam.image.imageUrl({id:t.backgroundImageID.currentValue,size:600,format:H.webp})})`:void 0)}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275dir=T({type:n,selectors:[["","appBackgroundImage",""]],hostVars:2,hostBindings:function(e,o){e&2&&V("background-image",o.backgroundImage)},inputs:{backgroundImageID:[1,"appBackgroundImage","backgroundImageID"]},features:[I]})}}return n})();var dt=["*"];function lt(n,p){if(n&1){let t=f();i(0,"div",10),O(1),r(),i(2,"div",11),C("click",function(){let o=_(t).$implicit,s=c(2);return u(s.clickItem(o))}),O(3),r()}if(n&2){let t=p.$implicit;a(),b(t.label),a(),A("clickable",t.click),a(),b(t.value)}}function pt(n,p){if(n&1){let t=f();i(0,"div",0)(1,"div",2),l(2,"app-coverart-image",3),r(),i(3,"div",4)(4,"div",5),O(5),r(),i(6,"div",6),O(7),r(),i(8,"div",7),z(9),r()(),i(10,"div",8),E(11,lt,4,4,null,null,S),i(13,"a",9),C("click",function(o){_(t);let s=c();return u(s.contextmenuEvent(o))})("keydown.enter",function(o){_(t);let s=c();return u(s.contextmenuEvent(o))}),O(14,"\u2026"),r()()()}if(n&2){let t=p,e=c();a(2),h("coverArtObj",t)("size",150)("fill",!0)("alt",t.name)("allowEnlarge",!0),a(3),b(e.sectionType()),a(2),b(e.section()),a(4),B(e.infos())}}var ct=(()=>{class n{constructor(){this.base=d(),this.section=d(),this.sectionType=d(),this.hasContextMenu=d(!1),this.tabs=d(),this.infos=d([]),this.contextMenuRequest=y(),this.playRequest=y()}contextmenuEvent(t){this.contextMenuRequest.emit(t)}clickItem(t){t.click&&t.click()}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=x({type:n,selectors:[["app-view-header-jam-base"]],hostBindings:function(e,o){e&1&&C("contextmenu",function(gt){return o.contextmenuEvent(gt)})},inputs:{base:[1,"base"],section:[1,"section"],sectionType:[1,"sectionType"],hasContextMenu:[1,"hasContextMenu"],tabs:[1,"tabs"],infos:[1,"infos"]},outputs:{contextMenuRequest:"contextMenuRequest",playRequest:"playRequest"},ngContentSelectors:dt,decls:2,vars:2,consts:[[1,"info"],[1,"navigation",3,"tabs"],[1,"img"],[3,"coverArtObj","size","fill","alt","allowEnlarge"],[1,"meta"],[1,"type"],[1,"name"],[1,"actions"],[1,"header-infos"],["tabindex","0",1,"more",3,"click","keydown.enter"],[1,"label"],[1,"count",3,"click"]],template:function(e,o){if(e&1&&(N(),M(0,pt,15,7,"div",0),l(1,"app-view-header-tabs",1)),e&2){let s;P((s=o.base())?0:-1,s),a(),h("tabs",o.tabs())}},dependencies:[U,at],styles:['[_nghost-%COMP%]{background-color:var(--background-view-header);min-height:260px;position:relative;background-size:cover;background-position:center;background-repeat:no-repeat;background-origin:padding-box;overflow:visible;display:flex;flex-flow:row wrap;justify-content:space-between;align-items:flex-end}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]{padding:15px;z-index:1;width:100%;margin-top:30px;display:flex;flex-flow:row nowrap;justify-content:space-between;align-items:center;color:var(--on-control-ambient)}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{margin-right:15px;flex:0 0 160px;height:160px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{flex:1 1}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .year[_ngcontent-%COMP%], [_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .artist[_ngcontent-%COMP%], [_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], [_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{color:var(--on-control-ambient)}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{text-transform:uppercase;font-size:11px;letter-spacing:1px;margin-left:2px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:52px;font-weight:100;padding:0 0 10px;margin:0;text-shadow:-1px -1px 0 #000,1px -1px 0 #000,-1px 1px 0 #000,1px 1px 0 #000}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .year[_ngcontent-%COMP%]{font-size:16px;font-weight:100;padding:0 0 10px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .artist[_ngcontent-%COMP%]{font-size:16px;font-weight:100;padding:0 0 10px;cursor:pointer}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]{max-width:30%;padding:15px;text-align:right;font-weight:100;font-size:16px;letter-spacing:1px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:300;text-transform:uppercase;font-size:12px;letter-spacing:1px;vertical-align:middle;color:var(--on-control-ambient)}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{padding-bottom:10px;color:var(--on-control-ambient-hover);overflow:hidden;text-overflow:ellipsis;vertical-align:middle}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .count.clickable[_ngcontent-%COMP%]{color:var(--on-control-ambient-hover);cursor:pointer}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .count.clickable[_ngcontent-%COMP%]:hover{color:var(--on-control-ambient)}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;padding:4px 9px 10px;margin-right:-9px;border-radius:50%;border:1px solid transparent;color:var(--on-control)}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]:hover{background-color:var(--control-hover);color:var(--on-control-hover)}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]{width:100%;display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center;background-color:var(--background-transparent)}@media(max-width:1000px){[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:36px}}@media(max-width:768px){[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{visibility:inherit}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]{margin:-1px}}@media(max-width:522px){[_nghost-%COMP%]{height:auto;flex-flow:column wrap;min-height:100px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]{padding:10px;margin-top:0;width:100%;display:block;text-align:center}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{margin-right:0;width:30%;display:inline-block;height:auto}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{width:70%;display:inline-block;text-align:center;vertical-align:top;padding-left:15px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:24px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{margin-top:10px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{justify-content:center}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]{width:100%;text-align:center;padding-left:0;padding-right:0;padding-bottom:0;max-width:100%}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{float:right}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:inline-block;text-align:right;font-size:.8em;width:50%;padding-right:10px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .header-infos[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{padding-left:0;font-size:.8em;padding-bottom:0;display:inline-block;text-align:left;width:50%}}@media(max-width:300px){[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{width:100%}}.slim[_nghost-%COMP%]{min-height:130px}@media(max-width:522px){.slim[_nghost-%COMP%]{min-height:100px;padding-left:15px;padding-right:15px}.slim[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:inherit}.slim[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{padding-left:0;margin-left:0;width:100%}}[_nghost-%COMP%]{background-color:var(--background)}[_nghost-%COMP%]:before{content:" ";display:block;position:absolute;left:0;top:0;width:100%;height:100%;z-index:0;background-color:var(--background-transparent)}'],changeDetection:0})}}return n})();function mt(n,p){if(n&1&&l(0,"app-episode-state-button",3),n&2){let t=c(2);h("episode",t.asPodcastEpisode)("showTitle",!0)}}function _t(n,p){if(n&1){let t=f();i(0,"button",6),C("click",function(){_(t);let o=c(2);return u(o.obj.play())}),l(1,"i",7),D(2),R(3,0),J(),r()}}function ut(n,p){if(n&1){let t=f();i(0,"div",1)(1,"app-view-header-jam-base",2),C("contextMenuRequest",function(o){_(t);let s=c();return u(s.obj.onContextMenu(o,!0))}),M(2,mt,1,2,"app-episode-state-button",3)(3,_t,4,0,"button",4),r(),i(4,"div",5),l(5,"router-outlet"),r()()}if(n&2){let t=c();a(),h("appBackgroundImage",t.obj.id)("section",t.obj.name)("sectionType",t.obj.mediaType)("base",t.obj.base)("infos",t.infos)("tabs",t.tabs),a(),P(t.isPodcastEpisode?2:3)}}function Ct(n,p){n&1&&l(0,"app-loading")}var Ht=(()=>{class n{constructor(){this.infos=[],this.tabs=[],this.isPodcastEpisode=!1,this.jam=m(v),this.notify=m($),this.route=m(q),this.unsubscribe=new j,this.library=m(ot)}get asPodcastEpisode(){return this.obj}ngOnInit(){this.route.url.pipe(w(this.unsubscribe)).subscribe(t=>{this.type=G(t),this.isPodcastEpisode=this.type?.type===g.episode}),this.route.paramMap.pipe(w(this.unsubscribe)).subscribe(t=>{this.id=t.get("id")??void 0,this.refresh()})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}display(t){this.obj=t,t&&(this.infos=t.getInfos(),this.tabs=this.type?.id?this.library.buildIDTabs(this.type.id,t.id):[])}refresh(){this.obj=void 0,this.id&&this.type&&this.get(this.id).then(t=>{this.display(t)}).catch(t=>{this.notify.error(t)})}get(t){return k(this,null,function*(){switch(this.type?.type){case g.album:{let e=yield this.jam.album.id({id:t,albumIncState:!0});return new X(e,this.library)}case g.series:{let e=yield this.jam.series.id({id:t,seriesIncState:!0});return new Z(e,this.library)}case g.artist:{let e=yield this.jam.artist.id({id:t,artistIncState:!0});return new K(e,this.library)}case g.podcast:{let e=yield this.jam.podcast.id({id:t,podcastIncState:!0});return new tt(e,this.library)}case g.playlist:{let e=yield this.jam.playlist.id({id:t,playlistIncState:!0});return new Q(e,this.library)}case g.track:{let e=yield this.jam.track.id({id:t,trackIncState:!0,trackIncTag:!0});return new W(e,this.library)}case g.episode:{let e=yield this.jam.episode.id({id:t,episodeIncState:!0,episodeIncTag:!0});return new et(e,this.library)}case g.folder:{let e=yield this.jam.folder.id({id:t,folderIncState:!0,folderIncTag:!0});return new Y(e,this.library)}default:return}})}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=x({type:n,selectors:[["app-page-obj"]],decls:2,vars:1,consts:()=>{let t;return t=$localize`:␟9b00b4b718d67ef6351bba15acd4ad0f2bc47927␟8564202903947049539:Play`,[t,[1,"obj"],[3,"contextMenuRequest","appBackgroundImage","section","sectionType","base","infos","tabs"],[3,"episode","showTitle"],[1,"button-primary"],[1,"content"],[1,"button-primary",3,"click"],[1,"icon-play"]]},template:function(e,o){e&1&&M(0,ut,6,7,"div",1)(1,Ct,1,0,"app-loading"),e&2&&P(o.obj?0:1)},dependencies:[L,F,it,st,ct,nt],styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:hidden;flex:0 1 100%}[_nghost-%COMP%]   .obj[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .obj[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .obj[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media(max-width:522px){[_nghost-%COMP%]   .obj[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}"]})}}return n})();export{Ht as ObjPageComponent};
