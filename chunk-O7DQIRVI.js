import{b as S,c as I}from"./chunk-XP5ERWDG.js";import{a as E}from"./chunk-MHPFTM2Z.js";import{b as w}from"./chunk-T2QKBMPN.js";import{Dd as T,Gd as A,T as k,Y as x,Z as y,da as c,ga as h,h as p,ia as a,k as g,q as v,ra as C,ub as f}from"./chunk-H2EXZDP6.js";var d=new h("THEMES"),b=new h("ACTIVE_THEME");function W(n){return[{provide:d,useValue:n.themes},{provide:b,useValue:n.active}]}var z=(()=>{let e=class e{constructor(){this.themes=a(d),this.themeChange=new f,this.theme=a(b),this.document=a(C)}getTheme(o){let r=this.themes.find(i=>i.name===o);if(!r)throw new Error(`Theme not found: '${o}'`);return r}getActiveTheme(){return this.getTheme(this.theme)}setTheme(o){this.theme=o;let r=this.getActiveTheme();this.updateDom(r),this.themeChange.emit(r)}updateDom(o){for(let r of Object.keys(o.properties))this.document.body.style.setProperty(r,o.properties[r]);for(let r of this.themes)this.document.body.classList.remove(`${r.name}-theme`);this.document.body.classList.add(`${o.name}-theme`)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var j={name:"black",properties:{"--background":"#000","--background-hover":"#1c1c1c","--background-active":"#32332e","--background-view-header":"#000","--background-sidebar":"#000","--background-border":"#242424","--background-box":"#0c0c0c","--background-transparent":"rgba(18, 18, 18, .7)","--on-background":"#C8C8C8","--on-background-active":"#fff","--on-background-highlight":"#fff","--on-background-hover":"#fff","--control":"#070707","--control-box":"#1e1e1e","--control-hover":"#575757","--control-active":"#58594f","--control-box-shadow":"0 -1px 0 rgba(0, 0, 0, 0.15) inset","--control-box-border":"#AAAAAA","--control-border":"#1a1a1a","--control-border-hover":"#7e7e7e","--on-control":"#C8C8C8","--on-control-hover":"#fff","--on-control-active":"#fff","--on-control-ambient":"#c5c3c3","--on-control-ambient-hover":"#fff","--on-control-ambient-disabled":"#575757","--input":"#fff","--input-border":"#fff","--on-input":"#000","--on-input-hover":"#C8C8C8","--primary":"#008300","--on-primary":"#fff","--primary-hover":"#006400","--on-primary-hover":"#ffeda5","--secondary":"#4688d7","--accent":"#FF6347","--on-accent":"#fff","--scrollbar":"#858585","--dialog-backdrop":"rgba(0, 0, 0, 0.6)"}};var F={name:"dark",properties:{"--background":"#0f1217","--background-hover":"#151b21","--background-active":"#151b21","--background-view-header":"#0f1217","--background-sidebar":"#151b21","--background-border":"#262b2f","--background-box":"#151b21","--background-transparent":"rgba(17,22,26,0.8)","--on-background":"#C8C8C8","--on-background-active":"#fff","--on-background-highlight":"#fff","--on-background-hover":"#fff","--control":"#151b21","--control-box":"#292828","--control-hover":"#575757","--control-active":"#58594f","--control-box-shadow":"0 -1px 0 rgba(0, 0, 0, 0.15) inset","--control-box-border":"#696969","--control-border":"#262626","--control-border-hover":"#383838","--on-control":"#C8C8C8","--on-control-hover":"#fff","--on-control-active":"#fff","--on-control-ambient":"#cfcfcf","--on-control-ambient-hover":"#fff","--on-control-ambient-disabled":"#575757","--input":"#000","--input-border":"#fff","--on-input":"#fff","--on-input-hover":"#C8C8C8","--primary":"#008300","--on-primary":"#fff","--primary-hover":"#006400","--on-primary-hover":"#ffeda5","--secondary":"#4688d7","--accent":"#FF6347","--on-accent":"#fff","--scrollbar":"#858585","--dialog-backdrop":"rgba(0, 0, 0, 0.6)"}};var t={rosewater:"#f4dbd6",flamingo:"#f0c6c6",pink:"#f5bde6",mauve:"#c6a0f6",red:"#ed8796",maroon:"#ee99a0",peach:"#f5a97f",yellow:"#eed49f",green:"#a6da95",teal:"#8bd5ca",sky:"#91d7e3",sapphire:"#7dc4e4",blue:"#8aadf4",lavender:"#b7bdf8",text:"#cad3f5",subtext1:"#b8c0e0",subtext0:"#a5adcb",overlay2:"#939ab7",overlay1:"#8087a2",overlay0:"#6e738d",surface2:"#5b6078",surface1:"#494d64",surface0:"#363a4f",base:"#24273a",mantle:"#1e2030",crust:"#181926"},H={name:"catppuccin",properties:{"--background":t.mantle,"--background-border":t.surface0,"--background-hover":t.mantle,"--background-active":t.lavender,"--background-view-header":t.crust,"--background-sidebar":t.base,"--background-box":t.base,"--background-transparent":"rgba(0,0,0,0.5)","--on-background":t.text,"--on-background-highlight":"#fff","--on-background-active":t.surface0,"--on-background-hover":t.green,"--control":t.base,"--control-box":t.surface2,"--control-hover":t.crust,"--control-active":t.base,"--control-box-shadow":"0 -1px 0 rgba(0, 0, 0, 0.15) inset","--control-box-border":t.surface0,"--control-border":t.surface0,"--control-border-hover":t.mauve,"--on-control":t.text,"--on-control-active":t.sky,"--on-control-hover":t.blue,"--on-control-ambient":t.yellow,"--on-control-ambient-hover":t.peach,"--on-control-ambient-disabled":t.subtext0,"--input":"#fff","--input-border":"#a2a2a2","--on-input":"#000","--on-input-hover":"#C8C8C8","--primary":t.green,"--on-primary":t.surface1,"--primary-hover":t.teal,"--on-primary-hover":t.surface0,"--secondary":"#4688d7","--accent":"#FF6347","--on-accent":"#fff","--scrollbar":"#575757","--dialog-backdrop":" rgba(255, 255, 255, 0.6)"}};var M={name:"light",properties:{"--background":"#f6f7fb","--background-border":"#AAAAAA","--background-hover":"#eaebef","--background-active":"#dfe2d6","--background-view-header":"#eaeaee","--background-sidebar":"#eff0f4","--background-box":"#ecedf1","--background-transparent":"rgba(255,255,255,0.9)","--on-background":"#1d1d1d","--on-background-active":"#000","--on-background-highlight":"#000","--on-background-hover":"#000","--control":"#eff0f4","--control-box":"#4a4a4a","--control-hover":"#ededed","--control-active":"#a8a8a8","--control-box-shadow":"0 -1px 0 rgba(0, 0, 0, 0.15) inset","--control-box-border":"#AAAAAA","--control-border":"#AAAAAA","--control-border-hover":"#252525","--on-control":"#272727","--on-control-active":"#0e1f2d","--on-control-hover":"#3f3f3f","--on-control-ambient":"#4c4c4c","--on-control-ambient-hover":"#575757","--on-control-ambient-disabled":"#a2a2a2","--input":"#fff","--input-border":"#a2a2a2","--on-input":"#000","--on-input-hover":"#C8C8C8","--primary":"#008300","--on-primary":"#fff","--primary-hover":"#006400","--on-primary-hover":"#ffeda5","--secondary":"#4688d7","--accent":"#FF6347","--on-accent":"#fff","--scrollbar":"#575757","--dialog-backdrop":" rgba(255, 255, 255, 0.6)"}};var D=(()=>{let e=class e{constructor(){this.cachedData=new Map}getConfig(o){let r=o.url.slice(o.url.indexOf("jam/v1/")+7);if(["stats","series/index","folder/index","artist/index","album/index","genre/list"].includes(r))return{needsRefresh:!1}}intercept(o,r){if(o.method!=="GET")return r.handle(o);let i=this.getConfig(o);if(!i)return r.handle(o);(i.needsRefresh||o.headers.get("reset-cache"))&&this.cachedData.delete(o.urlWithParams);let s=this.cachedData.get(o.urlWithParams);if(s)return s instanceof p?s:v(s.clone());let u=r.handle(o).pipe(y(m=>{m instanceof T&&this.cachedData.set(o.urlWithParams,m.clone())}),k());return this.cachedData.set(o.urlWithParams,u),u}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var N=(()=>{let e=class e{constructor(){this.cacheService=a(D)}intercept(o,r){return this.cacheService.intercept(o,r)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=c({token:e,factory:e.\u0275fac});let n=e;return n})();var le={themes:[M,H,F,j],active:"dark"};function ue(n){return n}function me(){return{provide:A,useClass:N,multi:!0}}var Ae=(()=>{let e=class e{constructor(){this.settingsChange=new f,this.unsubscribe=new g,this.userStorage=a(w),this.pushNotificationService=a(E),this.app=a(I),this.userStorage.userChange.pipe(x(this.unsubscribe)).subscribe(()=>{this.loadFromStorage()}),this.loadFromStorage()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}loadFromStorage(){let o=this.userStorage.get(e.localstorageName);if(o){for(let r of Object.keys(this.app.settings))this.app.settings[r]=o[r];this.setTheme(),this.pushNotificationService.enabled=this.app.settings.notificationSong}else this.app.settings=new S}saveSettings(){this.userStorage.set(e.localstorageName,this.app.settings)}applySettings(){this.saveSettings(),this.pushNotificationService.enabled=this.app.settings.notificationSong,setTimeout(()=>{this.setTheme()},0)}setTheme(){this.settingsChange.emit()}};e.localstorageName="settings",e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();export{W as a,z as b,D as c,le as d,ue as e,me as f,Ae as g};
