import{a as nn}from"./chunk-6T4XJRB7.js";import{c as V,d as W,e as F,f as j,g as J,h as H,o as q}from"./chunk-Y5Z5ITNC.js";import{k as Y}from"./chunk-AQDYGNZB.js";import{G as Z}from"./chunk-ZVKVGF76.js";import{$d as Q,Ac as B,Hb as r,Ib as C,Ic as D,Kc as U,Lb as k,Mb as w,Ob as _,Pb as i,Qb as S,_b as p,_d as K,ab as g,ac as P,dc as u,e as f,fc as a,ia as E,na as M,nb as h,oa as d,rc as y,tc as O,td as X,uc as N,vc as m,wd as z,yc as $,zc as L}from"./chunk-H2EXZDP6.js";function on(e,o){if(e&1){let t=p();_(0,"form")(1,"label",1),P(2,0),i(),_(3,"input",2),B("ngModelChange",function(n){M(t);let c=a();return L(c.data.pass,n)||(c.data.pass=n),d(n)}),i()()}if(e&2){let t=a();g(3),$("ngModel",t.data.pass)}}var en=(()=>{let o=class o{dialogInit(s,n){this.data=n.data}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=h({type:o,selectors:[["app-dialog-password"]],decls:1,vars:1,consts:()=>{let s;s=$localize`:␟c32ef07f8803a223a83ed17024b38e8d82292407␟1431416938026210429:Password`;let n;return n=$localize`:␟c32ef07f8803a223a83ed17024b38e8d82292407␟1431416938026210429:Password`,[n,["for","password"],["id","password","type","password","name","pass","placeholder",s,"autocomplete","password",3,"ngModelChange","ngModel"]]},template:function(n,c){n&1&&r(0,on,4,1,"form"),n&2&&C(c.data?0:-1)},dependencies:[q,H,V,W,F,J,j],styles:["[_nghost-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{line-height:1.3em;padding:5px;width:100%;margin-bottom:15px}"]});let e=o;return e})();var sn=(e,o)=>o.session.id;function _n(e,o){if(e&1&&(_(0,"div",17),P(1,4),i(),_(2,"div")(3,"code"),O(4),i()()),e&2){let t=a(3);g(4),N(t.subsonicToken==null?null:t.subsonicToken.token)}}function cn(e,o){if(e&1){let t=p();_(0,"div"),P(1,2),i(),_(2,"button",16),u("click",function(){M(t);let n=a(2);return d(n.generateSubsonicToken())}),P(3,3),i(),r(4,_n,5,1)}if(e&2){let t=a(2);g(4),C(t.subsonicToken!=null&&t.subsonicToken.token?4:-1)}}function gn(e,o){if(e&1){let t=p();_(0,"div"),P(1,5),i(),_(2,"button",16),u("click",function(){M(t);let n=a(2);return d(n.unlockSubsonicToken())}),P(3,6),i()}}function Pn(e,o){e&1&&(_(0,"span"),P(1,7),i())}function an(e,o){if(e&1&&(_(0,"span",25),P(1,8),i(),S(2,"br"),O(3),D(4,"date")),e&2){let t=a().$implicit;g(3),m(" ",U(4,1,t.session.expires,"long")," ")}}function ln(e,o){if(e&1){let t=p();_(0,"div",18)(1,"div",19),O(2),S(3,"br"),_(4,"span"),O(5),i()(),_(6,"div",20),O(7),S(8,"br"),O(9),i(),_(10,"div",21),r(11,Pn,2,0,"span")(12,an,5,4),i(),_(13,"div",22)(14,"button",23),u("click",function(){let n=M(t).$implicit,c=a(2);return d(c.remove(n.session))}),S(15,"i",24),i()()()}if(e&2){let t=o.$implicit;y("invalid",t.isExpired),g(2),m(" ",t.session.client),g(3),N(t.session.mode),g(2),m(" ",t.session.agent),g(2),m(" ",t.session.os," "),g(2),C(t.session.expires===void 0?11:12)}}function rn(e,o){if(e&1&&(_(0,"div",11)(1,"div",12)(2,"div",13),P(3,0),i(),r(4,cn,5,1)(5,gn,4,0),i(),_(6,"div",14)(7,"div",13),P(8,1),i(),k(9,ln,16,7,"div",15,sn),i()()),e&2){let t=a();g(4),C(t.isUnlocked?4:5),g(5),w(t.sessions)}}var An=(()=>{let o=class o{constructor(){this.isUnlocked=!1,this.lock={pass:""},this.jam=E(Q),this.auth=E(K),this.dialogOverlay=E(Y),this.notify=E(Z)}generateSubsonicToken(){!this.isUnlocked||!this.auth.user||this.jam.user.generateSubsonicToken({id:this.auth.user.id,password:this.lock.pass}).then(s=>{this.subsonicToken=s,this.isUnlocked=!0,this.refresh(),this.notify.success("Token generated")}).catch(s=>{this.subsonicToken=void 0,this.isUnlocked=!1,this.notify.error(s)})}unlockSubsonicToken(){this.dialogOverlay.open({childComponent:en,data:this.lock,onOkBtn:()=>f(this,null,function*(){this.isUnlocked=!0}),onCancelBtn:()=>f(this,null,function*(){return Promise.resolve()})})}ngOnInit(){this.auth.isLoggedIn()&&this.refresh()}remove(s){let n=s.id;this.jam.session.remove({id:n}).then(()=>{this.sessions&&(this.sessions=this.sessions.filter(c=>c.session.id!==n)),this.notify.success("Session Login removed")}).catch(c=>{this.notify.error(c)})}refresh(){this.jam.session.list().then(s=>{this.sessions=s.map(n=>({session:n,isExpired:n.expires!==void 0&&n.expires<Date.now()}))}).catch(s=>{this.notify.error(s)})}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=h({type:o,selectors:[["app-sessions-page"]],decls:3,vars:1,consts:()=>{let s;s=$localize`:␟ce54b0509275b0551de870b805c1bb5c426d723f␟877974575580185933:Session Logins`;let n;n=$localize`:␟68d17f5d1beeee03406372494fc0bc306ed24f72␟2707659021126588033:Subsonic Token`;let c;c=$localize`:␟2744dff891981e67dd84e3a8ceb430704b86ed6a␟721963055036507192:Sessions`;let A;A=$localize`:␟29fcf6bfc99e542abcb128de5a04337412c00b10␟5380285610371362253:Click to generate or update a Subsonic Token. Warning: Existing token will no longer be valid.`;let b;b=$localize`:␟7eac06d83d2276d35aa4dc8aa51324b891722583␟5034015365836681485:Generate New Subsonic Token`;let x;x=$localize`:␟b603efccecf2b3f80a7807d375cf44b1cdaa6403␟1776712759383883061:This is your Subsonic Token. Please copy and store, you can not see it here again.`;let T;T=$localize`:␟1d23380d15fcbebe8a5ee64117725125d2860c6e␟5629769933636183639:Enter your Jam password to generate or update a Subsonic Token.`;let I;I=$localize`:␟e13796974274fd6b6bbc61a60fac4e14e6e29b6d␟8191371354890763172:Enter Password`;let G;G=$localize`:␟a881e543b0df3a9620cb65a5e6da992c3f38382e␟1021529107572383199:Remove this login`;let v;v=$localize`:␟6c2d15914e6ea1e9bb2ec041d69ae3b5f89c73cf␟8896757418171595787:Does not expire`;let R;return R=$localize`:␟7ebcbdc49ec3e6c6354f788704a3b4fb5649b74b␟7222262636210875388:valid until:`,[n,c,A,b,x,T,I,v,R,[1,"sessions"],["section",s],[1,"content"],[1,"subsonic"],[1,"section-title"],[1,"session-list"],[1,"session",3,"invalid"],[1,"button-primary",3,"click"],[1,"token"],[1,"session"],[1,"title"],[1,"agent"],[1,"expires"],[1,"remove"],["title",G,3,"click"],["aria-hidden","true",1,"icon-remove"],[1,"label"]]},template:function(n,c){n&1&&(_(0,"div",9),S(1,"app-view-header-slim",10),r(2,rn,11,1,"div",11),i()),n&2&&(g(2),C(c.sessions?2:-1))},dependencies:[z,nn,X],styles:['[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]{padding-bottom:30px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]{margin-top:20px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{padding:20px;display:inline-block;background-color:var(--control);color:var(--on-control-ambient)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:15px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap;-webkit-user-select:none;user-select:none;width:100%;padding-top:5px;background-color:var(--background);color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{min-height:48px;display:flex;flex-flow:row nowrap;align-items:center;align-content:space-evenly;width:100%;padding:10px;line-height:1.25em;margin-bottom:1px;border-top-width:1px;border-top-style:solid;border-bottom-width:0;border-bottom-style:solid;border-bottom-color:var(--background-border);border-top-color:var(--background-border)}@media (max-width: 1000px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{height:auto}}@media (max-width: 522px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{font-size:.9em}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]:last-child{border-bottom-width:1px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .small-screen-icon[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--on-background);font-size:.8em}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;display:inline-block;margin:0 10px 0 0}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.8em;vertical-align:middle}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a.title-link[_ngcontent-%COMP%]{font-size:inherit;margin-right:10px;color:var(--on-background-highlight)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{width:0;margin-left:0;cursor:move}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]{display:inline-block;width:26px;height:8px;transform:rotate(90deg);margin-left:-8px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%], [_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]:before{background-image:radial-gradient(#7b7b7b 40%,transparent 40%);background-size:4px 4px;background-position:0 100%;background-repeat:repeat-x}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]:before{content:"";display:block;width:100%;height:33%}@media (max-width: 1000px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{height:auto;min-height:48px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-left:0}}@media (max-width: 400px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{flex-flow:row wrap;align-items:inherit;width:100%;font-size:.9em}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .small-screen-icon[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{order:2;width:25%;text-align:center}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]{transform:rotate(0)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{order:6;margin-left:0;margin-right:0;padding-right:0;padding-left:0;width:100%}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:0;margin-right:0;padding-right:0;padding-left:0;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;margin-left:0;margin-right:0;overflow:hidden;text-overflow:ellipsis}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%]{font-size:.8em;flex-grow:1;padding-right:10px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{width:260px;font-size:.8em;padding-right:10px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--on-background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:10px;width:140px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.7em;text-transform:uppercase}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session.invalid[_ngcontent-%COMP%]{color:var(--on-control-ambient-disabled)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session.invalid[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{color:var(--accent)}@media (max-width: 400px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%], [_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{order:0;width:calc(100% - 30px)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{order:1}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%]{order:2}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{order:3}}']});let e=o;return e})();export{An as SessionsPageComponent};
