import{a as Z}from"./chunk-GPI46BNS.js";import{c as z,d as V,e as W,f as F,g as j,h as J,o as H}from"./chunk-SCY3FOMN.js";import{k as Q}from"./chunk-6SWJ3F4P.js";import{G as Y}from"./chunk-3LOKQP2Q.js";import{$b as u,Db as l,Eb as r,Ec as D,Gc as B,Hb as R,Ib as w,Kb as i,Lb as s,Mb as S,Vd as q,Wb as p,Wd as K,Yb as c,_a as _,bc as g,e as f,fa as E,ka as M,la as d,nb as h,nc as k,od as U,pc as O,qc as N,rc as m,rd as X,uc as y,vc as $,wc as L}from"./chunk-XLNNDSL4.js";function tn(e,P){if(e&1){let n=p();i(0,"form")(1,"label",1),c(2,0),s(),i(3,"input",2),L("ngModelChange",function(o){M(n);let C=g();return $(C.data.pass,o)||(C.data.pass=o),d(o)}),s()()}if(e&2){let n=g();_(3),y("ngModel",n.data.pass)}}var nn=(()=>{class e{dialogInit(n,t){this.data=t.data}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=h({type:e,selectors:[["app-dialog-password"]],decls:1,vars:1,consts:()=>{let n;n=$localize`:␟c32ef07f8803a223a83ed17024b38e8d82292407␟1431416938026210429:Password`;let t;return t=$localize`:␟c32ef07f8803a223a83ed17024b38e8d82292407␟1431416938026210429:Password`,[t,["for","password"],["id","password","type","password","name","pass","placeholder",n,"autocomplete","password",3,"ngModelChange","ngModel"]]},template:function(t,o){t&1&&l(0,tn,4,1,"form"),t&2&&r(o.data?0:-1)},dependencies:[H,J,z,V,W,j,F],styles:["[_nghost-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{line-height:1.3em;padding:5px;width:100%;margin-bottom:15px}"]})}}return e})();var on=(e,P)=>P.session.id;function sn(e,P){if(e&1&&(i(0,"div",17),c(1,4),s(),i(2,"div")(3,"code"),O(4),s()()),e&2){let n=g(3);_(4),N(n.subsonicToken==null?null:n.subsonicToken.token)}}function _n(e,P){if(e&1){let n=p();i(0,"div"),c(1,2),s(),i(2,"button",16),u("click",function(){M(n);let o=g(2);return d(o.generateSubsonicToken())}),c(3,3),s(),l(4,sn,5,1)}if(e&2){let n=g(2);_(4),r(n.subsonicToken!=null&&n.subsonicToken.token?4:-1)}}function cn(e,P){if(e&1){let n=p();i(0,"div"),c(1,5),s(),i(2,"button",16),u("click",function(){M(n);let o=g(2);return d(o.unlockSubsonicToken())}),c(3,6),s()}}function gn(e,P){e&1&&(i(0,"span"),c(1,7),s())}function Pn(e,P){if(e&1&&(i(0,"span",25),c(1,8),s(),S(2,"br"),O(3),D(4,"date")),e&2){let n=g().$implicit;_(3),m(" ",B(4,1,n.session.expires,"long")," ")}}function an(e,P){if(e&1){let n=p();i(0,"div",18)(1,"div",19),O(2),S(3,"br"),i(4,"span"),O(5),s()(),i(6,"div",20),O(7),S(8,"br"),O(9),s(),i(10,"div",21),l(11,gn,2,0,"span")(12,Pn,5,4),s(),i(13,"div",22)(14,"button",23),u("click",function(){let o=M(n).$implicit,C=g(2);return d(C.remove(o.session))}),S(15,"i",24),s()()()}if(e&2){let n=P.$implicit;k("invalid",n.isExpired),_(2),m(" ",n.session.client),_(3),N(n.session.mode),_(2),m(" ",n.session.agent),_(2),m(" ",n.session.os," "),_(2),r(n.session.expires===void 0?11:12)}}function Cn(e,P){if(e&1&&(i(0,"div",11)(1,"div",12)(2,"div",13),c(3,0),s(),l(4,_n,5,1)(5,cn,4,0),s(),i(6,"div",14)(7,"div",13),c(8,1),s(),R(9,an,16,7,"div",15,on),s()()),e&2){let n=g();_(4),r(n.isUnlocked?4:5),_(5),w(n.sessions)}}var Nn=(()=>{class e{constructor(){this.isUnlocked=!1,this.lock={pass:""},this.jam=E(K),this.auth=E(q),this.dialogOverlay=E(Q),this.notify=E(Y)}generateSubsonicToken(){!this.isUnlocked||!this.auth.user||this.jam.user.generateSubsonicToken({id:this.auth.user.id,password:this.lock.pass}).then(n=>{this.subsonicToken=n,this.isUnlocked=!0,this.refresh(),this.notify.success("Token generated")}).catch(n=>{this.subsonicToken=void 0,this.isUnlocked=!1,this.notify.error(n)})}unlockSubsonicToken(){this.dialogOverlay.open({childComponent:nn,data:this.lock,onOkBtn:()=>f(this,null,function*(){this.isUnlocked=!0}),onCancelBtn:()=>f(this,null,function*(){return Promise.resolve()})})}ngOnInit(){this.auth.isLoggedIn()&&this.refresh()}remove(n){let t=n.id;this.jam.session.remove({id:t}).then(()=>{this.sessions&&(this.sessions=this.sessions.filter(o=>o.session.id!==t)),this.notify.success("Session Login removed")}).catch(o=>{this.notify.error(o)})}refresh(){this.jam.session.list().then(n=>{this.sessions=n.map(t=>({session:t,isExpired:t.expires!==void 0&&t.expires<Date.now()}))}).catch(n=>{this.notify.error(n)})}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=h({type:e,selectors:[["app-sessions-page"]],decls:3,vars:1,consts:()=>{let n;n=$localize`:␟ce54b0509275b0551de870b805c1bb5c426d723f␟877974575580185933:Session Logins`;let t;t=$localize`:␟68d17f5d1beeee03406372494fc0bc306ed24f72␟2707659021126588033:Subsonic Token`;let o;o=$localize`:␟2744dff891981e67dd84e3a8ceb430704b86ed6a␟721963055036507192:Sessions`;let C;C=$localize`:␟29fcf6bfc99e542abcb128de5a04337412c00b10␟5380285610371362253:Click to generate or update a Subsonic Token. Warning: Existing token will no longer be valid.`;let A;A=$localize`:␟7eac06d83d2276d35aa4dc8aa51324b891722583␟5034015365836681485:Generate New Subsonic Token`;let b;b=$localize`:␟b603efccecf2b3f80a7807d375cf44b1cdaa6403␟1776712759383883061:This is your Subsonic Token. Please copy and store, you can not see it here again.`;let x;x=$localize`:␟1d23380d15fcbebe8a5ee64117725125d2860c6e␟5629769933636183639:Enter your Jam password to generate or update a Subsonic Token.`;let T;T=$localize`:␟e13796974274fd6b6bbc61a60fac4e14e6e29b6d␟8191371354890763172:Enter Password`;let I;I=$localize`:␟a881e543b0df3a9620cb65a5e6da992c3f38382e␟1021529107572383199:Remove this login`;let G;G=$localize`:␟6c2d15914e6ea1e9bb2ec041d69ae3b5f89c73cf␟8896757418171595787:Does not expire`;let v;return v=$localize`:␟7ebcbdc49ec3e6c6354f788704a3b4fb5649b74b␟7222262636210875388:valid until:`,[t,o,C,A,b,x,T,G,v,[1,"sessions"],["section",n],[1,"content"],[1,"subsonic"],[1,"section-title"],[1,"session-list"],[1,"session",3,"invalid"],[1,"button-primary",3,"click"],[1,"token"],[1,"session"],[1,"title"],[1,"agent"],[1,"expires"],[1,"remove"],["title",I,3,"click"],["aria-hidden","true",1,"icon-remove"],[1,"label"]]},template:function(t,o){t&1&&(i(0,"div",9),S(1,"app-view-header-slim",10),l(2,Cn,11,1,"div",11),s()),t&2&&(_(2),r(o.sessions?2:-1))},dependencies:[X,Z,U],styles:['[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media(max-width:522px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]{padding-bottom:30px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]{margin-top:20px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{padding:20px;display:inline-block;background-color:var(--control);color:var(--on-control-ambient)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:15px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap;-webkit-user-select:none;user-select:none;width:100%;padding-top:5px;background-color:var(--background);color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{min-height:48px;display:flex;flex-flow:row nowrap;align-items:center;align-content:space-evenly;width:100%;padding:10px;line-height:1.25em}@media(max-width:1000px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{height:auto}}@media(max-width:522px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{font-size:.9em}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{margin-bottom:1px;border-top-width:1px;border-top-style:solid;border-bottom-width:0;border-bottom-style:solid;border-bottom-color:var(--background-border);border-top-color:var(--background-border)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]:last-child{border-bottom-width:1px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .small-screen-icon[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--on-background);font-size:.8em}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;display:inline-block;margin:0 10px 0 0}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.8em;vertical-align:middle}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a.title-link[_ngcontent-%COMP%]{font-size:inherit;margin-right:10px;color:var(--on-background-highlight)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{width:0;margin-left:0}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]{display:inline-block;width:26px;height:8px;transform:rotate(90deg);margin-left:-8px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%], [_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]:before{background-image:radial-gradient(#7b7b7b 40%,transparent 40%);background-size:4px 4px;background-position:0 100%;background-repeat:repeat-x}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]:before{content:"";display:block;width:100%;height:33%}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{cursor:move}@media(max-width:1000px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{height:auto;min-height:48px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-left:0}}@media(max-width:400px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{flex-flow:row wrap;align-items:inherit;width:100%;font-size:.9em}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .small-screen-icon[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{order:2;width:25%;text-align:center}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]{transform:rotate(0)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{order:6;margin-left:0;margin-right:0;padding-right:0;padding-left:0;width:100%}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:0;margin-right:0;padding-right:0;padding-left:0;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;margin-left:0;margin-right:0;overflow:hidden;text-overflow:ellipsis}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%]{font-size:.8em;flex-grow:1;padding-right:10px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{width:260px;font-size:.8em;padding-right:10px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--on-background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:10px;width:140px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.7em;text-transform:uppercase}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session.invalid[_ngcontent-%COMP%]{color:var(--on-control-ambient-disabled)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session.invalid[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{color:var(--accent)}@media(max-width:400px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%], [_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{order:0;width:calc(100% - 30px)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{order:1}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%]{order:2}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{order:3}}']})}}return e})();export{Nn as SessionsPageComponent};
