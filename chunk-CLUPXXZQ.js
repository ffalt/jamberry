import{a as v}from"./chunk-RQOW2HPH.js";import{a as L}from"./chunk-OV2RF66Q.js";import"./chunk-VSMEHVNZ.js";import"./chunk-W2NMQGHF.js";import"./chunk-NVLAWCOW.js";import"./chunk-NV464EDQ.js";import"./chunk-WFQJ2JOD.js";import"./chunk-REI5CXDR.js";import"./chunk-N2Q3XI4X.js";import"./chunk-6VWQ7JC4.js";import"./chunk-MQ5GQMNI.js";import"./chunk-6WAGYCOA.js";import"./chunk-UPKF4LSO.js";import"./chunk-V6GDRA44.js";import{i as _}from"./chunk-NNT52QCM.js";import"./chunk-6UV7XVIR.js";import"./chunk-SDT7PSNL.js";import"./chunk-4K2FA6DD.js";import{a as C}from"./chunk-AIQOHZWK.js";import"./chunk-N2K5OS3Y.js";import"./chunk-24DMSAFT.js";import"./chunk-Y5Z5ITNC.js";import{d as x}from"./chunk-ORVGIZVG.js";import"./chunk-K7RVMPTP.js";import"./chunk-MHPFTM2Z.js";import"./chunk-T2QKBMPN.js";import"./chunk-DYCPZPVS.js";import"./chunk-CXISAAQ7.js";import"./chunk-BNP52TDG.js";import"./chunk-F6BYEP4R.js";import"./chunk-VP6KNDS4.js";import{e as f,f as g}from"./chunk-D2CLWX7O.js";import"./chunk-AQDYGNZB.js";import"./chunk-W76RWN3H.js";import"./chunk-FQC6PRY2.js";import"./chunk-PZTZCA44.js";import"./chunk-4HNSRH53.js";import"./chunk-ZVKVGF76.js";import{f as T}from"./chunk-T6GM3CFW.js";import{Hb as d,Ib as y,Ld as i,Nb as u,Qb as c,Xd as m,Y as n,fc as b,ia as l,k as p,nb as o}from"./chunk-H2EXZDP6.js";function A(r,s){if(r&1&&c(0,"app-obj-loader",0),r&2){let a=b();u("loader",a.loader)("listQuery",a.listQuery)("loadAll",a.loadAll)("showParent",!0)("changeTrigger",a.changeTrigger)}}var G=(()=>{let s=class s{constructor(){this.loadAll=!1,this.valid=!1,this.library=l(_),this.route=l(T),this.playlistService=l(x),this.podcastService=l(C),this.unsubscribe=new p,this.unsubscribeRefresh=new p}ngOnInit(){this.subscribe_to_url(),this.subscribe_to_parent_url()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete(),this.unsubscribeRefresh.next(),this.unsubscribeRefresh.complete()}subscribe_to_url(){this.route.url.pipe(n(this.unsubscribe)).subscribe(e=>{let t=e.length>0?e[0].path:void 0;this.listType=t?g[t]:void 0})}subscribe_to_parent_url(){this.route.parent&&this.route.parent.url.pipe(n(this.unsubscribe)).subscribe(e=>{this.resetState();let t=f(e);this.jamType=t?.type,this.handleJamType(t)})}resetState(){this.valid=!1,this.loadAll=!1,this.albumType=void 0,this.loader=void 0}handleJamType(e){if(!this.jamType)return;let h={[i.folder]:()=>{this.handleFolderType()},[i.playlist]:()=>{this.handlePlaylistType()},[i.podcast]:()=>{this.handlePodcastType()},[i.series]:()=>{this.handleSeriesType()},[i.album]:()=>{this.handleAlbumType(e?.albumType)},[i.artist]:()=>{this.handleArtistType()},[i.genre]:()=>{this.handleGenreType()}}[this.jamType];h&&h()}handleFolderType(){this.loader=this.library.folderLoader,this.listType&&(this.listQuery={listType:this.listType,albumType:this.albumType},this.valid=!0)}handlePlaylistType(){this.loader=this.library.playlistLoader,this.listQuery=this.listType?{listType:this.listType}:void 0,this.loadAll=!this.listType,this.setupChangeListener(this.playlistService.playlistsChange),this.valid=!0}handlePodcastType(){this.loader=this.library.podcastLoader,this.listQuery=this.listType?{listType:this.listType}:void 0,this.loadAll=!this.listType,this.setupChangeListener(this.podcastService.podcastsChange),this.valid=!0}handleSeriesType(){this.loader=this.library.seriesLoader,this.listType&&(this.listQuery={listType:this.listType,albumType:this.albumType},this.valid=!0)}handleAlbumType(e){this.loader=this.library.albumLoader,this.listType&&(this.albumType=e,this.valid=!!this.albumType,this.listQuery={listType:this.listType,albumType:this.albumType})}handleArtistType(){this.loader=this.library.artistLoader,this.listType&&(this.listQuery={listType:this.listType,albumType:m.album},this.valid=!0)}handleGenreType(){this.loader=this.library.genreLoader,this.listType&&(this.listQuery={listType:this.listType},this.valid=!0)}setupChangeListener(e){this.unsubscribeRefresh.next(),this.unsubscribeRefresh.complete(),e.pipe(n(this.unsubscribeRefresh)).subscribe(()=>{this.changeTrigger=v()})}};s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=o({type:s,selectors:[["app-objs-loader-page-by-type"]],decls:1,vars:1,consts:[[3,"loader","listQuery","loadAll","showParent","changeTrigger"]],template:function(t,h){t&1&&d(0,A,1,5,"app-obj-loader",0),t&2&&y(h.valid?0:-1)},dependencies:[L],styles:["[_nghost-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]{padding-left:10px;padding-right:10px}}"]});let r=s;return r})();export{G as ObjsLoaderByTypeComponent};
