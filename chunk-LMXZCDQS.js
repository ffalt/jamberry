import{a as w}from"./chunk-XFCYR4CE.js";import"./chunk-CERT6F7Z.js";import{a as Me}from"./chunk-BAOGHNZ3.js";import{a as Te}from"./chunk-LMBWQPDX.js";import{a as Ce}from"./chunk-LXRIBXQ3.js";import{a as Oe}from"./chunk-UVO2NCSB.js";import"./chunk-24DMSAFT.js";import{c as te,d as oe,e as ne,f as ie,g as _e,h as re,j as ae,o as le}from"./chunk-XTLMNK2P.js";import"./chunk-4LEAF22C.js";import{a as de,b as ce}from"./chunk-5EJKCVNW.js";import"./chunk-CQEFCIFT.js";import"./chunk-TT7XXVKE.js";import{k as G}from"./chunk-5NZQP5GA.js";import"./chunk-K64Q6LJ6.js";import{G as v}from"./chunk-ZMFSGBQT.js";import{k as se}from"./chunk-B4HPT77T.js";import{Ac as k,Cb as P,Db as f,Dc as J,Fc as Q,Gb as H,Hb as U,Ib as M,Jb as r,Kb as _,Lb as C,Pb as p,Qb as R,Qc as Y,Rd as x,U as K,Vb as D,Xb as s,Za as l,_b as g,ac as a,e as L,fa as N,j,ka as d,la as c,mb as A,oc as h,pc as $,pd as Z,qc as q,sd as ee,tc as u,uc as E,vc as I}from"./chunk-S3YUDFSI.js";var ge=()=>({standalone:!0});function Ne(i,O){if(i&1){let e=D();r(0,"form")(1,"div",7)(2,"label",8),s(3,0),_(),r(4,"input",9),I("ngModelChange",function(t){d(e);let n=a();return E(n.edit.name,t)||(n.edit.name=t),c(t)}),_()(),r(5,"div",7)(6,"label",10),s(7,1),_(),r(8,"input",11),I("ngModelChange",function(t){d(e);let n=a();return E(n.edit.path,t)||(n.edit.path=t),c(t)}),_()(),r(9,"div",7)(10,"label",12),s(11,2),_(),r(12,"fieldset",13)(13,"label",14)(14,"input",15),I("ngModelChange",function(t){d(e);let n=a();return E(n.edit.strategy,t)||(n.edit.strategy=t),c(t)}),_(),p(15),s(16,3),R(),_(),r(17,"label",14)(18,"input",15),I("ngModelChange",function(t){d(e);let n=a();return E(n.edit.strategy,t)||(n.edit.strategy=t),c(t)}),_(),p(19),s(20,4),R(),_(),r(21,"label",14)(22,"input",15),I("ngModelChange",function(t){d(e);let n=a();return E(n.edit.strategy,t)||(n.edit.strategy=t),c(t)}),_(),p(23),s(24,5),R(),_(),r(25,"label",14)(26,"input",15),I("ngModelChange",function(t){d(e);let n=a();return E(n.edit.strategy,t)||(n.edit.strategy=t),c(t)}),_(),p(27),s(28,6),R(),_()()()()}if(i&2){let e=a();l(4),M("ngModelOptions",k(12,ge)),u("ngModel",e.edit.name),l(4),M("ngModelOptions",k(13,ge)),u("ngModel",e.edit.path),l(6),M("value",e.RootScanStrategy.auto),u("ngModel",e.edit.strategy),l(4),M("value",e.RootScanStrategy.artistalbum),u("ngModel",e.edit.strategy),l(4),M("value",e.RootScanStrategy.compilation),u("ngModel",e.edit.strategy),l(4),M("value",e.RootScanStrategy.audiobook),u("ngModel",e.edit.strategy)}}var B=(()=>{class i{constructor(){this.RootScanStrategy=x}dialogInit(e,o){this.edit=o.data}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=A({type:i,selectors:[["app-dialog-root"]],decls:1,vars:1,consts:()=>{let e;e=$localize`:␟ddfade2974824bcfebc98d94ccca4f02a52a5e65␟2965783636506266611:Root name`;let o;o=$localize`:␟766c66ad5cc981c531aaf3fe3a2a7a346ddc8d83␟8911059720204770105:Path`;let t;t=$localize`:␟1236bc5dce6e5821e26178cec6dc8d6994036e10␟1620750203195539416:Scan Strategy`;let n;n=$localize`:␟5fb13fb4a8447e59cdf05dc196ade39c02a6f8aa␟616064537937996961:Auto`;let S;S=$localize`:␟88f9a766c7fa0449925eb62ba3acba24e86312f3␟9062842966881378285:Artist/Album`;let y;y=$localize`:␟1120f45b24301f0a6a137929f189c3b51e4038ae␟5240807861057959896:Compilations`;let b;return b=$localize`:␟ec1bae0fe9a2b7e56d8f8473a9ffced030abc60b␟7565550399152163566:Audiobook`,[e,o,t,n,S,y,b,[1,"root-form-control"],["for","root-name"],["id","root-name","type","text",3,"ngModelChange","ngModelOptions","ngModel"],["for","root-path"],["id","root-path","type","text",3,"ngModelChange","ngModelOptions","ngModel"],["for","strategy"],["id","strategy"],[1,"select"],["type","radio","name","strategy",3,"ngModelChange","value","ngModel"]]},template:function(o,t){o&1&&P(0,Ne,29,14,"form"),o&2&&f(t.edit?0:-1)},dependencies:[le,re,te,ae,oe,ne,_e,ie],styles:["[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;line-height:1.3em;padding:5px;min-width:300px}[_nghost-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:5px}[_nghost-%COMP%]   .root-form-control[_ngcontent-%COMP%]{margin-bottom:8px;display:block}[_nghost-%COMP%]   .select[_ngcontent-%COMP%]{margin-right:15px;display:block;font-size:.8em;line-height:1.5em}"]})}}return i})();var pe=(i,O)=>O.id;function Re(i,O){if(i&1&&(r(0,"span",28),p(1),s(2,5),R(),C(3,"br"),h(4),_()),i&2){let e=a(2).$implicit;l(4),$(e.status.error)}}function Pe(i,O){i&1&&(p(0),s(1,6),R())}function fe(i,O){if(i&1&&(p(0),s(1,7),R(),C(2,"br"),h(3),J(4,"date")),i&2){let e=a(3).$implicit;l(3),q("",Q(4,1,e.status.lastScan,"medium")," ")}}function ue(i,O){if(i&1&&(r(0,"span"),P(1,Pe,2,0,"ng-container")(2,fe,5,4),_()),i&2){let e=a(2).$implicit;l(),f(e.status.scanning?1:2)}}function Ee(i,O){if(i&1&&P(0,Re,5,1,"span",28)(1,ue,3,1,"span"),i&2){let e=a().$implicit;f(e.status.error?0:1)}}function Ie(i,O){i&1&&(r(0,"span"),s(1,8),_())}function Le(i,O){if(i&1){let e=D();r(0,"tr",18),g("dblclick",function(){let t=d(e).$implicit,n=a(3);return c(n.editRoot(t))})("keydown.enter",function(){let t=d(e).$implicit,n=a(3);return c(n.editRoot(t))}),r(1,"td",12),h(2),_(),r(3,"td",13),h(4),_(),r(5,"td",14),h(6),_(),r(7,"td",15),P(8,Ee,2,1)(9,Ie,2,0,"span"),_(),r(10,"td",16)(11,"div",19)(12,"button",20),g("click",function(){let t=d(e).$implicit,n=a(3);return c(n.refreshRoot(t))}),C(13,"i",21),_(),r(14,"button",22),g("click",function(){let t=d(e).$implicit,n=a(3);return c(n.refreshRootMeta(t))}),C(15,"i",23),_(),r(16,"button",24),g("click",function(){let t=d(e).$implicit,n=a(3);return c(n.editRoot(t))}),C(17,"i",25),_(),r(18,"button",26),g("click",function(){let t=d(e).$implicit,n=a(3);return c(n.deleteRoot(t))}),C(19,"i",27),_()()()()}if(i&2){let e=O.$implicit;l(2),$(e.name),l(2),$(e.path),l(2),$(e.strategy),l(2),f(e.status?8:9)}}function Ae(i,O){if(i&1&&(r(0,"table",10)(1,"tr",11)(2,"td",12),s(3,0),_(),r(4,"td",13),s(5,1),_(),r(6,"td",14),s(7,2),_(),r(8,"td",15),s(9,3),_(),r(10,"td",16),s(11,4),_()(),H(12,Le,20,4,"tr",17,pe),_()),i&2){let e=a();l(12),U(e)}}function he(i,O){i&1&&P(0,Ae,14,0,"table",10),i&2&&f(O.length>0?0:-1)}var me=(()=>{class i{constructor(){this.roots=Y([]),this.notify=N(v),this.dialogs=N(Oe),this.rootService=N(w),this.dialogOverlay=N(G)}refreshRoot(e){this.rootService.rescanRoot(e)}refreshRootMeta(e){this.rootService.refreshRootMeta(e)}editRoot(e){let o={root:e,name:e.name,path:e.path,strategy:e.strategy};this.dialogOverlay.open({childComponent:B,title:"Edit Root",data:o,onOkBtn:()=>L(this,null,function*(){try{yield this.rootService.applyDialogRoot(o)}catch(t){return this.notify.error(t),Promise.reject(t)}}),onCancelBtn:()=>L(this,null,function*(){return Promise.resolve()})})}deleteRoot(e){this.dialogs.confirm("Delete Root","Do you want to the delete the root folder?",()=>{this.rootService.removeRoot(e)})}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=A({type:i,selectors:[["app-admin-root-list"]],inputs:{roots:[1,"roots"]},decls:2,vars:2,consts:()=>{let e;e=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`;let o;o=$localize`:␟766c66ad5cc981c531aaf3fe3a2a7a346ddc8d83␟8911059720204770105:Path`;let t;t=$localize`:␟05f5612d42b02be4d6d9e0a99585ae7e30a91780␟1617785425462022303:Strategy`;let n;n=$localize`:␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`;let S;S=$localize`:␟030b4423b92167200e39519599f9b863b4f7c62c␟3193976279273491157:Actions`;let y;y=$localize`:␟96613e9bbc5b95316e56df72d323766b54c4964e␟1020564942829121638:Rescan Root`;let b;b=$localize`:␟046a16565d1a08a0b5c251255c63e873f64c4f61␟1228008259662169871:Refresh Root Meta`;let m;m=$localize`:␟b9bf82da3451056e15340d89a4bcbf22fe45752b␟5936613369747810049:Edit Root`;let X;X=$localize`:␟b2fb8fb0d8eda1e65e01bfe666f42b8d4a853caa␟4674133541672494865:Delete Root`;let V;V=$localize`:␟45dd81fcbde051783b05fe60c8d0bab8e7e097a9␟4606091236515013460:Error:`;let z;z=$localize`:␟4fc06dce435cdd51107afcf0ca206bbbba026b0c␟1188193109474903303:Working…`;let F;F=$localize`:␟8ba85460d8f8515d276c46a9a1876a2ee143482e␟5743221119363707616:Last Change:`;let W;return W=$localize`:␟ff46a8749717b5199040c5eed9fe1e4c3ecc5624␟3875750134082688342:Not scanned`,[e,o,t,n,S,V,z,F,W,["name","Roots",3,"list"],["appFocusKeyList","","role","list",1,"roots"],[1,"root","heading"],[1,"title"],[1,"path"],[1,"strategy"],[1,"status"],[1,"actions"],["appFocusKeyListItem","","role","listitem",1,"root"],["appFocusKeyListItem","","role","listitem",1,"root",3,"dblclick","keydown.enter"],[1,"action-buttons"],["title",y,"appClickStop","",3,"click"],["aria-hidden","true",1,"icon-rescan"],["title",b,"appClickStop","",3,"click"],["aria-hidden","true",1,"icon-broom"],["title",m,"appClickStop","",3,"click"],["aria-hidden","true",1,"icon-edit"],["title",X,"appClickStop","",3,"click"],["aria-hidden","true",1,"icon-remove"],[1,"error"]]},template:function(o,t){if(o&1&&(C(0,"app-background-text-list",9),P(1,he,1,1)),o&2){let n;M("list",t.roots()),l(),f((n=t.roots())?1:-1,n)}},dependencies:[ee,Te,de,ce,Ce,Z],styles:["[_nghost-%COMP%]{width:100%;overflow:auto;display:block}[_nghost-%COMP%]   .roots[_ngcontent-%COMP%]{padding:15px;font-size:.9em;width:100%}[_nghost-%COMP%]   .root[_ngcontent-%COMP%]{height:60px}[_nghost-%COMP%]   .root[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px}[_nghost-%COMP%]   .root[_ngcontent-%COMP%]{border-bottom:1px solid var(--control-border)}[_nghost-%COMP%]   .root[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .root.selected[_ngcontent-%COMP%]{background-color:var(--background-active)}[_nghost-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--accent)}[_nghost-%COMP%]   .heading[_ngcontent-%COMP%]{height:40px;font-size:.9em}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{width:100px}[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px;flex:50%;margin:0;display:inline-block;color:var(--on-control);border:1px solid transparent}[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--on-control-active);border:1px solid var(--control-active)}"]})}}return i})();var rt=(()=>{class i{constructor(){this.unsubscribe=new j,this.notify=N(v),this.rootService=N(w),this.dialogOverlay=N(G)}static getSortValue(e,o){switch(e){case"name":return o.name;case"path":return o.path;default:return}}ngOnInit(){this.rootService.rootsChange.pipe(K(this.unsubscribe)).subscribe({next:e=>{this.roots=e.toSorted((o,t)=>o.name.localeCompare(t.name))},error:e=>{this.notify.error(e)}}),this.rootService.refreshRoots()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}refresh(){this.rootService.refreshRoots()}newRoot(){let e={name:"",path:"",strategy:x.auto};this.dialogOverlay.open({childComponent:B,title:"New Root",data:e,onOkBtn:()=>L(this,null,function*(){try{yield this.rootService.applyDialogRoot(e)}catch(o){return this.notify.error(o),Promise.reject(o)}}),onCancelBtn:()=>L(this,null,function*(){return Promise.resolve()})})}refreshRoots(){this.rootService.rescanRoots()}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=A({type:i,selectors:[["app-admin-root"]],decls:11,vars:1,consts:()=>{let e;e=$localize`:␟2f248600386a30236db69832ef4f910600ec943b␟7732274825567857654:Roots`;let o;o=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`;let t;t=$localize`:␟e13ccbc99042ea4870ebde4a4038672a4298adaf␟3093922570235029600:New Root…`;let n;return n=$localize`:␟c45553c26a8d0a2887def846473f015706ceb1c2␟4238145957469001439:Rescan all Roots`,[[1,"roots"],["section",e],[1,"actions"],["title",o,1,"button-on-control",3,"click"],[1,"icon-reload"],["title",t,1,"button-on-control",3,"click"],[1,"icon-plus"],["title",n,1,"button-on-control",3,"click"],[1,"icon-rescan"],[1,"content"],[3,"roots"]]},template:function(o,t){o&1&&(r(0,"div",0)(1,"app-view-header-slim",1)(2,"div",2)(3,"button",3),g("click",function(){return t.refresh()}),C(4,"i",4),_(),r(5,"button",5),g("click",function(){return t.newRoot()}),C(6,"i",6),_(),r(7,"button",7),g("click",function(){return t.refreshRoots()}),C(8,"i",8),_()()(),r(9,"div",9),C(10,"app-admin-root-list",10),_()()),o&2&&(l(10),M("roots",t.roots))},dependencies:[se,me,Me],styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:auto;display:block}[_nghost-%COMP%]   .roots[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .roots[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}"]})}}return i})();export{rt as AdminRootComponent};
