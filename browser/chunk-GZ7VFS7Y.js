import{a as St,b as zn,f as Wn,j as Kn}from"./chunk-CP22T22V.js";import{a as jn}from"./chunk-RQOW2HPH.js";import{g as Hn}from"./chunk-XRTDXO4N.js";import{$ as m,$a as re,$b as lt,$d as ne,Ab as _t,Ba as d,Bb as Mn,Bc as Nn,Ca as ln,Da as sn,Dd as bn,De as le,E as an,Ea as O,Fa as l,Fd as _e,I as E,Ia as dn,Ic as An,Id as xn,J as _n,Ja as Be,Ke as Vn,Lc as Te,Ma as ue,Mb as fn,Mc as de,Md as yn,N as me,Na as Se,O as g,Oa as Ee,Oc as In,Oe as Xn,P as C,Qa as S,Qc as Qe,Ra as T,Rb as On,Rc as mt,Sa as G,Sb as Ie,T as we,Ta as cn,Tb as he,Tc as qe,Ub as z,Uc as pt,Va as A,Vb as pe,Vc as Me,Wa as I,Wb as ge,Xa as R,Xb as W,Xd as te,Y as Oe,Ya as mn,Yb as Ce,Zb as un,Zd as wn,_,_a as It,_b as Sn,_c as $,ab as ie,ac as st,ae as kn,bc as dt,be as Re,cb as Le,cc as En,cd as b,ce as De,db as at,dc as hn,dd as gt,de as $n,eb as pn,ed as V,f as y,fa as Ae,fb as Rt,fd as Ct,gd as Mt,ge as ve,ha as u,he as Gn,i as H,id as X,jd as Rn,ka as f,la as Nt,ld as Dn,ma as ke,md as Y,me as Fn,na as At,nd as ft,oa as M,od as ae,pd as Pe,qa as rt,qd as vn,ra as F,rd as Ln,re as ut,sa as U,ta as a,ua as r,va as c,vb as gn,vc as Pn,ve as ze,wa as v,xa as L,yb as Cn,yc as ct,yd as Ot,ye as Un,z as D,za as P,zb as Fe,zc as Tn}from"./chunk-H26ZKUNV.js";var Et=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-admin"]],decls:6,vars:0,consts:[[1,"left"],["role","main",1,"middle"]],template:function(t,n){t&1&&(a(0,"aside",0),c(1,"app-admin-sidebar"),r(),c(2,"app-splitter"),a(3,"main",1),c(4,"router-outlet"),r(),c(5,"app-admin-queue-requests"))},styles:["[_nghost-%COMP%]{width:100%;height:100%;flex:1;display:flex;flex-flow:row nowrap;overflow:hidden;align-items:flex-start;align-content:flex-start}[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:15%;height:100%;min-width:140px}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{width:85%;flex-grow:1;height:100%}@media (max-width: 1400px){[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:20%}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{width:80%}}@media (max-width: 768px){[_nghost-%COMP%]{min-height:100%;position:absolute;display:block;flex:none;flex-flow:inherit}[_nghost-%COMP%]   app-splitter[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:100%!important;height:auto}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{width:100%;min-height:100%}}"]})}return i})();var Bn=["overview","tags","health","tracks","tracks-health"];function oi(i,s){i&1&&c(0,"i",10)}function ri(i,s){if(i&1&&(c(0,"i"),Le(1,"stringToggle")),i&2){let e=l().$implicit;At(Rt(1,2,e.expanded,"icon-minus","icon-plus"))}}function ai(i,s){if(i&1){let e=P();v(0),a(1,"div",8),O("click",function(){let n=g(e).$implicit,o=l();return C(o.selectNode(n))})("keydown.enter",function(){let n=g(e).$implicit,o=l();return C(o.selectNode(n))})("keydown.arrowRight",function(){let n=g(e).$implicit,o=l();return C(o.toggleNode(n))})("keydown.arrowLeft",function(){let n=g(e).$implicit,o=l();return C(o.toggleNode(n))}),a(2,"span",9),O("clickenter",function(){let n=g(e).$implicit,o=l();return C(o.toggleNode(n))}),u(3,oi,1,0,"i",10)(4,ri,2,6,"i",11),r(),a(5,"span",12),O("clickenter",function(){let n=g(e).$implicit,o=l();return C(o.toggleNode(n))}),c(6,"i"),Le(7,"stringToggle"),r(),a(8,"span",13),S(9),r(),a(10,"span",14),S(11),r()(),L()}if(i&2){let e=s.$implicit,t=l();_(),Nt("padding-left",e.level*12,"px"),ke("active",e===t.selected),_(),Be("title","Subfolders: ",e.folder.folderCount,""),_(),M(e.isLoading?3:-1),_(),M(!e.isLoading&&e.hasChildren?4:-1),_(),Nt("color",e.color),f("title",e.folder.type),_(),At(Rt(7,16,e.expanded,"icon-folder-open","icon-folder")),_(2),f("title",e.folder.name),_(),T(e.folder.name),_(2),G("| ",e.folder.type,"")}}function qn(i,s){if(i.children)for(let e of i.children)s(e),qn(e,s)}var be=(()=>{class i{app;jam;notify;folderService;selected;nodes=[];expandIDs=[];autoSelect=!1;selectionChange=new we;viewport;unsubscribe=new H;constructor(e,t,n,o){this.app=e,this.jam=t,this.notify=n,this.folderService=o}ngOnInit(){this.folderService.foldersChange.pipe(D(this.unsubscribe)).subscribe(e=>{let t=this.nodes.find(n=>n.folder.id===e.id);t&&this.jam.folder.id({id:e.id,folderIncTrackCount:!0,folderIncChildFolderCount:!0}).then(n=>{t.folder=n,e.mode===gt.fsnRefreshChilds&&t.expanded&&(this.collapseNode(t),t.hasChildren=(n.folderCount||0)>0,t.children=void 0,t.isLoading=!1,t.hasChildren&&(t.expanded=!0,this.checkLoadExpanded(t)))}).catch(n=>{console.error(n)})})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}selectNode(e){this.selectionChange.emit(e.folder),this.autoSelect&&(this.selected=e)}toggleNode(e){e.expanded?this.collapseNode(e):this.expandNode(e)}refresh(){this.jam.auth.isLoggedIn()&&this.jam.folder.search({level:0,folderIncChildFolderCount:!0,folderIncTrackCount:!0}).then(e=>{this.nodes=e.items.map(t=>({folder:t,hasChildren:(t.folderCount||0)>0,level:0,color:this.typeToColor(t),expanded:this.expandIDs.includes(t.id),isLoading:!1}));for(let t of this.nodes)this.checkLoadExpanded(t)}).catch(e=>{this.notify.error(e)})}typeToColor(e){switch(e.type){case Me.unknown:return"#ff9fAA";case Me.artist:return"#6f806e";case Me.collection:return"#adbced";case Me.album:return"#bdbd9c";case Me.multialbum:return"#bdaaae";case Me.extras:return"#bdbdbd";default:return""}}onFolderUpdate(e){let t=this.nodes.find(n=>n.folder.id===e.id);t&&(t.folder=e)}selectFolderByID(e){let t=this.nodes.find(n=>n.folder.id===e);t?this.selected=t:this.jam.folder.id({id:e,folderIncParents:!0}).then(n=>{if(n.parents){for(let o of n.parents)this.expandIDs.includes(o.id)||this.expandIDs.push(o.id);for(let o of this.nodes)o.expanded=this.expandIDs.includes(o.folder.id),this.checkLoadExpanded(o,e)}}).catch(n=>{this.notify.error(n)})}checkLoadExpanded(e,t){e.expanded&&!e.isLoading&&this.loadChildren(e,n=>{for(let o of n)this.checkLoadExpanded(o,t)}),e.folder.id===t&&(this.selected=e,this.viewport&&this.viewport.scrollToIndex(this.nodes.indexOf(e)))}loadChildren(e,t){e.isLoading||(e.isLoading=!0,this.jam.folder.search({parentIDs:[e.folder.id],folderIncChildFolderCount:!0,folderIncTrackCount:!0}).then(n=>{let o=n.items.sort((h,N)=>h.name.localeCompare(N.name)).map(h=>({folder:h,hasChildren:(h.folderCount||0)>0,level:e.level+1,color:this.typeToColor(h),expanded:this.expandIDs.includes(h.id),isLoading:!1})),p=this.nodes.indexOf(e);p>=0&&(this.nodes=this.nodes.slice(0,p+1).concat(o).concat(this.nodes.slice(p+1))),e.children=o,e.isLoading=!1,t&&t(o)}).catch(n=>{this.notify.error(n)}))}collapseNode(e){if(e.expanded){let t=[];qn(e,n=>t.push(n.folder.id)),this.nodes=this.nodes.filter(n=>!t.includes(n.folder.id)),e.expanded=!1,e.children=void 0,this.expandIDs=(this.expandIDs||[]).filter(n=>n!==e.folder.id)}}expandNode(e){if(!e.expanded){if(e.children){let t=this.nodes.indexOf(e);this.nodes=this.nodes.slice(0,t+1).concat(e.children).concat(this.nodes.slice(t+1))}else this.loadChildren(e);this.expandIDs.push(e.folder.id),e.expanded=!0}}static \u0275fac=function(t){return new(t||i)(m(X),m($),m(b),m(V))};static \u0275cmp=E({type:i,selectors:[["app-admin-folder-tree"]],viewQuery:function(t,n){if(t&1&&ue(ct,7),t&2){let o;Se(o=Ee())&&(n.viewport=o.first)}},inputs:{autoSelect:"autoSelect"},outputs:{selectionChange:"selectionChange"},decls:8,vars:2,consts:()=>{let e;e=$localize`:␟21e3799e2b1bfef3056c82909b88edfbd65ee66c␟1467125554926319902:Refresh Folder Tree`;let t;return t=$localize`:␟3fde556358b58d910adc30abaaff2433f0bb5f6c␟1205037876874222931:Folders`,[t,[1,"actions"],[1,"name"],["title",e,1,"button-on-control",3,"click"],["aria-hidden","true",1,"icon-reload"],["appFocusKeyList","",1,"tree"],[1,"list-container","list-group",2,"height","100%",3,"itemSize"],[4,"cdkVirtualFor","cdkVirtualForOf"],["appFocusKeyListItem","",1,"node",3,"click","keydown.enter","keydown.arrowRight","keydown.arrowLeft"],[1,"node-toggle",3,"clickenter","title"],[1,"icon-spin","icon-spinner"],[3,"class"],[1,"node-icon",3,"clickenter","title"],[3,"title"],[1,"node-type"]]},template:function(t,n){t&1&&(a(0,"div",1)(1,"span",2),d(2,0),r(),a(3,"button",3),O("click",function(){return n.refresh()}),c(4,"i",4),r()(),a(5,"div",5)(6,"cdk-virtual-scroll-viewport",6),u(7,ai,12,20,"ng-container",7),r()()),t&2&&(_(6),f("itemSize",22),_(),f("cdkVirtualForOf",n.nodes))},dependencies:[ze,Re,De,Pn,Tn,ct,xn],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{padding:15px 15px 10px;background-color:var(--background-transparent);color:var(--on-control)}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{padding-right:10px;vertical-align:middle;color:var(--on-control-active);font-size:20px;font-weight:100}[_nghost-%COMP%]   .tree[_ngcontent-%COMP%]{margin-top:10px;flex:1}[_nghost-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{width:100%;height:100%;min-height:100%;overflow-x:hidden}[_nghost-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]     .cdk-virtual-scroll-content-wrapper{width:100%}[_nghost-%COMP%]   .node[_ngcontent-%COMP%]{width:100%;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-decoration:none;vertical-align:middle;height:22px;cursor:pointer;-webkit-user-select:none;user-select:none;font-size:.9em}[_nghost-%COMP%]   .node[_ngcontent-%COMP%]   .node-toggle[_ngcontent-%COMP%]{display:inline-block;min-width:20px}[_nghost-%COMP%]   .node[_ngcontent-%COMP%]   .node-type[_ngcontent-%COMP%]{padding-left:5px;font-size:.7em;text-transform:uppercase}[_nghost-%COMP%]   .node.active[_ngcontent-%COMP%]{color:var(--on-control-hover)}"]})}return i})();var li=i=>["/admin/folder",i,"overview"],si=i=>["/admin/folder",i,"tracks"],di=i=>["/admin/folder",i,"sub-folders"],ci=i=>["/admin/folder",i,"tags"],mi=i=>["/admin/folder",i,"health"],pi=i=>["/admin/folder",i,"tracks-health"];function gi(i,s){i&1&&(a(0,"a"),c(1,"i",15),v(2),d(3,0),L(),r())}function Ci(i,s){i&1&&(a(0,"a"),c(1,"i",16),v(2),d(3,1),L(),r())}function Mi(i,s){if(i&1&&(a(0,"nav",13)(1,"ul",17)(2,"li",18)(3,"a"),d(4,2),r()(),a(5,"li",18)(6,"a"),d(7,3),r()(),a(8,"li",18)(9,"a"),d(10,4),r()(),a(11,"li",18)(12,"a"),d(13,5),r()(),a(14,"li",18)(15,"a"),d(16,6),r()(),a(17,"li",18)(18,"a"),d(19,7),r()()()()),i&2){let e=l();_(2),f("routerLink",ie(6,li,e.id)),_(3),f("routerLink",ie(8,si,e.id)),_(3),f("routerLink",ie(10,di,e.id)),_(3),f("routerLink",ie(12,ci,e.id)),_(3),f("routerLink",ie(14,mi,e.id)),_(3),f("routerLink",ie(16,pi,e.id))}}var Dt=(()=>{class i{route;router;uiState;id="";tree;rightActive=!1;unsubscribe=new H;mode="overview";constructor(e,t,n){this.route=e,this.router=t,this.uiState=n}refresh(){this.tree&&this.tree.refresh()}selectionChange(e){this.router.navigate([`/admin/folder/${e.id}/${this.mode}`]).catch(t=>{console.error(t)})}onFolderUpdate(e){this.tree&&this.tree.onFolderUpdate(e)}ngOnInit(){this.router.events.pipe(D(this.unsubscribe)).subscribe(e=>{if(e instanceof Dn&&this.route.firstChild&&this.route.firstChild.snapshot.url[0]){let t=this.route.firstChild.snapshot.url[0].path;Bn.includes(t)&&(this.mode=t)}}),this.route&&this.route.params.pipe(D(this.unsubscribe)).subscribe(e=>{let t=e.id;this.id=t,this.tree&&t&&setTimeout(()=>{this.tree&&this.tree.selectFolderByID(t)})}),this.tree&&(this.tree.expandIDs=this.uiState.data["app-admin-folders"]||[]),this.refresh()}ngOnDestroy(){this.tree&&(this.uiState.data["app-admin-folders"]=this.tree.expandIDs),this.unsubscribe.next(),this.unsubscribe.complete()}static \u0275fac=function(t){return new(t||i)(m(Y),m(ae),m(Ot))};static \u0275cmp=E({type:i,selectors:[["app-admin-folder"]],viewQuery:function(t,n){if(t&1&&ue(be,7),t&2){let o;Se(o=Ee())&&(n.tree=o.first)}},hostVars:2,hostBindings:function(t,n){t&2&&ke("right-active",n.rightActive)},decls:11,vars:3,consts:()=>{let e;e=$localize`:␟7ec7b22d8039675be42abd55ef2b6adad32ba322␟6821898315173685664:Show Folder Tools`;let t;t=$localize`:␟916b83c8c6c89e399186184c2198e5b4a760361b␟3376465991526605180:Show Folder Tree`;let n;n=$localize`:␟e95ae009d0bdb45fcc656e8b65248cf7396080d5␟2614607010577950577:Overview`;let o;o=$localize`:␟cb98522066062d775f3b81f29c898a7cc76292c0␟1575810254412583888:Tracks`;let p;p=$localize`:␟3fde556358b58d910adc30abaaff2433f0bb5f6c␟1205037876874222931:Folders`;let h;h=$localize`:␟cafc87479686947e2590b9f588a88040aeaf660b␟7886570921510760899:Tags`;let N;N=$localize`:␟d2bcd3296d2850de762fb943060b7e086a893181␟2041675390931385838:Health`;let k;return k=$localize`:␟a12d1012d8918ce2725b84077784140cb3381cd7␟4537451926022625647:Track Health`,[e,t,n,o,p,h,N,k,[1,"toggle",3,"click"],[1,"content"],[1,"left-content"],[3,"selectionChange"],[1,"right-content"],[1,"navigation"],[1,"router-content"],[1,"icon-right"],[1,"icon-left"],[1,"tabs"],["routerLinkActive","active",3,"routerLink"]]},template:function(t,n){t&1&&(a(0,"button",8),O("click",function(){return n.rightActive=!n.rightActive}),u(1,gi,4,0,"a")(2,Ci,4,0,"a"),r(),a(3,"div",9)(4,"div",10)(5,"app-admin-folder-tree",11),O("selectionChange",function(p){return n.selectionChange(p)}),r()(),c(6,"app-splitter"),a(7,"div",12),u(8,Mi,20,18,"nav",13),a(9,"div",14),c(10,"router-outlet"),r()()()),t&2&&(_(),M(n.rightActive?-1:1),_(),M(n.rightActive?2:-1),_(6),M(n.id?8:-1))},dependencies:[ut,ft,Pe,vn,be],styles:["[_nghost-%COMP%]{overflow-y:auto;overflow-x:hidden;height:100%;width:100%;min-height:100%;flex:1 1 auto;position:relative;display:flex;flex-direction:column;overflow:hidden}[_nghost-%COMP%]   .toggle[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]{width:100%;z-index:1;display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center;background-color:var(--background-transparent);color:var(--on-control)}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{padding-left:0;margin-top:0;margin-bottom:0;list-style:none;border:none;display:flex;flex-flow:row wrap;width:100%}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative;display:block;margin-bottom:-1px;flex:1;align-self:stretch;border-top-width:4px;border-top-style:solid;border-top-color:transparent;border-bottom-width:4px;border-bottom-style:solid;border-bottom-color:transparent;padding:0}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover{background-color:var(--control-hover);transition:all .4s ease;border-bottom-width:4px;border-bottom-style:solid;border-bottom-color:transparent}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:15px}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{padding:10px 0;text-align:center;align-items:center;align-content:center;justify-content:center;margin-right:2px;line-height:1.42857143;border-radius:4px 4px 0 0;position:relative;display:flex;cursor:pointer;border:none;font-size:14px;text-transform:uppercase;letter-spacing:.5px;height:100%;color:var(--on-control);-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{background-color:unset;border:none;color:var(--on-control-hover)}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%]{cursor:default;border-bottom-color:var(--primary)!important}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:default;background-color:unset;color:var(--on-control-hover)}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%]:hover{border-bottom-color:var(--primary)}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.disabled[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:var(--on-control-ambient-disabled)}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.disabled[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.disabled[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{color:var(--on-control-ambient-disabled);text-decoration:none;cursor:not-allowed;background-color:transparent}@media (max-width: 768px){[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{align-items:center;align-content:center;justify-content:center}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding:5px;min-width:33%}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{font-size:.8em}}@media (max-width: 400px){[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding:0 5px}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{font-size:.7em}}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs.mini[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs.mini[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{flex:0}@media (max-width: 768px){[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs.mini[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{min-width:20px}}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;flex:1;display:flex;flex-flow:row nowrap;overflow:hidden;align-items:flex-start;align-content:flex-start;padding:0;min-height:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .left-content[_ngcontent-%COMP%]{height:100%;width:20%;display:block;border-right:1px solid var(--background-border);min-width:240px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]{width:80%;flex-shrink:1;flex-grow:1;height:100%;display:flex;flex-flow:column nowrap;position:relative;overflow:hidden}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]   .router-content[_ngcontent-%COMP%]{width:100%;height:100%;display:block;overflow:hidden}@media (max-width: 522px){[_nghost-%COMP%]{height:100%;width:100%;min-height:100%;overflow:hidden}[_nghost-%COMP%]   .toggle[_ngcontent-%COMP%]{display:block;position:relative;width:100%;height:33px;text-align:center;padding-top:5px;border-bottom:1px solid var(--background-border)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:calc(100% - 33px);min-height:calc(100% - 33px);overflow:hidden;display:block;flex:none;position:relative}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   app-splitter[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .left-content[_ngcontent-%COMP%]{display:flex;height:100%;width:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]{display:none;height:100%;width:100%}.right-active[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .left-content[_ngcontent-%COMP%]{display:none}.right-active[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]{display:flex}}"]})}return i})();var Ne=(()=>{class i{route;id;unsubscribe=new H;constructor(e){this.route=e}ngOnInit(){this.route&&this.route.parent&&this.route.parent.params.pipe(D(this.unsubscribe)).subscribe(e=>{this.resolve(e),this.refresh()})}idChanged(){}refresh(){}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}resolve(e){this.id=e.id,this.idChanged()}static \u0275fac=function(t){return new(t||i)(m(Y))};static \u0275cmp=E({type:i,selectors:[["app-admin-base-parent-view-id"]],decls:0,vars:0,template:function(t,n){}})}return i})();var Ue=(()=>{class i{data;tree;selectionChange(e){this.data&&(this.data.folder=e)}dialogInit(e,t){this.data=t.data,this.tree&&(this.tree.refresh(),this.data?.selectID&&this.tree.selectFolderByID(this.data.selectID))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-dialog-choose-folder"]],viewQuery:function(t,n){if(t&1&&ue(be,7),t&2){let o;Se(o=Ee())&&(n.tree=o.first)}},decls:1,vars:1,consts:[[3,"selectionChange","autoSelect"]],template:function(t,n){t&1&&(a(0,"app-admin-folder-tree",0),O("selectionChange",function(p){return n.selectionChange(p)}),r()),t&2&&f("autoSelect",!0)},dependencies:[be],styles:["[_nghost-%COMP%]{flex:1}"]})}return i})();var fi=()=>({standalone:!0});function Oi(i,s){if(i&1){let e=P();a(0,"div")(1,"form")(2,"div",1)(3,"label",2),d(4,0),r(),a(5,"input",3),R("ngModelChange",function(n){g(e);let o=l();return I(o.edit.name,n)||(o.edit.name=n),C(n)}),r()()()()}if(i&2){let e=l();_(5),f("ngModelOptions",re(2,fi)),A("ngModel",e.edit.name)}}var vt=(()=>{class i{edit;dialogInit(e,t){this.edit=t.data}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-dialog-folder"]],decls:1,vars:1,consts:()=>{let e;return e=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,[e,[1,"user-form-control"],["for","dialog-folder-edit"],["id","dialog-folder-edit","type","text","name","folder-name",3,"ngModelChange","ngModelOptions","ngModel"]]},template:function(t,n){t&1&&u(0,Oi,6,3,"div"),t&2&&M(n.edit?0:-1)},dependencies:[Ce,he,z,pe,W,ge],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{margin-left:20px;margin-right:20px}[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{font-size:1.3em;line-height:1.3em}[_nghost-%COMP%]   .user-form-control[_ngcontent-%COMP%]{margin-bottom:8px;display:block}"]})}return i})();var ui=(i,s)=>s.folder.id,Si=i=>["/admin/folder",i,"overview"];function Ei(i,s){if(i&1&&S(0),i&2){let e=l().$implicit;G(" / ",e.folder.tag==null?null:e.folder.tag.albumType," ")}}function hi(i,s){if(i&1){let e=P();a(0,"tr",14),O("click",function(){let n=g(e).$implicit;return C(n.selected=!n.selected)}),a(1,"td",8)(2,"a",15),S(3),r()(),a(4,"td",9),S(5),r(),a(6,"td",10),S(7),r(),a(8,"td",11),S(9),r(),a(10,"td",12),S(11),u(12,Ei,1,1),r()()}if(i&2){let e=s.$implicit;ke("selected",e.selected),_(2),f("routerLink",ie(9,Si,e.folder.id)),_(),T(e.folder.name),_(2),T(e.folder.tag==null?null:e.folder.tag.artist),_(2),T(e.folder.tag==null?null:e.folder.tag.album),_(2),T(e.folder.tag==null?null:e.folder.tag.year),_(2),G(" ",e.folder.type," "),_(),M(e.folder.tag!=null&&e.folder.tag.albumType?12:-1)}}function Pi(i,s){if(i&1&&(a(0,"table",6)(1,"tr",7)(2,"td",8),d(3,0),r(),a(4,"td",9),d(5,1),r(),a(6,"td",10),d(7,2),r(),a(8,"td",11),d(9,3),r(),a(10,"td",12),d(11,4),r()(),F(12,hi,13,11,"tr",13,ui),r()),i&2){let e=l();_(12),U(e.folderItems)}}var Lt=class{folder;selected;constructor(s){this.folder=s}},bt=(()=>{class i{folders=[];folderItems=[];getSortValue(e,t){switch(e){case"name":return t.name;case"artist":return t.tag?.artist;case"album":return t.tag?.album;case"type":return t.type;default:return}}ngOnChanges(){this.folderItems=(this.folders||[]).map(e=>new Lt(e))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-admin-folder-list"]],inputs:{folders:"folders"},features:[me],decls:2,vars:2,consts:()=>{let e;e=$localize`:␟fdf7cbdc140d0aab0f0b6c06065a0fd448ed6a2e␟5701618810648052610:Title`;let t;t=$localize`:␟378660a509ecaa4d2dd3b4b0b8975760cfe3576d␟2492300395471245755:Artist`;let n;n=$localize`:␟842a4fcf548e0c52ebab1cb5362f47ab2ca83e12␟1393837337557373364:Album`;let o;o=$localize`:␟f6e04edea3bb3a59d5904725bfbc2c440e793001␟1464072562214937907:Year`;let p;return p=$localize`:␟f61c6867295f3b53d23557021f2f4e0aa1d0b8fc␟8650499415827640724:Type`,[e,t,n,o,p,["name","Folders",3,"list"],[1,"folders"],[1,"folder","heading"],[1,"title"],[1,"artist"],[1,"album"],[1,"year"],[1,"type"],[1,"folder",3,"selected"],[1,"folder",3,"click"],[3,"routerLink"]]},template:function(t,n){t&1&&(c(0,"app-background-text-list",5),u(1,Pi,14,0,"table",6)),t&2&&(f("list",n.folderItems),_(),M(n.folderItems&&n.folderItems.length>0?1:-1))},dependencies:[_e,Pe],styles:["[_nghost-%COMP%]{width:100%;overflow:auto;display:block}[_nghost-%COMP%]   .folders[_ngcontent-%COMP%]{padding:15px;font-size:.8em;width:100%}[_nghost-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:.9em}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]{border-bottom:1px solid var(--control-border)}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .folder.selected[_ngcontent-%COMP%]{background-color:var(--background-active)}"]})}return i})();function Ni(i,s){i&1&&c(0,"app-loading")}function Ai(i,s){if(i&1){let e=P();a(0,"button",9),O("click",function(){g(e);let n=l(2);return C(n.moveSubfolders())}),c(1,"i",10),r()}}function Ii(i,s){if(i&1&&c(0,"app-admin-folder-list",8),i&2){let e=l(2);f("folders",e.folder.folders)}}function Ri(i,s){if(i&1){let e=P();a(0,"div",0)(1,"div",1)(2,"button",2),O("click",function(){g(e);let n=l();return C(n.refresh())}),c(3,"i",3),r(),a(4,"button",4),O("click",function(){g(e);let n=l();return C(n.newFolder())}),c(5,"i",5),r(),u(6,Ai,2,0,"button",6),r(),c(7,"app-background-text-list",7),u(8,Ii,1,1,"app-admin-folder-list",8),r()}if(i&2){let e=l();_(6),M(e.folder.folders&&e.folder.folders.length?6:-1),_(),f("list",e.folder.folders),_(),M(e.folder.folders&&e.folder.folders.length?8:-1)}}var xt=(()=>{class i extends Ne{jam;notify;folderService;dialogsService;dialogOverlay;folder;constructor(e,t,n,o,p,h){super(e),this.jam=t,this.notify=n,this.folderService=o,this.dialogsService=p,this.dialogOverlay=h}ngOnInit(){super.ngOnInit(),this.folderService.foldersChange.pipe(D(this.unsubscribe)).subscribe(e=>{e.id===this.id&&this.refresh()})}ngOnDestroy(){super.ngOnDestroy()}refresh(){this.folder=void 0,this.id&&this.jam.folder.id({id:this.id,folderIncFolders:!0,folderIncTag:!0}).then(e=>{this.folder=e}).catch(e=>{this.notify.error(e)})}newFolder(){if(!this.folder)return;let e=this.folder,t={folder:e,name:""};this.dialogOverlay.open({childComponent:vt,title:"New Folder",data:t,onOkBtn:()=>y(this,null,function*(){try{this.jam.folder.create({id:e.id,name:t.name}).then(n=>{this.folderService.waitForQueueResult("Creating Folder",n,[],[e.id])}).catch(n=>{this.notify.error(n)})}catch(n){return this.notify.error(n),Promise.reject(n)}}),onCancelBtn:()=>y(this,null,function*(){return Promise.resolve()})})}moveSubfolders(){if(!this.id||!this.folder?.folders)return;let e=this.id,t=this.folder.folders.map(p=>p.id),n=[e].concat(t),o={selectID:e,disableIDs:n};this.dialogOverlay.open({title:"Move Subfolders to",childComponent:Ue,data:o,panelClass:"overlay-panel-large-buttons",onOkBtn:()=>y(this,null,function*(){try{let p=o.folder;if(!p)return;n.push(p.id),this.jam.folder.move({ids:t,newParentID:p.id}).then(h=>{this.folderService.waitForQueueResult("Moving Folders",h,[],n)}).catch(h=>{this.notify.error(h)})}catch(p){return this.notify.error(p),Promise.reject(p)}}),onCancelBtn:()=>y(this,null,function*(){return Promise.resolve()})})}static \u0275fac=function(t){return new(t||i)(m(Y),m($),m(b),m(V),m(le),m(te))};static \u0275cmp=E({type:i,selectors:[["app-admin-folder-folders"]],features:[Ae],decls:2,vars:1,consts:()=>{let e;e=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`;let t;t=$localize`:␟65ab0e571a2c4b74cf959aa0fecf26f78fae4b9f␟5184355384536429227:New Folder…`;let n;return n=$localize`:␟defb5986728ca6ef16d61914a5b0642c36084245␟4062236829893650390:Move Subfolders…`,[[1,"folders"],[1,"actions"],["title",e,1,"button-on-control",3,"click"],[1,"icon-reload"],["title",t,1,"button-on-control",3,"click"],[1,"icon-plus"],["title",n,1,"button-on-control"],["name","Folders",3,"list"],[3,"folders"],["title",n,1,"button-on-control",3,"click"],[1,"icon-right-bold"]]},template:function(t,n){t&1&&u(0,Ni,1,0,"app-loading")(1,Ri,9,3,"div",0),t&2&&M(n.folder?n.folder.folders?1:-1:0)},dependencies:[_e,ne,bt],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:block;overflow:hidden}[_nghost-%COMP%]   .folders[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}[_nghost-%COMP%]   .folders[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:10px 15px 0;border-bottom-color:var(--background-border);border-bottom-width:1px;border-bottom-style:solid}[_nghost-%COMP%]   .folders[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}[_nghost-%COMP%]   .folders[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1px;font-size:11px;margin-left:5px;margin-right:5px}[_nghost-%COMP%]   .folders[_ngcontent-%COMP%]   app-admin-folder-list[_ngcontent-%COMP%]{overflow-y:auto}"]})}return i})();function Di(i,s){if(i&1){let e=P();a(0,"image-cropper",8),O("imageCropped",function(n){g(e);let o=l();return C(o.imageCropped(n))})("imageLoaded",function(){g(e);let n=l();return C(n.imageLoaded())})("cropperReady",function(){g(e);let n=l();return C(n.cropperReady())})("loadImageFailed",function(){g(e);let n=l();return C(n.loadImageFailed())}),r()}if(i&2){let e=l();f("imageBase64",e.imageBase64)("format","jpeg")("maintainAspectRatio",e.maintainAspectRatio)}}function vi(i,s){if(i&1&&(a(0,"div",5),c(1,"img",9),r()),i&2){let e=l();_(),f("src",e.croppedImage,Oe)}}var yt=(()=>{class i{app;jam;folderService;notify;data;imageBase64="";croppedImage;croppedImageFile;mimeType="image/jpeg";maintainAspectRatio=!0;imageEdited=new we;unsubscribe=new H;constructor(e,t,n,o){this.app=e,this.jam=t,this.folderService=n,this.notify=o}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}load(){this.data&&this.jam.image.imageBinary({id:this.data.artwork.id}).then(e=>{this.imageBase64=`data:${e.contentType||"image/jpeg"};base64,${Kn(e.buffer)}`}).catch(e=>{this.notify.error(e)})}imageCropped(e){e.base64&&(this.croppedImage=e.base64,this.croppedImageFile=zn(e.base64))}imageLoaded(){}cropperReady(){}loadImageFailed(){}ngOnChanges(){this.load()}upload(){if(!this.croppedImageFile||!this.data)return;let e=this.data.folderID,t=new File([this.croppedImageFile],this.data.artwork.name,{type:this.croppedImageFile.type});this.jam.artwork.update({id:this.data.artwork.id},t).pipe(D(this.unsubscribe)).subscribe(n=>{n.type===Fe.Response?(this.folderService.waitForQueueResult("Updating Folder Artwork",n.body,[e]),this.imageEdited.emit()):(n.type,Fe.UploadProgress)},n=>{this.notify.error(n)},()=>{this.notify.success("Upload done")})}static \u0275fac=function(t){return new(t||i)(m(X),m($),m(V),m(b))};static \u0275cmp=E({type:i,selectors:[["app-admin-artwork-edit"]],inputs:{data:"data"},outputs:{imageEdited:"imageEdited"},features:[me],decls:10,vars:4,consts:()=>{let e;e=$localize`:␟9adf24384bd663ce0cf256940aae864e83991330␟6234579371454134968:Maintain Aspect Ratio`;let t;t=$localize`:␟f8c2b6ea1dd59afb3f3f555afbd132af40653bba␟1396820513327307838:Use Cropped Artwork`;let n;return n=$localize`:␟4fc4437088a4fa1764a26dd6b3552dbca6b64541␟777253553934937544:Cropped Image`,[e,t,[1,"image-crop"],["type","checkbox",3,"ngModelChange","checked","ngModel"],[3,"imageBase64","format","maintainAspectRatio"],[1,"image-preview"],[1,"buttons"],[1,"button-on-control",3,"click"],[3,"imageCropped","imageLoaded","cropperReady","loadImageFailed","imageBase64","format","maintainAspectRatio"],["alt",n,3,"src"]]},template:function(t,n){t&1&&(a(0,"div",2)(1,"label")(2,"input",3),R("ngModelChange",function(p){return I(n.maintainAspectRatio,p)||(n.maintainAspectRatio=p),p}),r(),v(3),d(4,0),L(),r(),u(5,Di,1,3,"image-cropper",4),r(),u(6,vi,2,1,"div",5),a(7,"div",6)(8,"button",7),O("click",function(){return n.upload()}),d(9,1),r()()),t&2&&(_(2),f("checked",n.maintainAspectRatio),A("ngModel",n.maintainAspectRatio),_(3),M(n.imageBase64?5:-1),_(),M(n.croppedImage?6:-1))},dependencies:[Ie,z,W,St],styles:["[_nghost-%COMP%]{width:100%;display:block;text-align:center}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]{width:300px;display:block}[_nghost-%COMP%]   .image-crop[_ngcontent-%COMP%]{display:inline-block;text-align:center;margin-left:10px;margin-right:10px}[_nghost-%COMP%]   .image-preview[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;display:inline-block}[_nghost-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px}"]})}return i})();function bi(i,s){if(i&1){let e=P();a(0,"app-admin-artwork-edit",1),O("imageEdited",function(){g(e);let n=l();return C(n.onImageEdited())}),r()}if(i&2){let e=l();f("data",e.data)}}var wt=(()=>{class i{data;reference;loading=!0;dialogInit(e,t){this.data=t.data,this.reference=e}onImageEdited(){this.reference&&this.reference.close()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-image-edit-overlay-content"]],decls:1,vars:1,consts:[[3,"data"],[3,"imageEdited","data"]],template:function(t,n){t&1&&u(0,bi,1,1,"app-admin-artwork-edit",0),t&2&&M(n.data?0:-1)},dependencies:[yt]})}return i})();var xi=["inlineEditControl"];function yi(i,s){if(i&1){let e=P();a(0,"div",1)(1,"input",2,0),R("ngModelChange",function(n){g(e);let o=l();return I(o.value,n)||(o.value=n),C(n)}),O("blur",function(){g(e);let n=l();return C(n.onBlur())})("keydown.enter",function(){g(e);let n=l();return C(n.apply())}),r()()}if(i&2){let e=l();_(),f("required",e.required)("name",e.value)("type",e.type)("placeholder",e.placeholder),A("ngModel",e.value)}}function wi(i,s){if(i&1){let e=P();a(0,"div")(1,"div",3),O("click",function(){g(e);let n=l();return C(n.edit(n.value))})("focus",function(){g(e);let n=l();return C(n.edit(n.value))}),S(2),c(3,"i",4),r()()}if(i&2){let e=l();_(2),G("",e.value,"\xA0")}}var Je=(()=>{class i{inlineEditControl;placeholder="";type="text";required=!1;disabled=!1;endEditRequest=new we;editing=!1;editValue="";preValue="";onChange=Function.prototype;onTouched=Function.prototype;get value(){return this.editValue}set value(e){e!==this.editValue&&(this.editValue=e,this.onChange(e))}writeValue(e){this.editValue=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onBlur(){this.editing=!1,this.preValue!==this.editValue&&this.endEditRequest.emit()}apply(){this.editing=!1,this.endEditRequest.emit()}edit(e){this.disabled||(this.preValue=e,this.editing=!0,setTimeout(()=>{this.inlineEditControl?.nativeElement&&this.inlineEditControl.nativeElement.focus()}))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-inline-edit"]],viewQuery:function(t,n){if(t&1&&ue(xi,5),t&2){let o;Se(o=Ee())&&(n.inlineEditControl=o.first)}},inputs:{placeholder:"placeholder",type:"type",required:"required",disabled:"disabled"},outputs:{endEditRequest:"endEditRequest"},features:[mn([{provide:On,useExisting:i,multi:!0}])],decls:2,vars:2,consts:()=>{let e;return e=$localize`:␟32dfa3de9f35ea40a3c19960ab339727b437791f␟2350070440008093526:Click to edit`,[["inlineEditControl",""],[1,"inline-edit-edit"],[3,"ngModelChange","blur","keydown.enter","required","name","type","placeholder","ngModel"],["title",e,"tabindex","0",1,"inline-edit",3,"click","focus"],[1,"icon-edit"]]},template:function(t,n){t&1&&u(0,yi,3,5,"div",1)(1,wi,4,1,"div"),t&2&&(M(n.editing?0:-1),_(),M(n.editing?-1:1))},dependencies:[he,z,En,W],styles:[`.inline-edit{cursor:pointer}.inline-edit i{font-size:.7em}.inline-edit-edit{width:100%;display:block}.inline-edit-edit input{width:100%}
`],encapsulation:2})}return i})();var ki=(i,s)=>s.artwork.id;function $i(i,s){if(i&1){let e=P();a(0,"div",3),O("keydown.enter",function(){let n=g(e).$implicit,o=l();return C(o.editArtwork(n.artwork))}),a(1,"div",4)(2,"img",5),O("clickenter",function(){let n=g(e).$implicit,o=l();return C(o.editArtwork(n.artwork))}),r(),a(3,"div",6),S(4),r(),a(5,"div",7),S(6),r(),a(7,"div",8),d(8,0),r(),a(9,"div",9),S(10),Le(11,"filesize"),r()(),a(12,"div",10)(13,"app-inline-edit",11),R("ngModelChange",function(n){let o=g(e).$implicit;return I(o.name,n)||(o.name=n),C(n)}),O("endEditRequest",function(){let n=g(e).$implicit,o=l();return C(o.editArtworkName(n))}),r(),a(14,"a",12),O("clickenter",function(){let n=g(e).$implicit,o=l();return C(o.removeArtwork(n))}),c(15,"i",13),r()()()}if(i&2){let e=s.$implicit;_(2),f("src",e.thumbnail,Oe),_(2),T(e.artwork.types),_(2),T(e.artwork.format),_(2),ln(e.artwork.width)(e.artwork.height),sn(8),_(2),T(at(11,7,e.artwork.size)),_(3),A("ngModel",e.name)}}function Gi(i){let s=i.split(".");return s.pop(),s.join(".")}function Fi(i){let s=i.split(".");return s[s.length-1]}var Ye=(()=>{class i{app;jam;notify;folderService;dialogs;dialogOverlay;artworks;folderID;nodes;constructor(e,t,n,o,p,h){this.app=e,this.jam=t,this.notify=n,this.folderService=o,this.dialogs=p,this.dialogOverlay=h}ngOnChanges(){this.displayArtworks()}editArtworkName(e){this.jam.artwork.rename({id:e.artwork.id,newName:e.name}).then(t=>{this.folderService.waitForQueueResult("Renaming Artwork",t,this.folderID?[this.folderID]:[],[])}).catch(t=>{this.notify.error(t)})}editArtwork(e){this.dialogOverlay.open({childComponent:wt,title:"Edit Image",data:{artwork:e,folderID:this.folderID},panelClass:""})}showArtwork(e){let t=e.types.join(", ");this.dialogOverlay.open({title:t,childComponent:yn,data:{name:t,url:this.jam.image.imageUrl({id:e.id})}})}removeArtwork(e){this.dialogs.confirm("Remove Artworks?",`Do you want to delete "${e.artwork.name}"?`,()=>{this.jam.artwork.remove({id:e.artwork.id}).then(t=>{this.nodes&&(this.nodes=this.nodes.filter(n=>n!==e)),this.folderService.waitForQueueResult("Removing Artwork",t,this.folderID?[this.folderID]:[])}).catch(t=>{this.notify.error(t)})})}displayArtworks(){this.nodes=[],this.artworks&&(this.nodes=this.artworks.map(e=>({name:Gi(e.name),type:Fi(e.name),artwork:e,thumbnail:this.jam.image.imageUrl({id:e.id,size:128,format:mt.webp})})))}static \u0275fac=function(t){return new(t||i)(m(X),m($),m(b),m(V),m(le),m(te))};static \u0275cmp=E({type:i,selectors:[["app-admin-artwork-list"]],inputs:{artworks:"artworks",folderID:"folderID"},features:[me],decls:3,vars:0,consts:()=>{let e;e=$localize`:␟787e502e73191d41bb2ee8adb258a7435c94f5af␟7553271888893131195:Artwork`;let t;t=$localize`:␟4098fa43889421ae01e1548d8123ac604d0a741b␟365085234255662021:Delete Image`;let n;return n=$localize`:␟ffd1e79a49c10e27b981744032779234f6d86724␟8914490256741079776:${"\uFFFD0\uFFFD"}:INTERPOLATION:x${"\uFFFD1\uFFFD"}:INTERPOLATION_1:`,[n,["appFocusKeyList",""],["appFocusKeyListItem","",1,"artwork"],["appFocusKeyListItem","",1,"artwork",3,"keydown.enter"],[1,"artwork-img"],["alt",e,3,"clickenter","src"],[1,"mode"],[1,"format"],[1,"dims"],[1,"size"],[1,"artwork-types"],["type","text",3,"ngModelChange","endEditRequest","ngModel"],["title",t,1,"delete-button",3,"clickenter"],["aria-hidden","true",1,"icon-trash"]]},template:function(t,n){t&1&&(a(0,"div",1),F(1,$i,16,9,"div",2,ki),r()),t&2&&(_(),U(n.nodes))},dependencies:[ze,Re,De,z,W,Je,Un],styles:["[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]{display:inline-block;padding-top:15px;padding-right:15px;font-size:.8em;text-align:center;width:200px}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]{position:relative;overflow:hidden}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .dims[_ngcontent-%COMP%], [_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%], [_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .format[_ngcontent-%COMP%], [_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{position:absolute;padding:5px;background-color:var(--background-transparent);color:var(--on-background-highlight)}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{top:0;left:0}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .format[_ngcontent-%COMP%]{bottom:0;left:0}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .dims[_ngcontent-%COMP%]{top:0;right:0}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{bottom:0;right:0}[_nghost-%COMP%]   .artwork-types[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;overflow:hidden}[_nghost-%COMP%]   .artwork-types[_ngcontent-%COMP%]   app-inline-edit[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .artwork-types[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}"]})}return i})();var Ui=(i,s)=>s.image;function Vi(i,s){i&1&&c(0,"app-loading")}function Xi(i,s){i&1&&c(0,"i",18)}function Hi(i,s){if(i&1){let e=P();a(0,"input",20),R("ngModelChange",function(n){g(e);let o=l().$implicit;return I(o.checked,n)||(o.checked=n),C(n)}),r()}if(i&2){let e=l().$implicit;f("checked",e.checked),A("ngModel",e.checked)}}function ji(i,s){if(i&1){let e=P();a(0,"div",12),O("keydown.enter",function(){let n=g(e).$implicit;return C(n.checked=!n.checked)}),a(1,"div",13),O("clickenter",function(){let n=g(e).$implicit;return C(n.checked=!n.checked)}),c(2,"img",14),r(),a(3,"div",15)(4,"div",16)(5,"form")(6,"span",17),u(7,Xi,1,0,"i",18)(8,Hi,1,2,"input",19),S(9),r()()()()()}if(i&2){let e=s.$implicit;_(2),dn("alt",e.name),f("src",e.thumbnail,Oe),_(5),M(e.storing?7:-1),_(),M(e.storing?-1:8),_(),G(" ",e.name," ")}}function zi(i,s){if(i&1&&(a(0,"div"),c(1,"app-background-text-list",9),a(2,"div",10),F(3,ji,10,5,"div",11,Ui),r()()),i&2){let e=l();_(),f("list",e.nodes),_(2),U(e.nodes)}}function Wi(i,s){if(i&1&&c(0,"app-admin-artwork-list",21),i&2){let e=l(2);f("folderID",e.data.folder.id)("artworks",e.artworks)}}function Ki(i,s){if(i&1&&(a(0,"div",7)(1,"div",4),d(2,0),r(),u(3,Wi,1,2,"app-admin-artwork-list",21),r()),i&2){let e=l();_(3),M(e.isArtRefreshing?-1:3)}}function Bi(i,s){i&1&&(a(0,"button",22),c(1,"i",18),r())}function Qi(i,s){if(i&1){let e=P();a(0,"button",23),O("click",function(){g(e);let n=l(2);return C(n.use())}),d(1,1),r()}}function qi(i,s){if(i&1&&(a(0,"div"),u(1,Bi,2,0,"button",22)(2,Qi,2,0,"button",22),r()),i&2){let e=l();_(),M(e.isWorking?1:-1),_(),M(e.isWorking?-1:2)}}var kt=(()=>{class i{jam;notify;folderService;http;data;artworks;nodes;isWorking=!1;isArtRefreshing=!1;searchSource={name:"",url:""};unsubscribe=new H;constructor(e,t,n,o){this.jam=e,this.notify=t,this.folderService=n,this.http=o}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}ngOnChanges(){this.search(),this.data&&this.data.folder&&(this.data.folder.artworks?this.artworks=this.data.folder.artworks:this.refreshArtworks())}refreshArtworks(){this.data&&(this.isArtRefreshing=!0,this.jam.artwork.search({folderIDs:[this.data.folder.id]}).then(e=>{this.isArtRefreshing=!1,this.artworks=e.items}).catch(e=>{this.isArtRefreshing=!1,console.error(e)}))}loadWikiDataID(e){return y(this,null,function*(){let t=yield this.jam.metadata.musicbrainzLookup({type:In.artist,mbID:e});if(t?.data?.artist?.relations){let n=t.data.artist.relations.find(o=>o.type==="wikidata");if(n?.url)return n.url.resource.split("/").pop()}})}loadWikiCommonImage(e){return y(this,null,function*(){let t=yield this.loadWikiDataID(e);if(!t)return;let o=(yield this.jam.metadata.wikidataLookup({wikiDataID:t}))?.data?.entity?.claims;if(!o)return;let p=Object.keys(o);for(let h of p){let N=o[h];N=N.filter(w=>typeof w.mainsnak.datavalue.value=="string"&&Wn(w.mainsnak.datavalue.value.toLowerCase(),["jpg","jpeg","png"]));let k=N[0];if(k){let oe=`https://en.wikipedia.org/w/api.php?format=json&action=query&origin=*&titles=File:${k.mainsnak.datavalue.value}&prop=imageinfo&iiprop=extmetadata|url&iiextmetadatafilter=LicenseShortName`,ee=yield this.http.get(oe).toPromise();if(ee&&ee.query.pages){let J=ee.query.pages[Object.keys(ee.query.pages)[0]];if(J&&J.imageinfo[0])return{name:qe.artist,thumbnail:J.imageinfo[0].url,image:J.imageinfo[0].url,licence:J.imageinfo[0].extmetadata.LicenseShortName.value,checked:!0,storing:!1,types:[qe.artist]}}}}})}loadWikiCommon(e){this.loadWikiCommonImage(e).then(t=>{this.nodes=[],t&&(t.checked=!0,this.nodes.push(t))}).catch(t=>{this.nodes=[],this.notify.error(t)})}use(){let e=(this.nodes||[]).find(n=>n.checked&&!n.storing),t=this.data?.folder;e&&t?(this.isWorking=!0,e.storing=!0,this.jam.artwork.createByUrl({folderID:t.id,url:e.image,types:e.types}).then(n=>{this.folderService.waitForQueueResult("Creating Artwork",n,[t.id]).pipe(D(this.unsubscribe)).subscribe(()=>{e.storing=!1,e.checked=!1}),this.use()}).catch(n=>{e.storing=!1,this.notify.error(n)})):this.isWorking=!1}ngOnInit(){this.folderService.foldersChange.pipe(D(this.unsubscribe)).subscribe(e=>{e.id===this.data?.folder.id&&this.refreshArtworks()})}loadReleaseGroupAndRelease(e,t){this.jam.metadata.coverartarchiveLookup({type:Qe.releaseGroup,mbID:t}).then(n=>{let o=this.coverArtResponseToNodes(n.data);this.jam.metadata.coverartarchiveLookup({type:Qe.release,mbID:e}).then(p=>{o=o.concat(this.coverArtResponseToNodes(p.data)),this.display(o)}).catch(p=>{this.notify.error(p)})}).catch(n=>{this.notify.error(n)})}loadReleaseGroup(e){this.jam.metadata.coverartarchiveLookup({type:Qe.releaseGroup,mbID:e}).then(t=>{let n=this.coverArtResponseToNodes(t.data);this.display(n)}).catch(t=>{this.notify.error(t)})}loadRelease(e){e&&this.jam.metadata.coverartarchiveLookup({type:Qe.release,mbID:e}).then(t=>{let n=this.coverArtResponseToNodes(t.data);this.display(n),n.length===0&&this.data&&this.data.folder&&this.data.folder.tag&&this.data.folder.tag.mbReleaseGroupID&&(this.nodes=void 0,this.loadReleaseGroup(this.data.folder.tag.mbReleaseGroupID))}).catch(t=>{this.notify.error(t)})}coverArtResponseToNodes(e){return e.images?e.images.map(t=>(t.types.length===0&&t.types.push("Other"),{name:(t.types||[]).join("/").toLowerCase(),thumbnail:this.jam.metadata.coverartarchiveImageUrl({url:t.thumbnails.small}),licence:"",image:t.image,types:(t.types||[]).map(n=>n.toLowerCase()),checked:!1,storing:!1,stored:!1})):[]}search(){this.data&&this.data.folder&&this.data.folder.tag&&(this.data.folder.type===Me.artist?this.data.folder.tag.mbArtistID&&(this.searchSource={name:"Wiki Commons",url:"https://commons.wikimedia.org"},this.loadWikiCommon(this.data.folder.tag.mbArtistID)):this.data&&this.data.folder&&this.data.folder.tag&&(this.searchSource={name:"Coverart Archive",url:"https://coverartarchive.org"},this.data.folder.tag.mbReleaseID&&this.data.folder.tag.mbReleaseGroupID?this.loadReleaseGroupAndRelease(this.data.folder.tag.mbReleaseID,this.data.folder.tag.mbReleaseGroupID):this.data.folder.tag.mbReleaseID?this.loadRelease(this.data.folder.tag.mbReleaseID):this.data.folder.tag.mbReleaseGroupID&&this.loadReleaseGroup(this.data.folder.tag.mbReleaseGroupID)))}display(e){this.nodes=e;let t=e.find(n=>n.types.length===1&&n.types[0]===qe.front);t||(t=e.find(n=>n.types.includes(qe.front))),t&&this.nodes.forEach(n=>n.checked=n===t)}static \u0275fac=function(t){return new(t||i)(m($),m(b),m(V),m(Mn))};static \u0275cmp=E({type:i,selectors:[["app-admin-folder-artwork-search"]],inputs:{data:"data"},features:[me],decls:11,vars:6,consts:()=>{let e;e=$localize`:␟7e7b22a71a4180b0fe37ddd31720efbd93a51ce7␟8668694612879894228:Current Images`;let t;return t=$localize`:␟317c5efadc941d938c6171d4890c06afbd8a8db3␟826482080541471028:Use Checked Artwork`,[e,t,[1,"image-selector"],[1,"art-source"],[1,"section"],["rel","noopener","target","_blank",3,"href"],[1,"artwork"],[1,"current"],[1,"buttons"],["name","Images",3,"list"],["appFocusKeyList","",1,"images"],["appFocusKeyListItem",""],["appFocusKeyListItem","",3,"keydown.enter"],[1,"image",3,"clickenter"],[3,"src","alt"],[1,"footer"],[1,"footer-content"],[1,"label"],[1,"icon-spin","icon-spinner"],["type","checkbox",3,"checked","ngModel"],["type","checkbox",3,"ngModelChange","checked","ngModel"],[3,"folderID","artworks"],[1,"button-on-control"],[1,"button-on-control",3,"click"]]},template:function(t,n){t&1&&(a(0,"div",2)(1,"div",3)(2,"div",4)(3,"a",5),S(4),r()(),u(5,Vi,1,0,"app-loading")(6,zi,5,1,"div"),r(),a(7,"div",6),u(8,Ki,4,1,"div",7),r()(),a(9,"div",8),u(10,qi,3,2,"div"),r()),t&2&&(_(3),f("href",n.searchSource.url,Oe),_(),T(n.searchSource.name),_(),M(n.nodes?-1:5),_(),M(n.nodes?6:-1),_(2),M(n.data&&n.artworks?8:-1),_(2),M(n.nodes&&n.nodes.length>0?10:-1))},dependencies:[_e,ne,ze,Re,De,Ce,Ie,z,pe,W,ge,Ye],styles:["[_nghost-%COMP%]   .image-selector[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap;height:calc(100% - 40px)}[_nghost-%COMP%]   .image-buttons[_ngcontent-%COMP%]{height:40px}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]{overflow-y:auto;width:50%;height:100%;padding-left:15px}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]{padding-right:15px;overflow-y:auto;width:50%;height:100%;border-right:1px solid var(--background-border)}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:inline-block;padding-top:15px;padding-right:15px;font-size:.8em}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:185px;min-width:185px;min-height:185px;height:auto}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   .section[_ngcontent-%COMP%]{border-bottom:1px solid var(--background-border);padding-bottom:5px}[_nghost-%COMP%]   .section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background)}"]})}return i})();var Ze=(()=>{class i{data;dialogInit(e,t){this.data=t.data}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-dialog-folder-artwork-search"]],decls:1,vars:1,consts:[[3,"data"]],template:function(t,n){t&1&&c(0,"app-admin-folder-artwork-search",0),t&2&&f("data",n.data)},dependencies:[kt]})}return i})();var Yi=(i,s)=>s.hint.id,Zi=(i,s)=>s.name;function eo(i,s){i&1&&(a(0,"div",1)(1,"div",2),c(2,"i",3),r()())}function to(i,s){i&1&&(a(0,"div",2),d(1,0),r())}function no(i,s){if(i&1&&(a(0,"div",7),S(1),r()),i&2){let e=s.$implicit;_(),T(e)}}function io(i,s){if(i&1&&(a(0,"div",2),c(1,"i",6),S(2),F(3,no,2,1,"div",7,rt),r()),i&2){let e=s.$implicit;_(2),G(" ",e.hint.name," "),_(),U(e.details)}}function oo(i,s){i&1&&c(0,"i",3)}function ro(i,s){if(i&1&&S(0),i&2){let e=l().$implicit;G(" ",e.name," ")}}function ao(i,s){if(i&1){let e=P();a(0,"button",8),O("click",function(){let n=g(e).$implicit;return C(n.click())}),u(1,oo,1,0,"i",3)(2,ro,1,1),r()}if(i&2){let e=s.$implicit;_(),M(e.running?1:-1),_(),M(e.running?-1:2)}}function _o(i,s){if(i&1&&(a(0,"div",1),u(1,to,2,0,"div",2),F(2,io,5,1,"div",2,Yi),a(4,"div",4),F(5,ao,3,2,"button",5,Zi),r()()),i&2){let e=l();_(),M(e.hints.length===0?1:-1),_(),U(e.hints),_(3),U(e.solutions)}}var $t=(()=>{class i{app;router;jam;notify;dialogOverlay;folderService;hints;solutions=[];folderHealth;unsubscribe=new H;constructor(e,t,n,o,p,h){this.app=e,this.router=t,this.jam=n,this.notify=o,this.dialogOverlay=p,this.folderService=h}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}searchImages(e){this.dialogOverlay.open({title:"Search Artwork Images",childComponent:Ze,data:{folder:e},panelClass:"overlay-panel-large-buttons"})}ngOnChanges(){this.display(this.folderHealth)}static describeImageInvalidHint(e){if(!e.details||e.details.length===0)return[];let t=[e.details[0].reason];return e.details[0].expected&&t.push(`Expected: ${e.details[0].expected} Actual: ${e.details[0].actual}`),t}static describeAlbumTracksMissingHint(e){if(!e.details||e.details.length===0)return[];let t=[];return e.details[0].expected&&t.push(`Expected: ${e.details[0].expected} Actual: ${e.details[0].actual}`),t}describeImageQualityHint(e,t){if(this.addAlbumImageSearchSolution(t),!e.details||e.details.length===0)return[];let n=[e.details[0].reason];return n.push(`Expected: ${e.details[0].expected} Actual: ${e.details[0].actual}`),n}addArtistImageSearchSolution(e){if(e.tag&&e.tag.mbArtistID){let t={name:"Search",click:()=>y(this,null,function*(){this.searchImages(e)})};this.solutions.push(t)}}addAlbumImageSearchSolution(e){if(e.tag&&(e.tag.mbReleaseID||e.tag.mbReleaseGroupID)){let t={name:"Search",click:()=>y(this,null,function*(){this.searchImages(e)})};this.solutions.push(t)}}addRenameSolution(e,t){if(!this.solutions.find(n=>n.name==="Rename")){let n={name:"Rename",click:()=>y(this,null,function*(){if(n.running)return;n.running=!0;let o=yield this.jam.folder.rename({id:e.id,name:t});this.folderService.waitForQueueResult("Renaming Folder",o,[e.id]).pipe(D(this.unsubscribe)).subscribe(()=>{n.running=!1})})};this.solutions.push(n)}}addEditTagSolution(e){if(!this.solutions.find(t=>t.name==="Edit Tags")){let t={name:"Edit Tags",click:()=>y(this,null,function*(){this.router.navigate([`/admin/folder/${e.id}/tags`]).catch(n=>{console.error(n)})})};this.solutions.push(t)}}describeMBIDMissingHint(e,t){return this.addEditTagSolution(t),[]}describeAlbumTagMissingHint(e,t){return this.addEditTagSolution(t),e.details?[`Expected: ${e.details.map(n=>n.expected).join(",")}`]:[]}describeNameNonConformHint(e,t){let n=e.details&&e.details.length>0?e.details[0].expected:"";return n?(this.addRenameSolution(t,n),[`Current: ${t.name}`,`Suggested Name: ${n}`]):[]}describeArtistImageMissingHint(e,t){return this.addArtistImageSearchSolution(t),[]}describeAlbumImageMissingHint(e,t){return this.addAlbumImageSearchSolution(t),[]}describeHint(e,t){switch(e.id){case Te.albumMBIDExists:return this.describeMBIDMissingHint(e,t);case Te.albumTagsExists:return this.describeAlbumTagMissingHint(e,t);case Te.albumNameConform:case Te.artistNameConform:return this.describeNameNonConformHint(e,t);case Te.albumImageExists:return this.describeAlbumImageMissingHint(e,t);case Te.albumTracksComplete:return i.describeAlbumTracksMissingHint(e);case Te.artistImageExists:return this.describeArtistImageMissingHint(e,t);case Te.artistImageValid:case Te.albumImageValid:return i.describeImageInvalidHint(e);case Te.albumImageQuality:return this.describeImageQualityHint(e,t);default:break}return[]}display(e){this.hints=[],this.solutions=[],e?.health&&(this.hints=e.health.map(t=>{let n=this.describeHint(t,e.folder);return{hint:t,details:n}}))}static \u0275fac=function(t){return new(t||i)(m(X),m(ae),m($),m(b),m(te),m(V))};static \u0275cmp=E({type:i,selectors:[["app-folder-health"]],inputs:{folderHealth:"folderHealth"},features:[me],decls:2,vars:2,consts:()=>{let e;return e=$localize`:␟baa5a59fd701bf37b30140cf2080f8987db6c2e9␟4786331182153457864:No Hints`,[e,[1,"hints"],[1,"hint"],[1,"icon-spin","icon-spinner"],[1,"solutions"],[1,"button-on-background"],[1,"icon-warning"],[1,"details"],[1,"button-on-background",3,"click"]]},template:function(t,n){t&1&&u(0,eo,3,0,"div",1)(1,_o,7,1,"div",1),t&2&&(M(n.hints?-1:0),_(),M(n.hints?1:-1))},styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:auto;display:block}[_nghost-%COMP%]   .icon-warning[_ngcontent-%COMP%]{color:var(--accent)}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]{padding-left:28px;font-size:.8em;text-transform:uppercase;min-width:30%;display:inline-block}[_nghost-%COMP%]   .hints[_ngcontent-%COMP%]{padding-top:10px}[_nghost-%COMP%]   .hint[_ngcontent-%COMP%]{padding-bottom:10px}"]})}return i})();var so=(i,s)=>s.folder.id,co=i=>["/admin/folder",i,"overview"];function mo(i,s){if(i&1&&(a(0,"option",13),S(1),r()),i&2){let e=s.$implicit;f("value",e),_(),T(e)}}function po(i,s){if(i&1){let e=P();a(0,"select",12),R("ngModelChange",function(n){g(e);let o=l();return I(o.filter,n)||(o.filter=n),C(n)}),O("ngModelChange",function(){g(e);let n=l();return C(n.onFilterChange())}),F(1,mo,2,2,"option",13,rt),r()}if(i&2){let e=l();A("ngModel",e.filter),_(),U(e.modes)}}function go(i,s){i&1&&c(0,"app-loading")}function Co(i,s){if(i&1&&(a(0,"div",19),d(1,0),r(),a(2,"div",16),S(3),r(),a(4,"div",20),S(5),r(),a(6,"div",21),S(7),r()),i&2){let e=l().$implicit;_(3),T(e.folder.tag==null?null:e.folder.tag.album),_(2),T(e.folder.tag==null?null:e.folder.tag.artist),_(2),T(e.folder.tag==null?null:e.folder.tag.year)}}function Mo(i,s){if(i&1&&(a(0,"div",19),d(1,1),r(),a(2,"div",16),S(3),r(),a(4,"div",20),S(5),r(),a(6,"div",21),S(7),r()),i&2){let e=l().$implicit;_(3),T(e.folder.tag==null?null:e.folder.tag.album),_(2),T(e.folder.tag==null?null:e.folder.tag.artist),_(2),T(e.folder.tag==null?null:e.folder.tag.year)}}function fo(i,s){if(i&1&&(a(0,"div",19),d(1,2),r(),a(2,"div",16),S(3),r()),i&2){let e=l().$implicit;_(3),T(e.folder.tag==null?null:e.folder.tag.artist)}}function Oo(i,s){if(i&1&&(a(0,"div",19),d(1,3),r(),a(2,"div",16),S(3),r()),i&2){let e=l().$implicit;_(3),T(e.folder.name)}}function uo(i,s){if(i&1&&(a(0,"div",16),S(1),r()),i&2){let e=l().$implicit;_(),T(e.folder.name)}}function So(i,s){if(i&1&&(a(0,"div",11)(1,"div",14)(2,"a",15),u(3,Co,8,3)(4,Mo,8,3)(5,fo,4,1)(6,Oo,4,1)(7,uo,2,1,"div",16),r()(),a(8,"div",17),c(9,"app-folder-health",18),r()()),i&2){let e,t=s.$implicit;_(2),f("routerLink",ie(3,co,t.folder.id)),_(),M((e=t.folder.type)==="multialbum"?3:e==="album"?4:e==="artist"?5:e==="collection"?6:7),_(6),f("folderHealth",t)}}var Gt=(()=>{class i extends Ne{app;jam;notify;folderService;all;hints;filter;modes=[];public;constructor(e,t,n,o,p){super(e),this.app=t,this.jam=n,this.notify=o,this.folderService=p}onFilterChange(){this.reDisplay()}ngOnInit(){super.ngOnInit(),this.folderService.foldersChange.pipe(D(this.unsubscribe)).subscribe(e=>{if(e.id===this.id)this.refresh();else if(this.all){let t=this.all.find(n=>n.folder.id===e.id);t&&this.jam.folder.health({ids:[e.id],folderIncTag:!0}).then(n=>{if(this.all){let o=n.find(p=>p.folder.id===t.folder.id);o?this.all[this.all.indexOf(t)]=o:this.all=this.all.filter(p=>p.folder.id!==t.folder.id)}this.reDisplay()}).catch(n=>{this.notify.error(n)})}})}ngOnDestroy(){super.ngOnDestroy()}refresh(){this.hints=void 0,this.jam.folder.health({childOfID:this.id,folderIncTag:!0}).then(e=>{this.display(e)}).catch(e=>{this.notify.error(e)})}reDisplay(){this.hints=!this.filter||!this.all?this.all:this.all.filter(e=>e.health&&e.health.find(t=>t.name===this.filter))}display(e){this.all=e,this.modes=[];for(let t of e)if(t.health)for(let n of t.health)this.modes.includes(n.name)||this.modes.push(n.name);this.reDisplay()}static \u0275fac=function(t){return new(t||i)(m(Y),m(X),m($),m(b),m(V))};static \u0275cmp=E({type:i,selectors:[["app-admin-folder-health"]],features:[Ae],decls:10,vars:3,consts:()=>{let e;e=$localize`:␟e9e69aab6530b06f07d62019e95496e5c974a35d␟4008496035123032607:Refresh List`;let t;t=$localize`:␟bb787b6c8e8a25e976f65cadc66c66c8a7d81a8a␟8891977878457079212:Type of Hints`;let n;n=$localize`:␟842a4fcf548e0c52ebab1cb5362f47ab2ca83e12␟1393837337557373364:Album`;let o;o=$localize`:␟842a4fcf548e0c52ebab1cb5362f47ab2ca83e12␟1393837337557373364:Album`;let p;p=$localize`:␟378660a509ecaa4d2dd3b4b0b8975760cfe3576d␟2492300395471245755:Artist`;let h;return h=$localize`:␟40cf215f61708390d3aba0212e49596e0d3d981c␟16823705783062999:Collection`,[n,o,p,h,[1,"health"],[1,"actions"],["title",e,1,"button-on-control",3,"click"],[1,"icon-reload"],["placeholder",t,3,"ngModel"],[1,"health-content"],["name","Folder Health Issues",3,"list"],[1,"folder"],["placeholder",t,3,"ngModelChange","ngModel"],[3,"value"],[1,"meta"],[3,"routerLink"],[1,"name"],[1,"folder-health"],[3,"folderHealth"],[1,"type"],[1,"artist"],[1,"year"]]},template:function(t,n){t&1&&(a(0,"div",4)(1,"div",5)(2,"button",6),O("click",function(){return n.refresh()}),c(3,"i",7),r(),u(4,po,3,1,"select",8),r(),a(5,"div",9),u(6,go,1,0,"app-loading"),c(7,"app-background-text-list",10),F(8,So,10,5,"div",11,so),r()()),t&2&&(_(4),M(n.modes.length>0?4:-1),_(2),M(n.hints?-1:6),_(),f("list",n.hints),_(),U(n.hints))},dependencies:[_e,ne,st,dt,lt,z,W,Pe,$t],styles:["[_nghost-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:10px 15px 0;border-bottom-color:var(--background-border);border-bottom-width:1px;border-bottom-style:solid}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1px;font-size:11px;margin-left:5px;margin-right:5px}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .health-content[_ngcontent-%COMP%]{padding:15px;overflow-y:auto;overflow-x:auto}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]{border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:var(--background-border);padding:15px;display:flex;flex-flow:row wrap;flex-flow:row nowrap}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{width:30%;padding-right:15px;margin-left:15px;display:flex;flex-flow:column wrap;position:relative}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;text-overflow:ellipsis;overflow:hidden}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{text-transform:uppercase}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%], [_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .year[_ngcontent-%COMP%], [_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .state[_ngcontent-%COMP%]{letter-spacing:1px;font-size:.8em}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:24px;font-weight:100;color:var(--on-background-highlight)}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background)}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:14px;line-height:1.2em}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:auto}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:5px;margin-right:5px;height:27px;font-weight:500;padding:1px 15px 0}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:scale(1.3);transform-origin:center}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;border:1px solid transparent;padding:4px 9px 7px;border-radius:50%;display:none;position:absolute;right:1px;bottom:0}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--control-hover);color:var(--on-background-hover)}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]:hover   .actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]:hover   app-fav-icon[_ngcontent-%COMP%]{display:inline}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .folder-health[_ngcontent-%COMP%]{display:flex;width:70%}@media (max-width: 400px){[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]{padding-left:0;padding-right:0}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:16px}}"]})}return i})();function Eo(i,s){i&1&&(v(0),d(1,0),L())}function ho(i,s){i&1&&(v(0),d(1,1),L())}function Po(i,s){if(i&1&&(a(0,"div")(1,"div"),u(2,Eo,2,0,"ng-container")(3,ho,2,0,"ng-container"),r(),c(4,"app-loading"),r()),i&2){let e=l();_(2),M(e.isUploading?2:-1),_(),M(e.isUploading?-1:3)}}function To(i,s){if(i&1){let e=P();a(0,"div",3),O("drop",function(n){g(e);let o=l();return C(o.onDropFile(n))})("dragover",function(n){g(e);let o=l();return C(o.onDragOverFile(n))}),a(1,"form")(2,"input",4),O("change",function(n){g(e);let o=l();return C(o.selectFile(n))}),r()()()}}var Ft=(()=>{class i{jam;notify;folderService;folder;reference;isIdle=!0;isUploading=!1;unsubscribe=new H;constructor(e,t,n){this.jam=e,this.notify=t,this.folderService=n}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}dialogInit(e,t){this.reference=e,this.folder=t.data?.folder}waitForCreationEnd(e){if(!this.folder)return;let t=this.folder.id;this.folderService.waitForQueueResult("Creating Artwork",e,[]).pipe(D(this.unsubscribe)).subscribe(()=>{this.isIdle=!0,this.folderService.notifyFolderChange(t,gt.fsnRefresh),e.error||(this.notify.success("Upload done"),this.reference&&this.reference.close())})}onDropFile(e){e.preventDefault(),this.uploadFile(e.dataTransfer?.files)}onDragOverFile(e){e.stopPropagation(),e.preventDefault()}selectFile(e){this.uploadFile(e.target.files)}uploadFile(e){if(!e||e.length===0||!this.folder)return;let t=e[0];this.isIdle=!1,this.isUploading=!0,this.jam.artwork.createByUpload({folderID:this.folder.id,types:[]},t).pipe(D(this.unsubscribe)).subscribe(n=>{if(n.type!==Fe.UploadProgress){if(n instanceof _t){let o=n.body;o&&this.waitForCreationEnd(o)}}},n=>{this.isUploading=!1,this.isIdle=!0,this.notify.error(n)},()=>{this.isUploading=!1})}static \u0275fac=function(t){return new(t||i)(m($),m(b),m(V))};static \u0275cmp=E({type:i,selectors:[["app-dialog-upload-image"]],decls:2,vars:2,consts:()=>{let e;e=$localize`:␟f54acc637f2d1ea81cf76322b0c3f381b868baa1␟7636862518745301168:Uploading`;let t;t=$localize`:␟71969bbb4eedcf48235202c3146043ad48adc542␟1227384069952544114:Creating Artwork`;let n;return n=$localize`:␟d833321cc90a0b0a52714c6d5ec97fbe6c7cfa5c␟2501989539336327542:Upload image`,[e,t,[1,"drop-zone"],[1,"drop-zone",3,"drop","dragover"],["type","file","placeholder",n,"accept",".png,.jpeg,.jpg",3,"change"]]},template:function(t,n){t&1&&u(0,Po,5,2,"div")(1,To,3,0,"div",2),t&2&&(M(n.isIdle?-1:0),_(),M(n.isIdle?1:-1))},dependencies:[ne,Ce,pe,ge],styles:["[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]{margin:10px 20px;border-width:2px;border-style:dotted;border-color:var(--secondary);height:80%}[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%}"]})}return i})();var No=i=>["/admin/folder",i];function Ao(i,s){i&1&&c(0,"app-loading")}function Io(i,s){if(i&1&&c(0,"app-info-note",23),i&2){let e=l(2);f("info",e.folder.info)}}function Ro(i,s){if(i&1&&S(0),i&2){let e=l(2);G(" / ",e.folder.tag==null?null:e.folder.tag.albumType," ")}}function Do(i,s){if(i&1&&(a(0,"div")(1,"div",25),d(2,5),r(),a(3,"div"),S(4),r()()),i&2){let e=l(2);_(4),T(e.folder.tag==null?null:e.folder.tag.artist)}}function vo(i,s){if(i&1&&(a(0,"div")(1,"div",25),d(2,6),r(),a(3,"div"),S(4),r()()),i&2){let e=l(2);_(4),T(e.folder.tag==null?null:e.folder.tag.album)}}function Lo(i,s){if(i&1&&(a(0,"div")(1,"div",25),d(2,7),r(),a(3,"div"),S(4),r()()),i&2){let e=l(2);_(4),G(" ",e.folder.tag==null?null:e.folder.tag.year,"")}}function bo(i,s){if(i&1&&(a(0,"div")(1,"div",25),d(2,8),r(),a(3,"div"),S(4),r()()),i&2){let e=l(2);_(4),G(" ",e.folder.tag==null?null:e.folder.tag.genres,"")}}function xo(i,s){if(i&1&&(a(0,"div")(1,"div",25),d(2,9),r(),a(3,"div")(4,"a",33),S(5),r()()()),i&2){let e=l(2);_(4),Be("href","https://musicbrainz.org/release/",e.folder.tag==null?null:e.folder.tag.mbReleaseID,"",Oe),_(),T(e.folder.tag==null?null:e.folder.tag.mbReleaseID)}}function yo(i,s){if(i&1&&(a(0,"div")(1,"div",25),d(2,10),r(),a(3,"div")(4,"a",33),S(5),r()()()),i&2){let e=l(2);_(4),Be("href","https://musicbrainz.org/artist/",e.folder.tag==null?null:e.folder.tag.mbArtistID,"",Oe),_(),T(e.folder.tag==null?null:e.folder.tag.mbArtistID)}}function wo(i,s){if(i&1&&(a(0,"div")(1,"div",25),d(2,11),r(),a(3,"div")(4,"a",34),S(5),r()()()),i&2){let e=l(2);_(4),f("routerLink",ie(2,No,e.folder.parentID)),_(),T(e.folder.parentID)}}function ko(i,s){if(i&1){let e=P();a(0,"button",35),O("click",function(){g(e);let n=l(2);return C(n.searchImages())}),c(1,"i",36),v(2),d(3,12),L(),r()}}function $o(i,s){if(i&1){let e=P();a(0,"button",37),O("click",function(){g(e);let n=l(2);return C(n.searchImages())}),c(1,"i",36),v(2),d(3,13),L(),r()}}function Go(i,s){if(i&1&&(a(0,"div",32),c(1,"app-admin-artwork-list",38),r()),i&2){let e=l(2);_(),f("folderID",e.folder.id)("artworks",e.folder.artworks)}}function Fo(i,s){if(i&1){let e=P();a(0,"div",14)(1,"div",15)(2,"button",16),O("click",function(){g(e);let n=l();return C(n.refresh())}),c(3,"i",17),r(),a(4,"button",18),O("click",function(){g(e);let n=l();return C(n.moveFolder())}),c(5,"i",19),r(),a(6,"button",20),O("click",function(){g(e);let n=l();return C(n.removeFolder())}),c(7,"i",21),r()(),a(8,"div",22),u(9,Io,1,1,"app-info-note",23),a(10,"div",24)(11,"div")(12,"div")(13,"div",25),d(14,0),r(),a(15,"div")(16,"app-inline-edit",26),R("ngModelChange",function(n){g(e);let o=l();return I(o.name,n)||(o.name=n),C(n)}),O("endEditRequest",function(){g(e);let n=l();return C(n.editFolderName())}),r()()(),a(17,"div")(18,"div",25),d(19,1),r(),a(20,"div"),S(21),u(22,Ro,1,1),r()(),a(23,"div")(24,"div",25),d(25,2),r(),a(26,"div"),S(27),r()(),a(28,"div")(29,"div",25),d(30,3),r(),a(31,"div"),S(32),r()(),u(33,Do,5,1,"div")(34,vo,5,1,"div"),r(),a(35,"div"),u(36,Lo,5,1,"div")(37,bo,5,1,"div")(38,xo,6,3,"div")(39,yo,6,3,"div")(40,wo,6,4,"div"),r()(),a(41,"div",27)(42,"div",15)(43,"button",28),O("click",function(){g(e);let n=l();return C(n.uploadImage())}),c(44,"i",29),v(45),d(46,4),L(),r(),u(47,ko,4,0,"button",30)(48,$o,4,0,"button",31),r(),u(49,Go,2,2,"div",32),r()()()}if(i&2){let e=l();_(9),M(e.folder.info!=null&&e.folder.info.description?9:-1),_(7),A("ngModel",e.name),_(5),G("",e.folder.type," "),_(),M(e.isAlbum?22:-1),_(5),T(e.folder.trackCount),_(5),T(e.folder.folderCount),_(),M(e.folder.tag!=null&&e.folder.tag.artist?33:-1),_(),M(e.folder.tag!=null&&e.folder.tag.album?34:-1),_(2),M(e.folder.tag!=null&&e.folder.tag.year?36:-1),_(),M(!(e.folder.tag==null||e.folder.tag.genres==null)&&e.folder.tag.genres.length?37:-1),_(),M(e.folder.tag!=null&&e.folder.tag.mbReleaseID?38:-1),_(),M(e.folder.tag!=null&&e.folder.tag.mbArtistID?39:-1),_(),M(e.folder.parentID?40:-1),_(7),M(e.isAlbum&&e.folder.tag&&(e.folder.tag.mbReleaseID||e.folder.tag.mbReleaseGroupID)?47:-1),_(),M(e.isArtist&&e.folder.tag&&e.folder.tag.mbArtistID?48:-1),_(),M(e.folder.artworks&&e.folder.artworks.length>0?49:-1)}}var Ut=(()=>{class i extends Ne{app;jam;notify;dialogsService;dialogOverlay;folderService;router;name="";folder;isAlbum=!1;isArtist=!1;constructor(e,t,n,o,p,h,N,k){super(e),this.app=t,this.jam=n,this.notify=o,this.dialogsService=p,this.dialogOverlay=h,this.folderService=N,this.router=k}ngOnInit(){super.ngOnInit(),this.folderService.foldersChange.pipe(D(this.unsubscribe)).subscribe(e=>{e.id===this.id&&this.refresh()})}ngOnDestroy(){super.ngOnDestroy()}editFolderName(){if(!this.folder)return;let e=(this.name||"").trim();if(e.length===0||e===this.folder.name){this.name=this.folder.name;return}let t=this.folder.id;this.jam.folder.rename({id:t,name:e}).then(n=>{this.folderService.waitForQueueResult("Renaming Folder",n,[t])}).catch(n=>{this.notify.error(n)})}refresh(){this.id&&this.jam.folder.id({id:this.id,folderIncTag:!0,folderIncParents:!0,folderIncArtworks:!0,folderIncChildFolderCount:!0,folderIncTrackCount:!0}).then(e=>{this.display(e)}).catch(e=>{e.code===404?this.router.navigate(["/admin/folder/"]).catch(t=>{console.error(t)}):this.notify.error(e)})}uploadImage(){this.dialogOverlay.open({title:"Upload Folder Images",childComponent:Ft,data:{folder:this.folder},panelClass:"overlay-panel-large-buttons"})}searchImages(){this.dialogOverlay.open({title:"Search Artwork Images",childComponent:Ze,data:{folder:this.folder},panelClass:"overlay-panel-large-buttons"})}removeFolder(){let e=this.folder;e&&this.dialogsService.confirm("Remove Folder?",`Sure to remove Folder "${e.name}"?`,()=>{this.jam.folder.remove({id:e.id}).then(t=>{e.parentID&&this.router.navigate([`/admin/folder/${e.parentID}/overview`]).catch(n=>{console.error(n)}),this.folderService.waitForQueueResult("Removing Folder",t,[e.id],e.parentID?[e.parentID]:[])}).catch(t=>{this.notify.error(t)})})}moveFolder(){let e=this.folder;if(!e)return;let t={selectID:e.id,disableIDs:[e.id]};this.dialogOverlay.open({title:"Move Folder to",childComponent:Ue,data:t,panelClass:"overlay-panel-large-buttons",onOkBtn:()=>y(this,null,function*(){let n=t.folder;if(n)try{this.jam.folder.move({ids:[e.id],newParentID:n.id}).then(o=>{this.folderService.waitForQueueResult("Moving Folder",o,[e.id],(e.parentID?[e.parentID]:[]).concat([n.id]))}).catch(o=>{this.notify.error(o)})}catch(o){return this.notify.error(o),Promise.reject(o)}}),onCancelBtn:()=>y(this,null,function*(){return Promise.resolve()})})}display(e){this.name="",this.isAlbum=!1,this.isArtist=!1,this.folder=e,e&&(this.name=e.name,this.isAlbum=Vn.includes(e.type),this.isArtist=e.type===Me.artist)}static \u0275fac=function(t){return new(t||i)(m(Y),m(X),m($),m(b),m(le),m(te),m(V),m(ae))};static \u0275cmp=E({type:i,selectors:[["app-admin-folder"]],features:[Ae],decls:2,vars:2,consts:()=>{let e;e=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`;let t;t=$localize`:␟ee0ffaa4b2ef70f3847c0dc2126aff7ed0034519␟4836856351090546342:Move Folder…`;let n;n=$localize`:␟605381a1ba67135149effc1e2382241d379fcc9a␟5344042372404898499:Remove Folder…`;let o;o=$localize`:␟cb1068a2a1e809104667e887d276b18b2fb9d8fa␟7832824131624341508:Album Images`;let p;p=$localize`:␟12a54d1bad2243f676c829e885461ff819d55f4f␟2477517217585375703:Artist Images`;let h;h=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`;let N;N=$localize`:␟f61c6867295f3b53d23557021f2f4e0aa1d0b8fc␟8650499415827640724:Type`;let k;k=$localize`:␟261caf3111a423a99f27e839571512f371bd0212␟167155511337505993:Track Count`;let w;w=$localize`:␟36b472d60e30275eec0f90dc492c06c990621178␟506719405556868592:Folder Count`;let oe;oe=$localize`:␟faecc81b39c34e94a8f009af7d8c233d3a3dceaa␟8890037837123071423:Upload Artwork`;let ee;ee=$localize`:␟378660a509ecaa4d2dd3b4b0b8975760cfe3576d␟2492300395471245755:Artist`;let J;J=$localize`:␟842a4fcf548e0c52ebab1cb5362f47ab2ca83e12␟1393837337557373364:Album`;let K;K=$localize`:␟f6e04edea3bb3a59d5904725bfbc2c440e793001␟1464072562214937907:Year`;let B;B=$localize`:␟33c750c68c3e29d7fee57a180f508d8d202bdd04␟1790640569414740156:Genres`;let xe;xe=$localize`:␟e25c6080fad93286376b6a4103ff2889588879b5␟6137832517756203418:MB Release Id`;let ye;ye=$localize`:␟5b6e5696b55d1dbdcc67e6bb408952c49221060e␟7022245527426162907:MB Artist Id`;let Q;Q=$localize`:␟e17ab51fb5646579e7073ed25f240117d5f5169e␟4232003024146825817:Parent Folder Id`;let We;We=$localize`:␟045d07de1f817f18c61b2660126d1edcac7b5bd0␟2134391710559060062:Search Artwork`;let Ke;return Ke=$localize`:␟85804de0cdf6b27537be7f0d11158dbe7b1dc5c2␟7505878720705236779:Search Art`,[h,N,k,w,oe,ee,J,K,B,xe,ye,Q,We,Ke,[1,"folder"],[1,"actions"],["title",e,1,"button-on-control",3,"click"],[1,"icon-reload"],["title",t,1,"button-on-control",3,"click"],[1,"icon-right-bold"],["title",n,1,"button-on-control",3,"click"],[1,"icon-trash"],[1,"content"],[3,"info"],[1,"properties"],[1,"label"],["type","text",3,"ngModelChange","endEditRequest","ngModel"],[1,"artworks"],[1,"button-on-control",3,"click"],[1,"icon-upload-cloud"],["title",o,1,"button-on-control"],["title",p,1,"button-on-control"],[1,"artworks-content"],["target","_blank","rel","noopener",3,"href"],[3,"routerLink"],["title",o,1,"button-on-control",3,"click"],[1,"icon-picture"],["title",p,1,"button-on-control",3,"click"],[3,"folderID","artworks"]]},template:function(t,n){t&1&&u(0,Ao,1,0,"app-loading")(1,Fo,50,16,"div",14),t&2&&(M(n.folder?-1:0),_(),M(n.folder?1:-1))},dependencies:[Gn,ne,z,W,Pe,Ye,Je],styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow:hidden;display:block}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{padding:10px 15px 0;border-bottom-color:var(--background-border);border-bottom-width:1px;border-bottom-style:solid}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1px;font-size:11px;margin-left:5px;margin-right:5px}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{overflow-y:auto;display:flex;flex-direction:column}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;flex-direction:row;padding:15px}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:0 0 50%}@media (max-width: 522px){[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:0 0 100%}}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background)}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--on-background);font-size:.7em;text-transform:uppercase;padding-bottom:2px}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .artworks[_ngcontent-%COMP%]{border-top:1px solid var(--background-border)}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .artworks[_ngcontent-%COMP%]   .artworks-content[_ngcontent-%COMP%]{padding:0 15px 15px}"]})}return i})();var Uo=(i,s)=>s.hint.id,Vo=(i,s)=>s.name;function Xo(i,s){i&1&&(a(0,"div",1)(1,"div",2),c(2,"i",3),r()())}function Ho(i,s){i&1&&(a(0,"div",2),d(1,0),r())}function jo(i,s){if(i&1&&(a(0,"div",2),c(1,"i",6),S(2),a(3,"div",7),S(4),r()()),i&2){let e=s.$implicit;_(2),G(" ",e.hint.name," "),_(2),T(e.description)}}function zo(i,s){i&1&&c(0,"i",3)}function Wo(i,s){if(i&1&&S(0),i&2){let e=l().$implicit;G(" ",e.name," ")}}function Ko(i,s){if(i&1){let e=P();a(0,"button",8),O("click",function(){let n=g(e).$implicit;return C(n.click())}),u(1,zo,1,0,"i",3)(2,Wo,1,1),r()}if(i&2){let e=s.$implicit;_(),M(e.running?1:-1),_(),M(e.running?-1:2)}}function Bo(i,s){if(i&1&&(a(0,"div",1),u(1,Ho,2,0,"div",2),F(2,jo,5,2,"div",2,Uo),a(4,"div",4),F(5,Ko,3,2,"button",5,Vo),r()()),i&2){let e=l(2);_(),M(e.hints.length===0?1:-1),_(),U(e.hints),_(3),U(e.solutions)}}function Qo(i,s){if(i&1&&u(0,Xo,3,0,"div",1)(1,Bo,7,1,"div",1),i&2){let e=l();M(e.trackHealth.health&&e.hints?-1:0),_(),M(e.trackHealth.health&&e.hints?1:-1)}}var He=(()=>{class i{app;jam;notify;folderService;router;hints;solutions=[];trackHealth;resolvedEvent=new we;unsubscribe=new H;constructor(e,t,n,o,p){this.app=e,this.jam=t,this.notify=n,this.folderService=o,this.router=p}ngOnChanges(){this.display(this.trackHealth)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}ngOnInit(){this.folderService.tracksChange.pipe(D(this.unsubscribe)).subscribe(e=>{let t=this.trackHealth;t&&t.track.id===e.id&&(t.health=[],this.jam.track.health({ids:[t.track.id],healthMedia:!0}).then(n=>{let o=n.find(p=>p.track.id===t.track.id);o&&o.health?(t.track=o.track,t.health=o.health):t.health=[],t.health.length===0&&this.resolvedEvent.emit(),this.display(t)}).catch(n=>{this.notify.error(n)}))})}fixAll(){for(let e of this.solutions)e.fixable&&!e.running&&e.click&&e.click()}display(e){this.hints=[],this.solutions=[],e?.health&&(this.hints=e.health.map(t=>{let n=this.describeHint(t,e.track);return{hint:t,description:n}}))}describeTagHint(e,t){let n="";if(e.id===de.tagValuesExists?n=(e.details||[]).map(o=>o.reason.toUpperCase()).join(", "):e.id===de.id3v2Garbage?n=(e.details||[]).map(o=>o.reason).join(", "):e.id===de.id3v2Valid&&(n=(e.details||[]).map(o=>o.expected&&o.actual?`${o.reason}  (${o.actual} instead of ${o.expected})`:o.reason).join(", ")),!this.solutions.find(o=>o.name==="Edit Tag")){let o={name:"Edit Tag",click:()=>{this.router.navigate([`/admin/folder/${t.parentID}/tags`]).catch(p=>{console.error(p)})}};this.solutions.push(o)}return n}describeMp3GarbageHint(e,t){let n="";if(e.details&&e.details.length>0&&(n=`${e.details[0].reason} (${e.details[0].actual} bytes)`),!this.solutions.find(o=>o.name==="Fix MP3")){let o={name:"Fix MP3",fixable:!0,click:()=>{o.running||(o.running=!0,this.jam.track.fix({id:t.id,fixID:e.id}).then(p=>{this.folderService.waitForQueueResult("Fixing Track MP3",p,[],[],[t.id])}).catch(p=>{this.notify.error(p)}))}};this.solutions.push(o)}return n}describeMp3ErrorHint(e,t){let n=`Stream Errors: ${(e.details||[]).length}`;if(!this.solutions.find(o=>o.name==="Fix Stream")){let o={name:"Fix Stream",fixable:!0,click:()=>{o.running||(o.running=!0,this.jam.track.fix({id:t.id,fixID:e.id}).then(p=>{this.folderService.waitForQueueResult("Fixing Track Stream",p,[],[],[t.id])}).catch(p=>{this.notify.error(p)}))}};this.solutions.push(o)}return n}describeID3v1Hint(e,t){if(!this.solutions.find(n=>n.name==="Remove ID3v1")){let n={name:"Remove ID3v1",fixable:!0,click:()=>{n.running||(n.running=!0,this.jam.track.fix({id:t.id,fixID:e.id}).then(o=>{this.folderService.waitForQueueResult("Remove ID3v1",o,[],[],[t.id])}).catch(o=>{this.notify.error(o)}))}};this.solutions.push(n)}return""}describeMP3HeaderHint(e,t){let n="";if(e.id===de.mp3HeaderValid&&(n=(e.details||[]).map(o=>o.expected&&o.actual?`${o.reason}  (${o.actual} instead of ${o.expected})`:o.reason).join(", ")),!this.solutions.find(o=>o.name==="Fix Header")){let o={name:"Fix Header",fixable:!0,click:()=>{o.running||(o.running=!0,this.jam.track.fix({id:t.id,fixID:e.id}).then(p=>{this.folderService.waitForQueueResult("Fixing Track Header",p,[],[],[t.id])}).catch(p=>{this.notify.error(p)}))}};this.solutions.push(o)}return n}describeHint(e,t){switch(e.id){case de.tagValuesExists:case de.id3v2Garbage:case de.id3v2Exists:case de.id3v2Valid:return this.describeTagHint(e,t);case de.mp3Garbage:return this.describeMp3GarbageHint(e,t);case de.mp3MediaValid:return this.describeMp3ErrorHint(e,t);case de.id3v2NoId3v1:return this.describeID3v1Hint(e,t);case de.mp3HeaderExists:case de.mp3HeaderValid:return this.describeMP3HeaderHint(e,t);case de.flacMediaValid:default:break}return""}static \u0275fac=function(t){return new(t||i)(m(X),m($),m(b),m(V),m(ae))};static \u0275cmp=E({type:i,selectors:[["app-track-health"]],inputs:{trackHealth:"trackHealth"},outputs:{resolvedEvent:"resolvedEvent"},features:[me],decls:1,vars:1,consts:()=>{let e;return e=$localize`:␟baa5a59fd701bf37b30140cf2080f8987db6c2e9␟4786331182153457864:No Hints`,[e,[1,"hints"],[1,"hint"],[1,"icon-spin","icon-spinner"],[1,"solutions"],[1,"button-on-background"],[1,"icon-warning"],[1,"details"],[1,"button-on-background",3,"click"]]},template:function(t,n){t&1&&u(0,Qo,2,2),t&2&&M(n.trackHealth?0:-1)},styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:auto;display:block}[_nghost-%COMP%]   .icon-warning[_ngcontent-%COMP%]{color:var(--accent)}[_nghost-%COMP%]   .details[_ngcontent-%COMP%]{padding-left:28px;font-size:.8em;display:block;padding-top:5px}[_nghost-%COMP%]   .hint[_ngcontent-%COMP%]{padding-bottom:15px}[_nghost-%COMP%]   .solutions[_ngcontent-%COMP%]{padding-bottom:15px}[_nghost-%COMP%]   .solutions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:5px}[_nghost-%COMP%]   .detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:11px;min-width:80px;margin-right:10px;display:inline-block}"]})}return i})();var qo=(i,s)=>s.track.id;function Jo(i,s){i&1&&c(0,"app-loading")}function Yo(i,s){if(i&1){let e=P();a(0,"div",8)(1,"div",9),S(2),r(),a(3,"div",10)(4,"app-track-health",11),O("resolvedEvent",function(){let n=g(e).$implicit,o=l();return C(o.trackHealthResolved(n))}),r()()()}if(i&2){let e=s.$implicit;_(2),G(" ",e.track.name," "),_(2),f("trackHealth",e)}}var Vt=(()=>{class i extends Ne{app;jam;notify;folderService;all;hints;filter;modes=[];mediaCheck=!1;constructor(e,t,n,o,p){super(e),this.app=t,this.jam=n,this.notify=o,this.folderService=p}onFilterChange(){this.reDisplay()}ngOnInit(){super.ngOnInit(),this.folderService.foldersChange.pipe(D(this.unsubscribe)).subscribe(e=>{e.id===this.id&&this.refresh()})}ngOnDestroy(){super.ngOnDestroy()}checkChange(){this.refresh()}trackHealthResolved(e){this.all&&(this.all=this.all.filter(t=>t!==e),this.reDisplay())}refresh(){this.hints=void 0,this.id&&this.jam.track.health({folderIDs:[this.id],healthMedia:this.mediaCheck}).then(e=>{this.display(e)}).catch(e=>{this.notify.error(e)})}reDisplay(){this.hints=!this.filter||!this.all?this.all:this.all.filter(e=>e.health&&e.health.find(t=>t.name===this.filter))}display(e){this.all=e,this.modes=[];for(let t of e)if(t.health)for(let n of t.health)this.modes.includes(n.name)||this.modes.push(n.name);this.reDisplay()}static \u0275fac=function(t){return new(t||i)(m(Y),m(X),m($),m(b),m(V))};static \u0275cmp=E({type:i,selectors:[["app-admin-tracks-health"]],features:[Ae],decls:13,vars:4,consts:()=>{let e;e=$localize`:␟e9e69aab6530b06f07d62019e95496e5c974a35d␟4008496035123032607:Refresh List`;let t;return t=$localize`:␟fc25452275680509933bd62f7ff2f4f14a5949d8␟79910036711821960:Check Media`,[t,[1,"health"],[1,"actions"],["title",e,1,"button-on-control",3,"click"],[1,"icon-reload"],["type","checkbox",3,"ngModelChange","change","checked","ngModel"],[1,"content"],["name","Track Health Issues",3,"list"],[1,"track"],[1,"meta"],[1,"track-health"],[3,"resolvedEvent","trackHealth"]]},template:function(t,n){t&1&&(a(0,"div",1)(1,"div",2)(2,"button",3),O("click",function(){return n.refresh()}),c(3,"i",4),r(),a(4,"label")(5,"input",5),R("ngModelChange",function(p){return I(n.mediaCheck,p)||(n.mediaCheck=p),p}),O("change",function(){return n.checkChange()}),r(),v(6),d(7,0),L(),r()(),a(8,"div",6),u(9,Jo,1,0,"app-loading"),c(10,"app-background-text-list",7),F(11,Yo,5,2,"div",8,qo),r()()),t&2&&(_(5),f("checked",n.mediaCheck),A("ngModel",n.mediaCheck),_(4),M(n.hints?-1:9),_(),f("list",n.hints),_(),U(n.hints))},dependencies:[_e,ne,Ie,z,W,He],styles:["[_nghost-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:10px 15px 0;border-bottom-color:var(--background-border);border-bottom-width:1px;border-bottom-style:solid}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1px;font-size:11px;margin-left:5px;margin-right:5px}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px;overflow-y:auto;overflow-x:auto}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]{flex-flow:row nowrap}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{width:30%;overflow:hidden;padding-right:15px;text-overflow:ellipsis}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .track-health[_ngcontent-%COMP%]{width:70%}"]})}return i})();var Zo=(i,s)=>s.track.id;function er(i,s){if(i&1){let e=P();a(0,"tr",20),O("click",function(){let n=g(e).$implicit;return C(n.selected=!n.selected)}),a(1,"td",11),S(2),r(),a(3,"td",12),S(4),r(),a(5,"td",13),S(6),r(),a(7,"td",14),S(8),r(),a(9,"td",15),S(10),r(),a(11,"td",16),S(12),r(),a(13,"td",17),S(14),r(),a(15,"td",18),S(16),Le(17,"duration"),r()()}if(i&2){let e=s.$implicit;ke("selected",e.selected),_(2),T(e.track.tag==null?null:e.track.tag.trackNr),_(2),T(e.track.tag==null?null:e.track.tag.title),_(2),T(e.track.tag==null?null:e.track.tag.artist),_(2),T(e.track.tag==null?null:e.track.tag.album),_(2),T(e.track.media==null?null:e.track.media.format),_(2),T(e.track.media==null?null:e.track.media.bitRate),_(2),T(e.track.media==null?null:e.track.media.sampleRate),_(2),T(at(17,10,e.track.duration))}}function tr(i,s){if(i&1&&(a(0,"table",9)(1,"tr",10)(2,"td",11),d(3,0),r(),a(4,"td",12),d(5,1),r(),a(6,"td",13),d(7,2),r(),a(8,"td",14),d(9,3),r(),a(10,"td",15),d(11,4),r(),a(12,"td",16),d(13,5),r(),a(14,"td",17),d(15,6),r(),a(16,"td",18),d(17,7),r()(),F(18,er,18,12,"tr",19,Zo),r()),i&2){let e=l();_(18),U(e.trackItems)}}var et=(()=>{class i{router;trackItems;tracks=[];constructor(e){this.router=e}getSortValue(e,t){switch(e){case"number":return t.track.tag?.trackNr;case"name":return t.track.name;case"artist":return t.track.tag?.artist;case"album":return t.track.tag?.album;case"duration":return t.track.duration;default:return}}ngOnChanges(){this.trackItems=(this.tracks||[]).map(e=>({track:e}))}toTrackFolder(e){this.router.navigate([`/admin/folder/${e.parentID}/overview`]).catch(t=>{console.error(t)})}static \u0275fac=function(t){return new(t||i)(m(ae))};static \u0275cmp=E({type:i,selectors:[["app-admin-track-list"]],inputs:{tracks:"tracks"},features:[me],decls:2,vars:2,consts:()=>{let e;e=$localize`:␟be498c96e976cb06e12d105d3174b0d47460886f␟8381503740832172353:Track Nr.`;let t;t=$localize`:␟fdf7cbdc140d0aab0f0b6c06065a0fd448ed6a2e␟5701618810648052610:Title`;let n;n=$localize`:␟378660a509ecaa4d2dd3b4b0b8975760cfe3576d␟2492300395471245755:Artist`;let o;o=$localize`:␟842a4fcf548e0c52ebab1cb5362f47ab2ca83e12␟1393837337557373364:Album`;let p;p=$localize`:␟7722a92a1fc887570b4f4d8a7bb916f067f32028␟7513076467032912668:Format`;let h;h=$localize`:␟1e4b5c71ea539e7ba3415dbf4b15a6b684cf892a␟3813020320794017449:BitRate`;let N;N=$localize`:␟d256d70c89c6d6a1d085e7bac659374528239056␟3186270570067508524:SampleRate`;let k;return k=$localize`:␟a02ea1d4e7424ca989929da5e598f379940fdbf2␟7410432243549869948:Duration`,[e,t,n,o,p,h,N,k,["name","Tracks",3,"list"],[1,"tracks"],[1,"track","heading"],[1,"number"],[1,"title"],[1,"artist"],[1,"album"],[1,"format"],[1,"bitrate"],[1,"samplerate"],[1,"duration"],[1,"track",3,"selected"],[1,"track",3,"click"]]},template:function(t,n){t&1&&(c(0,"app-background-text-list",8),u(1,tr,20,0,"table",9)),t&2&&(f("list",n.tracks),_(),M(n.tracks&&n.tracks.length>0?1:-1))},dependencies:[_e,kn],styles:["[_nghost-%COMP%]{width:100%;overflow:auto;display:block}[_nghost-%COMP%]   .tracks[_ngcontent-%COMP%]{padding:15px;font-size:.8em;width:100%}[_nghost-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:.9em}[_nghost-%COMP%]   .track[_ngcontent-%COMP%]{border-bottom:1px solid var(--control-border)}[_nghost-%COMP%]   .track[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px}[_nghost-%COMP%]   .track[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .track.selected[_ngcontent-%COMP%]{background-color:var(--background-active)}"]})}return i})();function ir(i,s){i&1&&c(0,"app-loading")}function or(i,s){if(i&1){let e=P();a(0,"div",1)(1,"div",2)(2,"button",3),O("click",function(){g(e);let n=l();return C(n.refresh())}),c(3,"i",4),r(),a(4,"button",5),O("click",function(){g(e);let n=l();return C(n.moveTracks())}),c(5,"i",6),r(),a(6,"button",7),O("click",function(){g(e);let n=l();return C(n.deleteTracks())}),c(7,"i",8),r()(),c(8,"app-admin-track-list",9),r()}if(i&2){let e=l();_(8),f("tracks",e.folder.tracks)}}var Xt=(()=>{class i extends Ne{jam;notify;folderService;dialogsService;dialogOverlay;folder;tracks;constructor(e,t,n,o,p,h){super(e),this.jam=t,this.notify=n,this.folderService=o,this.dialogsService=p,this.dialogOverlay=h}ngOnInit(){super.ngOnInit(),this.folderService.foldersChange.pipe(D(this.unsubscribe)).subscribe(e=>{e.id===this.id&&this.refresh()})}ngOnDestroy(){super.ngOnDestroy()}deleteTracks(){let e=this.getTrackIDs();e.length!==0&&this.dialogsService.confirm("Remove Tracks?",`Sure to remove ${e.length} Track${e.length>1?"s":""}?`,()=>{for(let t of e)this.jam.track.remove({id:t}).then(n=>{this.folderService.waitForQueueResult("Removing Track",n,[],[],[t])}).catch(n=>{this.notify.error(n)})})}getTrackIDs(){if(!this.tracks?.trackItems||!this.folder?.tracks)return[];let e=this.tracks.trackItems.filter(t=>t.selected).map(t=>t.track.id);return e.length>0?e:this.folder.tracks.map(t=>t.id)}moveTracks(){let e=this.getTrackIDs();if(e.length===0)return;let t={selectID:this.id};this.dialogOverlay.open({title:"Move Tracks to",childComponent:Ue,data:t,panelClass:"overlay-panel-large-buttons",onOkBtn:()=>y(this,null,function*(){let n=t.folder;if(n)return this.jam.track.move({ids:e,folderID:n.id}).then(o=>{this.folderService.waitForQueueResult("Moving Tracks",o,[],[n.id].concat(this.folder?.parentID?[this.folder.parentID]:[]),e)}).catch(o=>{this.notify.error(o)}),Promise.resolve()}),onCancelBtn:()=>y(this,null,function*(){return Promise.resolve()})})}refresh(){this.folder=void 0,this.id&&this.jam.folder.id({id:this.id,folderIncTracks:!0,trackIncTag:!0,trackIncMedia:!0}).then(e=>{this.folder=e}).catch(e=>{this.notify.error(e)})}static \u0275fac=function(t){return new(t||i)(m(Y),m($),m(b),m(V),m(le),m(te))};static \u0275cmp=E({type:i,selectors:[["app-admin-folder-tracks"]],viewQuery:function(t,n){if(t&1&&ue(et,5),t&2){let o;Se(o=Ee())&&(n.tracks=o.first)}},features:[Ae],decls:3,vars:3,consts:()=>{let e;e=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`;let t;t=$localize`:␟5599dad966c719b3feae9735c1c2555c63945d62␟5954283971273891723:Move Tracks…`;let n;return n=$localize`:␟d01e8b8bbe3093f1bfe3f7849f8856d20862aa60␟3929773193703989963:Delete Tracks…`,[["name","Tracks",3,"list"],[1,"tracks"],[1,"actions"],["title",e,1,"button-on-control",3,"click"],[1,"icon-reload"],["title",t,1,"button-on-control",3,"click"],[1,"icon-right-bold"],["title",n,1,"button-on-control",3,"click"],[1,"icon-trash"],[1,"content",3,"tracks"]]},template:function(t,n){t&1&&(u(0,ir,1,0,"app-loading"),c(1,"app-background-text-list",0),u(2,or,9,1,"div",1)),t&2&&(M(n.folder?-1:0),_(),f("list",n.folder==null?null:n.folder.tracks),_(),M(n.folder&&n.folder.tracks&&n.folder.tracks.length>0?2:-1))},dependencies:[_e,ne,et],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:block;overflow:hidden}[_nghost-%COMP%]   .tracks[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}[_nghost-%COMP%]   .tracks[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:10px 15px 0;border-bottom-color:var(--background-border);border-bottom-width:1px;border-bottom-style:solid}[_nghost-%COMP%]   .tracks[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}[_nghost-%COMP%]   .tracks[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1px;font-size:11px;margin-left:5px;margin-right:5px}[_nghost-%COMP%]   .tracks[_ngcontent-%COMP%]   app-admin-track-list[_ngcontent-%COMP%]{overflow-y:auto}"]})}return i})();var rr=(i,s)=>s.track.id,ar=i=>["/admin/folder",i,"tags"];function _r(i,s){if(i&1){let e=P();a(0,"button",11),O("click",function(){g(e);let n=l(3);return C(n.refresh(n.current.pos,!1))}),c(1,"i",12),v(2),d(3,1),L(),r()}}function lr(i,s){if(i&1){let e=P();a(0,"button",11),O("click",function(){g(e);let n=l(3);return C(n.fixAll())}),d(1,2),r()}}function sr(i,s){if(i&1){let e=P();a(0,"div",7)(1,"button",8),O("click",function(){g(e);let n=l(2);return C(n.start())}),c(2,"i",9),v(3),d(4,0),L(),r(),u(5,_r,4,0,"button",10)(6,lr,2,0,"button",10),r()}if(i&2){let e=l(2);_(5),M(e.current?5:-1),_(),M(e.current&&e.current.health&&e.current.health.length>0?6:-1)}}function dr(i,s){if(i&1){let e=P();a(0,"div",7)(1,"button",11),O("click",function(){g(e);let n=l(2);return C(n.stop())}),c(2,"i",13),a(3,"span"),d(4,3),r()()()}}function cr(i,s){if(i&1&&u(0,sr,7,2,"div",7)(1,dr,5,0,"div",7),i&2){let e=l();M(e.searching?-1:0),_(),M(e.searching?1:-1)}}function mr(i,s){i&1&&c(0,"app-loading")}function pr(i,s){i&1&&c(0,"i",15)}function gr(i,s){if(i&1){let e=P();a(0,"div",18)(1,"div",19),S(2),r(),a(3,"div",20)(4,"app-track-health",21),O("resolvedEvent",function(){let n=g(e).$implicit,o=l(3);return C(o.trackHealthResolved(n))}),r()()()}if(i&2){let e=s.$implicit;_(2),G(" ",e.track.name," "),_(2),f("trackHealth",e)}}function Cr(i,s){if(i&1&&F(0,gr,5,2,"div",18,rr),i&2){let e=l(2);U(e.current.health)}}function Mr(i,s){if(i&1&&(a(0,"div")(1,"div",14)(2,"span"),u(3,pr,1,0,"i",15),r(),a(4,"span"),S(5),r(),a(6,"a",16),c(7,"i",17),S(8),r()(),u(9,Cr,2,0),r()),i&2){let e=l();_(3),M(e.searching?3:-1),_(2),cn("",e.current.pos+1," / ",e.folders.length,""),_(),f("routerLink",ie(6,ar,e.current.folder.id)),_(2),G(" ",e.current.folder.name,""),_(),M(e.current.health?9:-1)}}var Ht=(()=>{class i{app;jam;notify;uiState;folderService;userStorage;static localStorageName="admin.radar";folders;current;searching=!1;trackHealthComponents;unsubscribe=new H;constructor(e,t,n,o,p,h){this.app=e,this.jam=t,this.notify=n,this.uiState=o,this.folderService=p,this.userStorage=h,h.userChange.pipe(D(this.unsubscribe)).subscribe(()=>this.loadFromStorage())}trackHealthResolved(e){this.current&&this.current.health&&(this.current.health=this.current.health.filter(t=>t!==e))}stop(){this.searching=!1}start(){this.searching||!this.folders||(this.searching=!0,this.request())}request(){if(!this.searching)return;let e=0;this.current&&(e=this.current.pos+1),this.refresh(e,!0)}fixAll(){this.searching||!this.current||!this.trackHealthComponents||this.trackHealthComponents.forEach(e=>{e.fixAll()})}refresh(e,t){this.current=void 0,this.searching=!0;let n=this.folders&&this.folders[e];if(!n){this.searching=!1;return}let o={folder:n,pos:e};this.current=o,this.userStorage.set(i.localStorageName,{folderID:n.id}),this.jam.track.health({folderIDs:[n.id],healthMedia:!0}).then(p=>{p.length>0?(o.health=p,this.searching=!1):t?this.request():(o.health=[],this.searching=!1)}).catch(p=>{this.current=void 0,this.searching=!1,this.notify.error(p)})}ngOnInit(){let e=this.uiState.data["app-admin-radar"];e&&(this.folders=e.folders,this.current=e.current,this.folders)||this.loadFolders()}ngOnDestroy(){this.uiState.data["app-admin-radar"]={folders:this.folders,current:this.current},this.current=void 0,this.searching=!1,this.folders=void 0,this.unsubscribe.next(),this.unsubscribe.complete()}loadFromStorage(){let e=this.userStorage.get(i.localStorageName);if(e?.folderID&&this.folders){let t=this.folders.findIndex(n=>n.id===e.folderID);t>=0&&(this.current={folder:this.folders[t],pos:t},this.refresh(t,!1))}}loadFolders(){this.jam.folder.search({folderTypes:[Me.album,Me.multialbum]}).then(e=>{this.folders=e.items,this.loadFromStorage()}).catch(e=>{this.notify.error(e)})}static \u0275fac=function(t){return new(t||i)(m(X),m($),m(b),m(Ot),m(V),m(Rn))};static \u0275cmp=E({type:i,selectors:[["app-admin-radar"]],viewQuery:function(t,n){if(t&1&&ue(He,5),t&2){let o;Se(o=Ee())&&(n.trackHealthComponents=o)}},decls:6,vars:3,consts:()=>{let e;e=$localize`:␟2b67115641c17c9e2d3e94fd920f48fefdfdc25b␟1962047135999875061:Health Radar`;let t;t=$localize`:␟f732c304c7433e5a83ffcd862c3dce709a0f4982␟3885497195825665706:Next`;let n;n=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`;let o;o=$localize`:␟71697936bf93aa7b37f938e213eaf990aaa0715c␟6587306545685043964:Fix all fixable`;let p;return p=$localize`:␟1d0d5c9a36e72bd9643ff1ede69736ae063d652b␟3133539296286953705:Stop`,[t,n,o,p,[1,"radar"],["section",e],[1,"content"],[1,"buttons"],[1,"button-primary",3,"click"],[1,"icon-play"],[1,"button-on-control"],[1,"button-on-control",3,"click"],[1,"icon-reload"],[1,"icon-stop"],[1,"current"],[1,"icon-spin","icon-spinner"],[3,"routerLink"],[1,"icon-folder"],[1,"track"],[1,"meta"],[1,"track-health"],[3,"resolvedEvent","trackHealth"]]},template:function(t,n){t&1&&(a(0,"div",4)(1,"app-view-header-slim",5),u(2,cr,2,2),r(),a(3,"div",6),u(4,mr,1,0,"app-loading")(5,Mr,10,8,"div"),r()()),t&2&&(_(2),M(n.folders?2:-1),_(2),M(n.folders?-1:4),_(),M(n.folders&&n.current?5:-1))},dependencies:[ve,ne,Pe,He],styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:auto;display:block}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{min-width:130px;display:inline-block}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px;border-bottom:1px solid var(--background-border)}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-right:15px}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]{border-bottom:1px solid var(--background-border)}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .track-health[_ngcontent-%COMP%]{padding-left:15px}@media (max-width: 768px){[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .track-health[_ngcontent-%COMP%]{padding-left:0}}"]})}return i})();var ti=()=>({standalone:!0});function fr(i,s){if(i&1){let e=P();a(0,"form")(1,"div",7)(2,"label",8),d(3,0),r(),a(4,"input",9),R("ngModelChange",function(n){g(e);let o=l();return I(o.edit.name,n)||(o.edit.name=n),C(n)}),r()(),a(5,"div",7)(6,"label",10),d(7,1),r(),a(8,"input",11),R("ngModelChange",function(n){g(e);let o=l();return I(o.edit.path,n)||(o.edit.path=n),C(n)}),r()(),a(9,"div",7)(10,"label",12),d(11,2),r(),a(12,"fieldset",13)(13,"label",14)(14,"input",15),R("ngModelChange",function(n){g(e);let o=l();return I(o.edit.strategy,n)||(o.edit.strategy=n),C(n)}),r(),v(15),d(16,3),L(),r(),a(17,"label",14)(18,"input",15),R("ngModelChange",function(n){g(e);let o=l();return I(o.edit.strategy,n)||(o.edit.strategy=n),C(n)}),r(),v(19),d(20,4),L(),r(),a(21,"label",14)(22,"input",15),R("ngModelChange",function(n){g(e);let o=l();return I(o.edit.strategy,n)||(o.edit.strategy=n),C(n)}),r(),v(23),d(24,5),L(),r(),a(25,"label",14)(26,"input",15),R("ngModelChange",function(n){g(e);let o=l();return I(o.edit.strategy,n)||(o.edit.strategy=n),C(n)}),r(),v(27),d(28,6),L(),r()()()()}if(i&2){let e=l();_(4),f("ngModelOptions",re(12,ti)),A("ngModel",e.edit.name),_(4),f("ngModelOptions",re(13,ti)),A("ngModel",e.edit.path),_(6),f("value",e.RootScanStrategy.auto),A("ngModel",e.edit.strategy),_(4),f("value",e.RootScanStrategy.artistalbum),A("ngModel",e.edit.strategy),_(4),f("value",e.RootScanStrategy.compilation),A("ngModel",e.edit.strategy),_(4),f("value",e.RootScanStrategy.audiobook),A("ngModel",e.edit.strategy)}}var tt=(()=>{class i{edit;RootScanStrategy=pt;dialogInit(e,t){this.edit=t.data}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-dialog-root"]],decls:1,vars:1,consts:()=>{let e;e=$localize`:␟ddfade2974824bcfebc98d94ccca4f02a52a5e65␟2965783636506266611:Root name`;let t;t=$localize`:␟766c66ad5cc981c531aaf3fe3a2a7a346ddc8d83␟8911059720204770105:Path`;let n;n=$localize`:␟1236bc5dce6e5821e26178cec6dc8d6994036e10␟1620750203195539416:Scan Strategy`;let o;o=$localize`:␟5fb13fb4a8447e59cdf05dc196ade39c02a6f8aa␟616064537937996961:Auto`;let p;p=$localize`:␟88f9a766c7fa0449925eb62ba3acba24e86312f3␟9062842966881378285:Artist/Album`;let h;h=$localize`:␟1120f45b24301f0a6a137929f189c3b51e4038ae␟5240807861057959896:Compilations`;let N;return N=$localize`:␟ec1bae0fe9a2b7e56d8f8473a9ffced030abc60b␟7565550399152163566:Audiobook`,[e,t,n,o,p,h,N,[1,"root-form-control"],["for","root-name"],["id","root-name","type","text",3,"ngModelChange","ngModelOptions","ngModel"],["for","root-path"],["id","root-path","type","text",3,"ngModelChange","ngModelOptions","ngModel"],["for","strategy"],["id","strategy"],[1,"select"],["type","radio","name","strategy",3,"ngModelChange","value","ngModel"]]},template:function(t,n){t&1&&u(0,fr,29,14,"form"),t&2&&M(n.edit?0:-1)},dependencies:[Ce,he,Sn,z,pe,W,ge],styles:["[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;line-height:1.3em;padding:5px;min-width:300px}[_nghost-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:5px}[_nghost-%COMP%]   .root-form-control[_ngcontent-%COMP%]{margin-bottom:8px;display:block}[_nghost-%COMP%]   .select[_ngcontent-%COMP%]{margin-right:15px;display:block;font-size:.8em;line-height:1.5em}"]})}return i})();var Or=(i,s)=>s.id;function ur(i,s){i&1&&(a(0,"span"),d(1,5),r())}function Sr(i,s){if(i&1&&(a(0,"span",19),v(1),d(2,6),L(),c(3,"br"),S(4),r()),i&2){let e=l().$implicit;_(4),T(e.status.error)}}function Er(i,s){i&1&&(v(0),d(1,7),L())}function hr(i,s){if(i&1&&(v(0),d(1,8),L(),c(2,"br"),S(3),Le(4,"date")),i&2){let e=l(2).$implicit;_(3),G("",pn(4,1,e.status.lastScan,"medium")," ")}}function Pr(i,s){if(i&1&&(a(0,"span"),u(1,Er,2,0,"ng-container")(2,hr,5,4),r()),i&2){let e=l().$implicit;_(),M(e.status.scanning?1:-1),_(),M(e.status.scanning?-1:2)}}function Tr(i,s){if(i&1){let e=P();a(0,"tr",18),O("dblclick",function(){let n=g(e).$implicit,o=l(2);return C(o.editRoot(n))})("keydown.enter",function(){let n=g(e).$implicit,o=l(2);return C(o.editRoot(n))}),a(1,"td",12),S(2),r(),a(3,"td",13),S(4),r(),a(5,"td",14),S(6),r(),a(7,"td",15),u(8,ur,2,0,"span")(9,Sr,5,1,"span",19)(10,Pr,3,2,"span"),r(),a(11,"td",16)(12,"div",20)(13,"button",21),O("click",function(){let n=g(e).$implicit,o=l(2);return C(o.refreshRoot(n))}),c(14,"i",22),r(),a(15,"button",23),O("click",function(){let n=g(e).$implicit,o=l(2);return C(o.refreshRootMeta(n))}),c(16,"i",24),r(),a(17,"button",25),O("click",function(){let n=g(e).$implicit,o=l(2);return C(o.editRoot(n))}),c(18,"i",26),r(),a(19,"button",27),O("click",function(){let n=g(e).$implicit,o=l(2);return C(o.deleteRoot(n))}),c(20,"i",28),r()()()()}if(i&2){let e=s.$implicit;_(2),T(e.name),_(2),T(e.path),_(2),T(e.strategy),_(2),M(e.status?-1:8),_(),M(e.status&&e.status.error?9:-1),_(),M(e.status&&!e.status.error?10:-1)}}function Nr(i,s){if(i&1&&(a(0,"table",10)(1,"tr",11)(2,"td",12),d(3,0),r(),a(4,"td",13),d(5,1),r(),a(6,"td",14),d(7,2),r(),a(8,"td",15),d(9,3),r(),a(10,"td",16),d(11,4),r()(),F(12,Tr,21,6,"tr",17,Or),r()),i&2){let e=l();_(12),U(e.roots)}}var jt=(()=>{class i{router;route;app;notify;dialogs;rootService;dialogOverlay;roots=[];constructor(e,t,n,o,p,h,N){this.router=e,this.route=t,this.app=n,this.notify=o,this.dialogs=p,this.rootService=h,this.dialogOverlay=N}refreshRoot(e){this.rootService.rescanRoot(e)}refreshRootMeta(e){this.rootService.refreshRootMeta(e)}editRoot(e){let t={root:e,name:e.name,path:e.path,strategy:e.strategy};this.dialogOverlay.open({title:"Edit Root",childComponent:tt,data:t,onOkBtn:()=>y(this,null,function*(){try{yield this.rootService.applyDialogRoot(t)}catch(n){return this.notify.error(n),Promise.reject(n)}}),onCancelBtn:()=>y(this,null,function*(){return Promise.resolve()})})}deleteRoot(e){this.dialogs.confirm("Delete Root","Do you want to the delete the root folder?",()=>{this.rootService.removeRoot(e)})}static \u0275fac=function(t){return new(t||i)(m(ae),m(Y),m(X),m(b),m(le),m(Ct),m(te))};static \u0275cmp=E({type:i,selectors:[["app-admin-root-list"]],inputs:{roots:"roots"},decls:2,vars:2,consts:()=>{let e;e=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`;let t;t=$localize`:␟766c66ad5cc981c531aaf3fe3a2a7a346ddc8d83␟8911059720204770105:Path`;let n;n=$localize`:␟05f5612d42b02be4d6d9e0a99585ae7e30a91780␟1617785425462022303:Strategy`;let o;o=$localize`:␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`;let p;p=$localize`:␟030b4423b92167200e39519599f9b863b4f7c62c␟3193976279273491157:Actions`;let h;h=$localize`:␟96613e9bbc5b95316e56df72d323766b54c4964e␟1020564942829121638:Rescan Root`;let N;N=$localize`:␟046a16565d1a08a0b5c251255c63e873f64c4f61␟1228008259662169871:Refresh Root Meta`;let k;k=$localize`:␟b9bf82da3451056e15340d89a4bcbf22fe45752b␟5936613369747810049:Edit Root`;let w;w=$localize`:␟b2fb8fb0d8eda1e65e01bfe666f42b8d4a853caa␟4674133541672494865:Delete Root`;let oe;oe=$localize`:␟ff46a8749717b5199040c5eed9fe1e4c3ecc5624␟3875750134082688342:Not scanned`;let ee;ee=$localize`:␟45dd81fcbde051783b05fe60c8d0bab8e7e097a9␟4606091236515013460:Error:`;let J;J=$localize`:␟4fc06dce435cdd51107afcf0ca206bbbba026b0c␟1188193109474903303:Working…`;let K;return K=$localize`:␟8ba85460d8f8515d276c46a9a1876a2ee143482e␟5743221119363707616:Last Change:`,[e,t,n,o,p,oe,ee,J,K,["name","Roots",3,"list"],["appFocusKeyList","",1,"roots"],[1,"root","heading"],[1,"title"],[1,"path"],[1,"strategy"],[1,"status"],[1,"actions"],["appFocusKeyListItem","",1,"root"],["appFocusKeyListItem","",1,"root",3,"dblclick","keydown.enter"],[1,"error"],[1,"action-buttons"],["title",h,"appClickStop","",3,"click"],["aria-hidden","true",1,"icon-rescan"],["title",N,"appClickStop","",3,"click"],["aria-hidden","true",1,"icon-broom"],["title",k,"appClickStop","",3,"click"],["aria-hidden","true",1,"icon-edit"],["title",w,"appClickStop","",3,"click"],["aria-hidden","true",1,"icon-remove"]]},template:function(t,n){t&1&&(c(0,"app-background-text-list",9),u(1,Nr,14,0,"table",10)),t&2&&(f("list",n.roots),_(),M(n.roots&&n.roots.length>0?1:-1))},dependencies:[_e,Fn,Re,De,gn],styles:["[_nghost-%COMP%]{width:100%;overflow:auto;display:block}[_nghost-%COMP%]   .roots[_ngcontent-%COMP%]{padding:15px;font-size:.9em;width:100%}[_nghost-%COMP%]   .root[_ngcontent-%COMP%]{height:60px;border-bottom:1px solid var(--control-border)}[_nghost-%COMP%]   .root[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px}[_nghost-%COMP%]   .root[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .root.selected[_ngcontent-%COMP%]{background-color:var(--background-active)}[_nghost-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--accent)}[_nghost-%COMP%]   .heading[_ngcontent-%COMP%]{height:40px;font-size:.9em}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{width:100px}[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px;flex:50%;margin:0;display:inline-block;color:var(--on-control);border:1px solid transparent}[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--on-control-active);border:1px solid var(--control-active)}"]})}return i})();var zt=(()=>{class i{router;route;app;notify;dialogs;rootService;dialogOverlay;roots;unsubscribe=new H;constructor(e,t,n,o,p,h,N){this.router=e,this.route=t,this.app=n,this.notify=o,this.dialogs=p,this.rootService=h,this.dialogOverlay=N}static getSortValue(e,t){switch(e){case"name":return t.name;case"path":return t.path;default:return}}ngOnInit(){this.rootService.rootsChange.pipe(D(this.unsubscribe)).subscribe(e=>{this.roots=(e||[]).sort((t,n)=>t.name.localeCompare(n.name))},e=>{this.notify.error(e)}),this.rootService.refreshRoots()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}refresh(){this.rootService.refreshRoots()}newRoot(){let e={name:"",path:"",strategy:pt.auto};this.dialogOverlay.open({title:"New Root",childComponent:tt,data:e,onOkBtn:()=>y(this,null,function*(){try{yield this.rootService.applyDialogRoot(e)}catch(t){return this.notify.error(t),Promise.reject(t)}}),onCancelBtn:()=>y(this,null,function*(){return Promise.resolve()})})}refreshRoots(){this.rootService.rescanRoots()}static \u0275fac=function(t){return new(t||i)(m(ae),m(Y),m(X),m(b),m(le),m(Ct),m(te))};static \u0275cmp=E({type:i,selectors:[["app-admin-root"]],decls:11,vars:1,consts:()=>{let e;e=$localize`:␟2f248600386a30236db69832ef4f910600ec943b␟7732274825567857654:Roots`;let t;t=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`;let n;n=$localize`:␟e13ccbc99042ea4870ebde4a4038672a4298adaf␟3093922570235029600:New Root…`;let o;return o=$localize`:␟c45553c26a8d0a2887def846473f015706ceb1c2␟4238145957469001439:Rescan all Roots`,[[1,"roots"],["section",e],[1,"actions"],["title",t,1,"button-on-control",3,"click"],[1,"icon-reload"],["title",n,1,"button-on-control",3,"click"],[1,"icon-plus"],["title",o,1,"button-on-control",3,"click"],[1,"icon-rescan"],[1,"content"],[3,"roots"]]},template:function(t,n){t&1&&(a(0,"div",0)(1,"app-view-header-slim",1)(2,"div",2)(3,"button",3),O("click",function(){return n.refresh()}),c(4,"i",4),r(),a(5,"button",5),O("click",function(){return n.newRoot()}),c(6,"i",6),r(),a(7,"button",7),O("click",function(){return n.refreshRoots()}),c(8,"i",8),r()()(),a(9,"div",9),c(10,"app-admin-root-list",10),r()()),t&2&&(_(10),f("roots",n.roots))},dependencies:[ve,jt],styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:auto;display:block}[_nghost-%COMP%]   .roots[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .roots[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}"]})}return i})();function Ir(i,s){i&1&&c(0,"app-loading")}function Rr(i,s){if(i&1){let e=P();a(0,"div")(1,"div",25),d(2,1),r(),a(3,"div",26)(4,"label")(5,"input",27),R("ngModelChange",function(n){g(e);let o=l();return I(o.settings.library.scanAtStart,n)||(o.settings.library.scanAtStart=n),C(n)}),O("ngModelChange",function(){g(e);let n=l();return C(n.onChange())}),r(),v(6),d(7,2),L(),r()()(),a(8,"div")(9,"div",25),d(10,3),r(),a(11,"div",26)(12,"label")(13,"input",28),R("ngModelChange",function(n){g(e);let o=l();return I(o.settings.externalServices.enabled,n)||(o.settings.externalServices.enabled=n),C(n)}),O("ngModelChange",function(){g(e);let n=l();return C(n.onChange())}),r(),v(14),d(15,4),L(),r()()(),a(16,"div")(17,"div",25),d(18,5),r(),a(19,"div",26)(20,"label",29),d(21,6),r(),a(22,"input",30),R("ngModelChange",function(n){g(e);let o=l();return I(o.settings.chat.maxMessages,n)||(o.settings.chat.maxMessages=n),C(n)}),O("ngModelChange",function(){g(e);let n=l();return C(n.onChange())}),r()(),a(23,"div",26)(24,"div",31)(25,"label",32),d(26,7),r(),a(27,"input",33),R("ngModelChange",function(n){g(e);let o=l();return I(o.settings.chat.maxAge.value,n)||(o.settings.chat.maxAge.value=n),C(n)}),O("ngModelChange",function(){g(e);let n=l();return C(n.onChange())}),r()(),a(28,"select",34),R("ngModelChange",function(n){g(e);let o=l();return I(o.settings.chat.maxAge.unit,n)||(o.settings.chat.maxAge.unit=n),C(n)}),O("ngModelChange",function(){g(e);let n=l();return C(n.onChange())}),a(29,"option",35),d(30,8),r(),a(31,"option",35),d(32,9),r(),a(33,"option",35),d(34,10),r(),a(35,"option",35),d(36,11),r(),a(37,"option",35),d(38,12),r(),a(39,"option",35),d(40,13),r(),a(41,"option",35),d(42,14),r(),a(43,"option",35),d(44,15),r(),a(45,"option",35),d(46,16),r(),a(47,"option",35),d(48,17),r()()()(),a(49,"div")(50,"div",25),d(51,18),r(),a(52,"div",26)(53,"label",36),d(54,19),r(),a(55,"textarea",37),R("ngModelChange",function(n){g(e);let o=l();return I(o.ignoreArticles,n)||(o.ignoreArticles=n),C(n)}),O("ngModelChange",function(){g(e);let n=l();return C(n.onChange())}),r()()()}if(i&2){let e=l();_(5),A("ngModel",e.settings.library.scanAtStart),_(8),A("ngModel",e.settings.externalServices.enabled),_(9),A("ngModel",e.settings.chat.maxMessages),_(5),A("ngModel",e.settings.chat.maxAge.value),_(),A("ngModel",e.settings.chat.maxAge.unit),_(),f("value","year"),_(2),f("value","years"),_(2),f("value","month"),_(2),f("value","months"),_(2),f("value","day"),_(2),f("value","days"),_(2),f("value","minute"),_(2),f("value","minutes"),_(2),f("value","second"),_(2),f("value","seconds"),_(8),A("ngModel",e.ignoreArticles)}}var Wt=(()=>{class i{app;jam;notify;settings;ignoreArticles="";constructor(e,t,n){this.app=e,this.jam=t,this.notify=n}ngOnInit(){this.refresh()}onChange(){}refresh(){this.jam.admin.settings().then(e=>{this.display(e)}).catch(e=>{this.notify.error(e)})}save(){let e=this.settings;e&&(e.index.ignoreArticles=this.ignoreArticles.split(`
`).map(t=>t.trim()).filter(t=>t.length>0),this.settings=void 0,this.jam.admin.settingsUpdate(e).then(()=>{this.notify.success("Settings updated"),this.settings=e}).catch(t=>{this.notify.error(t),this.settings=e}))}display(e){this.settings=e,this.ignoreArticles=e.index.ignoreArticles.join(`
`)}static \u0275fac=function(t){return new(t||i)(m(X),m($),m(b))};static \u0275cmp=E({type:i,selectors:[["app-admin-settings"]],decls:9,vars:2,consts:()=>{let e;e=$localize`:␟05cd06e631edc939a19ce22d609504b7f570723d␟8116289374261643531:Admin Settings`;let t;t=$localize`:␟52c9a103b812f258bcddc3d90a6e3f46871d25fe␟3768927257183755959:Save`;let n;n=$localize`:␟32e65202f89b91a77d0239f6387009535f18c004␟263473846992399517:Save Settings`;let o;o=$localize`:␟a0e8cc93872a4a7c74ebd4fd165751ad9bb55bc0␟7635936183047857561:Scan all Roots on Server Start`;let p;p=$localize`:␟e47c0675b7122c899137fd211528f276baefa9f3␟8918946905429464030:Allow Request to External Services`;let h;h=$localize`:␟f0f78754451cc705b4bc6aafa1b733b8219c383a␟4950570181842731349:Unit of Age`;let N;N=$localize`:␟905882c0fe09eee755ee6730ecf10e3b85cb6d9c␟2188854519574316630:Server`;let k;k=$localize`:␟a0e8cc93872a4a7c74ebd4fd165751ad9bb55bc0␟7635936183047857561:Scan all Roots on Server Start`;let w;w=$localize`:␟d813ec2b4e4dbb4f1a3f2596a34bb94b324dd64b␟5721522774620057803:External Services`;let oe;oe=$localize`:␟e47c0675b7122c899137fd211528f276baefa9f3␟8918946905429464030:Allow Request to External Services`;let ee;ee=$localize`:␟5adf337be1ad12c915ae18012f1bfa1f2ca4628b␟2299187798995800780:Chat`;let J;J=$localize`:␟52318b5079ce3bda0877053b52a550fbde67130a␟6088560830023353456:Maximum Number of Messages`;let K;K=$localize`:␟3391bd7ac225b712137a44a47653ba5912ba6e14␟845892119032308787:Maximum Age of Message`;let B;B=$localize`:␟752daa6baad0f8b4684b5c6775345b02bed6746e␟6479044529603381727:year`;let xe;xe=$localize`:␟e6bbe25e83a1e135e8e1d3e2ceddadb8529c45e9␟7658073495909471632:years`;let ye;ye=$localize`:␟2790ad2c08306240a508576e942fcfdf271f5a79␟7178101913251976451:month`;let Q;Q=$localize`:␟0fcdd5427274550312ee512bcd5b61ec077e0b5f␟6169402792391433667:months`;let We;We=$localize`:␟f64c76c7c7c71baddef3dc6a93e4394b8fdb69f4␟6320319413541466015:day`;let Ke;Ke=$localize`:␟fc34f2683c4cb526ed7095c5b1cdd66d672ba932␟7036284206110282007:days`;let q;q=$localize`:␟cff3ed26f8073fa2fe757d97880662060c39a1fa␟5405071297219936776:minute`;let en;en=$localize`:␟cd25ef11e2d8843297caf4202937023dc02d0ba8␟982745398054129955:minutes`;let tn;tn=$localize`:␟c40875920fa824ba8029cf99315da474625354f9␟7479425239631237410:second`;let nn;nn=$localize`:␟38bd5794dbe84081cfa7867e876245e1ddae93e7␟227749613426254192:seconds`;let on;on=$localize`:␟38484614389a6a41930e95b82c891780a99be9ce␟225617230946350058:Artist Index`;let rn;return rn=$localize`:␟cb8e8c81accbef16924070ba1c4e2e28f7bae96a␟3077366211526620849:Ignored Articles in Artist Names`,[n,N,k,w,oe,ee,J,K,B,xe,ye,Q,We,Ke,q,en,tn,nn,on,rn,[1,"settings"],["section",e],["title",t,1,"button-on-control",3,"click"],[1,"icon-floppy"],[1,"content"],[1,"section-title"],[1,"section-entry"],["type","checkbox","title",o,3,"ngModelChange","ngModel"],["type","checkbox","title",p,3,"ngModelChange","ngModel"],["for","max_messages"],["id","max_messages","type","number",3,"ngModelChange","ngModel"],[1,"chat-max-age"],["for","max_age"],["id","max_age","type","number",3,"ngModelChange","ngModel"],["title",h,3,"ngModelChange","ngModel"],[3,"value"],["for","ignore_articles"],["id","ignore_articles","rows","10","cols","20",3,"ngModelChange","ngModel"]]},template:function(t,n){t&1&&(a(0,"div",20)(1,"app-view-header-slim",21)(2,"button",22),O("click",function(){return n.save()}),c(3,"i",23),v(4),d(5,0),L(),r()(),a(6,"div",24),u(7,Ir,1,0,"app-loading")(8,Rr,56,16),r()()),t&2&&(_(7),M(n.settings?-1:7),_(),M(n.settings?8:-1))},dependencies:[ve,ne,st,dt,he,un,Ie,lt,z,W],styles:["[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;height:100%}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 0}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .chat-max-age[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-entry[_ngcontent-%COMP%]{padding-bottom:15px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;padding-bottom:3px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-top:-1px;display:inline-block;vertical-align:middle}"]})}return i})();var nt=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-admin-start"]],decls:4,vars:0,consts:()=>{let e;return e=$localize`:␟b7648e7aced164498aa843b5c4e8f2f1c36a7919␟7844706011418789951:Administration`,[[1,"start"],["section",e],[1,"content"]]},template:function(t,n){t&1&&(a(0,"div",0),c(1,"app-view-header-slim",1),a(2,"div",2),c(3,"app-admin-section-cards"),r()())},styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:auto;display:block}[_nghost-%COMP%]   .start[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}"]})}return i})();var je=()=>({standalone:!0});function vr(i,s){if(i&1){let e=P();a(0,"div")(1,"form")(2,"div",9)(3,"label",10),d(4,1),r(),a(5,"input",11),R("ngModelChange",function(n){g(e);let o=l();return I(o.edit.edit.name,n)||(o.edit.edit.name=n),C(n)}),r()(),a(6,"div",9)(7,"label",12),d(8,2),r(),a(9,"input",13),R("ngModelChange",function(n){g(e);let o=l();return I(o.edit.edit.email,n)||(o.edit.edit.email=n),C(n)}),r()(),a(10,"div",14),d(11,3),r(),a(12,"div",15)(13,"label")(14,"input",16),R("ngModelChange",function(n){g(e);let o=l();return I(o.edit.edit.roleAdmin,n)||(o.edit.edit.roleAdmin=n),C(n)}),r(),v(15),d(16,4),L(),r(),c(17,"br"),a(18,"label")(19,"input",17),R("ngModelChange",function(n){g(e);let o=l();return I(o.edit.edit.rolePodcast,n)||(o.edit.edit.rolePodcast=n),C(n)}),r(),v(20),d(21,5),L(),r(),c(22,"br"),a(23,"label")(24,"input",18),R("ngModelChange",function(n){g(e);let o=l();return I(o.edit.edit.roleStream,n)||(o.edit.edit.roleStream=n),C(n)}),r(),v(25),d(26,6),L(),r(),c(27,"br"),a(28,"label")(29,"input",19),R("ngModelChange",function(n){g(e);let o=l();return I(o.edit.edit.roleUpload,n)||(o.edit.edit.roleUpload=n),C(n)}),r(),v(30),d(31,7),L(),r()(),c(32,"hr"),a(33,"div",9),c(34,"input",20,0),a(36,"label",21),d(37,8),r(),a(38,"input",22),R("ngModelChange",function(n){g(e);let o=l();return I(o.edit.edit.password,n)||(o.edit.edit.password=n),C(n)}),r()()()()}if(i&2){let e=l();_(5),f("ngModelOptions",re(14,je)),A("ngModel",e.edit.edit.name),_(4),f("ngModelOptions",re(15,je)),A("ngModel",e.edit.edit.email),_(5),f("ngModelOptions",re(16,je)),A("ngModel",e.edit.edit.roleAdmin),_(5),f("ngModelOptions",re(17,je)),A("ngModel",e.edit.edit.rolePodcast),_(5),f("ngModelOptions",re(18,je)),A("ngModel",e.edit.edit.roleStream),_(5),f("ngModelOptions",re(19,je)),A("ngModel",e.edit.edit.roleUpload),_(9),f("ngModelOptions",re(20,je)),A("ngModel",e.edit.edit.password)}}var it=(()=>{class i{edit;dialogInit(e,t){this.edit=t.data}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-dialog-user"]],decls:1,vars:1,consts:()=>{let e;e=$localize`:␟15e872ff022f06bc8851c7d491bbdc4f97622005␟993404206539036614:Allow User to administrate`;let t;t=$localize`:␟92671fcb207c6fb5c91ef0ac4e61a1887af6e469␟7533742878403628379:Allow User to manage podcasts`;let n;n=$localize`:␟92671fcb207c6fb5c91ef0ac4e61a1887af6e469␟7533742878403628379:Allow User to manage podcasts`;let o;o=$localize`:␟c6a4ec52976cdbecfd1fa4f71a1d02244d341a8e␟9108342311725516140:Allow User to upload files`;let p;p=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`;let h;h=$localize`:␟244aae9346da82b0922506c2d2581373a15641cc␟4768749765465246664:Email`;let N;N=$localize`:␟9610487cbeb5796d34d8601b5ac0c0a65f9e1d19␟795890916060309463:Roles`;let k;k=$localize`:␟ca2283fc765b9f44b69f0175d685dc2443da6011␟2149300564474427551:Administrator`;let w;w=$localize`:␟f47ba1cd01c3dfd801fe7f66c3d28d698dcc0479␟1291164613191345064:Manage Podcasts`;let oe;oe=$localize`:␟c51fa359cb05f03964328ee48e72f6e3cba741ae␟9044866363915823667:Can Stream/Download`;let ee;ee=$localize`:␟1e9e022fd3deee0b16ced58938f6e2575909d144␟5645792403509214710:Can Upload`;let J;return J=$localize`:␟8df9ea304725ea9dc29de1e23673cbdf81f83d1b␟416924249936013759:Your Admin Password`,[["name",""],p,h,N,k,w,oe,ee,J,[1,"user-form-control"],["for","user-name"],["id","user-name","type","text","name","username",3,"ngModelChange","ngModelOptions","ngModel"],["for","user-mail"],["id","user-mail","type","email","name","mail",3,"ngModelChange","ngModelOptions","ngModel"],[1,"user-form-section"],[1,"user-form-roles"],["type","checkbox","title",e,3,"ngModelChange","ngModelOptions","ngModel"],["type","checkbox","title",t,3,"ngModelChange","ngModelOptions","ngModel"],["type","checkbox","title",n,3,"ngModelChange","ngModelOptions","ngModel"],["type","checkbox","title",o,3,"ngModelChange","ngModelOptions","ngModel"],["type","text","name","user","autocomplete","username",1,"dummy"],["for","admin-pass",1,"label-pass"],["id","admin-pass","name","pass","type","password","autocomplete","password",3,"ngModelChange","ngModelOptions","ngModel"]]},template:function(t,n){t&1&&u(0,vr,39,21,"div"),t&2&&M(n.edit?0:-1)},dependencies:[Ce,he,Ie,z,pe,W,ge],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{margin-left:15px;margin-right:15px}[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%], [_nghost-%COMP%]   input[type=email][_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{line-height:1.3em;padding:5px}[_nghost-%COMP%]   .label-pass[_ngcontent-%COMP%]{padding-right:15px;font-size:.8em}[_nghost-%COMP%]   .dummy[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .user-form-control[_ngcontent-%COMP%]{margin-bottom:8px;display:block}[_nghost-%COMP%]   .user-form-roles[_ngcontent-%COMP%]{margin-bottom:10px}[_nghost-%COMP%]   .user-form-roles[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:1.5em}"]})}return i})();var Kt=(()=>{class i{jam;notify;user;userAvatar;hasChanged=!1;unsubscribe=new H;constructor(e,t){this.jam=e,this.notify=t}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}dialogInit(e,t){this.user=t.data,this.setImageSource()}dialogResult(){return this.hasChanged}setImageSource(){this.userAvatar=this.user?`${this.jam.image.imageUrl({id:this.user.id,size:60,format:mt.webp})}?${jn()}`:void 0}onDropFile(e){e.preventDefault(),this.uploadFile(e.dataTransfer?.files)}onDragOverFile(e){e.stopPropagation(),e.preventDefault()}selectFile(e){this.uploadFile(e.target.files)}uploadFile(e){if(!e||e.length===0||!this.user)return;let t=e[0];this.jam.user.uploadUserImage({id:this.user.id},t).pipe(D(this.unsubscribe)).subscribe(n=>{n.type===Fe.UploadProgress||n instanceof _t&&(this.setImageSource(),this.hasChanged=!0)},n=>{this.setImageSource(),this.notify.error(n)},()=>{this.notify.success("Upload done")})}static \u0275fac=function(t){return new(t||i)(m($),m(b))};static \u0275cmp=E({type:i,selectors:[["app-dialog-avatar"]],decls:6,vars:1,consts:()=>{let e;e=$localize`:␟f6317c7ab4911427c272a59e837eed9a4cffae0d␟1388903157408573617:User Avatar`;let t;return t=$localize`:␟d833321cc90a0b0a52714c6d5ec97fbe6c7cfa5c␟2501989539336327542:Upload image`,[[1,"drop-zone",3,"drop","dragover"],[1,"root-form-control"],["alt",e,3,"src"],["type","file","placeholder",t,"accept",".png,.jpeg,.jpg",3,"change"]]},template:function(t,n){t&1&&(a(0,"div",0),O("drop",function(p){return n.onDropFile(p)})("dragover",function(p){return n.onDragOverFile(p)}),a(1,"form")(2,"div",1),c(3,"img",2),r()(),a(4,"form")(5,"input",3),O("change",function(p){return n.selectFile(p)}),r()()()),t&2&&(_(3),f("src",n.userAvatar,Oe))},dependencies:[Ce,pe,ge],styles:["[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]{margin:10px 20px;border-width:2px;border-style:dotted;border-color:var(--secondary)}[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .root-form-control[_ngcontent-%COMP%]{margin-bottom:8px;display:block;text-align:center}"]})}return i})();var ni=()=>({standalone:!0});function Lr(i,s){if(i&1){let e=P();a(0,"div",2)(1,"form"),c(2,"input",3),a(3,"label",4),d(4,0),r(),a(5,"input",5),R("ngModelChange",function(n){g(e);let o=l();return I(o.data.password,n)||(o.data.password=n),C(n)}),r()(),a(6,"form"),c(7,"input",6),a(8,"label",7),v(9),d(10,1),L(),a(11,"span"),S(12),r()(),a(13,"input",8),R("ngModelChange",function(n){g(e);let o=l();return I(o.data.newPassword,n)||(o.data.newPassword=n),C(n)}),r()()()}if(i&2){let e=l();_(5),f("ngModelOptions",re(5,ni)),A("ngModel",e.data.password),_(7),T(e.data.user.name),_(),f("ngModelOptions",re(6,ni)),A("ngModel",e.data.newPassword)}}var Bt=(()=>{class i{data;dialogInit(e,t){this.data=t.data}dialogResult(){return!0}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-dialog-user-pass"]],decls:1,vars:1,consts:()=>{let e;e=$localize`:␟8df9ea304725ea9dc29de1e23673cbdf81f83d1b␟416924249936013759:Your Admin Password`;let t;return t=$localize`:␟4775d5cec61d0551fdf66e8e117c3c5a92ff9d2c␟1578289766881417376:New Password for User`,[e,t,[1,"user-form-control"],["type","text","name","user","autocomplete","username",1,"dummy"],["for","admin-pass"],["id","admin-pass","name","pass","type","password","autocomplete","current-password",3,"ngModelChange","ngModelOptions","ngModel"],["type","text","name","new_name",1,"dummy"],["for","new-pass"],["id","new-pass","name","new_password","type","password","autocomplete","new-password",3,"ngModelChange","ngModelOptions","ngModel"]]},template:function(t,n){t&1&&u(0,Lr,14,7,"div",2),t&2&&M(n.data?0:-1)},dependencies:[Ce,he,z,pe,W,ge],styles:["[_nghost-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px}[_nghost-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}[_nghost-%COMP%]   .dummy[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{line-height:1.3em;padding:5px;width:100%;margin-bottom:15px}"]})}return i})();var br=(i,s)=>s.id;function xr(i,s){i&1&&c(0,"i",22)}function yr(i,s){i&1&&(a(0,"span",23),d(1,8),r())}function wr(i,s){i&1&&c(0,"i",22)}function kr(i,s){i&1&&(a(0,"span",23),d(1,9),r())}function $r(i,s){i&1&&c(0,"i",22)}function Gr(i,s){i&1&&(a(0,"span",23),d(1,10),r())}function Fr(i,s){i&1&&c(0,"i",22)}function Ur(i,s){i&1&&(a(0,"span",23),d(1,11),r())}function Vr(i,s){if(i&1){let e=P();a(0,"tr",20),O("dblclick",function(){let n=g(e).$implicit,o=l(2);return C(o.editUser(n))})("keydown.enter",function(){let n=g(e).$implicit,o=l(2);return C(o.editUser(n))}),a(1,"td",14),c(2,"app-coverart-image",21),r(),a(3,"td",15),S(4),r(),a(5,"td",16),S(6),r(),a(7,"td",17),u(8,xr,1,0,"i",22)(9,yr,2,0,"span",23),r(),a(10,"td",17),u(11,wr,1,0,"i",22)(12,kr,2,0,"span",23),r(),a(13,"td",17),u(14,$r,1,0,"i",22)(15,Gr,2,0,"span",23),r(),a(16,"td",17),u(17,Fr,1,0,"i",22)(18,Ur,2,0,"span",23),r(),a(19,"td",18)(20,"div",24)(21,"button",25),O("click",function(){let n=g(e).$implicit,o=l(2);return C(o.editUserAvatar(n))}),c(22,"i",26),r(),a(23,"button",27),O("click",function(){let n=g(e).$implicit,o=l(2);return C(o.setUserPassword(n))}),c(24,"i",28),r(),a(25,"button",29),O("click",function(){let n=g(e).$implicit,o=l(2);return C(o.editUser(n))}),c(26,"i",30),r(),a(27,"button",31),O("click",function(){let n=g(e).$implicit,o=l(2);return C(o.deleteUser(n))}),c(28,"i",32),r()()()()}if(i&2){let e=s.$implicit;_(2),f("coverArtObj",e)("alt",e.name)("size",28)("round",!0),_(2),T(e.name),_(2),T(e.email),_(2),M(e.roles.admin?8:-1),_(),M(e.roles.admin?9:-1),_(2),M(e.roles.podcast?11:-1),_(),M(e.roles.admin?12:-1),_(2),M(e.roles.upload?14:-1),_(),M(e.roles.admin?15:-1),_(2),M(e.roles.stream?17:-1),_(),M(e.roles.stream?18:-1)}}function Xr(i,s){if(i&1&&(a(0,"table",12)(1,"tr",13)(2,"td",14),d(3,0),r(),a(4,"td",15),d(5,1),r(),a(6,"td",16),d(7,2),r(),a(8,"td",17),d(9,3),r(),a(10,"td",17),d(11,4),r(),a(12,"td",17),d(13,5),r(),a(14,"td",17),d(15,6),r(),a(16,"td",18),d(17,7),r()(),F(18,Vr,29,14,"tr",19,br),r()),i&2){let e=l();_(18),U(e.users)}}var Qt=(()=>{class i{router;route;app;notify;dialogs;userService;dialogOverlay;users=[];unsubscribe=new H;constructor(e,t,n,o,p,h,N){this.router=e,this.route=t,this.app=n,this.notify=o,this.dialogs=p,this.userService=h,this.dialogOverlay=N}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}editUser(e){let t={user:e,edit:{password:"",name:e.name,email:e.email||"",roleAdmin:e.roles.admin,rolePodcast:e.roles.podcast,roleStream:e.roles.stream,roleUpload:e.roles.upload}};this.dialogOverlay.open({childComponent:it,title:"Edit User",data:t,onOkBtn:()=>y(this,null,function*(){try{yield this.userService.applyDialogUser(t),this.notify.success("User edited")}catch(n){return this.notify.error(n),Promise.reject(n)}}),onCancelBtn:()=>y(this,null,function*(){return Promise.resolve()})})}editUserAvatar(e){this.dialogOverlay.open({childComponent:Kt,title:"Edit User Avatar",data:e}).afterClosed().pipe(D(this.unsubscribe)).subscribe(()=>{this.userService.refreshUser(e.id)})}setUserPassword(e){let t={user:e,password:"",newPassword:""};this.dialogOverlay.open({childComponent:Bt,title:"Set User Password",data:t,onOkBtn:()=>y(this,null,function*(){try{yield this.userService.setPassword(e.id,t.password,t.newPassword),this.notify.success("Password changed")}catch(n){return this.notify.error(n),Promise.reject(n)}}),onCancelBtn:()=>y(this,null,function*(){return Promise.resolve()})})}deleteUser(e){this.dialogs.confirm("Delete User","Do you want to the delete the user?",()=>{this.userService.removeUser(e).then(()=>{this.notify.success("User deleted")}).catch(t=>{this.notify.error(t)})})}static \u0275fac=function(t){return new(t||i)(m(ae),m(Y),m(X),m(b),m(le),m(Mt),m(te))};static \u0275cmp=E({type:i,selectors:[["app-admin-user-list"]],inputs:{users:"users"},decls:1,vars:1,consts:()=>{let e;e=$localize`:␟cebb7f27b5028c62b4426da3bb3e3bd3f4a3443b␟6525109356951792180:Avatar`;let t;t=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`;let n;n=$localize`:␟244aae9346da82b0922506c2d2581373a15641cc␟4768749765465246664:Email`;let o;o=$localize`:␟ca2283fc765b9f44b69f0175d685dc2443da6011␟2149300564474427551:Administrator`;let p;p=$localize`:␟f47ba1cd01c3dfd801fe7f66c3d28d698dcc0479␟1291164613191345064:Manage Podcasts`;let h;h=$localize`:␟1e9e022fd3deee0b16ced58938f6e2575909d144␟5645792403509214710:Can Upload`;let N;N=$localize`:␟b928aec28578d70da7964d4344fd08467bedeaae␟9217475344633494369:Can Stream`;let k;k=$localize`:␟030b4423b92167200e39519599f9b863b4f7c62c␟3193976279273491157:Actions`;let w;w=$localize`:␟2258a8b85cfda587286e36f3236420a15bf9ba29␟5503535973615409737:Change Avatar`;let oe;oe=$localize`:␟4c27b7f16a6fc9c3f0ebd4a29a2b090ef72af63b␟6500919799852395758:Set Password`;let ee;ee=$localize`:␟2aa7c4367baad2832cb32bc21ba3b01ef2f278b9␟1211169124143348857:Edit User`;let J;J=$localize`:␟3c32a07710e402b2c056bd346e7c42f6015334a6␟4839682406703705780:Delete User`;let K;K=$localize`:␟ef9d1d5acce5a10059867bc0883438ebfdbef96f␟6284119778725231733:Is Admin`;let B;B=$localize`:␟8692ede58c19b2905ab9a276b61f8dc9d57e56c9␟1051345811582274933:Can manage podcast`;let xe;xe=$localize`:␟f51031955310593a68faf0820901072da7927c40␟970639177109356572:Can upload`;let ye;return ye=$localize`:␟33a9303f180a8e10778a031df3d0178786fd9280␟1869799973955909088:Can stream`,[e,t,n,o,p,h,N,k,K,B,xe,ye,["appFocusKeyList","",1,"users"],[1,"user","heading"],[1,"avatar"],[1,"title"],[1,"email"],[1,"role"],[1,"actions"],["appFocusKeyListItem","",1,"user"],["appFocusKeyListItem","",1,"user",3,"dblclick","keydown.enter"],[3,"coverArtObj","alt","size","round"],["aria-hidden","true",1,"icon-checkmark"],[1,"visually-hidden"],[1,"action-buttons"],["title",w,3,"click"],["aria-hidden","true",1,"icon-picture"],["title",oe,3,"click"],["aria-hidden","true",1,"icon-key"],["title",ee,3,"click"],["aria-hidden","true",1,"icon-edit"],["title",J,3,"click"],["aria-hidden","true",1,"icon-remove"]]},template:function(t,n){t&1&&u(0,Xr,20,0,"table",12),t&2&&M(n.users&&n.users.length>0?0:-1)},dependencies:[wn,Re,De],styles:["[_nghost-%COMP%]{width:100%;overflow:auto;display:block}[_nghost-%COMP%]   .users[_ngcontent-%COMP%]{padding:15px;font-size:.9em;width:100%}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]{height:60px;border-bottom:1px solid var(--control-border)}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .user.selected[_ngcontent-%COMP%]{background-color:var(--background-active)}[_nghost-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:.9em;height:40px}[_nghost-%COMP%]   .icon-checkmark[_ngcontent-%COMP%]{color:var(--primary)}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{width:100px}[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px;flex:50%;margin:0;display:inline-block;color:var(--on-control);border:1px solid transparent}[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--on-control-active);border:1px solid var(--control-active)}"]})}return i})();var qt=(()=>{class i{app;dialogs;jam;notify;userService;dialogOverlay;users;unsubscribe=new H;constructor(e,t,n,o,p,h){this.app=e,this.dialogs=t,this.jam=n,this.notify=o,this.userService=p,this.dialogOverlay=h}getSortValue(e,t){switch(e){case"name":return t.name;case"email":return t.email;case"roleAdmin":return t.roles.admin?1:0;case"rolePodcast":return t.roles.podcast?1:0;case"roleUpload":return t.roles.upload?1:0;case"roleStream":return t.roles.stream?1:0;default:return}}ngOnInit(){this.userService.usersChange.pipe(D(this.unsubscribe)).subscribe(e=>{this.users=(e||[]).sort((t,n)=>t.name.localeCompare(n.name))},e=>{this.notify.error(e)}),this.userService.refreshUsers()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}refresh(){this.userService.refreshUsers()}newUser(){let e={edit:{password:"",name:"",email:"",roleAdmin:!1,rolePodcast:!1,roleStream:!0,roleUpload:!1}};this.dialogOverlay.open({title:"New User",childComponent:it,data:e,onOkBtn:()=>y(this,null,function*(){try{yield this.userService.applyDialogUser(e),this.notify.success("User created")}catch(t){return this.notify.error(t),Promise.reject(t)}}),onCancelBtn:()=>y(this,null,function*(){return Promise.resolve()})})}static \u0275fac=function(t){return new(t||i)(m(X),m(le),m($),m(b),m(Mt),m(te))};static \u0275cmp=E({type:i,selectors:[["app-admin-users"]],decls:9,vars:1,consts:()=>{let e;e=$localize`:␟4d13a9cd5ed3dcee0eab22cb25198d43886942be␟4555457172864212828:Users`;let t;t=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`;let n;return n=$localize`:␟cd26ab47241f58b1af5990ff41f7f5dd0b9d297c␟4125725649492874522:New User…`,[[1,"users"],["section",e],[1,"actions"],["title",t,1,"button-on-control",3,"click"],[1,"icon-reload"],["title",n,1,"button-on-control",3,"click"],[1,"icon-plus"],[1,"content"],[3,"users"]]},template:function(t,n){t&1&&(a(0,"div",0)(1,"app-view-header-slim",1)(2,"div",2)(3,"button",3),O("click",function(){return n.refresh()}),c(4,"i",4),r(),a(5,"button",5),O("click",function(){return n.newUser()}),c(6,"i",6),r()()(),a(7,"div",7),c(8,"app-admin-user-list",8),r()()),t&2&&(_(8),f("users",n.users))},dependencies:[ve,Qt],styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:auto;display:block}[_nghost-%COMP%]   .users[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .users[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}[_nghost-%COMP%]   .users[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .users[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .users[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}"]})}return i})();var ot=[{path:"",component:Et,children:[{path:"",pathMatch:"full",component:nt,data:{name:"Admin"}},{path:"settings",component:Wt,data:{name:"Admin Settings"}},{path:"root",component:zt,data:{name:"Roots",icon:"icon-root"}},{path:"user",component:qt,data:{name:"Users",icon:"icon-user"}},{path:"folder",redirectTo:"folder/"},{path:"folder/:id",component:Dt,data:{id:"folder",name:"Folders",icon:"icon-folder",link:"folder"},children:[{path:"overview",component:Ut},{path:"health",component:Gt},{path:"sub-folders",component:xt},{path:"tracks",component:Xt},{path:"tracks-health",component:Vt},{path:"tags",loadChildren:()=>y(void 0,null,function*(){return import("./chunk-LJ2QVLC2.js").then(i=>i.TagEditorModule)})}]},{path:"radar",component:Ht,data:{name:"Health Radar",icon:"icon-health"}}]}],ii=Ln.forChild(ot);function jr(i,s){if(i&1&&S(0),i&2){let e=l(2);G(" (",e.folderService.current.count,") ")}}function zr(i,s){if(i&1&&(a(0,"div",6)(1,"span",4),d(2,1),r(),S(3),r()),i&2){let e=l(2);_(3),G(" ",e.folderService.queue.length," ")}}function Wr(i,s){if(i&1&&(a(0,"div",2)(1,"div",3)(2,"span",4),d(3,0),r(),c(4,"i",5),S(5),u(6,jr,1,1),r(),u(7,zr,4,1,"div",6),r()),i&2){let e=l();_(5),G(" ",e.folderService.current.title," "),_(),M(e.folderService.current.count>1?6:-1),_(),M(e.folderService.queue.length>0?7:-1)}}var Jt=(()=>{class i{folderService;constructor(e){this.folderService=e}static \u0275fac=function(t){return new(t||i)(m(V))};static \u0275cmp=E({type:i,selectors:[["app-admin-queue-requests"]],decls:1,vars:1,consts:()=>{let e;e=$localize`:␟7fdc8522031bbeba05f9d0a020e0b18002243f03␟7531465938860815822:Current:`;let t;return t=$localize`:␟417f965faad1daa7b24b82f6a6940676e9caf278␟1235332800071827748:Other requests in queue:`,[e,t,[1,"queue-overlay"],[1,"current"],[1,"label"],[1,"icon-spin","icon-spinner"],[1,"other"]]},template:function(t,n){t&1&&u(0,Wr,8,3,"div",2),t&2&&M(n.folderService.current?0:-1)},styles:["[_nghost-%COMP%]   .queue-overlay[_ngcontent-%COMP%]{position:fixed;right:16px;bottom:16px;padding:15px;background-color:var(--control);color:var(--on-control);border:1px solid var(--control-border);z-index:1000}[_nghost-%COMP%]   .queue-overlay[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-transform:uppercase;font-size:.8em;letter-spacing:1px;color:var(--on-control-ambient)}[_nghost-%COMP%]   .queue-overlay[_ngcontent-%COMP%]   .other[_ngcontent-%COMP%]{border-top:1px solid var(--background-border)}"]})}return i})();var Yt=(()=>{class i{sections=[];constructor(){let t=(ot[0].children||[]).filter(n=>n.path&&n.path.length>0&&n.data?.name).map(n=>({link:`/admin/${n.data&&n.data.link?n.data.link:n.path}`,name:n.data?n.data.name:"",icon:n.data&&n.data.icon?n.data.icon:"icon-admin"}));this.sections=[{name:"Administration",entries:t}]}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-admin-sidebar"]],decls:1,vars:1,consts:[[3,"sections"]],template:function(t,n){t&1&&c(0,"app-sidebar",0),t&2&&f("sections",n.sections)},dependencies:[bn],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block}"]})}return i})();var Qr=(i,s)=>s.id,qr=i=>["/admin",i];function Jr(i,s){if(i&1&&(a(0,"div",0)(1,"div",1),c(2,"app-iconart-image",2),r(),a(3,"div",3)(4,"div",4),S(5),r()()()),i&2){let e=s.$implicit;f("routerLink",ie(3,qr,e.id)),_(2),f("icon",e.icon),_(3),T(e.text)}}var Zt=(()=>{class i{sections=[];constructor(){let e=ot[0];this.sections=(e.children||[]).filter(t=>t.path&&t.path.length>0&&t.data?.name).map(t=>({id:t.data&&t.data.link?t.data.link:t.path,text:t.data?t.data.name:"",icon:t.data&&t.data.icon?t.data.icon:"icon-admin"}))}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=E({type:i,selectors:[["app-admin-section-cards"]],decls:2,vars:0,consts:[[1,"section-card","no-hover",3,"routerLink"],[1,"image"],[3,"icon"],[1,"footer"],[1,"footer-content"]],template:function(t,n){t&1&&F(0,Jr,6,5,"div",0,Qr),t&2&&U(n.sections)},dependencies:[$n,Pe],styles:['[_nghost-%COMP%]{display:flex;flex-flow:row wrap}@media (max-width: 768px){[_nghost-%COMP%]{justify-content:space-around}}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]{margin:15px;width:calc(25% - 30px);position:relative;overflow:hidden;display:flex;cursor:pointer;tab-index:0}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]:before{content:"";display:block;margin-top:100%}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .fav[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{position:absolute;top:1px;padding:5px;transform:translateY(-31px);transition:transform .3s;-webkit-user-select:none;user-select:none;border-bottom-left-radius:3px}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);visibility:hidden;opacity:0;transition-property:opacity,visibility;transition-duration:.3s}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{left:50%;transform:translate(-50%,-31px);font-size:.8em}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .fav[_ngcontent-%COMP%]{left:1px;cursor:pointer}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{right:3px;cursor:pointer}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{padding:10px;position:absolute;bottom:1px;left:1px;right:1px;overflow:hidden;height:auto;transition:all .3s}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-buttons[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]:hover   .fav[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]:hover   .more[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]:focus-within   .fav[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]:focus-within   .more[_ngcontent-%COMP%]{transform:translateY(0)}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]:hover   .date[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]:focus-within   .date[_ngcontent-%COMP%]{transform:translate(-50%)}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]:hover   .play[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]:focus-within   .play[_ngcontent-%COMP%]{visibility:unset;opacity:1}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .fav[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{background-color:var(--background-transparent);color:var(--on-background-highlight)}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .fav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .fav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background)}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .fav[_ngcontent-%COMP%]:hover{color:var(--on-background)}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .footer-subline[_ngcontent-%COMP%]{display:block;font-size:.8em}@media (max-width: 1600px){[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]{width:calc(25% - 30px)}}@media (max-width: 1200px){[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]{width:calc(33.3333333333% - 30px)}}@media (max-width: 522px){[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]{width:calc(50% - 30px)}}@media (max-width: 400px){[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]{margin:10px}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{font-size:.8em}}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{min-height:135px;min-width:135px;display:flex;align-items:center;justify-content:center}']})}return i})();var Dd=(()=>{class i{static \u0275fac=function(t){return new(t||i)};static \u0275mod=_n({type:i});static \u0275inj=an({imports:[Cn,Xn,hn,fn,An,Nn,Hn,ii,St]})}return i})();It(Et,function(){return[ut,ft,Jt,Yt]},[]);It(nt,function(){return[ve,Zt]},[]);export{Dd as AdminModule};
