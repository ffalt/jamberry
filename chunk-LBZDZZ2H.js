import{D as a,H as o,Zc as i,cd as c,f as s,od as h}from"./chunk-2CUFB47X.js";var u=(()=>{class t{router=o(h);auth=o(i);notify=o(c);canActivate(r,e){return s(this,null,function*(){if(this.auth.checked)return this.auth.isLoggedIn();this.auth.loaded||(yield this.auth.load());try{yield this.auth.check()}catch(n){return this.notify.error(n),!1}return this.auth.auth&&this.auth.auth?.version!==i.version&&this.notify.info(`The Server API version ${this.auth.auth?.version} is different to the Client version ${i.version}. Errors may happen. Good luck!`),this.auth.isLoggedIn()?!0:(this.router.navigate(["/login"],{queryParams:{returnUrl:e.url}}).catch(n=>{console.error(n)}),!1)})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=a({token:t,factory:t.\u0275fac})}return t})();var f=(()=>{class t{canDeactivate(r){return r.canDeactivate()?!0:confirm("WARNING: You have unsaved changes. Press Cancel to go back and save these changes, or OK to lose these changes.")}static \u0275fac=function(e){return new(e||t)};static \u0275prov=a({token:t,factory:t.\u0275fac})}return t})();var j=[u,f];export{u as a,j as b};
