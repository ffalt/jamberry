import{c as Z}from"./chunk-XP5ERWDG.js";import{a as q}from"./chunk-PIBSONJI.js";import"./chunk-VEKI7BN2.js";import"./chunk-SDBHHTA3.js";import{c as X,d as Y,g as z,k as V,l as U,m as F,o as W}from"./chunk-Y5Z5ITNC.js";import"./chunk-BNP52TDG.js";import"./chunk-F6BYEP4R.js";import"./chunk-VP6KNDS4.js";import{a as Q}from"./chunk-W76RWN3H.js";import{a as K}from"./chunk-PZTZCA44.js";import{G as J}from"./chunk-ZVKVGF76.js";import"./chunk-T6GM3CFW.js";import{$d as j,Ac as G,Fc as k,Hb as l,Ib as O,Kb as R,Lb as N,Mb as b,Nb as M,Ob as a,Pb as r,Qb as S,Ub as x,Vb as I,Ya as B,_b as H,ab as C,ac as g,dc as A,fc as E,ia as p,na as u,nb as D,oa as T,tc as m,uc as f,yc as L,zc as v}from"./chunk-H2EXZDP6.js";var tt=()=>({standalone:!0});function nt(e,s){e&1&&S(0,"app-loading",13),e&2&&M("time",0)}function et(e,s){e&1&&(a(0,"div"),g(1,2),r())}function ot(e,s){if(e&1&&S(0,"img",17),e&2){let o=E().$implicit;M("src",o.logoUrl,B)}}function ct(e,s){if(e&1&&(a(0,"option",24),m(1),r()),e&2){let o=s.$implicit;M("ngValue",o),C(),f(o.displayURL)}}function _t(e,s){if(e&1){let o=H();a(0,"div",15)(1,"div",16),l(2,ot,1,1,"img",17),r(),a(3,"div",18)(4,"div",19),g(5,3),r(),a(6,"div",20),m(7),r(),a(8,"div",21),m(9),r(),a(10,"div",22)(11,"select",23),G("ngModelChange",function(n){let t=u(o).$implicit;return v(t.selected,n)||(t.selected=n),T(n)}),N(12,ct,2,2,"option",24,R),r(),a(14,"button",25),A("click",function(){let n=u(o).$implicit,t=E(2);return T(t.subscribe(n.selected))}),S(15,"i",26),x(16),g(17,4),I(),r()()()()}if(e&2){let o=s.$implicit;C(2),O(o.logoUrl?2:-1),C(5),f(o.name),C(2),f(o.description),C(2),L("ngModel",o.selected),C(),b(o.pods)}}function at(e,s){if(e&1&&(a(0,"div",14),l(1,et,2,0,"div"),a(2,"div"),N(3,_t,18,4,"div",15,R),r()()),e&2){let o=E();C(),O(o.podcasts.length===0?1:-1),C(2),b(o.podcasts)}}var ht=(()=>{let s=class s{constructor(){this.app=p(Z),this.jam=p(j),this.navig=p(Q),this.searchValue="",this.isSearching=!1,this.notify=p(J)}subscribe(c){c&&this.jam.podcast.create({url:c.url.toString()}).then(()=>{this.notify.success("Podcast subscribed")}).catch(n=>{this.notify.error(n)})}search(c){this.podcasts=void 0,c&&c.length>0&&(this.isSearching=!0,this.jam.podcast.discover({query:c}).then(n=>{this.searchValue===c&&(this.buildSearchResults(n),this.isSearching=!1)}).catch(n=>{this.isSearching=!1,this.notify.error(n)}))}buildSearchResults(c){let n={};for(let t of c){let _=new URL(t.url);if(!["feedburner.com","www.feedburner.com"].includes(_.hostname))return;let i=n[t.title];i||(i={name:t.title,logoUrl:t.scaled_logo_url,description:t.description,pods:[]},n[t.title]=i),(!i.description||i.description.length===0)&&(i.description=t.description),(!i.logoUrl||i.logoUrl.length===0)&&(i.logoUrl=t.scaled_logo_url),i.pods.some(h=>h.url.toString()===_.toString())||i.pods.push({result:t,url:_,displayURL:_.toString()})}this.podcasts=Object.keys(n).map(t=>{let _=n[t];return _.selected=_.pods.find(d=>d.url.pathname.includes("mp3")),_.selected??=_.pods[0],_})}};s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=D({type:s,selectors:[["app-page-podcast-search"]],decls:13,vars:5,consts:()=>{let c;c=$localize`:␟bcf0cf926b1e905efa525be7b6c2882e30336d84␟1357676316058684153:icon-podcast`;let n;n=$localize`:␟2a7eeaf2b2848fdb9ee7413abb25112c5bbdbaf9␟4930940035022738997:New Podcasts`;let t;t=$localize`:␟3139a6aecd219e16271f27a9ea62a62440ade0e6␟5108862386290980810:Search Podcast or paste feed url`;let _;_=$localize`:␟596d65263456e81ac98fb7f8d616bf01adfc17a8␟7933384538978087776:Powered by`;let d;d=$localize`:␟5793742019cf278a58428fa27054e1ea7993113d␟1865604754847434933:gpodder.net`;let i;i=$localize`:␟850f8ce88f2d1eedf4965af96f6c4e03e86220b4␟8161264306826042917:No Results`;let h;h=$localize`:␟7f37d036d722d1c188cc50c7343f1193682df80a␟6294189837610631338:Podcast Image`;let y;y=$localize`:␟70b989779eb53e6ff14d810336677dbc3bde4202␟7944777648309302794:Feed URL`;let $;$=$localize`:␟ca427f6920d12a392d55ee77947267c699197915␟2605658322936929408:Podcast`;let w;return w=$localize`:␟d0336848b0c375a1c25ba369b3481ee383217a4f␟1144407473317535723:Subscribe`,[_,d,i,$,w,[1,"search-podcasts"],["icon",c,"section",n],[1,"input-box"],["name","podcast-search","placeholder",t,"type","text",3,"keydown.enter","ngModelChange","ngModel","ngModelOptions"],[1,"icon-search",3,"click"],[1,"reference"],["href","https://gpodder.net","rel","noopener","target","_blank"],[1,"content"],[3,"time"],[1,"podcasts"],[1,"search-podcast-plate"],[1,"art"],["alt",h,3,"src"],[1,"meta"],[1,"type"],[1,"name"],[1,"description"],[1,"actions"],["title",y,3,"ngModelChange","ngModel"],[3,"ngValue"],[1,"button-on-background",3,"click"],[1,"icon-list-add"]]},template:function(n,t){n&1&&(a(0,"div",5)(1,"app-view-header-icon-section",6)(2,"div",7)(3,"input",8),A("keydown.enter",function(){return t.search(t.searchValue)}),G("ngModelChange",function(d){return v(t.searchValue,d)||(t.searchValue=d),d}),r(),a(4,"i",9),A("click",function(){return t.search(t.searchValue)}),r()(),a(5,"div",10),x(6),g(7,0),I(),a(8,"a",11),g(9,1),r()()(),a(10,"div",12),l(11,nt,1,1,"app-loading",13),l(12,at,5,1,"div",14),r()()),n&2&&(C(3),L("ngModel",t.searchValue),M("ngModelOptions",k(4,tt)),C(8),O(t.isSearching?11:-1),C(),O(t.podcasts?12:-1))},dependencies:[W,U,F,X,V,Y,z,K,q],styles:["[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{border-radius:3px;padding-left:3px;padding-right:3px;align-items:center;background-color:var(--input);border:1px solid var(--input-border)}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;min-height:28px;background-color:var(--input);color:var(--on-input)}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--on-input);font-size:14px;cursor:pointer}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:var(--on-input-hover)}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{width:100%;display:flex;min-height:30px}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{max-width:calc(100% - 24px)}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .reference[_ngcontent-%COMP%]{padding-top:5px;font-size:.8em}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]{width:100%;margin-top:30px}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-top:15px;margin-bottom:15px;display:block;max-width:100%}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]{border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:var(--background-border);padding:15px;display:flex;flex-flow:row wrap}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .art[_ngcontent-%COMP%]{min-width:64px;min-height:64px;max-width:64px;display:block;cursor:pointer}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .art[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:64px;height:auto}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{margin-left:15px;display:flex;flex-flow:column wrap;position:relative;width:calc(100% - 120px)}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;text-overflow:ellipsis;overflow:hidden}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{text-transform:uppercase}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%], [_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .year[_ngcontent-%COMP%], [_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .state[_ngcontent-%COMP%]{letter-spacing:1px;font-size:.8em}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:24px;font-weight:100;color:var(--on-background-highlight)}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background)}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:14px;line-height:1.2em}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:auto}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:5px;margin-right:5px;height:27px;font-weight:500;padding:1px 15px 0}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:scale(1.3);transform-origin:center}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;border:1px solid transparent;padding:4px 9px 7px;border-radius:50%;display:none;position:absolute;right:1px;bottom:0}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--control-hover);color:var(--on-background-hover)}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]:hover   .actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]:hover   app-fav-icon[_ngcontent-%COMP%]{display:inline}@media (max-width: 400px){[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]{padding-left:0;padding-right:0}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   .search-podcasts[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .podcasts[_ngcontent-%COMP%]   .search-podcast-plate[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:16px}}"]});let e=s;return e})();export{ht as PodcastSearchPageComponent};
