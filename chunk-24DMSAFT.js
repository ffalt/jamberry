var e=class{constructor(l){this.pollFn=l,this.currentPolling=new Map}poll(l,t=!1){this.currentPolling.get(l.id)||(this.currentPolling.set(l.id,!0),t?this.pollIt(l,()=>{this.currentPolling.delete(l.id)}):this.doPoll(l,()=>{this.currentPolling.delete(l.id)}))}pollIt(l,t){this.pollFn(l,i=>{i?this.doPoll(l,t):t()})}doPoll(l,t){setTimeout(()=>{this.pollFn(l,i=>{i?this.doPoll(l,t):t()})},2e3)}};export{e as a};
