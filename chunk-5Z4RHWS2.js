import{a as _e}from"./chunk-GPI46BNS.js";import{b as j,c as U,d as q,g as F,i as H,k as J,l as K,m as Q,o as Y}from"./chunk-SCY3FOMN.js";import{a as te}from"./chunk-ITVL4IJL.js";import{G as ne}from"./chunk-3LOKQP2Q.js";import{k as ee}from"./chunk-MFAW4R34.js";import{$b as E,Db as z,Eb as W,Kb as _,Lb as t,Mb as c,Qb as C,Rb as A,Wb as k,Wd as Z,Yb as N,_a as M,bc as s,fa as I,ka as l,la as T,nb as V,uc as g,vc as d,wc as r}from"./chunk-XLNNDSL4.js";function oe(a,ie){if(a&1){let n=k();_(0,"div")(1,"div",25),N(2,1),t(),_(3,"div",26)(4,"label")(5,"input",27),r("ngModelChange",function(e){l(n);let S=s();return d(S.settings.library.scanAtStart,e)||(S.settings.library.scanAtStart=e),T(e)}),E("ngModelChange",function(){l(n);let e=s();return T(e.onChange())}),t(),C(6),N(7,2),A(),t()()(),_(8,"div")(9,"div",25),N(10,3),t(),_(11,"div",26)(12,"label")(13,"input",27),r("ngModelChange",function(e){l(n);let S=s();return d(S.settings.externalServices.enabled,e)||(S.settings.externalServices.enabled=e),T(e)}),E("ngModelChange",function(){l(n);let e=s();return T(e.onChange())}),t(),C(14),N(15,4),A(),t()()(),_(16,"div")(17,"div",25),N(18,5),t(),_(19,"div",26)(20,"label",28),N(21,6),t(),_(22,"input",29),r("ngModelChange",function(e){l(n);let S=s();return d(S.settings.chat.maxMessages,e)||(S.settings.chat.maxMessages=e),T(e)}),E("ngModelChange",function(){l(n);let e=s();return T(e.onChange())}),t()(),_(23,"div",26)(24,"div",30)(25,"label",31),N(26,7),t(),_(27,"input",32),r("ngModelChange",function(e){l(n);let S=s();return d(S.settings.chat.maxAge.value,e)||(S.settings.chat.maxAge.value=e),T(e)}),E("ngModelChange",function(){l(n);let e=s();return T(e.onChange())}),t()(),_(28,"select",33),r("ngModelChange",function(e){l(n);let S=s();return d(S.settings.chat.maxAge.unit,e)||(S.settings.chat.maxAge.unit=e),T(e)}),E("ngModelChange",function(){l(n);let e=s();return T(e.onChange())}),_(29,"option",34),N(30,8),t(),_(31,"option",35),N(32,9),t(),_(33,"option",36),N(34,10),t(),_(35,"option",37),N(36,11),t(),_(37,"option",38),N(38,12),t(),_(39,"option",39),N(40,13),t(),_(41,"option",40),N(42,14),t(),_(43,"option",41),N(44,15),t(),_(45,"option",42),N(46,16),t(),_(47,"option",43),N(48,17),t()()()(),_(49,"div")(50,"div",25),N(51,18),t(),_(52,"div",26)(53,"label",44),N(54,19),t(),_(55,"textarea",45),r("ngModelChange",function(e){l(n);let S=s();return d(S.ignoreArticles,e)||(S.ignoreArticles=e),T(e)}),E("ngModelChange",function(){l(n);let e=s();return T(e.onChange())}),t()()()}if(a&2){let n=s();M(5),g("ngModel",n.settings.library.scanAtStart),M(8),g("ngModel",n.settings.externalServices.enabled),M(9),g("ngModel",n.settings.chat.maxMessages),M(5),g("ngModel",n.settings.chat.maxAge.value),M(),g("ngModel",n.settings.chat.maxAge.unit),M(27),g("ngModel",n.ignoreArticles)}}function Se(a,ie){a&1&&c(0,"app-loading")}var Ce=(()=>{class a{constructor(){this.ignoreArticles="",this.jam=I(Z),this.notify=I(ne)}ngOnInit(){this.refresh()}onChange(){}refresh(){this.jam.admin.settings().then(n=>{this.display(n)}).catch(n=>{this.notify.error(n)})}save(){let n=this.settings;n&&(n.index.ignoreArticles=this.ignoreArticles.split(`
`).map(i=>i.trim()).filter(i=>i.length>0),this.settings=void 0,this.jam.admin.settingsUpdate(n).then(()=>{this.notify.success("Settings updated"),this.settings=n}).catch(i=>{this.notify.error(i),this.settings=n}))}display(n){this.settings=n,this.ignoreArticles=n.index.ignoreArticles.join(`
`)}static{this.\u0275fac=function(i){return new(i||a)}}static{this.\u0275cmp=V({type:a,selectors:[["app-admin-settings"]],decls:9,vars:1,consts:()=>{let n;n=$localize`:␟05cd06e631edc939a19ce22d609504b7f570723d␟8116289374261643531:Admin Settings`;let i;i=$localize`:␟52c9a103b812f258bcddc3d90a6e3f46871d25fe␟3768927257183755959:Save`;let e;e=$localize`:␟32e65202f89b91a77d0239f6387009535f18c004␟263473846992399517:Save Settings`;let S;S=$localize`:␟f0f78754451cc705b4bc6aafa1b733b8219c383a␟4950570181842731349:Unit of Age`;let P;P=$localize`:␟905882c0fe09eee755ee6730ecf10e3b85cb6d9c␟2188854519574316630:Server`;let O;O=$localize`:␟a0e8cc93872a4a7c74ebd4fd165751ad9bb55bc0␟7635936183047857561:Scan all Roots on Server Start`;let m;m=$localize`:␟d813ec2b4e4dbb4f1a3f2596a34bb94b324dd64b␟5721522774620057803:External Services`;let G;G=$localize`:␟e47c0675b7122c899137fd211528f276baefa9f3␟8918946905429464030:Allow Request to External Services`;let f;f=$localize`:␟5adf337be1ad12c915ae18012f1bfa1f2ca4628b␟2299187798995800780:Chat`;let u;u=$localize`:␟52318b5079ce3bda0877053b52a550fbde67130a␟6088560830023353456:Maximum Number of Messages`;let p;p=$localize`:␟3391bd7ac225b712137a44a47653ba5912ba6e14␟845892119032308787:Maximum Age of Message`;let $;$=$localize`:␟752daa6baad0f8b4684b5c6775345b02bed6746e␟6479044529603381727:year`;let L;L=$localize`:␟e6bbe25e83a1e135e8e1d3e2ceddadb8529c45e9␟7658073495909471632:years`;let R;R=$localize`:␟2790ad2c08306240a508576e942fcfdf271f5a79␟7178101913251976451:month`;let h;h=$localize`:␟0fcdd5427274550312ee512bcd5b61ec077e0b5f␟6169402792391433667:months`;let D;D=$localize`:␟f64c76c7c7c71baddef3dc6a93e4394b8fdb69f4␟6320319413541466015:day`;let b;b=$localize`:␟fc34f2683c4cb526ed7095c5b1cdd66d672ba932␟7036284206110282007:days`;let x;x=$localize`:␟cff3ed26f8073fa2fe757d97880662060c39a1fa␟5405071297219936776:minute`;let y;y=$localize`:␟cd25ef11e2d8843297caf4202937023dc02d0ba8␟982745398054129955:minutes`;let B;B=$localize`:␟c40875920fa824ba8029cf99315da474625354f9␟7479425239631237410:second`;let v;v=$localize`:␟38bd5794dbe84081cfa7867e876245e1ddae93e7␟227749613426254192:seconds`;let w;w=$localize`:␟38484614389a6a41930e95b82c891780a99be9ce␟225617230946350058:Artist Index`;let X;return X=$localize`:␟cb8e8c81accbef16924070ba1c4e2e28f7bae96a␟3077366211526620849:Ignored Articles in Artist Names`,[e,P,O,m,G,f,u,p,$,L,R,h,D,b,x,y,B,v,w,X,[1,"settings"],["section",n],["title",i,1,"button-on-control",3,"click"],[1,"icon-floppy"],[1,"content"],[1,"section-title"],[1,"section-entry"],["type","checkbox",3,"ngModelChange","ngModel"],["for","max_messages"],["id","max_messages","type","number",3,"ngModelChange","ngModel"],[1,"chat-max-age"],["for","max_age"],["id","max_age","type","number",3,"ngModelChange","ngModel"],["title",S,3,"ngModelChange","ngModel"],["value","year"],["value","years"],["value","month"],["value","months"],["value","day"],["value","days"],["value","minute"],["value","minutes"],["value","second"],["value","seconds"],["for","ignore_articles"],["id","ignore_articles","rows","10","cols","20",3,"ngModelChange","ngModel"]]},template:function(i,e){i&1&&(_(0,"div",20)(1,"app-view-header-slim",21)(2,"button",22),E("click",function(){return e.save()}),c(3,"i",23),C(4),N(5,0),A(),t()(),_(6,"div",24),z(7,oe,56,6)(8,Se,1,0,"app-loading"),t()()),i&2&&(M(7),W(e.settings?7:8))},dependencies:[ee,Y,K,Q,U,H,j,J,q,F,te,_e],styles:["[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;height:100%}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 0}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .chat-max-age[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-entry[_ngcontent-%COMP%]{padding-bottom:15px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;padding-bottom:3px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-top:-1px;display:inline-block;vertical-align:middle;margin-right:10px}"]})}}return a})();export{Ce as AdminSettingsComponent};
