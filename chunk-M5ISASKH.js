import{a as j}from"./chunk-XMS7PRVN.js";import{a as X}from"./chunk-5FE5DLL5.js";import{b as V}from"./chunk-5LL2XCUH.js";import{a as K}from"./chunk-H7J33JRO.js";import"./chunk-24DMSAFT.js";import{b as I,d as x,g as D,o as w}from"./chunk-JWYMJBHE.js";import{a as G}from"./chunk-33YDEZ6H.js";import"./chunk-Q3X46OXX.js";import{G as B}from"./chunk-SR2DRA4F.js";import{k as $}from"./chunk-MCFY5JX5.js";import{$b as _,Db as O,Eb as T,Hb as k,Ib as P,Jb as c,Kb as a,Lb as r,Mb as d,Qb as A,Rb as E,U as p,Wb as S,Wd as F,Yb as v,_a as o,bc as H,fa as h,ka as C,la as g,nb as M,pc as N,rb as u,rc as y,uc as b,vc as L,wc as R,za as f}from"./chunk-MRX5UB2X.js";var z=(i,l)=>l.track.id;function W(i,l){i&1&&d(0,"app-loading")}function J(i,l){if(i&1){let e=S();a(0,"div",8)(1,"div",9),N(2),r(),a(3,"div",10)(4,"app-track-health",11),_("resolvedEvent",function(){let t=C(e).$implicit,s=H();return g(s.trackHealthResolved(t))}),r()()()}if(i&2){let e=l.$implicit;o(2),y(" ",e.track.name," "),o(2),c("trackHealth",e)}}var he=(()=>{class i extends X{constructor(){super(...arguments),this.modes=[],this.mediaCheck=!1,this.jam=h(F),this.notify=h(B),this.folderService=h(V)}ngOnInit(){super.ngOnInit(),this.folderService.foldersChange.pipe(p(this.unsubscribe)).subscribe(e=>{e.id===this.id&&this.refresh()})}ngOnDestroy(){super.ngOnDestroy()}checkChange(){this.refresh()}trackHealthResolved(e){this.all&&(this.all=this.all.filter(n=>n!==e),this.reDisplay())}refresh(){this.hints=void 0,this.id&&this.jam.track.health({folderIDs:[this.id],healthMedia:this.mediaCheck}).then(e=>{this.display(e)}).catch(e=>{this.notify.error(e)})}reDisplay(){this.hints=!this.filter||!this.all?this.all:this.all.filter(e=>e.health.find(n=>n.name===this.filter))}display(e){this.all=e,this.modes=[];for(let n of e)for(let t of n.health)this.modes.includes(t.name)||this.modes.push(t.name);this.reDisplay()}static{this.\u0275fac=(()=>{let e;return function(t){return(e||(e=f(i)))(t||i)}})()}static{this.\u0275cmp=M({type:i,selectors:[["app-admin-tracks-health"]],features:[u],decls:13,vars:4,consts:()=>{let e;e=$localize`:␟e9e69aab6530b06f07d62019e95496e5c974a35d␟4008496035123032607:Refresh List`;let n;return n=$localize`:␟fc25452275680509933bd62f7ff2f4f14a5949d8␟79910036711821960:Check Media`,[n,[1,"health"],[1,"actions"],["title",e,1,"button-on-control",3,"click"],[1,"icon-reload"],["type","checkbox",3,"change","ngModelChange","ngModel","checked"],[1,"content"],["name","Track Health Issues",3,"list"],[1,"track"],[1,"meta"],[1,"track-health"],[3,"resolvedEvent","trackHealth"]]},template:function(n,t){n&1&&(a(0,"div",1)(1,"div",2)(2,"button",3),_("click",function(){return t.refresh()}),d(3,"i",4),r(),a(4,"label")(5,"input",5),_("change",function(){return t.checkChange()}),R("ngModelChange",function(m){return L(t.mediaCheck,m)||(t.mediaCheck=m),m}),r(),A(6),v(7,0),E(),r()(),a(8,"div",6),O(9,W,1,0,"app-loading"),d(10,"app-background-text-list",7),k(11,J,5,2,"div",8,z),r()()),n&2&&(o(5),b("ngModel",t.mediaCheck),c("checked",t.mediaCheck),o(4),T(t.hints?-1:9),o(),c("list",t.hints),o(),P(t.hints))},dependencies:[$,w,I,x,D,j,K,G],styles:["[_nghost-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:10px 15px 0;border-bottom-color:var(--background-border);border-bottom-width:1px;border-bottom-style:solid}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1px;font-size:11px;margin-left:5px;margin-right:5px}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px;overflow-y:auto;overflow-x:auto}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]{flex-flow:row nowrap}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{width:30%;overflow:hidden;padding-right:15px;text-overflow:ellipsis}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .track-health[_ngcontent-%COMP%]{width:70%}"]})}}return i})();export{he as AdminTracksHealthComponent};
