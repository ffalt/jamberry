import{a}from"./chunk-VSMEHVNZ.js";import{b as x}from"./chunk-MQ5GQMNI.js";import"./chunk-6WAGYCOA.js";import"./chunk-UPKF4LSO.js";import"./chunk-NNT52QCM.js";import"./chunk-6UV7XVIR.js";import"./chunk-SDT7PSNL.js";import"./chunk-4K2FA6DD.js";import"./chunk-AIQOHZWK.js";import"./chunk-N2K5OS3Y.js";import"./chunk-24DMSAFT.js";import"./chunk-Y5Z5ITNC.js";import"./chunk-ORVGIZVG.js";import"./chunk-K7RVMPTP.js";import"./chunk-MHPFTM2Z.js";import"./chunk-T2QKBMPN.js";import"./chunk-DYCPZPVS.js";import"./chunk-CXISAAQ7.js";import"./chunk-BNP52TDG.js";import"./chunk-F6BYEP4R.js";import"./chunk-VP6KNDS4.js";import"./chunk-D2CLWX7O.js";import"./chunk-AQDYGNZB.js";import"./chunk-W76RWN3H.js";import"./chunk-FQC6PRY2.js";import{a as S}from"./chunk-PZTZCA44.js";import"./chunk-4HNSRH53.js";import{G as _}from"./chunk-ZVKVGF76.js";import{f as y}from"./chunk-T6GM3CFW.js";import{$d as v,Hb as u,Ib as h,Nb as p,Ob as f,Pb as g,Qb as m,Wc as C,Y as d,ab as s,dc as k,ia as n,k as l,nb as c,nc as M,oc as b}from"./chunk-H2EXZDP6.js";function w(r,o){r&1&&m(0,"app-loading")}var B=(()=>{let o=class o{constructor(){this.loadMore=C.required(a),this.jam=n(v),this.notify=n(_),this.route=n(y),this.unsubscribe=new l}ngOnInit(){this.route.parent&&this.route.parent.paramMap.pipe(d(this.unsubscribe)).subscribe(e=>{this.id=e.get("id")??void 0,this.refresh()})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}loadSimilar(){let e=this.id;e&&this.jam.track.similar({id:e,trackIncState:!0,trackIncTag:!0,skip:this.loadMore().skip(),take:this.loadMore().take()}).then(t=>{if(this.id===e){this.similar=[...this.similar??[],...t.items];let i=this.loadMore();i.hasMore.set(this.similar.length<(t.total??0)),i.total.set(t.total)}}).catch(t=>{this.notify.error(t)})}refresh(){this.similar=void 0,this.loadMore().skip.set(0),this.loadSimilar()}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=c({type:o,selectors:[["app-track-similar"]],viewQuery:function(t,i){t&1&&M(i.loadMore,a,5),t&2&&b()},decls:3,vars:4,consts:[[3,"showArtist","tracks"],[3,"requestLoad","loading"]],template:function(t,i){t&1&&(u(0,w,1,0,"app-loading"),m(1,"app-track-list",0),f(2,"app-load-more-button",1),k("requestLoad",function(){return i.loadSimilar()}),g()),t&2&&(h(i.similar?-1:0),s(),p("showArtist",!0)("tracks",i.similar),s(),p("loading",!i.similar))},dependencies:[x,a,S],styles:["[_nghost-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]{padding-left:10px;padding-right:10px}}"]});let r=o;return r})();export{B as TrackSimilarComponent};
