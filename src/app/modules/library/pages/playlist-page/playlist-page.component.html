<app-loading *ngIf="!playlist"></app-loading>

<context-menu #playlistMenu>
	<ng-template contextMenuItem let-playlist>
		<app-context-entry-fav [base]="playlist" baseType="playlist"></app-context-entry-fav>
	</ng-template>
	<ng-template contextMenuItem let-playlist>
		<app-context-entry-rate [base]="playlist" baseType="playlist"></app-context-entry-rate>
	</ng-template>
	<ng-template contextMenuItem (execute)="player.addPlaylistToQueue($event.item)"><i class="icon-list-add"></i> Add To Queue</ng-template>
	<ng-template contextMenuItem (execute)="actions.download($event.item)"><i class="icon-download-cloud"></i> Download</ng-template>
	<ng-template contextMenuItem let-playlist (execute)="playlistService.editPlaylist($event.item)" *ngIf="jam.auth.user && playlist.userID === jam.auth.user.id"><i class="icon-edit"></i> Edit Playlist</ng-template>
	<ng-template contextMenuItem let-playlist (execute)="playlistService.removePlaylist($event.item)" *ngIf="jam.auth.user && playlist.userID === jam.auth.user.id"><i class="icon-remove"></i> Remove Playlist</ng-template>
</context-menu>

<div class="playlist" *ngIf="playlist">

	<div class="header" [contextMenu]="playlistMenu" [contextMenuSubject]="playlist">
		<div class="info">
			<div class="img">
				<app-coverart-image [coverArtObj]="playlist" [size]="150" [fill]="true" [alt]="playlist.name"></app-coverart-image>
			</div>
			<div class="meta">
				<div class="type">Playlist</div>
				<div class="name">{{playlist.name}}</div>
				<div class="actions">
					<button class="button-primary" (click)="player.startPlaylist(playlist)"><i class="icon-play"></i> Play</button>
				</div>
			</div>
			<div class="listeners">
				<a class="more" [contextMenu]="playlistMenu" [contextMenuSubject]="playlist" [contextMenuTriggerLeft]="true">â€¦</a>
			</div>
		</div>
		<div class="navigation"></div>
	</div>

	<div class="content">
		<div class="overview" *ngIf="playlist.comment">
			<div class="info">
				<div class="section-title">Description</div>
				<div class="description">
					<div class="note">{{playlist.comment}}</div>
				</div>
			</div>
		</div>
		<app-tracks-playlist [tracks]="playlist.tracks" [showArtist]="true"></app-tracks-playlist>
	</div>
</div>
