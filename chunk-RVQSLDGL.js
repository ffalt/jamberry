import{a as q}from"./chunk-A3EM3MIM.js";import{a as J}from"./chunk-DB44NRAX.js";import{a as H}from"./chunk-2UUTDNT3.js";import{a as Q}from"./chunk-M5J33H6Z.js";import"./chunk-FQC6PRY2.js";import{a as j}from"./chunk-33YDEZ6H.js";import{a as Y}from"./chunk-Q3X46OXX.js";import{G as N}from"./chunk-SR2DRA4F.js";import{f as X}from"./chunk-MCFY5JX5.js";import{Db as m,Eb as M,Ec as S,Fc as L,Gb as u,Hb as C,Ib as g,Jb as O,Kb as o,Kd as z,Lb as a,Mb as f,Pc as w,Qb as A,Rb as B,U as $,Wa as k,Wd as T,Yb as p,Zb as E,_a as n,_b as I,bc as P,fa as c,j as x,nb as v,pc as _,qc as d,rc as U,ya as D,yc as G}from"./chunk-MRX5UB2X.js";function W(t,r){if(t&1&&(o(0,"div",18)(1,"div"),_(2),a(),o(3,"div"),_(4),a()()),t&2){let e=r.$implicit;n(2),d(e.name),n(2),d(e.value)}}function Z(t,r){if(t&1&&(o(0,"div",13)(1,"div",9),_(2),a(),C(3,W,5,2,"div",18,u),a()),t&2){let e=r.$implicit;n(2),d(e.name),n(),g(e.infos)}}function ee(t,r){if(t&1&&(o(0,"div",14)(1,"div"),_(2),o(3,"span",19),_(4),a()()()),t&2){let e=r.$implicit;n(2),U("",e.date," "),n(2),d(e.area.name)}}function te(t,r){if(t&1&&(o(0,"div"),_(1),a()),t&2){let e=P().$implicit;n(),d(e.label==null?null:e.label.disambiguation)}}function ne(t,r){if(t&1&&(o(0,"div",15)(1,"div",19),_(2),a(),m(3,te,2,1,"div"),o(4,"div"),A(5),p(6,4),B(),o(7,"span",19),_(8),a()()()),t&2){let e=r.$implicit;n(2),d(e.label==null?null:e.label.name),n(),M(e.label!=null&&e.label.disambiguation?3:-1),n(5),d(e.catalogNumber)}}function ie(t,r){if(t&1&&(o(0,"div",20)(1,"div"),p(2,6),S(3,"mediaduration"),a(),o(4,"div")(5,"span",19),_(6),a(),A(7),p(8,7),B(),o(9,"span",19),_(10),S(11,"mbArtistCredits"),a()()()),t&2){let e=r.$implicit;n(3),E(e.number)(L(3,4,e.length)),I(2),n(3),d(e.title||e.position),n(4),d(L(11,6,e.artistCredit))}}function oe(t,r){if(t&1&&(o(0,"div",16)(1,"div",9),p(2,5),a(),C(3,ie,12,8,"div",20,u),a()),t&2){let e=r.$implicit;n(2),E(e.format)(e.position)(e.trackCount),I(2),n(),g(e.tracks)}}function ae(t,r){if(t&1&&(o(0,"div",8)(1,"div",9),A(2),p(3,0),B(),o(4,"a",10),f(5,"app-mb-icon",11),A(6),p(7,1),B(),a()(),o(8,"div",12),C(9,Z,5,1,"div",13,u),a(),o(11,"div",9),p(12,2),a(),C(13,ee,5,2,"div",14,u),o(15,"div",9),p(16,3),a(),C(17,ne,9,3,"div",15,u),C(19,oe,5,3,"div",16,u),f(21,"app-mb-relations",17),a()),t&2){let e=P();n(4),O("href",G("https://musicbrainz.org/release/",e.mbAlbum.id),k),n(),O("size",18),n(4),g(e.infoGroups),n(4),g(e.mbAlbum.releaseEvents),n(4),g(e.mbAlbum.labelInfo),n(2),g(e.mbAlbum.media),n(2),O("relations",e.mbAlbum.relations)}}var K=(()=>{class t{constructor(){this.mbAlbumID=w(),this.infoGroups=[],this.jam=c(T),this.notify=c(N)}ngOnChanges(){this.refresh()}refresh(){let e=this.mbAlbumID();e&&this.jam.metadata.musicbrainzLookup({type:z.release,mbID:e}).then(i=>{let l=i.data;this.display(l.release)}).catch(i=>{this.notify.error(i)})}display(e){this.mbAlbum=e;let i=e.tags??[];i.length===0&&(i=e.releaseGroup.tags??[]);let l={name:"Release information",infos:[{name:"Title",value:e.title},{name:"Artist",value:this.compactArtist(e.artistCredit)},{name:"Disambiguation",value:e.disambiguation},{name:"Date",value:e.date},{name:"First Release Date",value:e.releaseGroup.firstReleaseDate},{name:"Country",value:e.country},{name:"Tags",value:i.map(b=>b.name).join(" / ")},{name:"Album Type",value:[e.releaseGroup.primaryType,...e.releaseGroup.secondaryTypes??[]].join(" / ")},{name:"Status",value:e.status},{name:"Packaging",value:e.packaging},{name:"Release ID",value:e.id},{name:"Release Group ID",value:e.releaseGroup.id},{name:"Barcode",value:e.barcode},{name:"ASIN",value:e.asin},{name:"Data Quality",value:e.quality}].filter(b=>!!b.value)};this.infoGroups=[l]}compactArtist(e){return e?.length?e.map(i=>i.name+(i.joinphrase||" ")).join("").trim():""}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=v({type:t,selectors:[["app-mb-album"]],inputs:{mbAlbumID:[1,"mbAlbumID"]},features:[D],decls:1,vars:1,consts:()=>{let e;e=$localize`:␟480ada975a20ad77e5ee0a3c3a96f5ab8412bbec␟1745698093359416419:Album Information by`;let i;i=$localize`:␟34100dfbca19b60a804776a1133a5f7e799ca0ce␟7492127250511388743:MusicBrainz`;let l;l=$localize`:␟dff1ecccc8ae98ac469b87a95d5c6998ddacb9d7␟7454521195203716701:Release Events`;let b;b=$localize`:␟2af7efecfae8d7fed3b07f718a623eca1ad8163f␟546766753072101168:Labels`;let R;R=$localize`:␟42be824d27bc983122a6e4311e1f57fefa46c501␟2878302443401355927:Catalog Number`;let h;h=$localize`:␟702dd4c2aac167a4c21cbbc421cf3679e15d3c83␟5099997522384804866:Media: ${"\uFFFD0\uFFFD"}:INTERPOLATION: ${"\uFFFD1\uFFFD"}:INTERPOLATION_1: (${"\uFFFD2\uFFFD"}:INTERPOLATION_2: Tracks)`;let y;y=$localize`:␟7ea8ad4a0abc19bc786881ed25e72381576a6df6␟5426820798626074795:Track ${"\uFFFD0\uFFFD"}:INTERPOLATION: - ${"\uFFFD1\uFFFD"}:INTERPOLATION_1:`;let F;return F=$localize`:␟7026bd1cbbf23864700f501e89df017d0b8d755d␟1719091699885493218:by`,[e,i,l,b,R,h,y,F,[1,"mbalbum"],[1,"section-title"],["target","_blank","rel","noopener",3,"href"],[3,"size"],[1,"info-groups"],[1,"info-group"],[1,"releaseEvent"],[1,"labelInfo"],[1,"media"],[3,"relations"],[1,"key-value-row"],[1,"value"],[1,"track"]]},template:function(i,l){i&1&&m(0,ae,22,4,"div",8),i&2&&M(l.mbAlbum?0:-1)},dependencies:[J,H,q,Q],styles:["[_nghost-%COMP%]   .section[_ngcontent-%COMP%]{margin-bottom:30px}[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{padding-top:30px;padding-bottom:15px}[_nghost-%COMP%]   .key-value-row[_ngcontent-%COMP%]{border-top-width:1px;border-top-style:solid;border-top-color:var(--background-border);display:flex;flex-flow:row nowrap;flex-wrap:nowrap;align-items:center}[_nghost-%COMP%]   .key-value-row[_ngcontent-%COMP%]:last-of-type{border-bottom-color:var(--background-border);border-bottom-width:1px;border-bottom-style:solid}[_nghost-%COMP%]   .key-value-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-of-type{width:30%;min-width:100px}[_nghost-%COMP%]   .key-value-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type{padding-left:15px;width:60%;color:var(--on-background-highlight)}[_nghost-%COMP%]   .key-value-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type   a[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .key-value-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type   a[_ngcontent-%COMP%]:hover{color:var(--on-background)}[_nghost-%COMP%]   .key-value-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-top:10px;padding-bottom:10px}[_nghost-%COMP%]   .key-value-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;padding-right:15px}[_nghost-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .track[_ngcontent-%COMP%], [_nghost-%COMP%]   .labelInfo[_ngcontent-%COMP%]{margin-bottom:10px}"]})}}return t})();function re(t,r){t&1&&f(0,"app-loading")}function le(t,r){if(t&1&&f(0,"app-mb-album",0),t&2){let e=P();O("mbAlbumID",e.mbReleaseID)}}function _e(t,r){t&1&&f(0,"app-background-text",1)}var Ee=(()=>{class t{constructor(){this.jam=c(T),this.notify=c(N),this.route=c(X),this.unsubscribe=new x}ngOnInit(){this.route.parent&&this.route.parent.paramMap.pipe($(this.unsubscribe)).subscribe(e=>{this.id=e.get("id")??void 0,this.refresh()})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}refresh(){this.album=void 0,this.id&&this.jam.album.id({id:this.id}).then(e=>{this.album=e,this.mbReleaseID=e.mbReleaseID}).catch(e=>{this.notify.error(e)})}static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275cmp=v({type:t,selectors:[["app-album-mb"]],decls:3,vars:3,consts:()=>{let e;return e=$localize`:␟0038953528872613d2eff0ed3912b109d9e9b5cf␟4893616715766810081:No data available`,[[3,"mbAlbumID"],["text",e]]},template:function(i,l){i&1&&(m(0,re,1,0,"app-loading"),m(1,le,1,1,"app-mb-album",0),m(2,_e,1,0,"app-background-text",1)),i&2&&(M(l.album?-1:0),n(),M(l.mbReleaseID?1:-1),n(),M(l.album&&!l.mbReleaseID?2:-1))},dependencies:[K,Y,j],styles:["[_nghost-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media(max-width:522px){[_nghost-%COMP%]{padding-left:10px;padding-right:10px}}"]})}}return t})();export{Ee as AlbumMbComponent};
