import{b as S,c as w}from"./chunk-7O7M2ADH.js";import{a as A}from"./chunk-NWR5JEWI.js";import{b as E}from"./chunk-3XAJ3MB2.js";import{Ad as T,P as v,U as k,V as x,aa as a,da as b,fa as n,h as m,j as p,oa as y,p as g,ra as s,yd as C}from"./chunk-XLNNDSL4.js";var f=new b("THEMES"),d=new b("ACTIVE_THEME");function V(o){return[{provide:f,useValue:o.themes},{provide:d,useValue:o.active}]}var G=(()=>{class o{constructor(){this.themes=n(f),this.themeChange=new s,this.theme=n(d),this.document=n(y)}getTheme(e){let r=this.themes.find(c=>c.name===e);if(!r)throw new Error(`Theme not found: '${e}'`);return r}getActiveTheme(){return this.getTheme(this.theme)}setTheme(e){this.theme=e;let r=this.getActiveTheme();this.updateDom(r),this.themeChange.emit(r)}updateDom(e){for(let r of Object.keys(e.properties))this.document.body.style.setProperty(r,e.properties[r]);for(let r of this.themes)this.document.body.classList.remove(`${r.name}-theme`);this.document.body.classList.add(`${e.name}-theme`)}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var I={name:"black",properties:{"--background":"#000","--background-hover":"#1c1c1c","--background-active":"#32332e","--background-view-header":"#000","--background-sidebar":"#000","--background-border":"#242424","--background-box":"#0c0c0c","--background-transparent":"rgba(18, 18, 18, .7)","--on-background":"#C8C8C8","--on-background-active":"#fff","--on-background-highlight":"#fff","--on-background-hover":"#fff","--control":"#070707","--control-box":"#1e1e1e","--control-hover":"#575757","--control-active":"#58594f","--control-box-shadow":"0 -1px 0 rgba(0, 0, 0, 0.15) inset","--control-box-border":"#AAAAAA","--control-border":"#1a1a1a","--control-border-hover":"#7e7e7e","--on-control":"#C8C8C8","--on-control-hover":"#fff","--on-control-active":"#fff","--on-control-ambient":"#c5c3c3","--on-control-ambient-hover":"#fff","--on-control-ambient-disabled":"#575757","--input":"#fff","--input-border":"#fff","--on-input":"#000","--on-input-hover":"#C8C8C8","--primary":"#008300","--on-primary":"#fff","--primary-hover":"#006400","--on-primary-hover":"#ffeda5","--secondary":"#4688d7","--accent":"#FF6347","--on-accent":"#fff","--scrollbar":"#858585","--dialog-backdrop":"rgba(0, 0, 0, 0.6)"}};var j={name:"dark",properties:{"--background":"#0f1217","--background-hover":"#151b21","--background-active":"#151b21","--background-view-header":"#0f1217","--background-sidebar":"#151b21","--background-border":"#262b2f","--background-box":"#151b21","--background-transparent":"rgba(17,22,26,0.8)","--on-background":"#C8C8C8","--on-background-active":"#fff","--on-background-highlight":"#fff","--on-background-hover":"#fff","--control":"#151b21","--control-box":"#292828","--control-hover":"#575757","--control-active":"#58594f","--control-box-shadow":"0 -1px 0 rgba(0, 0, 0, 0.15) inset","--control-box-border":"#696969","--control-border":"#262626","--control-border-hover":"#383838","--on-control":"#C8C8C8","--on-control-hover":"#fff","--on-control-active":"#fff","--on-control-ambient":"#cfcfcf","--on-control-ambient-hover":"#fff","--on-control-ambient-disabled":"#575757","--input":"#000","--input-border":"#fff","--on-input":"#fff","--on-input-hover":"#C8C8C8","--primary":"#008300","--on-primary":"#fff","--primary-hover":"#006400","--on-primary-hover":"#ffeda5","--secondary":"#4688d7","--accent":"#FF6347","--on-accent":"#fff","--scrollbar":"#858585","--dialog-backdrop":"rgba(0, 0, 0, 0.6)"}};var t={rosewater:"#f4dbd6",flamingo:"#f0c6c6",pink:"#f5bde6",mauve:"#c6a0f6",red:"#ed8796",maroon:"#ee99a0",peach:"#f5a97f",yellow:"#eed49f",green:"#a6da95",teal:"#8bd5ca",sky:"#91d7e3",sapphire:"#7dc4e4",blue:"#8aadf4",lavender:"#b7bdf8",text:"#cad3f5",subtext1:"#b8c0e0",subtext0:"#a5adcb",overlay2:"#939ab7",overlay1:"#8087a2",overlay0:"#6e738d",surface2:"#5b6078",surface1:"#494d64",surface0:"#363a4f",base:"#24273a",mantle:"#1e2030",crust:"#181926"},F={name:"catppuccin",properties:{"--background":t.mantle,"--background-border":t.surface0,"--background-hover":t.mantle,"--background-active":t.lavender,"--background-view-header":t.crust,"--background-sidebar":t.base,"--background-box":t.base,"--background-transparent":"rgba(0,0,0,0.5)","--on-background":t.text,"--on-background-highlight":"#fff","--on-background-active":t.surface0,"--on-background-hover":t.green,"--control":t.base,"--control-box":t.surface2,"--control-hover":t.crust,"--control-active":t.base,"--control-box-shadow":"0 -1px 0 rgba(0, 0, 0, 0.15) inset","--control-box-border":t.surface0,"--control-border":t.surface0,"--control-border-hover":t.mauve,"--on-control":t.text,"--on-control-active":t.sky,"--on-control-hover":t.blue,"--on-control-ambient":t.yellow,"--on-control-ambient-hover":t.peach,"--on-control-ambient-disabled":t.subtext0,"--input":"#fff","--input-border":"#a2a2a2","--on-input":"#000","--on-input-hover":"#C8C8C8","--primary":t.green,"--on-primary":t.surface1,"--primary-hover":t.teal,"--on-primary-hover":t.surface0,"--secondary":"#4688d7","--accent":"#FF6347","--on-accent":"#fff","--scrollbar":"#575757","--dialog-backdrop":" rgba(255, 255, 255, 0.6)"}};var H={name:"light",properties:{"--background":"#f6f7fb","--background-border":"#AAAAAA","--background-hover":"#eaebef","--background-active":"#dfe2d6","--background-view-header":"#eaeaee","--background-sidebar":"#eff0f4","--background-box":"#ecedf1","--background-transparent":"rgba(255,255,255,0.9)","--on-background":"#1d1d1d","--on-background-active":"#000","--on-background-highlight":"#000","--on-background-hover":"#000","--control":"#eff0f4","--control-box":"#4a4a4a","--control-hover":"#ededed","--control-active":"#a8a8a8","--control-box-shadow":"0 -1px 0 rgba(0, 0, 0, 0.15) inset","--control-box-border":"#AAAAAA","--control-border":"#AAAAAA","--control-border-hover":"#252525","--on-control":"#272727","--on-control-active":"#0e1f2d","--on-control-hover":"#3f3f3f","--on-control-ambient":"#4c4c4c","--on-control-ambient-hover":"#575757","--on-control-ambient-disabled":"#a2a2a2","--input":"#fff","--input-border":"#a2a2a2","--on-input":"#000","--on-input-hover":"#C8C8C8","--primary":"#008300","--on-primary":"#fff","--primary-hover":"#006400","--on-primary-hover":"#ffeda5","--secondary":"#4688d7","--accent":"#FF6347","--on-accent":"#fff","--scrollbar":"#575757","--dialog-backdrop":" rgba(255, 255, 255, 0.6)"}};var M=(()=>{class o{constructor(){this.cachedData=new Map}getConfig(e){let r=e.url.slice(e.url.indexOf("jam/v1/")+7);if(["stats","series/index","folder/index","artist/index","album/index","genre/list"].includes(r))return{needsRefresh:!1}}intercept(e,r){if(e.method!=="GET")return r.handle(e);let c=this.getConfig(e);if(!c)return r.handle(e);(c.needsRefresh||e.headers.get("reset-cache"))&&this.cachedData.delete(e.urlWithParams);let i=this.cachedData.get(e.urlWithParams);if(i)return i instanceof m?i:g(i.clone());let l=r.handle(e).pipe(x(u=>{u instanceof C&&this.cachedData.set(e.urlWithParams,u.clone())}),v());return this.cachedData.set(e.urlWithParams,l),l}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();var D=(()=>{class o{constructor(){this.cacheService=n(M)}intercept(e,r){return this.cacheService.intercept(e,r)}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275prov=a({token:o,factory:o.\u0275fac})}}return o})();var he={themes:[H,F,j,I],active:"dark"};function le(o){return o}function ue(){return{provide:T,useClass:D,multi:!0}}var Te=(()=>{class o{static{this.localstorageName="settings"}constructor(){this.settingsChange=new s,this.unsubscribe=new p,this.userStorage=n(E),this.pushNotificationService=n(A),this.app=n(w),this.userStorage.userChange.pipe(k(this.unsubscribe)).subscribe(()=>{this.loadFromStorage()}),this.loadFromStorage()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}loadFromStorage(){let e=this.userStorage.get(o.localstorageName);if(e){for(let r of Object.keys(this.app.settings))this.app.settings[r]=e[r];this.setTheme(),this.pushNotificationService.enabled=this.app.settings.notificationSong}else this.app.settings=new S}saveSettings(){this.userStorage.set(o.localstorageName,this.app.settings)}applySettings(){this.saveSettings(),this.pushNotificationService.enabled=this.app.settings.notificationSong,setTimeout(()=>{this.setTheme()},0)}setTheme(){this.settingsChange.emit()}static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275prov=a({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{V as a,G as b,M as c,he as d,le as e,ue as f,Te as g};
