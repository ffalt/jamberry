import{a as ft,e as zn,i as Wn}from"./chunk-4AAUMQUZ.js";import{a as Hn}from"./chunk-RQOW2HPH.js";import{g as Xn}from"./chunk-OEGYTHMD.js";import{$ as on,$a as te,$b as at,Aa as s,Bc as Nn,Cb as ke,Cd as vn,Ce as Re,Db as it,E as nn,Eb as pn,Ed as ie,H as f,Ha as ge,Hd as xn,I as m,Ia as Ce,Ic as An,J as g,Je as Un,Ka as Pt,La as ve,Lb as Mn,Lc as fe,Ma as Tt,Mb as fn,Mc as re,Na as u,Ne as Vn,O as ae,Oa as T,Oc as In,P as ue,Pa as k,Qa as ln,Qb as On,Qc as Ke,Rb as Te,Rc as lt,Sa as N,Sb as pe,T as me,Ta as A,Tb as W,Tc as Be,Ua as I,Ub as _e,Uc as st,V as _,Va as sn,Vb as le,Vc as de,Vd as Z,Wa as We,Wb as j,Xb as se,Xd as yn,Ya as dn,Yb as Sn,Za as ht,Zb as un,Zd as ee,_ as E,_a as oe,_b as rt,_c as F,_d as wn,ac as _t,ae as Ne,bb as De,bc as En,be as Ae,ca as Ee,cb as ot,cc as Pn,cd as b,ce as kn,da as rn,db as cn,dd as dt,eb as Nt,ed as H,f as y,fd as ct,fe as Ie,gd as mt,ge as $n,hb as xe,i as V,ia as C,ib as X,ja as p,jb as Pe,jd as Rn,kb as mn,la as nt,ld as Dn,le as Fn,ma as G,md as gt,na as U,nd as Ct,oa as O,od as he,pa as a,pd as Me,qa as r,qd as Ln,qe as Mt,ra as c,rd as bn,sa as D,ta as L,ue as Ue,va as P,vb as gn,vc as Tn,wa as d,xa as an,xd as pt,xe as Gn,ya as _n,yb as Cn,yc as je,z as R,za as S,zc as hn}from"./chunk-2CUFB47X.js";var Ot=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin"]],standalone:!1,decls:6,vars:0,consts:[[1,"left"],["role","main",1,"middle"]],template:function(t,n){t&1&&(a(0,"aside",0),c(1,"app-admin-sidebar"),r(),c(2,"app-splitter"),a(3,"main",1),c(4,"router-outlet"),r(),c(5,"app-admin-queue-requests"))},styles:["[_nghost-%COMP%]{width:100%;height:100%;flex:1;display:flex;flex-flow:row nowrap;overflow:hidden;align-items:flex-start;align-content:flex-start}[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:15%;height:100%;min-width:140px}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{width:85%;flex-grow:1;height:100%}@media (max-width: 1400px){[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:20%}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{width:80%}}@media (max-width: 768px){[_nghost-%COMP%]{min-height:100%;position:absolute;display:block;flex:none;flex-flow:inherit}[_nghost-%COMP%]   app-splitter[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:100%!important;height:auto}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{width:100%;min-height:100%}}"]})}return o})();var jn=["overview","tags","health","tracks","tracks-health"];function no(o,l){o&1&&c(0,"i",10)}function oo(o,l){if(o&1&&(c(0,"i"),De(1,"stringToggle")),o&2){let e=s().$implicit;Tt(Nt(1,2,e.expanded,"icon-minus","icon-plus"))}}function io(o,l){if(o&1){let e=P();D(0),a(1,"div",8),S("click",function(){let n=m(e).$implicit,i=s();return g(i.selectNode(n))})("keydown.enter",function(){let n=m(e).$implicit,i=s();return g(i.selectNode(n))})("keydown.arrowRight",function(){let n=m(e).$implicit,i=s();return g(i.toggleNode(n))})("keydown.arrowLeft",function(){let n=m(e).$implicit,i=s();return g(i.toggleNode(n))}),a(2,"span",9),S("clickenter",function(){let n=m(e).$implicit,i=s();return g(i.toggleNode(n))}),C(3,no,1,0,"i",10),C(4,oo,2,6,"i",11),r(),a(5,"span",12),S("clickenter",function(){let n=m(e).$implicit,i=s();return g(i.toggleNode(n))}),c(6,"i"),De(7,"stringToggle"),r(),a(8,"span",13),u(9),r(),a(10,"span",14),u(11),r()(),L()}if(o&2){let e=l.$implicit,t=s();_(),Pt("padding-left",e.level*12,"px"),ve("active",e===t.selected),_(),O("title",We("Subfolders: ",e.folder.folderCount)),_(),p(e.isLoading?3:-1),_(),p(!e.isLoading&&e.hasChildren?4:-1),_(),Pt("color",e.color),O("title",e.folder.type),_(),Tt(Nt(7,16,e.expanded,"icon-folder-open","icon-folder")),_(2),O("title",e.folder.name),_(),T(e.folder.name),_(2),k("| ",e.folder.type)}}function Bn(o,l){if(o.children)for(let e of o.children)l(e),Bn(e,l)}var Oe=(()=>{class o{selected;nodes=[];expandIDs=[];autoSelect=X(!1);selectionChange=xe();viewport=Pe(je);unsubscribe=new V;jam=f(F);notify=f(b);folderService=f(H);ngOnInit(){this.folderService.foldersChange.pipe(R(this.unsubscribe)).subscribe(e=>{let t=this.nodes.find(n=>n.folder.id===e.id);t&&this.jam.folder.id({id:e.id,folderIncTrackCount:!0,folderIncChildFolderCount:!0}).then(n=>{t.folder=n,e.mode===dt.fsnRefreshChilds&&t.expanded&&(this.collapseNode(t),t.hasChildren=(n.folderCount||0)>0,t.children=void 0,t.isLoading=!1,t.hasChildren&&(t.expanded=!0,this.checkLoadExpanded(t)))}).catch(n=>{console.error(n)})})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}selectNode(e){this.selectionChange.emit(e.folder),this.autoSelect()&&(this.selected=e)}toggleNode(e){e.expanded?this.collapseNode(e):this.expandNode(e)}refresh(){this.jam.auth.isLoggedIn()&&this.jam.folder.search({level:0,folderIncChildFolderCount:!0,folderIncTrackCount:!0}).then(e=>{this.nodes=e.items.map(t=>({folder:t,hasChildren:(t.folderCount||0)>0,level:0,color:this.typeToColor(t),expanded:this.expandIDs.includes(t.id),isLoading:!1}));for(let t of this.nodes)this.checkLoadExpanded(t)}).catch(e=>{this.notify.error(e)})}typeToColor(e){switch(e.type){case de.unknown:return"#ff9fAA";case de.artist:return"#6f806e";case de.collection:return"#adbced";case de.album:return"#bdbd9c";case de.multialbum:return"#bdaaae";case de.extras:return"#bdbdbd";default:return""}}onFolderUpdate(e){let t=this.nodes.find(n=>n.folder.id===e.id);t&&(t.folder=e)}selectFolderByID(e){let t=this.nodes.find(n=>n.folder.id===e);t?this.selected=t:this.jam.folder.id({id:e,folderIncParents:!0}).then(n=>{if(n.parents){for(let i of n.parents)this.expandIDs.includes(i.id)||this.expandIDs.push(i.id);for(let i of this.nodes)i.expanded=this.expandIDs.includes(i.folder.id),this.checkLoadExpanded(i,e)}}).catch(n=>{this.notify.error(n)})}checkLoadExpanded(e,t){if(e.expanded&&!e.isLoading&&this.loadChildren(e,n=>{for(let i of n)this.checkLoadExpanded(i,t)}),e.folder.id===t){this.selected=e;let n=this.viewport();n&&n.scrollToIndex(this.nodes.indexOf(e))}}loadChildren(e,t){e.isLoading||(e.isLoading=!0,this.jam.folder.search({parentIDs:[e.folder.id],folderIncChildFolderCount:!0,folderIncTrackCount:!0}).then(n=>{let i=n.items.sort((h,x)=>h.name.localeCompare(x.name)).map(h=>({folder:h,hasChildren:(h.folderCount||0)>0,level:e.level+1,color:this.typeToColor(h),expanded:this.expandIDs.includes(h.id),isLoading:!1})),M=this.nodes.indexOf(e);M>=0&&(this.nodes=this.nodes.slice(0,M+1).concat(i).concat(this.nodes.slice(M+1))),e.children=i,e.isLoading=!1,t&&t(i)}).catch(n=>{this.notify.error(n)}))}collapseNode(e){if(e.expanded){let t=[];Bn(e,n=>t.push(n.folder.id)),this.nodes=this.nodes.filter(n=>!t.includes(n.folder.id)),e.expanded=!1,e.children=void 0,this.expandIDs=(this.expandIDs||[]).filter(n=>n!==e.folder.id)}}expandNode(e){if(!e.expanded){if(e.children){let t=this.nodes.indexOf(e);this.nodes=this.nodes.slice(0,t+1).concat(e.children).concat(this.nodes.slice(t+1))}else this.loadChildren(e);this.expandIDs.push(e.folder.id),e.expanded=!0}}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin-folder-tree"]],viewQuery:function(t,n){t&1&&ge(n.viewport,je,5),t&2&&Ce()},inputs:{autoSelect:[1,"autoSelect"]},outputs:{selectionChange:"selectionChange"},standalone:!1,decls:8,vars:2,consts:()=>{let e;e=$localize`:␟21e3799e2b1bfef3056c82909b88edfbd65ee66c␟1467125554926319902:Refresh Folder Tree`;let t;return t=$localize`:␟3fde556358b58d910adc30abaaff2433f0bb5f6c␟1205037876874222931:Folders`,[t,[1,"actions"],[1,"name"],["title",e,1,"button-on-control",3,"click"],["aria-hidden","true",1,"icon-reload"],["appFocusKeyList","","role","list",1,"tree"],[1,"list-container","list-group",2,"height","100%",3,"itemSize"],[4,"cdkVirtualFor","cdkVirtualForOf"],["appFocusKeyListItem","","role","listitem",1,"node",3,"click","keydown.enter","keydown.arrowRight","keydown.arrowLeft"],[1,"node-toggle",3,"clickenter","title"],[1,"icon-spin","icon-spinner"],[3,"class"],[1,"node-icon",3,"clickenter","title"],[3,"title"],[1,"node-type"]]},template:function(t,n){t&1&&(a(0,"div",1)(1,"span",2),d(2,0),r(),a(3,"button",3),S("click",function(){return n.refresh()}),c(4,"i",4),r()(),a(5,"div",5)(6,"cdk-virtual-scroll-viewport",6),rn(7,io,12,20,"ng-container",7),r()()),t&2&&(_(6),O("itemSize",22),_(),O("cdkVirtualForOf",n.nodes))},dependencies:[Ue,Ne,Ae,Tn,hn,je,xn],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{padding:15px 15px 10px;background-color:var(--background-transparent);color:var(--on-control)}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{padding-right:10px;vertical-align:middle;color:var(--on-control-active);font-size:20px;font-weight:100}[_nghost-%COMP%]   .tree[_ngcontent-%COMP%]{margin-top:10px;flex:1}[_nghost-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]{width:100%;height:100%;min-height:100%;overflow-x:hidden}[_nghost-%COMP%]   cdk-virtual-scroll-viewport[_ngcontent-%COMP%]     .cdk-virtual-scroll-content-wrapper{width:100%}[_nghost-%COMP%]   .node[_ngcontent-%COMP%]{width:100%;display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-decoration:none;vertical-align:middle;height:22px;cursor:pointer;-webkit-user-select:none;user-select:none;font-size:.9em}[_nghost-%COMP%]   .node[_ngcontent-%COMP%]   .node-toggle[_ngcontent-%COMP%]{display:inline-block;min-width:20px}[_nghost-%COMP%]   .node[_ngcontent-%COMP%]   .node-type[_ngcontent-%COMP%]{padding-left:5px;font-size:.7em;text-transform:uppercase}[_nghost-%COMP%]   .node.active[_ngcontent-%COMP%]{color:var(--on-control-hover)}"]})}return o})();var ao=o=>["/admin/folder",o,"overview"],_o=o=>["/admin/folder",o,"tracks"],lo=o=>["/admin/folder",o,"sub-folders"],so=o=>["/admin/folder",o,"tags"],co=o=>["/admin/folder",o,"health"],mo=o=>["/admin/folder",o,"tracks-health"];function go(o,l){o&1&&(a(0,"a"),c(1,"i",15),D(2),d(3,0),L(),r())}function Co(o,l){o&1&&(a(0,"a"),c(1,"i",16),D(2),d(3,1),L(),r())}function po(o,l){if(o&1&&(a(0,"nav",13)(1,"ul",17)(2,"li",18)(3,"a"),d(4,2),r()(),a(5,"li",18)(6,"a"),d(7,3),r()(),a(8,"li",18)(9,"a"),d(10,4),r()(),a(11,"li",18)(12,"a"),d(13,5),r()(),a(14,"li",18)(15,"a"),d(16,6),r()(),a(17,"li",18)(18,"a"),d(19,7),r()()()()),o&2){let e=s();_(2),O("routerLink",te(6,ao,e.id)),_(3),O("routerLink",te(8,_o,e.id)),_(3),O("routerLink",te(10,lo,e.id)),_(3),O("routerLink",te(12,so,e.id)),_(3),O("routerLink",te(14,co,e.id)),_(3),O("routerLink",te(16,mo,e.id))}}var At=(()=>{class o{rightActive=!1;id="";tree=Pe(Oe);unsubscribe=new V;route=f(gt);router=f(he);uiState=f(pt);mode="overview";refresh(){let e=this.tree();e&&e.refresh()}selectionChange(e){this.router.navigate([`/admin/folder/${e.id}/${this.mode}`]).catch(t=>{console.error(t)})}onFolderUpdate(e){let t=this.tree();t&&t.onFolderUpdate(e)}ngOnInit(){this.router.events.pipe(R(this.unsubscribe)).subscribe(t=>{if(t instanceof Dn&&this.route.firstChild&&this.route.firstChild.snapshot.url[0]){let n=this.route.firstChild.snapshot.url[0].path;jn.includes(n)&&(this.mode=n)}}),this.route&&this.route.params.pipe(R(this.unsubscribe)).subscribe(t=>{let n=t.id;this.id=n,this.tree()&&n&&setTimeout(()=>{let i=this.tree();i&&i.selectFolderByID(n)})});let e=this.tree();e&&(e.expandIDs=this.uiState.data["app-admin-folders"]||[]),this.refresh()}ngOnDestroy(){let e=this.tree();e&&(this.uiState.data["app-admin-folders"]=e.expandIDs),this.unsubscribe.next(),this.unsubscribe.complete()}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin-folder"]],viewQuery:function(t,n){t&1&&ge(n.tree,Oe,5),t&2&&Ce()},hostVars:2,hostBindings:function(t,n){t&2&&ve("right-active",n.rightActive)},standalone:!1,decls:11,vars:2,consts:()=>{let e;e=$localize`:␟916b83c8c6c89e399186184c2198e5b4a760361b␟3376465991526605180:Show Folder Tree`;let t;t=$localize`:␟7ec7b22d8039675be42abd55ef2b6adad32ba322␟6821898315173685664:Show Folder Tools`;let n;n=$localize`:␟e95ae009d0bdb45fcc656e8b65248cf7396080d5␟2614607010577950577:Overview`;let i;i=$localize`:␟cb98522066062d775f3b81f29c898a7cc76292c0␟1575810254412583888:Tracks`;let M;M=$localize`:␟3fde556358b58d910adc30abaaff2433f0bb5f6c␟1205037876874222931:Folders`;let h;h=$localize`:␟cafc87479686947e2590b9f588a88040aeaf660b␟7886570921510760899:Tags`;let x;x=$localize`:␟d2bcd3296d2850de762fb943060b7e086a893181␟2041675390931385838:Health`;let $;return $=$localize`:␟a12d1012d8918ce2725b84077784140cb3381cd7␟4537451926022625647:Track Health`,[e,t,n,i,M,h,x,$,[1,"toggle",3,"click"],[1,"content"],[1,"left-content"],[3,"selectionChange"],[1,"right-content"],[1,"navigation"],[1,"router-content"],[1,"icon-left"],[1,"icon-right"],[1,"tabs"],["routerLinkActive","active",3,"routerLink"]]},template:function(t,n){t&1&&(a(0,"button",8),S("click",function(){return n.rightActive=!n.rightActive}),C(1,go,4,0,"a")(2,Co,4,0,"a"),r(),a(3,"div",9)(4,"div",10)(5,"app-admin-folder-tree",11),S("selectionChange",function(M){return n.selectionChange(M)}),r()(),c(6,"app-splitter"),a(7,"div",12),C(8,po,20,18,"nav",13),a(9,"div",14),c(10,"router-outlet"),r()()()),t&2&&(_(),p(n.rightActive?1:2),_(7),p(n.id?8:-1))},dependencies:[Mt,Ct,Me,Ln,Oe],styles:["[_nghost-%COMP%]{overflow-y:auto;overflow-x:hidden;height:100%;width:100%;min-height:100%;flex:1 1 auto;position:relative;display:flex;flex-direction:column;overflow:hidden}[_nghost-%COMP%]   .toggle[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]{width:100%;z-index:1;display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center;background-color:var(--background-transparent);color:var(--on-control)}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{padding-left:0;margin-top:0;margin-bottom:0;list-style:none;border:none;display:flex;flex-flow:row wrap;width:100%}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{position:relative;display:block;margin-bottom:-1px;flex:1;align-self:stretch;border-top-width:4px;border-top-style:solid;border-top-color:transparent;border-bottom-width:4px;border-bottom-style:solid;border-bottom-color:transparent;padding:0}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:hover{background-color:var(--control-hover);transition:all .4s ease;border-bottom-width:4px;border-bottom-style:solid;border-bottom-color:transparent}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:15px}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{padding:10px 0;text-align:center;align-items:center;align-content:center;justify-content:center;margin-right:2px;line-height:1.42857143;border-radius:4px 4px 0 0;position:relative;display:flex;cursor:pointer;border:none;font-size:14px;text-transform:uppercase;letter-spacing:.5px;height:100%;color:var(--on-control);-webkit-user-select:none;user-select:none}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{background-color:unset;border:none;color:var(--on-control-hover)}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%]{cursor:default;border-bottom-color:var(--primary)!important}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:default;background-color:unset;color:var(--on-control-hover)}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.active[_ngcontent-%COMP%]:hover{border-bottom-color:var(--primary)}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.disabled[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:var(--on-control-ambient-disabled)}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.disabled[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, [_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li.disabled[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{color:var(--on-control-ambient-disabled);text-decoration:none;cursor:not-allowed;background-color:transparent}@media (max-width: 768px){[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{align-items:center;align-content:center;justify-content:center}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding:5px;min-width:33%}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{font-size:.8em}}@media (max-width: 400px){[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding:0 5px}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%] > li[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{font-size:.7em}}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs.mini[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs.mini[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{flex:0}@media (max-width: 768px){[_nghost-%COMP%]   .navigation[_ngcontent-%COMP%]   .tabs.mini[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{min-width:20px}}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:100%;flex:1;display:flex;flex-flow:row nowrap;overflow:hidden;align-items:flex-start;align-content:flex-start;padding:0;min-height:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .left-content[_ngcontent-%COMP%]{height:100%;width:20%;display:block;border-right:1px solid var(--background-border);min-width:240px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]{width:80%;flex-shrink:1;flex-grow:1;height:100%;display:flex;flex-flow:column nowrap;position:relative;overflow:hidden}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]   .router-content[_ngcontent-%COMP%]{width:100%;height:100%;display:block;overflow:hidden}@media (max-width: 522px){[_nghost-%COMP%]{height:100%;width:100%;min-height:100%;overflow:hidden}[_nghost-%COMP%]   .toggle[_ngcontent-%COMP%]{display:block;position:relative;width:100%;height:33px;text-align:center;padding-top:5px;border-bottom:1px solid var(--background-border)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{width:100%;height:calc(100% - 33px);min-height:calc(100% - 33px);overflow:hidden;display:block;flex:none;position:relative}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   app-splitter[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .left-content[_ngcontent-%COMP%]{display:flex;height:100%;width:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]{display:none;height:100%;width:100%}.right-active[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .left-content[_ngcontent-%COMP%]{display:none}.right-active[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]{display:flex}}"]})}return o})();var Se=(()=>{class o{id;unsubscribe=new V;route=f(gt);ngOnInit(){this.route&&this.route.parent&&this.route.parent.params.pipe(R(this.unsubscribe)).subscribe(e=>{this.resolve(e),this.refresh()})}idChanged(){}refresh(){}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}resolve(e){this.id=e.id,this.idChanged()}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin-base-parent-view-id"]],standalone:!1,decls:0,vars:0,template:function(t,n){},encapsulation:2})}return o})();var $e=(()=>{class o{data;tree=Pe(Oe);selectionChange(e){this.data&&(this.data.folder=e)}dialogInit(e,t){this.data=t.data;let n=this.tree();n&&(n.refresh(),this.data?.selectID&&n.selectFolderByID(this.data.selectID))}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-dialog-choose-folder"]],viewQuery:function(t,n){t&1&&ge(n.tree,Oe,5),t&2&&Ce()},standalone:!1,decls:1,vars:1,consts:[[3,"selectionChange","autoSelect"]],template:function(t,n){t&1&&(a(0,"app-admin-folder-tree",0),S("selectionChange",function(M){return n.selectionChange(M)}),r()),t&2&&O("autoSelect",!0)},dependencies:[Oe],styles:["[_nghost-%COMP%]{flex:1}"]})}return o})();var Mo=()=>({standalone:!0});function fo(o,l){if(o&1){let e=P();a(0,"div")(1,"form")(2,"div",1)(3,"label",2),d(4,0),r(),a(5,"input",3),I("ngModelChange",function(n){m(e);let i=s();return A(i.edit.name,n)||(i.edit.name=n),g(n)}),r()()()()}if(o&2){let e=s();_(5),O("ngModelOptions",oe(2,Mo)),N("ngModel",e.edit.name)}}var It=(()=>{class o{edit;dialogInit(e,t){this.edit=t.data}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-dialog-folder"]],standalone:!1,decls:1,vars:1,consts:()=>{let e;return e=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`,[e,[1,"user-form-control"],["for","dialog-folder-edit"],["id","dialog-folder-edit","type","text","name","folder-name",3,"ngModelChange","ngModelOptions","ngModel"]]},template:function(t,n){t&1&&C(0,fo,6,3,"div"),t&2&&p(n.edit?0:-1)},dependencies:[se,pe,W,_e,j,le],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{margin-left:20px;margin-right:20px}[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{font-size:1.3em;line-height:1.3em}[_nghost-%COMP%]   .user-form-control[_ngcontent-%COMP%]{margin-bottom:8px;display:block}"]})}return o})();var Oo=o=>["/admin/folder",o,"overview"],So=(o,l)=>l.folder.id;function uo(o,l){if(o&1&&u(0),o&2){let e=s().$implicit;k(" / ",e.folder.tag==null?null:e.folder.tag.albumType," ")}}function Eo(o,l){if(o&1){let e=P();a(0,"tr",14),S("click",function(){let n=m(e).$implicit;return g(n.selected=!n.selected)}),a(1,"td",8)(2,"a",15),u(3),r()(),a(4,"td",9),u(5),r(),a(6,"td",10),u(7),r(),a(8,"td",11),u(9),r(),a(10,"td",12),u(11),C(12,uo,1,1),r()()}if(o&2){let e=l.$implicit;ve("selected",e.selected),_(2),O("routerLink",te(9,Oo,e.folder.id)),_(),T(e.folder.name),_(2),T(e.folder.tag==null?null:e.folder.tag.artist),_(2),T(e.folder.tag==null?null:e.folder.tag.album),_(2),T(e.folder.tag==null?null:e.folder.tag.year),_(2),k(" ",e.folder.type," "),_(),p(e.folder.tag!=null&&e.folder.tag.albumType?12:-1)}}function Po(o,l){if(o&1&&(a(0,"table",6)(1,"tr",7)(2,"td",8),d(3,0),r(),a(4,"td",9),d(5,1),r(),a(6,"td",10),d(7,2),r(),a(8,"td",11),d(9,3),r(),a(10,"td",12),d(11,4),r()(),G(12,Eo,13,11,"tr",13,So),r()),o&2){let e=s();_(12),U(e.folderItems)}}var Rt=class{folder;selected;constructor(l){this.folder=l}},Dt=(()=>{class o{folders=X([]);folderItems=[];ngOnChanges(){this.folderItems=(this.folders()||[]).map(e=>new Rt(e))}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin-folder-list"]],inputs:{folders:[1,"folders"]},standalone:!1,features:[ae],decls:2,vars:2,consts:()=>{let e;e=$localize`:␟fdf7cbdc140d0aab0f0b6c06065a0fd448ed6a2e␟5701618810648052610:Title`;let t;t=$localize`:␟378660a509ecaa4d2dd3b4b0b8975760cfe3576d␟2492300395471245755:Artist`;let n;n=$localize`:␟842a4fcf548e0c52ebab1cb5362f47ab2ca83e12␟1393837337557373364:Album`;let i;i=$localize`:␟f6e04edea3bb3a59d5904725bfbc2c440e793001␟1464072562214937907:Year`;let M;return M=$localize`:␟f61c6867295f3b53d23557021f2f4e0aa1d0b8fc␟8650499415827640724:Type`,[e,t,n,i,M,["name","Folders",3,"list"],[1,"folders"],[1,"folder","heading"],[1,"title"],[1,"artist"],[1,"album"],[1,"year"],[1,"type"],[1,"folder",3,"selected"],[1,"folder",3,"click"],[3,"routerLink"]]},template:function(t,n){t&1&&(c(0,"app-background-text-list",5),C(1,Po,14,0,"table",6)),t&2&&(O("list",n.folderItems),_(),p(n.folderItems&&n.folderItems.length>0?1:-1))},dependencies:[ie,Me],styles:["[_nghost-%COMP%]{width:100%;overflow:auto;display:block}[_nghost-%COMP%]   .folders[_ngcontent-%COMP%]{padding:15px;font-size:.8em;width:100%}[_nghost-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:.9em}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]{border-bottom:1px solid var(--control-border)}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .folder.selected[_ngcontent-%COMP%]{background-color:var(--background-active)}"]})}return o})();function ho(o,l){o&1&&c(0,"app-loading")}function No(o,l){if(o&1){let e=P();a(0,"button",9),S("click",function(){m(e);let n=s(2);return g(n.moveSubfolders())}),c(1,"i",10),r()}}function Ao(o,l){if(o&1&&c(0,"app-admin-folder-list",8),o&2){let e=s(2);O("folders",e.folder.folders)}}function Io(o,l){if(o&1){let e=P();a(0,"div",0)(1,"div",1)(2,"button",2),S("click",function(){m(e);let n=s();return g(n.refresh())}),c(3,"i",3),r(),a(4,"button",4),S("click",function(){m(e);let n=s();return g(n.newFolder())}),c(5,"i",5),r(),C(6,No,2,0,"button",6),r(),c(7,"app-background-text-list",7),C(8,Ao,1,1,"app-admin-folder-list",8),r()}if(o&2){let e=s();_(6),p(e.folder.folders&&e.folder.folders.length?6:-1),_(),O("list",e.folder.folders),_(),p(e.folder.folders&&e.folder.folders.length?8:-1)}}var Lt=(()=>{class o extends Se{folder;jam=f(F);notify=f(b);folderService=f(H);dialogOverlay=f(Z);ngOnInit(){super.ngOnInit(),this.folderService.foldersChange.pipe(R(this.unsubscribe)).subscribe(e=>{e.id===this.id&&this.refresh()})}ngOnDestroy(){super.ngOnDestroy()}refresh(){this.folder=void 0,this.id&&this.jam.folder.id({id:this.id,folderIncFolders:!0,folderIncTag:!0}).then(e=>{this.folder=e}).catch(e=>{this.notify.error(e)})}newFolder(){if(!this.folder)return;let e=this.folder,t={folder:e,name:""};this.dialogOverlay.open({childComponent:It,title:"New Folder",data:t,onOkBtn:()=>y(this,null,function*(){try{this.jam.folder.create({id:e.id,name:t.name}).then(n=>{this.folderService.waitForQueueResult("Creating Folder",n,[],[e.id])}).catch(n=>{this.notify.error(n)})}catch(n){return this.notify.error(n),Promise.reject(n)}}),onCancelBtn:()=>y(this,null,function*(){return Promise.resolve()})})}moveSubfolders(){if(!this.id||!this.folder?.folders)return;let e=this.id,t=this.folder.folders.map(M=>M.id),n=[e].concat(t),i={selectID:e,disableIDs:n};this.dialogOverlay.open({title:"Move Subfolders to",childComponent:$e,data:i,panelClass:"overlay-panel-large-buttons",onOkBtn:()=>y(this,null,function*(){try{let M=i.folder;if(!M)return;n.push(M.id),this.jam.folder.move({ids:t,newParentID:M.id}).then(h=>{this.folderService.waitForQueueResult("Moving Folders",h,[],n)}).catch(h=>{this.notify.error(h)})}catch(M){return this.notify.error(M),Promise.reject(M)}}),onCancelBtn:()=>y(this,null,function*(){return Promise.resolve()})})}static \u0275fac=(()=>{let e;return function(n){return(e||(e=ue(o)))(n||o)}})();static \u0275cmp=E({type:o,selectors:[["app-admin-folder-folders"]],standalone:!1,features:[Ee],decls:2,vars:1,consts:()=>{let e;e=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`;let t;t=$localize`:␟65ab0e571a2c4b74cf959aa0fecf26f78fae4b9f␟5184355384536429227:New Folder…`;let n;return n=$localize`:␟defb5986728ca6ef16d61914a5b0642c36084245␟4062236829893650390:Move Subfolders…`,[[1,"folders"],[1,"actions"],["title",e,1,"button-on-control",3,"click"],[1,"icon-reload"],["title",t,1,"button-on-control",3,"click"],[1,"icon-plus"],["title",n,1,"button-on-control"],["name","Folders",3,"list"],[3,"folders"],["title",n,1,"button-on-control",3,"click"],[1,"icon-right-bold"]]},template:function(t,n){t&1&&C(0,ho,1,0,"app-loading")(1,Io,9,3,"div",0),t&2&&p(n.folder?n.folder.folders?1:-1:0)},dependencies:[ie,ee,Dt],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:block;overflow:hidden}[_nghost-%COMP%]   .folders[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}[_nghost-%COMP%]   .folders[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:10px 15px 0;border-bottom-color:var(--background-border);border-bottom-width:1px;border-bottom-style:solid}[_nghost-%COMP%]   .folders[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}[_nghost-%COMP%]   .folders[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1px;font-size:11px;margin-left:5px;margin-right:5px}[_nghost-%COMP%]   .folders[_ngcontent-%COMP%]   app-admin-folder-list[_ngcontent-%COMP%]{overflow-y:auto}"]})}return o})();function Ro(o,l){if(o&1){let e=P();a(0,"image-cropper",8),S("imageCropped",function(n){m(e);let i=s();return g(i.imageCropped(n))}),r()}if(o&2){let e=s();O("imageBase64",e.imageBase64)("format",e.format)("maintainAspectRatio",e.maintainAspectRatio)}}function Do(o,l){if(o&1&&(a(0,"div",5),c(1,"img",9),r()),o&2){let e=s();_(),O("src",e.croppedImage,me)}}var bt=(()=>{class o{data=X();imageEdited=xe();imageBase64="";croppedImage;croppedImageFile;mimeType="image/jpeg";maintainAspectRatio=!0;format="jpeg";unsubscribe=new V;jam=f(F);folderService=f(H);notify=f(b);sanitizer=f(fn);ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}load(){let e=this.data();e&&this.jam.image.imageBinary({id:e.artwork.id}).then(t=>{this.imageBase64=`data:${t.contentType||"image/jpeg"};base64,${Wn(t.buffer)}`}).catch(t=>{this.notify.error(t)})}imageCropped(e){e.objectUrl&&(this.croppedImage=this.sanitizer.bypassSecurityTrustUrl(e.objectUrl)),e.blob&&(this.croppedImageFile=e.blob)}ngOnChanges(){this.load()}upload(){let e=this.data();if(!this.croppedImageFile||!e)return;let t=e.folderID,n=new File([this.croppedImageFile],e.artwork.name,{type:this.croppedImageFile.type});this.jam.artwork.update({id:e.artwork.id},n).pipe(R(this.unsubscribe)).subscribe(i=>{i.type===ke.Response?(this.folderService.waitForQueueResult("Updating Folder Artwork",i.body,[t]),this.imageEdited.emit()):(i.type,ke.UploadProgress)},i=>{this.notify.error(i)},()=>{this.notify.success("Upload done")})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin-artwork-edit"]],inputs:{data:[1,"data"]},outputs:{imageEdited:"imageEdited"},standalone:!1,features:[ae],decls:10,vars:4,consts:()=>{let e;e=$localize`:␟9adf24384bd663ce0cf256940aae864e83991330␟6234579371454134968:Maintain Aspect Ratio`;let t;t=$localize`:␟f8c2b6ea1dd59afb3f3f555afbd132af40653bba␟1396820513327307838:Use Cropped Artwork`;let n;return n=$localize`:␟4fc4437088a4fa1764a26dd6b3552dbca6b64541␟777253553934937544:Cropped Image`,[e,t,[1,"image-crop"],["type","checkbox",3,"ngModelChange","checked","ngModel"],[3,"imageBase64","format","maintainAspectRatio"],[1,"image-preview"],[1,"buttons"],[1,"button-on-control",3,"click"],[3,"imageCropped","imageBase64","format","maintainAspectRatio"],["alt",n,3,"src"]]},template:function(t,n){t&1&&(a(0,"div",2)(1,"label")(2,"input",3),I("ngModelChange",function(M){return A(n.maintainAspectRatio,M)||(n.maintainAspectRatio=M),M}),r(),D(3),d(4,0),L(),r(),C(5,Ro,1,3,"image-cropper",4),r(),C(6,Do,2,1,"div",5),a(7,"div",6)(8,"button",7),S("click",function(){return n.upload()}),d(9,1),r()()),t&2&&(_(2),O("checked",n.maintainAspectRatio),N("ngModel",n.maintainAspectRatio),_(3),p(n.imageBase64?5:-1),_(),p(n.croppedImage?6:-1))},dependencies:[Te,W,j,ft],styles:["[_nghost-%COMP%]{width:100%;display:block;text-align:center}[_nghost-%COMP%]   image-cropper[_ngcontent-%COMP%]{width:300px;display:block}[_nghost-%COMP%]   .image-crop[_ngcontent-%COMP%]{display:inline-block;text-align:center;margin-left:10px;margin-right:10px}[_nghost-%COMP%]   .image-preview[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;display:inline-block}[_nghost-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px}"]})}return o})();function bo(o,l){if(o&1){let e=P();a(0,"app-admin-artwork-edit",1),S("imageEdited",function(){m(e);let n=s();return g(n.onImageEdited())}),r()}if(o&2){let e=s();O("data",e.data)}}var vt=(()=>{class o{data;reference;loading=!0;dialogInit(e,t){this.data=t.data,this.reference=e}onImageEdited(){this.reference&&this.reference.close()}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-image-edit-overlay-content"]],standalone:!1,decls:1,vars:1,consts:[[3,"data"],[3,"imageEdited","data"]],template:function(t,n){t&1&&C(0,bo,1,1,"app-admin-artwork-edit",0),t&2&&p(n.data?0:-1)},dependencies:[bt],encapsulation:2})}return o})();var vo=["inlineEditControl"];function xo(o,l){if(o&1){let e=P();a(0,"div",1)(1,"input",2,0),I("ngModelChange",function(n){m(e);let i=s();return A(i.value,n)||(i.value=n),g(n)}),S("blur",function(){m(e);let n=s();return g(n.onBlur())})("keydown.enter",function(){m(e);let n=s();return g(n.apply())}),r()()}if(o&2){let e=s();_(),O("required",e.required())("name",e.value)("type",e.type())("placeholder",e.placeholder()),N("ngModel",e.value)}}function yo(o,l){if(o&1){let e=P();a(0,"div")(1,"div",3),S("click",function(){m(e);let n=s();return g(n.edit(n.value))})("focus",function(){m(e);let n=s();return g(n.edit(n.value))}),u(2),c(3,"i",4),r()()}if(o&2){let e=s();_(2),k("",e.value,"\xA0")}}var Qe=(()=>{class o{editing=!1;placeholder=X("");type=X("text");required=X(!1);disabled=X(!1);endEditRequest=xe();inlineEditControl=Pe("inlineEditControl");editValue="";preValue="";onChange=Function.prototype;onTouched=Function.prototype;get value(){return this.editValue}set value(e){e!==this.editValue&&(this.editValue=e,this.onChange(e))}writeValue(e){this.editValue=e}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}onBlur(){this.editing=!1,this.preValue!==this.editValue&&this.endEditRequest.emit()}apply(){this.editing=!1,this.endEditRequest.emit()}edit(e){this.disabled()||(this.preValue=e,this.editing=!0,setTimeout(()=>{let t=this.inlineEditControl();t?.nativeElement&&t.nativeElement.focus()}))}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-inline-edit"]],viewQuery:function(t,n){t&1&&ge(n.inlineEditControl,vo,5),t&2&&Ce()},inputs:{placeholder:[1,"placeholder"],type:[1,"type"],required:[1,"required"],disabled:[1,"disabled"]},outputs:{endEditRequest:"endEditRequest"},standalone:!1,features:[dn([{provide:On,useExisting:o,multi:!0}])],decls:2,vars:1,consts:()=>{let e;return e=$localize`:␟32dfa3de9f35ea40a3c19960ab339727b437791f␟2350070440008093526:Click to edit`,[["inlineEditControl",""],[1,"inline-edit-edit"],[3,"ngModelChange","blur","keydown.enter","required","name","type","placeholder","ngModel"],["title",e,"tabindex","0",1,"inline-edit",3,"click","focus"],[1,"icon-edit"]]},template:function(t,n){t&1&&C(0,xo,3,5,"div",1)(1,yo,4,1,"div"),t&2&&p(n.editing?0:1)},dependencies:[pe,W,En,j],styles:[`.inline-edit{cursor:pointer}.inline-edit i{font-size:.7em}.inline-edit-edit{width:100%;display:block}.inline-edit-edit input{width:100%}
`],encapsulation:2})}return o})();var wo=(o,l)=>l.artwork.id;function ko(o,l){if(o&1){let e=P();a(0,"div",3),S("keydown.enter",function(){let n=m(e).$implicit,i=s();return g(i.editArtwork(n.artwork))}),a(1,"div",4)(2,"img",5),S("clickenter",function(){let n=m(e).$implicit,i=s();return g(i.editArtwork(n.artwork))}),r(),a(3,"div",6),u(4),r(),a(5,"div",7),u(6),r(),a(7,"div",8),d(8,0),r(),a(9,"div",9),u(10),De(11,"filesize"),r()(),a(12,"div",10)(13,"app-inline-edit",11),I("ngModelChange",function(n){let i=m(e).$implicit;return A(i.name,n)||(i.name=n),g(n)}),S("endEditRequest",function(){let n=m(e).$implicit,i=s();return g(i.editArtworkName(n))}),r(),a(14,"a",12),S("clickenter",function(){let n=m(e).$implicit,i=s();return g(i.removeArtwork(n))}),c(15,"i",13),r()()()}if(o&2){let e=l.$implicit;_(2),O("src",e.thumbnail,me),_(2),T(e.artwork.types),_(2),T(e.artwork.format),_(2),an(e.artwork.width)(e.artwork.height),_n(8),_(2),T(ot(11,7,e.artwork.size)),_(3),N("ngModel",e.name)}}function $o(o){let l=o.split(".");return l.pop(),l.join(".")}function Fo(o){let l=o.split(".");return l[l.length-1]}var qe=(()=>{class o{artworks=X();folderID=X();nodes;jam=f(F);notify=f(b);folderService=f(H);dialogs=f(Re);dialogOverlay=f(Z);ngOnChanges(){this.displayArtworks()}editArtworkName(e){this.jam.artwork.rename({id:e.artwork.id,newName:e.name}).then(t=>{let n=this.folderID();this.folderService.waitForQueueResult("Renaming Artwork",t,n?[n]:[],[])}).catch(t=>{this.notify.error(t)})}editArtwork(e){this.dialogOverlay.open({childComponent:vt,title:"Edit Image",data:{artwork:e,folderID:this.folderID()},panelClass:""})}removeArtwork(e){this.dialogs.confirm("Remove Artworks?",`Do you want to delete "${e.artwork.name}"?`,()=>{this.jam.artwork.remove({id:e.artwork.id}).then(t=>{this.nodes&&(this.nodes=this.nodes.filter(i=>i!==e));let n=this.folderID();this.folderService.waitForQueueResult("Removing Artwork",t,n?[n]:[])}).catch(t=>{this.notify.error(t)})})}displayArtworks(){this.nodes=[];let e=this.artworks();e&&(this.nodes=e.map(t=>({name:$o(t.name),type:Fo(t.name),artwork:t,thumbnail:this.jam.image.imageUrl({id:t.id,size:128,format:lt.webp})})))}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin-artwork-list"]],inputs:{artworks:[1,"artworks"],folderID:[1,"folderID"]},standalone:!1,features:[ae],decls:3,vars:0,consts:()=>{let e;e=$localize`:␟787e502e73191d41bb2ee8adb258a7435c94f5af␟7553271888893131195:Artwork`;let t;t=$localize`:␟4098fa43889421ae01e1548d8123ac604d0a741b␟365085234255662021:Delete Image`;let n;return n=$localize`:␟ffd1e79a49c10e27b981744032779234f6d86724␟8914490256741079776:${"\uFFFD0\uFFFD"}:INTERPOLATION:x${"\uFFFD1\uFFFD"}:INTERPOLATION_1:`,[n,["appFocusKeyList","","role","list"],["appFocusKeyListItem","","role","listitem",1,"artwork"],["appFocusKeyListItem","","role","listitem",1,"artwork",3,"keydown.enter"],[1,"artwork-img"],["alt",e,3,"clickenter","src"],[1,"mode"],[1,"format"],[1,"dims"],[1,"size"],[1,"artwork-types"],["type","text",3,"ngModelChange","endEditRequest","ngModel"],["title",t,1,"delete-button",3,"clickenter"],["aria-hidden","true",1,"icon-trash"]]},template:function(t,n){t&1&&(a(0,"div",1),G(1,ko,16,9,"div",2,wo),r()),t&2&&(_(),U(n.nodes))},dependencies:[Ue,Ne,Ae,W,j,Qe,Gn],styles:["[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]{display:inline-block;padding-top:15px;padding-right:15px;font-size:.8em;text-align:center;width:200px}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]{position:relative;overflow:hidden}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .dims[_ngcontent-%COMP%], [_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%], [_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .format[_ngcontent-%COMP%], [_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{position:absolute;padding:5px;background-color:var(--background-transparent);color:var(--on-background-highlight)}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .mode[_ngcontent-%COMP%]{top:0;left:0}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .format[_ngcontent-%COMP%]{bottom:0;left:0}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .dims[_ngcontent-%COMP%]{top:0;right:0}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]   .artwork-img[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{bottom:0;right:0}[_nghost-%COMP%]   .artwork-types[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;overflow:hidden}[_nghost-%COMP%]   .artwork-types[_ngcontent-%COMP%]   app-inline-edit[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]   .artwork-types[_ngcontent-%COMP%]   .delete-button[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}"]})}return o})();var Go=(o,l)=>l.image;function Uo(o,l){o&1&&c(0,"app-loading")}function Vo(o,l){o&1&&c(0,"i",17)}function Xo(o,l){if(o&1){let e=P();a(0,"input",19),I("ngModelChange",function(n){m(e);let i=s().$implicit;return A(i.checked,n)||(i.checked=n),g(n)}),r()}if(o&2){let e=s().$implicit;O("checked",e.checked),N("ngModel",e.checked)}}function Ho(o,l){if(o&1){let e=P();a(0,"div",11),S("keydown.enter",function(){let n=m(e).$implicit;return g(n.checked=!n.checked)}),a(1,"div",12),S("clickenter",function(){let n=m(e).$implicit;return g(n.checked=!n.checked)}),c(2,"img",13),r(),a(3,"div",14)(4,"div",15)(5,"form")(6,"span",16),C(7,Vo,1,0,"i",17)(8,Xo,1,2,"input",18),u(9),r()()()()()}if(o&2){let e=l.$implicit;_(2),O("alt",sn(e.name))("src",e.thumbnail,me),_(5),p(e.storing?7:8),_(2),k(" ",e.name," ")}}function zo(o,l){if(o&1&&(a(0,"div"),c(1,"app-background-text-list",8),a(2,"div",9),G(3,Ho,10,5,"div",10,Go),r()()),o&2){let e=s();_(),O("list",e.nodes),_(2),U(e.nodes)}}function Wo(o,l){if(o&1&&c(0,"app-admin-artwork-list",21),o&2){let e=s(),t=s(2);O("folderID",e.folder.id)("artworks",t.artworks)}}function jo(o,l){if(o&1&&(a(0,"div",20)(1,"div",4),d(2,0),r(),C(3,Wo,1,2,"app-admin-artwork-list",21),r()),o&2){let e=s(2);_(3),p(e.isArtRefreshing?-1:3)}}function Ko(o,l){if(o&1&&C(0,jo,4,1,"div",20),o&2){let e,t=s();p((e=t.data())?0:-1,e)}}function Bo(o,l){o&1&&(a(0,"button",22),c(1,"i",17),r())}function Qo(o,l){if(o&1){let e=P();a(0,"button",23),S("click",function(){m(e);let n=s(2);return g(n.use())}),d(1,1),r()}}function qo(o,l){if(o&1&&(a(0,"div"),C(1,Bo,2,0,"button",22)(2,Qo,2,0,"button",22),r()),o&2){let e=s();_(),p(e.isWorking?1:2)}}var xt=(()=>{class o{data=X();artworks;nodes;isWorking=!1;isArtRefreshing=!1;searchSource={name:"",url:""};unsubscribe=new V;jam=f(F);notify=f(b);folderService=f(H);http=f(pn);ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}ngOnChanges(){this.search();let e=this.data();e&&e.folder&&(e.folder.artworks?this.artworks=e.folder.artworks:this.refreshArtworks())}refreshArtworks(){let e=this.data();e&&(this.isArtRefreshing=!0,this.jam.artwork.search({folderIDs:[e.folder.id]}).then(t=>{this.isArtRefreshing=!1,this.artworks=t.items}).catch(t=>{this.isArtRefreshing=!1,console.error(t)}))}loadWikiDataID(e){return y(this,null,function*(){let t=yield this.jam.metadata.musicbrainzLookup({type:In.artist,mbID:e});if(t?.data?.artist?.relations){let n=t.data.artist.relations.find(i=>i.type==="wikidata");if(n?.url)return n.url.resource.split("/").pop()}})}loadWikiCommonImage(e){return y(this,null,function*(){let t=yield this.loadWikiDataID(e);if(!t)return;let i=(yield this.jam.metadata.wikidataLookup({wikiDataID:t}))?.data?.entity?.claims;if(!i)return;let M=Object.keys(i);for(let h of M){let x=i[h];x=x.filter(w=>typeof w.mainsnak.datavalue.value=="string"&&zn(w.mainsnak.datavalue.value.toLowerCase(),["jpg","jpeg","png"]));let $=x[0];if($){let ne=`https://en.wikipedia.org/w/api.php?format=json&action=query&origin=*&titles=File:${$.mainsnak.datavalue.value}&prop=imageinfo&iiprop=extmetadata|url&iiextmetadatafilter=LicenseShortName`,Y=yield this.http.get(ne).toPromise();if(Y&&Y.query.pages){let J=Y.query.pages[Object.keys(Y.query.pages)[0]];if(J&&J.imageinfo[0])return{name:Be.artist,thumbnail:J.imageinfo[0].url,image:J.imageinfo[0].url,licence:J.imageinfo[0].extmetadata.LicenseShortName.value,checked:!0,storing:!1,types:[Be.artist]}}}}})}loadWikiCommon(e){this.loadWikiCommonImage(e).then(t=>{this.nodes=[],t&&(t.checked=!0,this.nodes.push(t))}).catch(t=>{this.nodes=[],this.notify.error(t)})}use(){let e=(this.nodes||[]).find(n=>n.checked&&!n.storing),t=this.data()?.folder;e&&t?(this.isWorking=!0,e.storing=!0,this.jam.artwork.createByUrl({folderID:t.id,url:e.image,types:e.types}).then(n=>{this.folderService.waitForQueueResult("Creating Artwork",n,[t.id]).pipe(R(this.unsubscribe)).subscribe(()=>{e.storing=!1,e.checked=!1}),this.use()}).catch(n=>{e.storing=!1,this.notify.error(n)})):this.isWorking=!1}ngOnInit(){this.folderService.foldersChange.pipe(R(this.unsubscribe)).subscribe(e=>{e.id===this.data()?.folder.id&&this.refreshArtworks()})}loadReleaseGroupAndRelease(e,t){this.jam.metadata.coverartarchiveLookup({type:Ke.releaseGroup,mbID:t}).then(n=>{let i=this.coverArtResponseToNodes(n.data);this.jam.metadata.coverartarchiveLookup({type:Ke.release,mbID:e}).then(M=>{i=i.concat(this.coverArtResponseToNodes(M.data)),this.display(i)}).catch(M=>{this.notify.error(M)})}).catch(n=>{this.notify.error(n)})}loadReleaseGroup(e){this.jam.metadata.coverartarchiveLookup({type:Ke.releaseGroup,mbID:e}).then(t=>{let n=this.coverArtResponseToNodes(t.data);this.display(n)}).catch(t=>{this.notify.error(t)})}loadRelease(e){e&&this.jam.metadata.coverartarchiveLookup({type:Ke.release,mbID:e}).then(t=>{let n=this.coverArtResponseToNodes(t.data);this.display(n);let i=this.data();n.length===0&&i&&i.folder&&i.folder.tag&&i.folder.tag.mbReleaseGroupID&&(this.nodes=void 0,this.loadReleaseGroup(i.folder.tag.mbReleaseGroupID))}).catch(t=>{this.notify.error(t)})}coverArtResponseToNodes(e){return e.images?e.images.map(t=>(t.types.length===0&&t.types.push("Other"),{name:(t.types||[]).join("/").toLowerCase(),thumbnail:this.jam.metadata.coverartarchiveImageUrl({url:t.thumbnails.small}),licence:"",image:t.image,types:(t.types||[]).map(n=>n.toLowerCase()),checked:!1,storing:!1,stored:!1})):[]}search(){let e=this.data();e&&e.folder&&e.folder.tag&&(e.folder.type===de.artist?e.folder.tag.mbArtistID&&(this.searchSource={name:"Wiki Commons",url:"https://commons.wikimedia.org"},this.loadWikiCommon(e.folder.tag.mbArtistID)):e&&e.folder&&e.folder.tag&&(this.searchSource={name:"Coverart Archive",url:"https://coverartarchive.org"},e.folder.tag.mbReleaseID&&e.folder.tag.mbReleaseGroupID?this.loadReleaseGroupAndRelease(e.folder.tag.mbReleaseID,e.folder.tag.mbReleaseGroupID):e.folder.tag.mbReleaseID?this.loadRelease(e.folder.tag.mbReleaseID):e.folder.tag.mbReleaseGroupID&&this.loadReleaseGroup(e.folder.tag.mbReleaseGroupID)))}display(e){this.nodes=e;let t=e.find(n=>n.types.length===1&&n.types[0]===Be.front);t||(t=e.find(n=>n.types.includes(Be.front))),t&&this.nodes.forEach(n=>n.checked=n===t)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin-folder-artwork-search"]],inputs:{data:[1,"data"]},standalone:!1,features:[ae],decls:11,vars:5,consts:()=>{let e;e=$localize`:␟7e7b22a71a4180b0fe37ddd31720efbd93a51ce7␟8668694612879894228:Current Images`;let t;return t=$localize`:␟317c5efadc941d938c6171d4890c06afbd8a8db3␟826482080541471028:Use Checked Artwork`,[e,t,[1,"image-selector"],[1,"art-source"],[1,"section"],["rel","noopener","target","_blank",3,"href"],[1,"artwork"],[1,"buttons"],["name","Images",3,"list"],["appFocusKeyList","","role","list",1,"images"],["appFocusKeyListItem","","role","listitem"],["appFocusKeyListItem","","role","listitem",3,"keydown.enter"],[1,"image",3,"clickenter"],[3,"alt","src"],[1,"footer"],[1,"footer-content"],[1,"label"],[1,"icon-spin","icon-spinner"],["type","checkbox",3,"checked","ngModel"],["type","checkbox",3,"ngModelChange","checked","ngModel"],[1,"current"],[3,"folderID","artworks"],[1,"button-on-control"],[1,"button-on-control",3,"click"]]},template:function(t,n){t&1&&(a(0,"div",2)(1,"div",3)(2,"div",4)(3,"a",5),u(4),r()(),C(5,Uo,1,0,"app-loading")(6,zo,5,1,"div"),r(),a(7,"div",6),C(8,Ko,1,1),r()(),a(9,"div",7),C(10,qo,3,1,"div"),r()),t&2&&(_(3),O("href",n.searchSource.url,me),_(),T(n.searchSource.name),_(),p(n.nodes?6:5),_(3),p(n.artworks?8:-1),_(2),p(n.nodes&&n.nodes.length>0?10:-1))},dependencies:[ie,ee,Ue,Ne,Ae,se,Te,W,_e,j,le,qe],styles:["[_nghost-%COMP%]   .image-selector[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap;height:calc(100% - 40px)}[_nghost-%COMP%]   .image-buttons[_ngcontent-%COMP%]{height:40px}[_nghost-%COMP%]   .artwork[_ngcontent-%COMP%]{overflow-y:auto;width:50%;height:100%;padding-left:15px}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]{padding-right:15px;overflow-y:auto;width:50%;height:100%;border-right:1px solid var(--background-border)}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{display:inline-block;padding-top:15px;padding-right:15px;font-size:.8em}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:185px;min-width:185px;min-height:185px;height:auto}[_nghost-%COMP%]   .art-source[_ngcontent-%COMP%]   .images[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   .section[_ngcontent-%COMP%]{border-bottom:1px solid var(--background-border);padding-bottom:5px}[_nghost-%COMP%]   .section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background)}"]})}return o})();var Je=(()=>{class o{data;dialogInit(e,t){this.data=t.data}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-dialog-folder-artwork-search"]],standalone:!1,decls:1,vars:1,consts:[[3,"data"]],template:function(t,n){t&1&&c(0,"app-admin-folder-artwork-search",0),t&2&&O("data",n.data)},dependencies:[xt],encapsulation:2})}return o})();var Yo=(o,l)=>l.hint.id,Zo=(o,l)=>l.name;function ei(o,l){if(o&1&&(a(0,"div",6),u(1),r()),o&2){let e=l.$implicit;_(),T(e)}}function ti(o,l){if(o&1&&(a(0,"div",2),c(1,"i",5),u(2),G(3,ei,2,1,"div",6,nt),r()),o&2){let e=l.$implicit;_(2),k(" ",e.hint.name," "),_(),U(e.details)}}function ni(o,l){o&1&&(a(0,"div",2),d(1,0),r())}function oi(o,l){o&1&&c(0,"i",8)}function ii(o,l){if(o&1&&u(0),o&2){let e=s().$implicit;k(" ",e.name," ")}}function ri(o,l){if(o&1){let e=P();a(0,"button",7),S("click",function(){let n=m(e).$implicit;return g(n.click())}),C(1,oi,1,0,"i",8)(2,ii,1,1),r()}if(o&2){let e=l.$implicit;_(),p(e.running?1:2)}}function ai(o,l){if(o&1&&(a(0,"div",1),G(1,ti,5,1,"div",2,Yo,!1,ni,2,0,"div",2),a(4,"div",3),G(5,ri,3,1,"button",4,Zo),r()()),o&2){let e=s();_(),U(e.hints),_(4),U(e.solutions)}}function _i(o,l){o&1&&(a(0,"div",1)(1,"div",2),c(2,"i",8),r()())}var yt=(()=>{class o{hints;solutions=[];folderHealth=X();unsubscribe=new V;router=f(he);jam=f(F);dialogOverlay=f(Z);folderService=f(H);ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}searchImages(e){this.dialogOverlay.open({title:"Search Artwork Images",childComponent:Je,data:{folder:e},panelClass:"overlay-panel-large-buttons"})}ngOnChanges(){this.display(this.folderHealth())}static describeImageInvalidHint(e){if(!e.details||e.details.length===0)return[];let t=[e.details[0].reason];return e.details[0].expected&&t.push(`Expected: ${e.details[0].expected} Actual: ${e.details[0].actual}`),t}static describeAlbumTracksMissingHint(e){if(!e.details||e.details.length===0)return[];let t=[];return e.details[0].expected&&t.push(`Expected: ${e.details[0].expected} Actual: ${e.details[0].actual}`),t}describeImageQualityHint(e,t){if(this.addAlbumImageSearchSolution(t),!e.details||e.details.length===0)return[];let n=[e.details[0].reason];return n.push(`Expected: ${e.details[0].expected} Actual: ${e.details[0].actual}`),n}addArtistImageSearchSolution(e){if(e.tag&&e.tag.mbArtistID){let t={name:"Search",click:()=>y(this,null,function*(){this.searchImages(e)})};this.solutions.push(t)}}addAlbumImageSearchSolution(e){if(e.tag&&(e.tag.mbReleaseID||e.tag.mbReleaseGroupID)){let t={name:"Search",click:()=>y(this,null,function*(){this.searchImages(e)})};this.solutions.push(t)}}addRenameSolution(e,t){if(!this.solutions.find(n=>n.name==="Rename")){let n={name:"Rename",click:()=>y(this,null,function*(){if(n.running)return;n.running=!0;let i=yield this.jam.folder.rename({id:e.id,name:t});this.folderService.waitForQueueResult("Renaming Folder",i,[e.id]).pipe(R(this.unsubscribe)).subscribe(()=>{n.running=!1})})};this.solutions.push(n)}}addEditTagSolution(e){if(!this.solutions.find(t=>t.name==="Edit Tags")){let t={name:"Edit Tags",click:()=>y(this,null,function*(){this.router.navigate([`/admin/folder/${e.id}/tags`]).catch(n=>{console.error(n)})})};this.solutions.push(t)}}describeMBIDMissingHint(e,t){return this.addEditTagSolution(t),[]}describeAlbumTagMissingHint(e,t){return this.addEditTagSolution(t),e.details?[`Expected: ${e.details.map(n=>n.expected).join(",")}`]:[]}describeNameNonConformHint(e,t){let n=e.details&&e.details.length>0?e.details[0].expected:"";return n?(this.addRenameSolution(t,n),[`Current: ${t.name}`,`Suggested Name: ${n}`]):[]}describeArtistImageMissingHint(e,t){return this.addArtistImageSearchSolution(t),[]}describeAlbumImageMissingHint(e,t){return this.addAlbumImageSearchSolution(t),[]}describeHint(e,t){switch(e.id){case fe.albumMBIDExists:return this.describeMBIDMissingHint(e,t);case fe.albumTagsExists:return this.describeAlbumTagMissingHint(e,t);case fe.albumNameConform:case fe.artistNameConform:return this.describeNameNonConformHint(e,t);case fe.albumImageExists:return this.describeAlbumImageMissingHint(e,t);case fe.albumTracksComplete:return o.describeAlbumTracksMissingHint(e);case fe.artistImageExists:return this.describeArtistImageMissingHint(e,t);case fe.artistImageValid:case fe.albumImageValid:return o.describeImageInvalidHint(e);case fe.albumImageQuality:return this.describeImageQualityHint(e,t);default:break}return[]}display(e){this.hints=[],this.solutions=[],e?.health&&(this.hints=e.health.map(t=>{let n=this.describeHint(t,e.folder);return{hint:t,details:n}}))}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-folder-health"]],inputs:{folderHealth:[1,"folderHealth"]},standalone:!1,features:[ae],decls:2,vars:1,consts:()=>{let e;return e=$localize`:␟baa5a59fd701bf37b30140cf2080f8987db6c2e9␟4786331182153457864:No Hints`,[e,[1,"hints"],[1,"hint"],[1,"solutions"],[1,"button-on-background"],[1,"icon-warning"],[1,"details"],[1,"button-on-background",3,"click"],[1,"icon-spin","icon-spinner"]]},template:function(t,n){t&1&&C(0,ai,7,1,"div",1)(1,_i,3,0,"div",1),t&2&&p(n.hints?0:1)},styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:auto;display:block}[_nghost-%COMP%]   .icon-warning[_ngcontent-%COMP%]{color:var(--accent)}[_nghost-%COMP%]   .label[_ngcontent-%COMP%]{padding-left:28px;font-size:.8em;text-transform:uppercase;min-width:30%;display:inline-block}[_nghost-%COMP%]   .hints[_ngcontent-%COMP%]{padding-top:10px}[_nghost-%COMP%]   .hint[_ngcontent-%COMP%]{padding-bottom:10px}"]})}return o})();var si=o=>["/admin/folder",o,"overview"],di=(o,l)=>l.folder.id;function ci(o,l){if(o&1&&(a(0,"option",13),u(1),r()),o&2){let e=l.$implicit;O("value",e),_(),T(e)}}function mi(o,l){if(o&1){let e=P();a(0,"select",12),I("ngModelChange",function(n){m(e);let i=s();return A(i.filter,n)||(i.filter=n),g(n)}),S("ngModelChange",function(){m(e);let n=s();return g(n.onFilterChange())}),G(1,ci,2,2,"option",13,nt),r()}if(o&2){let e=s();N("ngModel",e.filter),_(),U(e.modes)}}function gi(o,l){o&1&&c(0,"app-loading")}function Ci(o,l){if(o&1&&(a(0,"div",19),d(1,0),r(),a(2,"div",16),u(3),r(),a(4,"div",20),u(5),r(),a(6,"div",21),u(7),r()),o&2){let e=s().$implicit;_(3),T(e.folder.tag==null?null:e.folder.tag.album),_(2),T(e.folder.tag==null?null:e.folder.tag.artist),_(2),T(e.folder.tag==null?null:e.folder.tag.year)}}function pi(o,l){if(o&1&&(a(0,"div",19),d(1,1),r(),a(2,"div",16),u(3),r(),a(4,"div",20),u(5),r(),a(6,"div",21),u(7),r()),o&2){let e=s().$implicit;_(3),T(e.folder.tag==null?null:e.folder.tag.album),_(2),T(e.folder.tag==null?null:e.folder.tag.artist),_(2),T(e.folder.tag==null?null:e.folder.tag.year)}}function Mi(o,l){if(o&1&&(a(0,"div",19),d(1,2),r(),a(2,"div",16),u(3),r()),o&2){let e=s().$implicit;_(3),T(e.folder.tag==null?null:e.folder.tag.artist)}}function fi(o,l){if(o&1&&(a(0,"div",19),d(1,3),r(),a(2,"div",16),u(3),r()),o&2){let e=s().$implicit;_(3),T(e.folder.name)}}function Oi(o,l){if(o&1&&(a(0,"div",16),u(1),r()),o&2){let e=s().$implicit;_(),T(e.folder.name)}}function Si(o,l){if(o&1&&(a(0,"div",11)(1,"div",14)(2,"a",15),C(3,Ci,8,3)(4,pi,8,3)(5,Mi,4,1)(6,fi,4,1)(7,Oi,2,1,"div",16),r()(),a(8,"div",17),c(9,"app-folder-health",18),r()()),o&2){let e,t=l.$implicit;_(2),O("routerLink",te(3,si,t.folder.id)),_(),p((e=t.folder.type)==="multialbum"?3:e==="album"?4:e==="artist"?5:e==="collection"?6:7),_(6),O("folderHealth",t)}}var wt=(()=>{class o extends Se{all;hints;filter;modes=[];jam=f(F);notify=f(b);folderService=f(H);onFilterChange(){this.reDisplay()}ngOnInit(){super.ngOnInit(),this.folderService.foldersChange.pipe(R(this.unsubscribe)).subscribe(e=>{if(e.id===this.id)this.refresh();else if(this.all){let t=this.all.find(n=>n.folder.id===e.id);t&&this.jam.folder.health({ids:[e.id],folderIncTag:!0}).then(n=>{if(this.all){let i=n.find(M=>M.folder.id===t.folder.id);i?this.all[this.all.indexOf(t)]=i:this.all=this.all.filter(M=>M.folder.id!==t.folder.id)}this.reDisplay()}).catch(n=>{this.notify.error(n)})}})}ngOnDestroy(){super.ngOnDestroy()}refresh(){this.hints=void 0,this.jam.folder.health({childOfID:this.id,folderIncTag:!0}).then(e=>{this.display(e)}).catch(e=>{this.notify.error(e)})}reDisplay(){this.hints=!this.filter||!this.all?this.all:this.all.filter(e=>e.health&&e.health.find(t=>t.name===this.filter))}display(e){this.all=e,this.modes=[];for(let t of e)if(t.health)for(let n of t.health)this.modes.includes(n.name)||this.modes.push(n.name);this.reDisplay()}static \u0275fac=(()=>{let e;return function(n){return(e||(e=ue(o)))(n||o)}})();static \u0275cmp=E({type:o,selectors:[["app-admin-folder-health"]],standalone:!1,features:[Ee],decls:10,vars:3,consts:()=>{let e;e=$localize`:␟e9e69aab6530b06f07d62019e95496e5c974a35d␟4008496035123032607:Refresh List`;let t;t=$localize`:␟bb787b6c8e8a25e976f65cadc66c66c8a7d81a8a␟8891977878457079212:Type of Hints`;let n;n=$localize`:␟842a4fcf548e0c52ebab1cb5362f47ab2ca83e12␟1393837337557373364:Album`;let i;i=$localize`:␟842a4fcf548e0c52ebab1cb5362f47ab2ca83e12␟1393837337557373364:Album`;let M;M=$localize`:␟378660a509ecaa4d2dd3b4b0b8975760cfe3576d␟2492300395471245755:Artist`;let h;return h=$localize`:␟40cf215f61708390d3aba0212e49596e0d3d981c␟16823705783062999:Collection`,[n,i,M,h,[1,"health"],[1,"actions"],["title",e,1,"button-on-control",3,"click"],[1,"icon-reload"],["placeholder",t,3,"ngModel"],[1,"health-content"],["name","Folder Health Issues",3,"list"],[1,"folder"],["placeholder",t,3,"ngModelChange","ngModel"],[3,"value"],[1,"meta"],[3,"routerLink"],[1,"name"],[1,"folder-health"],[3,"folderHealth"],[1,"type"],[1,"artist"],[1,"year"]]},template:function(t,n){t&1&&(a(0,"div",4)(1,"div",5)(2,"button",6),S("click",function(){return n.refresh()}),c(3,"i",7),r(),C(4,mi,3,1,"select",8),r(),a(5,"div",9),C(6,gi,1,0,"app-loading"),c(7,"app-background-text-list",10),G(8,Si,10,5,"div",11,di),r()()),t&2&&(_(4),p(n.modes.length>0?4:-1),_(2),p(n.hints?-1:6),_(),O("list",n.hints),_(),U(n.hints))},dependencies:[ie,ee,at,_t,rt,W,j,Me,yt],styles:["[_nghost-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:10px 15px 0;border-bottom-color:var(--background-border);border-bottom-width:1px;border-bottom-style:solid}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1px;font-size:11px;margin-left:5px;margin-right:5px}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .health-content[_ngcontent-%COMP%]{padding:15px;overflow-y:auto;overflow-x:auto}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]{border-bottom-width:1px;border-bottom-style:solid;border-bottom-color:var(--background-border);padding:15px;display:flex;flex-flow:row wrap;flex-flow:row nowrap}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{width:30%;padding-right:15px;margin-left:15px;display:flex;flex-flow:column wrap;position:relative}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;text-overflow:ellipsis;overflow:hidden}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{text-transform:uppercase}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%], [_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .year[_ngcontent-%COMP%], [_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .state[_ngcontent-%COMP%]{letter-spacing:1px;font-size:.8em}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:24px;font-weight:100;color:var(--on-background-highlight)}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background)}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:14px;line-height:1.2em}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-top:auto}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:5px;margin-right:5px;height:27px;font-weight:500;padding:1px 15px 0}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:scale(1.3);transform-origin:center}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none;border:1px solid transparent;padding:4px 9px 7px;border-radius:50%;display:none;position:absolute;right:1px;bottom:0}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:var(--control-hover);color:var(--on-background-hover)}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]:hover   .actions[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]:hover   app-fav-icon[_ngcontent-%COMP%]{display:inline}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .folder-health[_ngcontent-%COMP%]{display:flex;width:70%}@media (max-width: 400px){[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]{padding-left:0;padding-right:0}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .folder[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:16px}}"]})}return o})();function ui(o,l){if(o&1){let e=P();a(0,"div",3),S("drop",function(n){m(e);let i=s();return g(i.onDropFile(n))})("dragover",function(n){m(e);let i=s();return g(i.onDragOverFile(n))}),a(1,"form")(2,"input",4),S("change",function(n){m(e);let i=s();return g(i.selectFile(n))}),r()()()}}function Ei(o,l){o&1&&(D(0),d(1,0),L())}function Pi(o,l){o&1&&(D(0),d(1,1),L())}function Ti(o,l){if(o&1&&(a(0,"div")(1,"div"),C(2,Ei,2,0,"ng-container")(3,Pi,2,0,"ng-container"),r(),c(4,"app-loading"),r()),o&2){let e=s();_(2),p(e.isUploading?2:3)}}var kt=(()=>{class o{folder;reference;isIdle=!0;isUploading=!1;unsubscribe=new V;jam=f(F);notify=f(b);folderService=f(H);ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}dialogInit(e,t){this.reference=e,this.folder=t.data?.folder}waitForCreationEnd(e){if(!this.folder)return;let t=this.folder.id;this.folderService.waitForQueueResult("Creating Artwork",e,[]).pipe(R(this.unsubscribe)).subscribe(()=>{this.isIdle=!0,this.folderService.notifyFolderChange(t,dt.fsnRefresh),e.error||(this.notify.success("Upload done"),this.reference&&this.reference.close())})}onDropFile(e){e.preventDefault(),this.uploadFile(e.dataTransfer?.files)}onDragOverFile(e){e.stopPropagation(),e.preventDefault()}selectFile(e){this.uploadFile(e.target.files)}uploadFile(e){if(!e||e.length===0||!this.folder)return;let t=e[0];this.isIdle=!1,this.isUploading=!0,this.jam.artwork.createByUpload({folderID:this.folder.id,types:[]},t).pipe(R(this.unsubscribe)).subscribe(n=>{if(n.type!==ke.UploadProgress){if(n instanceof it){let i=n.body;i&&this.waitForCreationEnd(i)}}},n=>{this.isUploading=!1,this.isIdle=!0,this.notify.error(n)},()=>{this.isUploading=!1})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-dialog-upload-image"]],standalone:!1,decls:2,vars:1,consts:()=>{let e;e=$localize`:␟d833321cc90a0b0a52714c6d5ec97fbe6c7cfa5c␟2501989539336327542:Upload image`;let t;t=$localize`:␟f54acc637f2d1ea81cf76322b0c3f381b868baa1␟7636862518745301168:Uploading`;let n;return n=$localize`:␟71969bbb4eedcf48235202c3146043ad48adc542␟1227384069952544114:Creating Artwork`,[t,n,[1,"drop-zone"],[1,"drop-zone",3,"drop","dragover"],["type","file","placeholder",e,"accept",".png,.jpeg,.jpg",3,"change"]]},template:function(t,n){t&1&&C(0,ui,3,0,"div",2)(1,Ti,5,1,"div"),t&2&&p(n.isIdle?0:1)},dependencies:[ee,se,_e,le],styles:["[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]{margin:10px 20px;border-width:2px;border-style:dotted;border-color:var(--secondary);height:80%}[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%}"]})}return o})();var hi=o=>["/admin/folder",o];function Ni(o,l){if(o&1&&c(0,"app-info-note",23),o&2){let e=s(2);O("info",e.folder.info)}}function Ai(o,l){if(o&1&&u(0),o&2){let e=s(2);k(" / ",e.folder.tag==null?null:e.folder.tag.albumType," ")}}function Ii(o,l){if(o&1&&(a(0,"div")(1,"div",25),d(2,5),r(),a(3,"div"),u(4),r()()),o&2){let e=s(2);_(4),T(e.folder.tag==null?null:e.folder.tag.artist)}}function Ri(o,l){if(o&1&&(a(0,"div")(1,"div",25),d(2,6),r(),a(3,"div"),u(4),r()()),o&2){let e=s(2);_(4),T(e.folder.tag==null?null:e.folder.tag.album)}}function Di(o,l){if(o&1&&(a(0,"div")(1,"div",25),d(2,7),r(),a(3,"div"),u(4),r()()),o&2){let e=s(2);_(4),k(" ",e.folder.tag==null?null:e.folder.tag.year)}}function Li(o,l){if(o&1&&(a(0,"div")(1,"div",25),d(2,8),r(),a(3,"div"),u(4),r()()),o&2){let e=s(2);_(4),k(" ",e.folder.tag==null?null:e.folder.tag.genres)}}function bi(o,l){if(o&1&&(a(0,"div")(1,"div",25),d(2,9),r(),a(3,"div")(4,"a",33),u(5),r()()()),o&2){let e=s(2);_(4),O("href",We("https://musicbrainz.org/release/",e.folder.tag==null?null:e.folder.tag.mbReleaseID),me),_(),T(e.folder.tag==null?null:e.folder.tag.mbReleaseID)}}function vi(o,l){if(o&1&&(a(0,"div")(1,"div",25),d(2,10),r(),a(3,"div")(4,"a",33),u(5),r()()()),o&2){let e=s(2);_(4),O("href",We("https://musicbrainz.org/artist/",e.folder.tag==null?null:e.folder.tag.mbArtistID),me),_(),T(e.folder.tag==null?null:e.folder.tag.mbArtistID)}}function xi(o,l){if(o&1&&(a(0,"div")(1,"div",25),d(2,11),r(),a(3,"div")(4,"a",34),u(5),r()()()),o&2){let e=s(2);_(4),O("routerLink",te(2,hi,e.folder.parentID)),_(),T(e.folder.parentID)}}function yi(o,l){if(o&1){let e=P();a(0,"button",35),S("click",function(){m(e);let n=s(2);return g(n.searchImages())}),c(1,"i",36),D(2),d(3,12),L(),r()}}function wi(o,l){if(o&1){let e=P();a(0,"button",37),S("click",function(){m(e);let n=s(2);return g(n.searchImages())}),c(1,"i",36),D(2),d(3,13),L(),r()}}function ki(o,l){if(o&1&&(a(0,"div",32),c(1,"app-admin-artwork-list",38),r()),o&2){let e=s(2);_(),O("folderID",e.folder.id)("artworks",e.folder.artworks)}}function $i(o,l){if(o&1){let e=P();a(0,"div",14)(1,"div",15)(2,"button",16),S("click",function(){m(e);let n=s();return g(n.refresh())}),c(3,"i",17),r(),a(4,"button",18),S("click",function(){m(e);let n=s();return g(n.moveFolder())}),c(5,"i",19),r(),a(6,"button",20),S("click",function(){m(e);let n=s();return g(n.removeFolder())}),c(7,"i",21),r()(),a(8,"div",22),C(9,Ni,1,1,"app-info-note",23),a(10,"div",24)(11,"div")(12,"div")(13,"div",25),d(14,0),r(),a(15,"div")(16,"app-inline-edit",26),I("ngModelChange",function(n){m(e);let i=s();return A(i.name,n)||(i.name=n),g(n)}),S("endEditRequest",function(){m(e);let n=s();return g(n.editFolderName())}),r()()(),a(17,"div")(18,"div",25),d(19,1),r(),a(20,"div"),u(21),C(22,Ai,1,1),r()(),a(23,"div")(24,"div",25),d(25,2),r(),a(26,"div"),u(27),r()(),a(28,"div")(29,"div",25),d(30,3),r(),a(31,"div"),u(32),r()(),C(33,Ii,5,1,"div"),C(34,Ri,5,1,"div"),r(),a(35,"div"),C(36,Di,5,1,"div"),C(37,Li,5,1,"div"),C(38,bi,6,3,"div"),C(39,vi,6,3,"div"),C(40,xi,6,4,"div"),r()(),a(41,"div",27)(42,"div",15)(43,"button",28),S("click",function(){m(e);let n=s();return g(n.uploadImage())}),c(44,"i",29),D(45),d(46,4),L(),r(),C(47,yi,4,0,"button",30),C(48,wi,4,0,"button",31),r(),C(49,ki,2,2,"div",32),r()()()}if(o&2){let e=s();_(9),p(e.folder.info!=null&&e.folder.info.description?9:-1),_(7),N("ngModel",e.name),_(5),k("",e.folder.type," "),_(),p(e.isAlbum?22:-1),_(5),T(e.folder.trackCount),_(5),T(e.folder.folderCount),_(),p(e.folder.tag!=null&&e.folder.tag.artist?33:-1),_(),p(e.folder.tag!=null&&e.folder.tag.album?34:-1),_(2),p(e.folder.tag!=null&&e.folder.tag.year?36:-1),_(),p(!(e.folder.tag==null||e.folder.tag.genres==null)&&e.folder.tag.genres.length?37:-1),_(),p(e.folder.tag!=null&&e.folder.tag.mbReleaseID?38:-1),_(),p(e.folder.tag!=null&&e.folder.tag.mbArtistID?39:-1),_(),p(e.folder.parentID?40:-1),_(7),p(e.isAlbum&&e.folder.tag&&(e.folder.tag.mbReleaseID||e.folder.tag.mbReleaseGroupID)?47:-1),_(),p(e.isArtist&&e.folder.tag&&e.folder.tag.mbArtistID?48:-1),_(),p(e.folder.artworks&&e.folder.artworks.length>0?49:-1)}}function Fi(o,l){o&1&&c(0,"app-loading")}var $t=(()=>{class o extends Se{name="";folder;isAlbum=!1;isArtist=!1;jam=f(F);notify=f(b);dialogsService=f(Re);dialogOverlay=f(Z);folderService=f(H);router=f(he);ngOnInit(){super.ngOnInit(),this.folderService.foldersChange.pipe(R(this.unsubscribe)).subscribe(e=>{e.id===this.id&&this.refresh()})}ngOnDestroy(){super.ngOnDestroy()}editFolderName(){if(!this.folder)return;let e=(this.name||"").trim();if(e.length===0||e===this.folder.name){this.name=this.folder.name;return}let t=this.folder.id;this.jam.folder.rename({id:t,name:e}).then(n=>{this.folderService.waitForQueueResult("Renaming Folder",n,[t])}).catch(n=>{this.notify.error(n)})}refresh(){this.id&&this.jam.folder.id({id:this.id,folderIncTag:!0,folderIncParents:!0,folderIncArtworks:!0,folderIncChildFolderCount:!0,folderIncTrackCount:!0}).then(e=>{this.display(e)}).catch(e=>{e.code===404?this.router.navigate(["/admin/folder/"]).catch(t=>{console.error(t)}):this.notify.error(e)})}uploadImage(){this.dialogOverlay.open({title:"Upload Folder Images",childComponent:kt,data:{folder:this.folder},panelClass:"overlay-panel-large-buttons"})}searchImages(){this.dialogOverlay.open({title:"Search Artwork Images",childComponent:Je,data:{folder:this.folder},panelClass:"overlay-panel-large-buttons"})}removeFolder(){let e=this.folder;e&&this.dialogsService.confirm("Remove Folder?",`Sure to remove Folder "${e.name}"?`,()=>{this.jam.folder.remove({id:e.id}).then(t=>{e.parentID&&this.router.navigate([`/admin/folder/${e.parentID}/overview`]).catch(n=>{console.error(n)}),this.folderService.waitForQueueResult("Removing Folder",t,[e.id],e.parentID?[e.parentID]:[])}).catch(t=>{this.notify.error(t)})})}moveFolder(){let e=this.folder;if(!e)return;let t={selectID:e.id,disableIDs:[e.id]};this.dialogOverlay.open({title:"Move Folder to",childComponent:$e,data:t,panelClass:"overlay-panel-large-buttons",onOkBtn:()=>y(this,null,function*(){let n=t.folder;if(n)try{this.jam.folder.move({ids:[e.id],newParentID:n.id}).then(i=>{this.folderService.waitForQueueResult("Moving Folder",i,[e.id],(e.parentID?[e.parentID]:[]).concat([n.id]))}).catch(i=>{this.notify.error(i)})}catch(i){return this.notify.error(i),Promise.reject(i)}}),onCancelBtn:()=>y(this,null,function*(){return Promise.resolve()})})}display(e){this.name="",this.isAlbum=!1,this.isArtist=!1,this.folder=e,e&&(this.name=e.name,this.isAlbum=Un.includes(e.type),this.isArtist=e.type===de.artist)}static \u0275fac=(()=>{let e;return function(n){return(e||(e=ue(o)))(n||o)}})();static \u0275cmp=E({type:o,selectors:[["app-admin-folder"]],standalone:!1,features:[Ee],decls:2,vars:1,consts:()=>{let e;e=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`;let t;t=$localize`:␟ee0ffaa4b2ef70f3847c0dc2126aff7ed0034519␟4836856351090546342:Move Folder…`;let n;n=$localize`:␟605381a1ba67135149effc1e2382241d379fcc9a␟5344042372404898499:Remove Folder…`;let i;i=$localize`:␟cb1068a2a1e809104667e887d276b18b2fb9d8fa␟7832824131624341508:Album Images`;let M;M=$localize`:␟12a54d1bad2243f676c829e885461ff819d55f4f␟2477517217585375703:Artist Images`;let h;h=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`;let x;x=$localize`:␟f61c6867295f3b53d23557021f2f4e0aa1d0b8fc␟8650499415827640724:Type`;let $;$=$localize`:␟261caf3111a423a99f27e839571512f371bd0212␟167155511337505993:Track Count`;let w;w=$localize`:␟36b472d60e30275eec0f90dc492c06c990621178␟506719405556868592:Folder Count`;let ne;ne=$localize`:␟faecc81b39c34e94a8f009af7d8c233d3a3dceaa␟8890037837123071423:Upload Artwork`;let Y;Y=$localize`:␟378660a509ecaa4d2dd3b4b0b8975760cfe3576d␟2492300395471245755:Artist`;let J;J=$localize`:␟842a4fcf548e0c52ebab1cb5362f47ab2ca83e12␟1393837337557373364:Album`;let K;K=$localize`:␟f6e04edea3bb3a59d5904725bfbc2c440e793001␟1464072562214937907:Year`;let B;B=$localize`:␟33c750c68c3e29d7fee57a180f508d8d202bdd04␟1790640569414740156:Genres`;let Le;Le=$localize`:␟e25c6080fad93286376b6a4103ff2889588879b5␟6137832517756203418:MB Release Id`;let be;be=$localize`:␟5b6e5696b55d1dbdcc67e6bb408952c49221060e␟7022245527426162907:MB Artist Id`;let Q;Q=$localize`:␟e17ab51fb5646579e7073ed25f240117d5f5169e␟4232003024146825817:Parent Folder Id`;let He;He=$localize`:␟045d07de1f817f18c61b2660126d1edcac7b5bd0␟2134391710559060062:Search Artwork`;let ze;return ze=$localize`:␟85804de0cdf6b27537be7f0d11158dbe7b1dc5c2␟7505878720705236779:Search Art`,[h,x,$,w,ne,Y,J,K,B,Le,be,Q,He,ze,[1,"folder"],[1,"actions"],["title",e,1,"button-on-control",3,"click"],[1,"icon-reload"],["title",t,1,"button-on-control",3,"click"],[1,"icon-right-bold"],["title",n,1,"button-on-control",3,"click"],[1,"icon-trash"],[1,"content"],[3,"info"],[1,"properties"],[1,"label"],["type","text",3,"ngModelChange","endEditRequest","ngModel"],[1,"artworks"],[1,"button-on-control",3,"click"],[1,"icon-upload-cloud"],["title",i,1,"button-on-control"],["title",M,1,"button-on-control"],[1,"artworks-content"],["target","_blank","rel","noopener",3,"href"],[3,"routerLink"],["title",i,1,"button-on-control",3,"click"],[1,"icon-picture"],["title",M,1,"button-on-control",3,"click"],[3,"folderID","artworks"]]},template:function(t,n){t&1&&C(0,$i,50,16,"div",14)(1,Fi,1,0,"app-loading"),t&2&&p(n.folder?0:1)},dependencies:[$n,ee,W,j,Me,qe,Qe],styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow:hidden;display:block}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{padding:10px 15px 0;border-bottom-color:var(--background-border);border-bottom-width:1px;border-bottom-style:solid}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1px;font-size:11px;margin-left:5px;margin-right:5px}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{overflow-y:auto;display:flex;flex-direction:column}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;flex-direction:row;padding:15px}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:0 0 50%}@media (max-width: 522px){[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:0 0 100%}}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-top:5px;padding-bottom:5px}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background)}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .properties[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--on-background);font-size:.7em;text-transform:uppercase;padding-bottom:2px}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .artworks[_ngcontent-%COMP%]{border-top:1px solid var(--background-border)}[_nghost-%COMP%]   .folder[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .artworks[_ngcontent-%COMP%]   .artworks-content[_ngcontent-%COMP%]{padding:0 15px 15px}"]})}return o})();var Gi=(o,l)=>l.hint.id,Ui=(o,l)=>l.name;function Vi(o,l){if(o&1&&(a(0,"div",2),c(1,"i",5),u(2),a(3,"div",6),u(4),r()()),o&2){let e=l.$implicit;_(2),k(" ",e.hint.name," "),_(2),T(e.description)}}function Xi(o,l){o&1&&(a(0,"div",2),d(1,0),r())}function Hi(o,l){o&1&&c(0,"i",8)}function zi(o,l){if(o&1&&u(0),o&2){let e=s().$implicit;k(" ",e.name," ")}}function Wi(o,l){if(o&1){let e=P();a(0,"button",7),S("click",function(){let n=m(e).$implicit;return g(n.click())}),C(1,Hi,1,0,"i",8)(2,zi,1,1),r()}if(o&2){let e=l.$implicit;_(),p(e.running?1:2)}}function ji(o,l){if(o&1&&(G(0,Vi,5,2,"div",2,Gi,!1,Xi,2,0,"div",2),a(3,"div",3),G(4,Wi,3,1,"button",4,Ui),r()),o&2){let e=s(3);U(e.hints),_(4),U(e.solutions)}}function Ki(o,l){o&1&&(a(0,"div",2),c(1,"i",8),r())}function Bi(o,l){o&1&&(a(0,"div",1),C(1,ji,6,1)(2,Ki,2,0,"div",2),r()),o&2&&(_(),p(l.health?1:2))}function Qi(o,l){if(o&1&&C(0,Bi,3,1,"div",1),o&2){let e,t=s();p((e=t.trackHealth())?0:-1,e)}}var we=(()=>{class o{hints;solutions=[];trackHealth=X();resolvedEvent=xe();unsubscribe=new V;jam=f(F);notify=f(b);folderService=f(H);router=f(he);ngOnChanges(){this.display(this.trackHealth())}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}ngOnInit(){this.folderService.tracksChange.pipe(R(this.unsubscribe)).subscribe(e=>{let t=this.trackHealth();t&&t.track.id===e.id&&(t.health=[],this.jam.track.health({ids:[t.track.id],healthMedia:!0}).then(n=>{let i=n.find(M=>M.track.id===t.track.id);i&&i.health?(t.track=i.track,t.health=i.health):t.health=[],t.health.length===0&&this.resolvedEvent.emit(),this.display(t)}).catch(n=>{this.notify.error(n)}))})}fixAll(){for(let e of this.solutions)e.fixable&&!e.running&&e.click&&e.click()}display(e){this.hints=[],this.solutions=[],e?.health&&(this.hints=e.health.map(t=>{let n=this.describeHint(t,e.track);return{hint:t,description:n}}))}describeTagHint(e,t){let n="";if(e.id===re.tagValuesExists?n=(e.details||[]).map(i=>i.reason.toUpperCase()).join(", "):e.id===re.id3v2Garbage?n=(e.details||[]).map(i=>i.reason).join(", "):e.id===re.id3v2Valid&&(n=(e.details||[]).map(i=>i.expected&&i.actual?`${i.reason}  (${i.actual} instead of ${i.expected})`:i.reason).join(", ")),!this.solutions.find(i=>i.name==="Edit Tag")){let i={name:"Edit Tag",click:()=>{this.router.navigate([`/admin/folder/${t.parentID}/tags`]).catch(M=>{console.error(M)})}};this.solutions.push(i)}return n}describeMp3GarbageHint(e,t){let n="";if(e.details&&e.details.length>0&&(n=`${e.details[0].reason} (${e.details[0].actual} bytes)`),!this.solutions.find(i=>i.name==="Fix MP3")){let i={name:"Fix MP3",fixable:!0,click:()=>{i.running||(i.running=!0,this.jam.track.fix({id:t.id,fixID:e.id}).then(M=>{this.folderService.waitForQueueResult("Fixing Track MP3",M,[],[],[t.id])}).catch(M=>{this.notify.error(M)}))}};this.solutions.push(i)}return n}describeMp3ErrorHint(e,t){let n=`Stream Errors: ${(e.details||[]).length}`;if(!this.solutions.find(i=>i.name==="Fix Stream")){let i={name:"Fix Stream",fixable:!0,click:()=>{i.running||(i.running=!0,this.jam.track.fix({id:t.id,fixID:e.id}).then(M=>{this.folderService.waitForQueueResult("Fixing Track Stream",M,[],[],[t.id])}).catch(M=>{this.notify.error(M)}))}};this.solutions.push(i)}return n}describeID3v1Hint(e,t){if(!this.solutions.find(n=>n.name==="Remove ID3v1")){let n={name:"Remove ID3v1",fixable:!0,click:()=>{n.running||(n.running=!0,this.jam.track.fix({id:t.id,fixID:e.id}).then(i=>{this.folderService.waitForQueueResult("Remove ID3v1",i,[],[],[t.id])}).catch(i=>{this.notify.error(i)}))}};this.solutions.push(n)}return""}describeMP3HeaderHint(e,t){let n="";if(e.id===re.mp3HeaderValid&&(n=(e.details||[]).map(i=>i.expected&&i.actual?`${i.reason}  (${i.actual} instead of ${i.expected})`:i.reason).join(", ")),!this.solutions.find(i=>i.name==="Fix Header")){let i={name:"Fix Header",fixable:!0,click:()=>{i.running||(i.running=!0,this.jam.track.fix({id:t.id,fixID:e.id}).then(M=>{this.folderService.waitForQueueResult("Fixing Track Header",M,[],[],[t.id])}).catch(M=>{this.notify.error(M)}))}};this.solutions.push(i)}return n}describeHint(e,t){switch(e.id){case re.tagValuesExists:case re.id3v2Garbage:case re.id3v2Exists:case re.id3v2Valid:return this.describeTagHint(e,t);case re.mp3Garbage:return this.describeMp3GarbageHint(e,t);case re.mp3MediaValid:return this.describeMp3ErrorHint(e,t);case re.id3v2NoId3v1:return this.describeID3v1Hint(e,t);case re.mp3HeaderExists:case re.mp3HeaderValid:return this.describeMP3HeaderHint(e,t);case re.flacMediaValid:default:break}return""}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-track-health"]],inputs:{trackHealth:[1,"trackHealth"]},outputs:{resolvedEvent:"resolvedEvent"},standalone:!1,features:[ae],decls:1,vars:1,consts:()=>{let e;return e=$localize`:␟baa5a59fd701bf37b30140cf2080f8987db6c2e9␟4786331182153457864:No Hints`,[e,[1,"hints"],[1,"hint"],[1,"solutions"],[1,"button-on-background"],[1,"icon-warning"],[1,"details"],[1,"button-on-background",3,"click"],[1,"icon-spin","icon-spinner"]]},template:function(t,n){t&1&&C(0,Qi,1,1),t&2&&p(n.hints?0:-1)},styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:auto;display:block}[_nghost-%COMP%]   .icon-warning[_ngcontent-%COMP%]{color:var(--accent)}[_nghost-%COMP%]   .details[_ngcontent-%COMP%]{padding-left:28px;font-size:.8em;display:block;padding-top:5px}[_nghost-%COMP%]   .hint[_ngcontent-%COMP%]{padding-bottom:15px}[_nghost-%COMP%]   .solutions[_ngcontent-%COMP%]{padding-bottom:15px}[_nghost-%COMP%]   .solutions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:5px}[_nghost-%COMP%]   .detail[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:11px;min-width:80px;margin-right:10px;display:inline-block}"]})}return o})();var qi=(o,l)=>l.track.id;function Ji(o,l){o&1&&c(0,"app-loading")}function Yi(o,l){if(o&1){let e=P();a(0,"div",8)(1,"div",9),u(2),r(),a(3,"div",10)(4,"app-track-health",11),S("resolvedEvent",function(){let n=m(e).$implicit,i=s();return g(i.trackHealthResolved(n))}),r()()()}if(o&2){let e=l.$implicit;_(2),k(" ",e.track.name," "),_(2),O("trackHealth",e)}}var Ft=(()=>{class o extends Se{all;hints;filter;modes=[];mediaCheck=!1;jam=f(F);notify=f(b);folderService=f(H);ngOnInit(){super.ngOnInit(),this.folderService.foldersChange.pipe(R(this.unsubscribe)).subscribe(e=>{e.id===this.id&&this.refresh()})}ngOnDestroy(){super.ngOnDestroy()}checkChange(){this.refresh()}trackHealthResolved(e){this.all&&(this.all=this.all.filter(t=>t!==e),this.reDisplay())}refresh(){this.hints=void 0,this.id&&this.jam.track.health({folderIDs:[this.id],healthMedia:this.mediaCheck}).then(e=>{this.display(e)}).catch(e=>{this.notify.error(e)})}reDisplay(){this.hints=!this.filter||!this.all?this.all:this.all.filter(e=>e.health&&e.health.find(t=>t.name===this.filter))}display(e){this.all=e,this.modes=[];for(let t of e)if(t.health)for(let n of t.health)this.modes.includes(n.name)||this.modes.push(n.name);this.reDisplay()}static \u0275fac=(()=>{let e;return function(n){return(e||(e=ue(o)))(n||o)}})();static \u0275cmp=E({type:o,selectors:[["app-admin-tracks-health"]],standalone:!1,features:[Ee],decls:13,vars:4,consts:()=>{let e;e=$localize`:␟e9e69aab6530b06f07d62019e95496e5c974a35d␟4008496035123032607:Refresh List`;let t;return t=$localize`:␟fc25452275680509933bd62f7ff2f4f14a5949d8␟79910036711821960:Check Media`,[t,[1,"health"],[1,"actions"],["title",e,1,"button-on-control",3,"click"],[1,"icon-reload"],["type","checkbox",3,"ngModelChange","change","checked","ngModel"],[1,"content"],["name","Track Health Issues",3,"list"],[1,"track"],[1,"meta"],[1,"track-health"],[3,"resolvedEvent","trackHealth"]]},template:function(t,n){t&1&&(a(0,"div",1)(1,"div",2)(2,"button",3),S("click",function(){return n.refresh()}),c(3,"i",4),r(),a(4,"label")(5,"input",5),I("ngModelChange",function(M){return A(n.mediaCheck,M)||(n.mediaCheck=M),M}),S("change",function(){return n.checkChange()}),r(),D(6),d(7,0),L(),r()(),a(8,"div",6),C(9,Ji,1,0,"app-loading"),c(10,"app-background-text-list",7),G(11,Yi,5,2,"div",8,qi),r()()),t&2&&(_(5),O("checked",n.mediaCheck),N("ngModel",n.mediaCheck),_(4),p(n.hints?-1:9),_(),O("list",n.hints),_(),U(n.hints))},dependencies:[ie,ee,Te,W,j,we],styles:["[_nghost-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:10px 15px 0;border-bottom-color:var(--background-border);border-bottom-width:1px;border-bottom-style:solid}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1px;font-size:11px;margin-left:5px;margin-right:5px}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px;overflow-y:auto;overflow-x:auto}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]{flex-flow:row nowrap}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{width:30%;overflow:hidden;padding-right:15px;text-overflow:ellipsis}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .track-health[_ngcontent-%COMP%]{width:70%}"]})}return o})();var Zi=(o,l)=>l.track.id;function er(o,l){if(o&1){let e=P();a(0,"tr",20),S("click",function(){let n=m(e).$implicit;return g(n.selected=!n.selected)}),a(1,"td",11),u(2),r(),a(3,"td",12),u(4),r(),a(5,"td",13),u(6),r(),a(7,"td",14),u(8),r(),a(9,"td",15),u(10),r(),a(11,"td",16),u(12),r(),a(13,"td",17),u(14),r(),a(15,"td",18),u(16),De(17,"duration"),r()()}if(o&2){let e=l.$implicit;ve("selected",e.selected),_(2),T(e.track.tag==null?null:e.track.tag.trackNr),_(2),T(e.track.tag==null?null:e.track.tag.title),_(2),T(e.track.tag==null?null:e.track.tag.artist),_(2),T(e.track.tag==null?null:e.track.tag.album),_(2),T(e.track.media==null?null:e.track.media.format),_(2),T(e.track.media==null?null:e.track.media.bitRate),_(2),T(e.track.media==null?null:e.track.media.sampleRate),_(2),T(ot(17,10,e.track.duration))}}function tr(o,l){if(o&1&&(a(0,"table",9)(1,"tr",10)(2,"td",11),d(3,0),r(),a(4,"td",12),d(5,1),r(),a(6,"td",13),d(7,2),r(),a(8,"td",14),d(9,3),r(),a(10,"td",15),d(11,4),r(),a(12,"td",16),d(13,5),r(),a(14,"td",17),d(15,6),r(),a(16,"td",18),d(17,7),r()(),G(18,er,18,12,"tr",19,Zi),r()),o&2){let e=s();_(18),U(e.trackItems)}}var Xe=(()=>{class o{trackItems;tracks=X([]);router=f(he);getSortValue(e,t){switch(e){case"number":return t.track.tag?.trackNr;case"name":return t.track.name;case"artist":return t.track.tag?.artist;case"album":return t.track.tag?.album;case"duration":return t.track.duration;default:return}}ngOnChanges(){this.trackItems=(this.tracks()||[]).map(e=>({track:e}))}toTrackFolder(e){this.router.navigate([`/admin/folder/${e.parentID}/overview`]).catch(t=>{console.error(t)})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin-track-list"]],inputs:{tracks:[1,"tracks"]},standalone:!1,features:[ae],decls:2,vars:2,consts:()=>{let e;e=$localize`:␟be498c96e976cb06e12d105d3174b0d47460886f␟8381503740832172353:Track Nr.`;let t;t=$localize`:␟fdf7cbdc140d0aab0f0b6c06065a0fd448ed6a2e␟5701618810648052610:Title`;let n;n=$localize`:␟378660a509ecaa4d2dd3b4b0b8975760cfe3576d␟2492300395471245755:Artist`;let i;i=$localize`:␟842a4fcf548e0c52ebab1cb5362f47ab2ca83e12␟1393837337557373364:Album`;let M;M=$localize`:␟7722a92a1fc887570b4f4d8a7bb916f067f32028␟7513076467032912668:Format`;let h;h=$localize`:␟1e4b5c71ea539e7ba3415dbf4b15a6b684cf892a␟3813020320794017449:BitRate`;let x;x=$localize`:␟d256d70c89c6d6a1d085e7bac659374528239056␟3186270570067508524:SampleRate`;let $;return $=$localize`:␟a02ea1d4e7424ca989929da5e598f379940fdbf2␟7410432243549869948:Duration`,[e,t,n,i,M,h,x,$,["name","Tracks",3,"list"],[1,"tracks"],[1,"track","heading"],[1,"number"],[1,"title"],[1,"artist"],[1,"album"],[1,"format"],[1,"bitrate"],[1,"samplerate"],[1,"duration"],[1,"track",3,"selected"],[1,"track",3,"click"]]},template:function(t,n){t&1&&(c(0,"app-background-text-list",8),C(1,tr,20,0,"table",9)),t&2&&(O("list",n.tracks()),_(),p(n.tracks()&&n.tracks().length>0?1:-1))},dependencies:[ie,wn],styles:["[_nghost-%COMP%]{width:100%;overflow:auto;display:block}[_nghost-%COMP%]   .tracks[_ngcontent-%COMP%]{padding:15px;font-size:.8em;width:100%}[_nghost-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:.9em}[_nghost-%COMP%]   .track[_ngcontent-%COMP%]{border-bottom:1px solid var(--control-border)}[_nghost-%COMP%]   .track[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px}[_nghost-%COMP%]   .track[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .track.selected[_ngcontent-%COMP%]{background-color:var(--background-active)}"]})}return o})();function or(o,l){o&1&&c(0,"app-loading")}function ir(o,l){if(o&1){let e=P();a(0,"div",1)(1,"div",2)(2,"button",3),S("click",function(){m(e);let n=s();return g(n.refresh())}),c(3,"i",4),r(),a(4,"button",5),S("click",function(){m(e);let n=s();return g(n.moveTracks())}),c(5,"i",6),r(),a(6,"button",7),S("click",function(){m(e);let n=s();return g(n.deleteTracks())}),c(7,"i",8),r()(),c(8,"app-admin-track-list",9),r()}if(o&2){let e=s();_(8),O("tracks",e.folder.tracks)}}var Gt=(()=>{class o extends Se{folder;tracks=Pe(Xe);jam=f(F);notify=f(b);folderService=f(H);dialogsService=f(Re);dialogOverlay=f(Z);ngOnInit(){super.ngOnInit(),this.folderService.foldersChange.pipe(R(this.unsubscribe)).subscribe(e=>{e.id===this.id&&this.refresh()})}ngOnDestroy(){super.ngOnDestroy()}deleteTracks(){let e=this.getTrackIDs();e.length!==0&&this.dialogsService.confirm("Remove Tracks?",`Sure to remove ${e.length} Track${e.length>1?"s":""}?`,()=>{for(let t of e)this.jam.track.remove({id:t}).then(n=>{this.folderService.waitForQueueResult("Removing Track",n,[],[],[t])}).catch(n=>{this.notify.error(n)})})}getTrackIDs(){let e=this.tracks();if(!e?.trackItems||!this.folder?.tracks)return[];let t=e.trackItems.filter(n=>n.selected).map(n=>n.track.id);return t.length>0?t:this.folder.tracks.map(n=>n.id)}moveTracks(){let e=this.getTrackIDs();if(e.length===0)return;let t={selectID:this.id};this.dialogOverlay.open({title:"Move Tracks to",childComponent:$e,data:t,panelClass:"overlay-panel-large-buttons",onOkBtn:()=>y(this,null,function*(){let n=t.folder;if(n)return this.jam.track.move({ids:e,folderID:n.id}).then(i=>{this.folderService.waitForQueueResult("Moving Tracks",i,[],[n.id].concat(this.folder?.parentID?[this.folder.parentID]:[]),e)}).catch(i=>{this.notify.error(i)}),Promise.resolve()}),onCancelBtn:()=>y(this,null,function*(){return Promise.resolve()})})}refresh(){this.folder=void 0,this.id&&this.jam.folder.id({id:this.id,folderIncTracks:!0,trackIncTag:!0,trackIncMedia:!0}).then(e=>{this.folder=e}).catch(e=>{this.notify.error(e)})}static \u0275fac=(()=>{let e;return function(n){return(e||(e=ue(o)))(n||o)}})();static \u0275cmp=E({type:o,selectors:[["app-admin-folder-tracks"]],viewQuery:function(t,n){t&1&&ge(n.tracks,Xe,5),t&2&&Ce()},standalone:!1,features:[Ee],decls:3,vars:3,consts:()=>{let e;e=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`;let t;t=$localize`:␟5599dad966c719b3feae9735c1c2555c63945d62␟5954283971273891723:Move Tracks…`;let n;return n=$localize`:␟d01e8b8bbe3093f1bfe3f7849f8856d20862aa60␟3929773193703989963:Delete Tracks…`,[["name","Tracks",3,"list"],[1,"tracks"],[1,"actions"],["title",e,1,"button-on-control",3,"click"],[1,"icon-reload"],["title",t,1,"button-on-control",3,"click"],[1,"icon-right-bold"],["title",n,1,"button-on-control",3,"click"],[1,"icon-trash"],[1,"content",3,"tracks"]]},template:function(t,n){t&1&&(C(0,or,1,0,"app-loading"),c(1,"app-background-text-list",0),C(2,ir,9,1,"div",1)),t&2&&(p(n.folder?-1:0),_(),O("list",n.folder==null?null:n.folder.tracks),_(),p(n.folder&&n.folder.tracks&&n.folder.tracks.length>0?2:-1))},dependencies:[ie,ee,Xe],styles:["[_nghost-%COMP%]{height:100%;width:100%;display:block;overflow:hidden}[_nghost-%COMP%]   .tracks[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%}[_nghost-%COMP%]   .tracks[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:10px 15px 0;border-bottom-color:var(--background-border);border-bottom-width:1px;border-bottom-style:solid}[_nghost-%COMP%]   .tracks[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}[_nghost-%COMP%]   .tracks[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1px;font-size:11px;margin-left:5px;margin-right:5px}[_nghost-%COMP%]   .tracks[_ngcontent-%COMP%]   app-admin-track-list[_ngcontent-%COMP%]{overflow-y:auto}"]})}return o})();var rr=o=>["/admin/folder",o,"tags"],ar=(o,l)=>l.track.id;function _r(o,l){if(o&1){let e=P();a(0,"div",7)(1,"button",8),S("click",function(){m(e);let n=s(2);return g(n.stop())}),c(2,"i",9),a(3,"span"),d(4,0),r()()()}}function lr(o,l){if(o&1){let e=P();a(0,"button",8),S("click",function(){m(e);let n=s(4);return g(n.fixAll())}),d(1,3),r()}}function sr(o,l){if(o&1){let e=P();a(0,"button",8),S("click",function(){m(e);let n=s(3);return g(n.refresh(n.current.pos,!1))}),c(1,"i",12),D(2),d(3,2),L(),r(),C(4,lr,2,0,"button",13)}if(o&2){let e=s(3);_(4),p(e.current.health&&e.current.health.length>0?4:-1)}}function dr(o,l){if(o&1){let e=P();a(0,"div",7)(1,"button",10),S("click",function(){m(e);let n=s(2);return g(n.start())}),c(2,"i",11),D(3),d(4,1),L(),r(),C(5,sr,5,1),r()}if(o&2){let e=s(2);_(5),p(e.current?5:-1)}}function cr(o,l){if(o&1&&C(0,_r,5,0,"div",7)(1,dr,6,1,"div",7),o&2){let e=s();p(e.searching?0:1)}}function mr(o,l){o&1&&c(0,"app-loading")}function gr(o,l){o&1&&c(0,"i",15)}function Cr(o,l){if(o&1){let e=P();a(0,"div",18)(1,"div",19),u(2),r(),a(3,"div",20)(4,"app-track-health",21),S("resolvedEvent",function(){let n=m(e).$implicit,i=s(3);return g(i.trackHealthResolved(n))}),r()()()}if(o&2){let e=l.$implicit;_(2),k(" ",e.track.name," "),_(2),O("trackHealth",e)}}function pr(o,l){if(o&1&&G(0,Cr,5,2,"div",18,ar),o&2){let e=s(2);U(e.current.health)}}function Mr(o,l){if(o&1&&(a(0,"div")(1,"div",14)(2,"span"),C(3,gr,1,0,"i",15),r(),a(4,"span"),u(5),r(),a(6,"a",16),c(7,"i",17),u(8),r()(),C(9,pr,2,0),r()),o&2){let e=s();_(3),p(e.searching?3:-1),_(2),ln("",e.current.pos+1," / ",e.folders.length),_(),O("routerLink",te(6,rr,e.current.folder.id)),_(2),k(" ",e.current.folder.name),_(),p(e.current.health?9:-1)}}var Ut=(()=>{class o{static localStorageName="admin.radar";folders;current;searching=!1;trackHealthComponents=mn(we);unsubscribe=new V;jam=f(F);notify=f(b);uiState=f(pt);userStorage=f(Rn);constructor(){this.userStorage.userChange.pipe(R(this.unsubscribe)).subscribe(()=>this.loadFromStorage())}trackHealthResolved(e){this.current&&this.current.health&&(this.current.health=this.current.health.filter(t=>t!==e))}stop(){this.searching=!1}start(){this.searching||!this.folders||(this.searching=!0,this.request())}request(){if(!this.searching)return;let e=0;this.current&&(e=this.current.pos+1),this.refresh(e,!0)}fixAll(){let e=this.trackHealthComponents();this.searching||!this.current||!e||e.forEach(t=>{t.fixAll()})}refresh(e,t){this.current=void 0,this.searching=!0;let n=this.folders&&this.folders[e];if(!n){this.searching=!1;return}let i={folder:n,pos:e};this.current=i,this.userStorage.set(o.localStorageName,{folderID:n.id}),this.jam.track.health({folderIDs:[n.id],healthMedia:!0}).then(M=>{M.length>0?(i.health=M,this.searching=!1):t?this.request():(i.health=[],this.searching=!1)}).catch(M=>{this.current=void 0,this.searching=!1,this.notify.error(M)})}ngOnInit(){let e=this.uiState.data["app-admin-radar"];e&&(this.folders=e.folders,this.current=e.current,this.folders)||this.loadFolders()}ngOnDestroy(){this.uiState.data["app-admin-radar"]={folders:this.folders,current:this.current},this.current=void 0,this.searching=!1,this.folders=void 0,this.unsubscribe.next(),this.unsubscribe.complete()}loadFromStorage(){let e=this.userStorage.get(o.localStorageName);if(e?.folderID&&this.folders){let t=this.folders.findIndex(n=>n.id===e.folderID);t>=0&&(this.current={folder:this.folders[t],pos:t},this.refresh(t,!1))}}loadFolders(){this.jam.folder.search({folderTypes:[de.album,de.multialbum]}).then(e=>{this.folders=e.items,this.loadFromStorage()}).catch(e=>{this.notify.error(e)})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin-radar"]],viewQuery:function(t,n){t&1&&ge(n.trackHealthComponents,we,5),t&2&&Ce()},standalone:!1,decls:6,vars:3,consts:()=>{let e;e=$localize`:␟2b67115641c17c9e2d3e94fd920f48fefdfdc25b␟1962047135999875061:Health Radar`;let t;t=$localize`:␟1d0d5c9a36e72bd9643ff1ede69736ae063d652b␟3133539296286953705:Stop`;let n;n=$localize`:␟f732c304c7433e5a83ffcd862c3dce709a0f4982␟3885497195825665706:Next`;let i;i=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`;let M;return M=$localize`:␟71697936bf93aa7b37f938e213eaf990aaa0715c␟6587306545685043964:Fix all fixable`,[t,n,i,M,[1,"radar"],["section",e],[1,"content"],[1,"buttons"],[1,"button-on-control",3,"click"],[1,"icon-stop"],[1,"button-primary",3,"click"],[1,"icon-play"],[1,"icon-reload"],[1,"button-on-control"],[1,"current"],[1,"icon-spin","icon-spinner"],[3,"routerLink"],[1,"icon-folder"],[1,"track"],[1,"meta"],[1,"track-health"],[3,"resolvedEvent","trackHealth"]]},template:function(t,n){t&1&&(a(0,"div",4)(1,"app-view-header-slim",5),C(2,cr,2,1),r(),a(3,"div",6),C(4,mr,1,0,"app-loading"),C(5,Mr,10,8,"div"),r()()),t&2&&(_(2),p(n.folders?2:-1),_(2),p(n.folders?-1:4),_(),p(n.folders&&n.current?5:-1))},dependencies:[Ie,ee,Me,we],styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:auto;display:block}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{min-width:130px;display:inline-block}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px;border-bottom:1px solid var(--background-border)}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-right:15px}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]{border-bottom:1px solid var(--background-border)}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{padding-top:15px;padding-bottom:15px}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .track-health[_ngcontent-%COMP%]{padding-left:15px}@media (max-width: 768px){[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .radar[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .track-health[_ngcontent-%COMP%]{padding-left:0}}"]})}return o})();var Zn=()=>({standalone:!0});function fr(o,l){if(o&1){let e=P();a(0,"form")(1,"div",7)(2,"label",8),d(3,0),r(),a(4,"input",9),I("ngModelChange",function(n){m(e);let i=s();return A(i.edit.name,n)||(i.edit.name=n),g(n)}),r()(),a(5,"div",7)(6,"label",10),d(7,1),r(),a(8,"input",11),I("ngModelChange",function(n){m(e);let i=s();return A(i.edit.path,n)||(i.edit.path=n),g(n)}),r()(),a(9,"div",7)(10,"label",12),d(11,2),r(),a(12,"fieldset",13)(13,"label",14)(14,"input",15),I("ngModelChange",function(n){m(e);let i=s();return A(i.edit.strategy,n)||(i.edit.strategy=n),g(n)}),r(),D(15),d(16,3),L(),r(),a(17,"label",14)(18,"input",15),I("ngModelChange",function(n){m(e);let i=s();return A(i.edit.strategy,n)||(i.edit.strategy=n),g(n)}),r(),D(19),d(20,4),L(),r(),a(21,"label",14)(22,"input",15),I("ngModelChange",function(n){m(e);let i=s();return A(i.edit.strategy,n)||(i.edit.strategy=n),g(n)}),r(),D(23),d(24,5),L(),r(),a(25,"label",14)(26,"input",15),I("ngModelChange",function(n){m(e);let i=s();return A(i.edit.strategy,n)||(i.edit.strategy=n),g(n)}),r(),D(27),d(28,6),L(),r()()()()}if(o&2){let e=s();_(4),O("ngModelOptions",oe(12,Zn)),N("ngModel",e.edit.name),_(4),O("ngModelOptions",oe(13,Zn)),N("ngModel",e.edit.path),_(6),O("value",e.RootScanStrategy.auto),N("ngModel",e.edit.strategy),_(4),O("value",e.RootScanStrategy.artistalbum),N("ngModel",e.edit.strategy),_(4),O("value",e.RootScanStrategy.compilation),N("ngModel",e.edit.strategy),_(4),O("value",e.RootScanStrategy.audiobook),N("ngModel",e.edit.strategy)}}var Ye=(()=>{class o{edit;RootScanStrategy=st;dialogInit(e,t){this.edit=t.data}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-dialog-root"]],standalone:!1,decls:1,vars:1,consts:()=>{let e;e=$localize`:␟ddfade2974824bcfebc98d94ccca4f02a52a5e65␟2965783636506266611:Root name`;let t;t=$localize`:␟766c66ad5cc981c531aaf3fe3a2a7a346ddc8d83␟8911059720204770105:Path`;let n;n=$localize`:␟1236bc5dce6e5821e26178cec6dc8d6994036e10␟1620750203195539416:Scan Strategy`;let i;i=$localize`:␟5fb13fb4a8447e59cdf05dc196ade39c02a6f8aa␟616064537937996961:Auto`;let M;M=$localize`:␟88f9a766c7fa0449925eb62ba3acba24e86312f3␟9062842966881378285:Artist/Album`;let h;h=$localize`:␟1120f45b24301f0a6a137929f189c3b51e4038ae␟5240807861057959896:Compilations`;let x;return x=$localize`:␟ec1bae0fe9a2b7e56d8f8473a9ffced030abc60b␟7565550399152163566:Audiobook`,[e,t,n,i,M,h,x,[1,"root-form-control"],["for","root-name"],["id","root-name","type","text",3,"ngModelChange","ngModelOptions","ngModel"],["for","root-path"],["id","root-path","type","text",3,"ngModelChange","ngModelOptions","ngModel"],["for","strategy"],["id","strategy"],[1,"select"],["type","radio","name","strategy",3,"ngModelChange","value","ngModel"]]},template:function(t,n){t&1&&C(0,fr,29,14,"form"),t&2&&p(n.edit?0:-1)},dependencies:[se,pe,un,W,_e,j,le],styles:["[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%;line-height:1.3em;padding:5px;min-width:300px}[_nghost-%COMP%]   input[type=radio][_ngcontent-%COMP%]{margin-right:5px}[_nghost-%COMP%]   .root-form-control[_ngcontent-%COMP%]{margin-bottom:8px;display:block}[_nghost-%COMP%]   .select[_ngcontent-%COMP%]{margin-right:15px;display:block;font-size:.8em;line-height:1.5em}"]})}return o})();var Or=(o,l)=>l.id;function Sr(o,l){if(o&1&&(a(0,"span",28),D(1),d(2,5),L(),c(3,"br"),u(4),r()),o&2){let e=s(2).$implicit;_(4),T(e.status.error)}}function ur(o,l){o&1&&(D(0),d(1,6),L())}function Er(o,l){if(o&1&&(D(0),d(1,7),L(),c(2,"br"),u(3),De(4,"date")),o&2){let e=s(3).$implicit;_(3),k("",cn(4,1,e.status.lastScan,"medium")," ")}}function Pr(o,l){if(o&1&&(a(0,"span"),C(1,ur,2,0,"ng-container")(2,Er,5,4),r()),o&2){let e=s(2).$implicit;_(),p(e.status.scanning?1:2)}}function Tr(o,l){if(o&1&&C(0,Sr,5,1,"span",28)(1,Pr,3,1,"span"),o&2){let e=s().$implicit;p(e.status.error?0:1)}}function hr(o,l){o&1&&(a(0,"span"),d(1,8),r())}function Nr(o,l){if(o&1){let e=P();a(0,"tr",18),S("dblclick",function(){let n=m(e).$implicit,i=s(3);return g(i.editRoot(n))})("keydown.enter",function(){let n=m(e).$implicit,i=s(3);return g(i.editRoot(n))}),a(1,"td",12),u(2),r(),a(3,"td",13),u(4),r(),a(5,"td",14),u(6),r(),a(7,"td",15),C(8,Tr,2,1)(9,hr,2,0,"span"),r(),a(10,"td",16)(11,"div",19)(12,"button",20),S("click",function(){let n=m(e).$implicit,i=s(3);return g(i.refreshRoot(n))}),c(13,"i",21),r(),a(14,"button",22),S("click",function(){let n=m(e).$implicit,i=s(3);return g(i.refreshRootMeta(n))}),c(15,"i",23),r(),a(16,"button",24),S("click",function(){let n=m(e).$implicit,i=s(3);return g(i.editRoot(n))}),c(17,"i",25),r(),a(18,"button",26),S("click",function(){let n=m(e).$implicit,i=s(3);return g(i.deleteRoot(n))}),c(19,"i",27),r()()()()}if(o&2){let e=l.$implicit;_(2),T(e.name),_(2),T(e.path),_(2),T(e.strategy),_(2),p(e.status?8:9)}}function Ar(o,l){if(o&1&&(a(0,"table",10)(1,"tr",11)(2,"td",12),d(3,0),r(),a(4,"td",13),d(5,1),r(),a(6,"td",14),d(7,2),r(),a(8,"td",15),d(9,3),r(),a(10,"td",16),d(11,4),r()(),G(12,Nr,20,4,"tr",17,Or),r()),o&2){let e=s();_(12),U(e)}}function Ir(o,l){o&1&&C(0,Ar,14,0,"table",10),o&2&&p(l.length>0?0:-1)}var Vt=(()=>{class o{roots=X([]);notify=f(b);dialogs=f(Re);rootService=f(ct);dialogOverlay=f(Z);refreshRoot(e){this.rootService.rescanRoot(e)}refreshRootMeta(e){this.rootService.refreshRootMeta(e)}editRoot(e){let t={root:e,name:e.name,path:e.path,strategy:e.strategy};this.dialogOverlay.open({title:"Edit Root",childComponent:Ye,data:t,onOkBtn:()=>y(this,null,function*(){try{yield this.rootService.applyDialogRoot(t)}catch(n){return this.notify.error(n),Promise.reject(n)}}),onCancelBtn:()=>y(this,null,function*(){return Promise.resolve()})})}deleteRoot(e){this.dialogs.confirm("Delete Root","Do you want to the delete the root folder?",()=>{this.rootService.removeRoot(e)})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin-root-list"]],inputs:{roots:[1,"roots"]},standalone:!1,decls:2,vars:2,consts:()=>{let e;e=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`;let t;t=$localize`:␟766c66ad5cc981c531aaf3fe3a2a7a346ddc8d83␟8911059720204770105:Path`;let n;n=$localize`:␟05f5612d42b02be4d6d9e0a99585ae7e30a91780␟1617785425462022303:Strategy`;let i;i=$localize`:␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`;let M;M=$localize`:␟030b4423b92167200e39519599f9b863b4f7c62c␟3193976279273491157:Actions`;let h;h=$localize`:␟96613e9bbc5b95316e56df72d323766b54c4964e␟1020564942829121638:Rescan Root`;let x;x=$localize`:␟046a16565d1a08a0b5c251255c63e873f64c4f61␟1228008259662169871:Refresh Root Meta`;let $;$=$localize`:␟b9bf82da3451056e15340d89a4bcbf22fe45752b␟5936613369747810049:Edit Root`;let w;w=$localize`:␟b2fb8fb0d8eda1e65e01bfe666f42b8d4a853caa␟4674133541672494865:Delete Root`;let ne;ne=$localize`:␟45dd81fcbde051783b05fe60c8d0bab8e7e097a9␟4606091236515013460:Error:`;let Y;Y=$localize`:␟4fc06dce435cdd51107afcf0ca206bbbba026b0c␟1188193109474903303:Working…`;let J;J=$localize`:␟8ba85460d8f8515d276c46a9a1876a2ee143482e␟5743221119363707616:Last Change:`;let K;return K=$localize`:␟ff46a8749717b5199040c5eed9fe1e4c3ecc5624␟3875750134082688342:Not scanned`,[e,t,n,i,M,ne,Y,J,K,["name","Roots",3,"list"],["appFocusKeyList","","role","list",1,"roots"],[1,"root","heading"],[1,"title"],[1,"path"],[1,"strategy"],[1,"status"],[1,"actions"],["appFocusKeyListItem","","role","listitem",1,"root"],["appFocusKeyListItem","","role","listitem",1,"root",3,"dblclick","keydown.enter"],[1,"action-buttons"],["title",h,"appClickStop","",3,"click"],["aria-hidden","true",1,"icon-rescan"],["title",x,"appClickStop","",3,"click"],["aria-hidden","true",1,"icon-broom"],["title",$,"appClickStop","",3,"click"],["aria-hidden","true",1,"icon-edit"],["title",w,"appClickStop","",3,"click"],["aria-hidden","true",1,"icon-remove"],[1,"error"]]},template:function(t,n){if(t&1&&(c(0,"app-background-text-list",9),C(1,Ir,1,1)),t&2){let i;O("list",n.roots()),_(),p((i=n.roots())?1:-1,i)}},dependencies:[ie,Fn,Ne,Ae,gn],styles:["[_nghost-%COMP%]{width:100%;overflow:auto;display:block}[_nghost-%COMP%]   .roots[_ngcontent-%COMP%]{padding:15px;font-size:.9em;width:100%}[_nghost-%COMP%]   .root[_ngcontent-%COMP%]{height:60px;border-bottom:1px solid var(--control-border)}[_nghost-%COMP%]   .root[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px}[_nghost-%COMP%]   .root[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .root.selected[_ngcontent-%COMP%]{background-color:var(--background-active)}[_nghost-%COMP%]   .error[_ngcontent-%COMP%]{color:var(--accent)}[_nghost-%COMP%]   .heading[_ngcontent-%COMP%]{height:40px;font-size:.9em}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{width:100px}[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px;flex:50%;margin:0;display:inline-block;color:var(--on-control);border:1px solid transparent}[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--on-control-active);border:1px solid var(--control-active)}"]})}return o})();var Xt=(()=>{class o{roots;unsubscribe=new V;notify=f(b);rootService=f(ct);dialogOverlay=f(Z);static getSortValue(e,t){switch(e){case"name":return t.name;case"path":return t.path;default:return}}ngOnInit(){this.rootService.rootsChange.pipe(R(this.unsubscribe)).subscribe(e=>{this.roots=(e||[]).sort((t,n)=>t.name.localeCompare(n.name))},e=>{this.notify.error(e)}),this.rootService.refreshRoots()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}refresh(){this.rootService.refreshRoots()}newRoot(){let e={name:"",path:"",strategy:st.auto};this.dialogOverlay.open({title:"New Root",childComponent:Ye,data:e,onOkBtn:()=>y(this,null,function*(){try{yield this.rootService.applyDialogRoot(e)}catch(t){return this.notify.error(t),Promise.reject(t)}}),onCancelBtn:()=>y(this,null,function*(){return Promise.resolve()})})}refreshRoots(){this.rootService.rescanRoots()}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin-root"]],standalone:!1,decls:11,vars:1,consts:()=>{let e;e=$localize`:␟2f248600386a30236db69832ef4f910600ec943b␟7732274825567857654:Roots`;let t;t=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`;let n;n=$localize`:␟e13ccbc99042ea4870ebde4a4038672a4298adaf␟3093922570235029600:New Root…`;let i;return i=$localize`:␟c45553c26a8d0a2887def846473f015706ceb1c2␟4238145957469001439:Rescan all Roots`,[[1,"roots"],["section",e],[1,"actions"],["title",t,1,"button-on-control",3,"click"],[1,"icon-reload"],["title",n,1,"button-on-control",3,"click"],[1,"icon-plus"],["title",i,1,"button-on-control",3,"click"],[1,"icon-rescan"],[1,"content"],[3,"roots"]]},template:function(t,n){t&1&&(a(0,"div",0)(1,"app-view-header-slim",1)(2,"div",2)(3,"button",3),S("click",function(){return n.refresh()}),c(4,"i",4),r(),a(5,"button",5),S("click",function(){return n.newRoot()}),c(6,"i",6),r(),a(7,"button",7),S("click",function(){return n.refreshRoots()}),c(8,"i",8),r()()(),a(9,"div",9),c(10,"app-admin-root-list",10),r()()),t&2&&(_(10),O("roots",n.roots))},dependencies:[Ie,Vt],styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:auto;display:block}[_nghost-%COMP%]   .roots[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .roots[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}"]})}return o})();function Dr(o,l){if(o&1){let e=P();a(0,"div")(1,"div",25),d(2,1),r(),a(3,"div",26)(4,"label")(5,"input",27),I("ngModelChange",function(n){m(e);let i=s();return A(i.settings.library.scanAtStart,n)||(i.settings.library.scanAtStart=n),g(n)}),S("ngModelChange",function(){m(e);let n=s();return g(n.onChange())}),r(),D(6),d(7,2),L(),r()()(),a(8,"div")(9,"div",25),d(10,3),r(),a(11,"div",26)(12,"label")(13,"input",28),I("ngModelChange",function(n){m(e);let i=s();return A(i.settings.externalServices.enabled,n)||(i.settings.externalServices.enabled=n),g(n)}),S("ngModelChange",function(){m(e);let n=s();return g(n.onChange())}),r(),D(14),d(15,4),L(),r()()(),a(16,"div")(17,"div",25),d(18,5),r(),a(19,"div",26)(20,"label",29),d(21,6),r(),a(22,"input",30),I("ngModelChange",function(n){m(e);let i=s();return A(i.settings.chat.maxMessages,n)||(i.settings.chat.maxMessages=n),g(n)}),S("ngModelChange",function(){m(e);let n=s();return g(n.onChange())}),r()(),a(23,"div",26)(24,"div",31)(25,"label",32),d(26,7),r(),a(27,"input",33),I("ngModelChange",function(n){m(e);let i=s();return A(i.settings.chat.maxAge.value,n)||(i.settings.chat.maxAge.value=n),g(n)}),S("ngModelChange",function(){m(e);let n=s();return g(n.onChange())}),r()(),a(28,"select",34),I("ngModelChange",function(n){m(e);let i=s();return A(i.settings.chat.maxAge.unit,n)||(i.settings.chat.maxAge.unit=n),g(n)}),S("ngModelChange",function(){m(e);let n=s();return g(n.onChange())}),a(29,"option",35),d(30,8),r(),a(31,"option",36),d(32,9),r(),a(33,"option",37),d(34,10),r(),a(35,"option",38),d(36,11),r(),a(37,"option",39),d(38,12),r(),a(39,"option",40),d(40,13),r(),a(41,"option",41),d(42,14),r(),a(43,"option",42),d(44,15),r(),a(45,"option",43),d(46,16),r(),a(47,"option",44),d(48,17),r()()()(),a(49,"div")(50,"div",25),d(51,18),r(),a(52,"div",26)(53,"label",45),d(54,19),r(),a(55,"textarea",46),I("ngModelChange",function(n){m(e);let i=s();return A(i.ignoreArticles,n)||(i.ignoreArticles=n),g(n)}),S("ngModelChange",function(){m(e);let n=s();return g(n.onChange())}),r()()()}if(o&2){let e=s();_(5),N("ngModel",e.settings.library.scanAtStart),_(8),N("ngModel",e.settings.externalServices.enabled),_(9),N("ngModel",e.settings.chat.maxMessages),_(5),N("ngModel",e.settings.chat.maxAge.value),_(),N("ngModel",e.settings.chat.maxAge.unit),_(27),N("ngModel",e.ignoreArticles)}}function Lr(o,l){o&1&&c(0,"app-loading")}var Ht=(()=>{class o{settings;ignoreArticles="";jam=f(F);notify=f(b);ngOnInit(){this.refresh()}onChange(){}refresh(){this.jam.admin.settings().then(e=>{this.display(e)}).catch(e=>{this.notify.error(e)})}save(){let e=this.settings;e&&(e.index.ignoreArticles=this.ignoreArticles.split(`
`).map(t=>t.trim()).filter(t=>t.length>0),this.settings=void 0,this.jam.admin.settingsUpdate(e).then(()=>{this.notify.success("Settings updated"),this.settings=e}).catch(t=>{this.notify.error(t),this.settings=e}))}display(e){this.settings=e,this.ignoreArticles=e.index.ignoreArticles.join(`
`)}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin-settings"]],standalone:!1,decls:9,vars:1,consts:()=>{let e;e=$localize`:␟05cd06e631edc939a19ce22d609504b7f570723d␟8116289374261643531:Admin Settings`;let t;t=$localize`:␟52c9a103b812f258bcddc3d90a6e3f46871d25fe␟3768927257183755959:Save`;let n;n=$localize`:␟32e65202f89b91a77d0239f6387009535f18c004␟263473846992399517:Save Settings`;let i;i=$localize`:␟a0e8cc93872a4a7c74ebd4fd165751ad9bb55bc0␟7635936183047857561:Scan all Roots on Server Start`;let M;M=$localize`:␟e47c0675b7122c899137fd211528f276baefa9f3␟8918946905429464030:Allow Request to External Services`;let h;h=$localize`:␟f0f78754451cc705b4bc6aafa1b733b8219c383a␟4950570181842731349:Unit of Age`;let x;x=$localize`:␟905882c0fe09eee755ee6730ecf10e3b85cb6d9c␟2188854519574316630:Server`;let $;$=$localize`:␟a0e8cc93872a4a7c74ebd4fd165751ad9bb55bc0␟7635936183047857561:Scan all Roots on Server Start`;let w;w=$localize`:␟d813ec2b4e4dbb4f1a3f2596a34bb94b324dd64b␟5721522774620057803:External Services`;let ne;ne=$localize`:␟e47c0675b7122c899137fd211528f276baefa9f3␟8918946905429464030:Allow Request to External Services`;let Y;Y=$localize`:␟5adf337be1ad12c915ae18012f1bfa1f2ca4628b␟2299187798995800780:Chat`;let J;J=$localize`:␟52318b5079ce3bda0877053b52a550fbde67130a␟6088560830023353456:Maximum Number of Messages`;let K;K=$localize`:␟3391bd7ac225b712137a44a47653ba5912ba6e14␟845892119032308787:Maximum Age of Message`;let B;B=$localize`:␟752daa6baad0f8b4684b5c6775345b02bed6746e␟6479044529603381727:year`;let Le;Le=$localize`:␟e6bbe25e83a1e135e8e1d3e2ceddadb8529c45e9␟7658073495909471632:years`;let be;be=$localize`:␟2790ad2c08306240a508576e942fcfdf271f5a79␟7178101913251976451:month`;let Q;Q=$localize`:␟0fcdd5427274550312ee512bcd5b61ec077e0b5f␟6169402792391433667:months`;let He;He=$localize`:␟f64c76c7c7c71baddef3dc6a93e4394b8fdb69f4␟6320319413541466015:day`;let ze;ze=$localize`:␟fc34f2683c4cb526ed7095c5b1cdd66d672ba932␟7036284206110282007:days`;let q;q=$localize`:␟cff3ed26f8073fa2fe757d97880662060c39a1fa␟5405071297219936776:minute`;let Jt;Jt=$localize`:␟cd25ef11e2d8843297caf4202937023dc02d0ba8␟982745398054129955:minutes`;let Yt;Yt=$localize`:␟c40875920fa824ba8029cf99315da474625354f9␟7479425239631237410:second`;let Zt;Zt=$localize`:␟38bd5794dbe84081cfa7867e876245e1ddae93e7␟227749613426254192:seconds`;let en;en=$localize`:␟38484614389a6a41930e95b82c891780a99be9ce␟225617230946350058:Artist Index`;let tn;return tn=$localize`:␟cb8e8c81accbef16924070ba1c4e2e28f7bae96a␟3077366211526620849:Ignored Articles in Artist Names`,[n,x,$,w,ne,Y,J,K,B,Le,be,Q,He,ze,q,Jt,Yt,Zt,en,tn,[1,"settings"],["section",e],["title",t,1,"button-on-control",3,"click"],[1,"icon-floppy"],[1,"content"],[1,"section-title"],[1,"section-entry"],["type","checkbox","title",i,3,"ngModelChange","ngModel"],["type","checkbox","title",M,3,"ngModelChange","ngModel"],["for","max_messages"],["id","max_messages","type","number",3,"ngModelChange","ngModel"],[1,"chat-max-age"],["for","max_age"],["id","max_age","type","number",3,"ngModelChange","ngModel"],["title",h,3,"ngModelChange","ngModel"],["value","year"],["value","years"],["value","month"],["value","months"],["value","day"],["value","days"],["value","minute"],["value","minutes"],["value","second"],["value","seconds"],["for","ignore_articles"],["id","ignore_articles","rows","10","cols","20",3,"ngModelChange","ngModel"]]},template:function(t,n){t&1&&(a(0,"div",20)(1,"app-view-header-slim",21)(2,"button",22),S("click",function(){return n.save()}),c(3,"i",23),D(4),d(5,0),L(),r()(),a(6,"div",24),C(7,Dr,56,6)(8,Lr,1,0,"app-loading"),r()()),t&2&&(_(7),p(n.settings?7:8))},dependencies:[Ie,ee,at,_t,pe,Sn,Te,rt,W,j],styles:["[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;height:100%}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 0}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .chat-max-age[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-entry[_ngcontent-%COMP%]{padding-bottom:15px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:12px;padding-bottom:3px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-top:-1px;display:inline-block;vertical-align:middle}"]})}return o})();var Ze=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin-start"]],standalone:!1,decls:4,vars:0,consts:()=>{let e;return e=$localize`:␟b7648e7aced164498aa843b5c4e8f2f1c36a7919␟7844706011418789951:Administration`,[[1,"start"],["section",e],[1,"content"]]},template:function(t,n){t&1&&(a(0,"div",0),c(1,"app-view-header-slim",1),a(2,"div",2),c(3,"app-admin-section-cards"),r()())},styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:auto;display:block}[_nghost-%COMP%]   .start[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}"]})}return o})();var Ge=()=>({standalone:!0});function vr(o,l){if(o&1){let e=P();a(0,"div")(1,"form")(2,"div",9)(3,"label",10),d(4,1),r(),a(5,"input",11),I("ngModelChange",function(n){m(e);let i=s();return A(i.edit.edit.name,n)||(i.edit.edit.name=n),g(n)}),r()(),a(6,"div",9)(7,"label",12),d(8,2),r(),a(9,"input",13),I("ngModelChange",function(n){m(e);let i=s();return A(i.edit.edit.email,n)||(i.edit.edit.email=n),g(n)}),r()(),a(10,"div",14),d(11,3),r(),a(12,"div",15)(13,"label")(14,"input",16),I("ngModelChange",function(n){m(e);let i=s();return A(i.edit.edit.roleAdmin,n)||(i.edit.edit.roleAdmin=n),g(n)}),r(),D(15),d(16,4),L(),r(),c(17,"br"),a(18,"label")(19,"input",17),I("ngModelChange",function(n){m(e);let i=s();return A(i.edit.edit.rolePodcast,n)||(i.edit.edit.rolePodcast=n),g(n)}),r(),D(20),d(21,5),L(),r(),c(22,"br"),a(23,"label")(24,"input",18),I("ngModelChange",function(n){m(e);let i=s();return A(i.edit.edit.roleStream,n)||(i.edit.edit.roleStream=n),g(n)}),r(),D(25),d(26,6),L(),r(),c(27,"br"),a(28,"label")(29,"input",19),I("ngModelChange",function(n){m(e);let i=s();return A(i.edit.edit.roleUpload,n)||(i.edit.edit.roleUpload=n),g(n)}),r(),D(30),d(31,7),L(),r()(),c(32,"hr"),a(33,"div",9),c(34,"input",20,0),a(36,"label",21),d(37,8),r(),a(38,"input",22),I("ngModelChange",function(n){m(e);let i=s();return A(i.edit.edit.password,n)||(i.edit.edit.password=n),g(n)}),r()()()()}if(o&2){let e=s();_(5),O("ngModelOptions",oe(14,Ge)),N("ngModel",e.edit.edit.name),_(4),O("ngModelOptions",oe(15,Ge)),N("ngModel",e.edit.edit.email),_(5),O("ngModelOptions",oe(16,Ge)),N("ngModel",e.edit.edit.roleAdmin),_(5),O("ngModelOptions",oe(17,Ge)),N("ngModel",e.edit.edit.rolePodcast),_(5),O("ngModelOptions",oe(18,Ge)),N("ngModel",e.edit.edit.roleStream),_(5),O("ngModelOptions",oe(19,Ge)),N("ngModel",e.edit.edit.roleUpload),_(9),O("ngModelOptions",oe(20,Ge)),N("ngModel",e.edit.edit.password)}}var et=(()=>{class o{edit;dialogInit(e,t){this.edit=t.data}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-dialog-user"]],standalone:!1,decls:1,vars:1,consts:()=>{let e;e=$localize`:␟15e872ff022f06bc8851c7d491bbdc4f97622005␟993404206539036614:Allow User to administrate`;let t;t=$localize`:␟92671fcb207c6fb5c91ef0ac4e61a1887af6e469␟7533742878403628379:Allow User to manage podcasts`;let n;n=$localize`:␟92671fcb207c6fb5c91ef0ac4e61a1887af6e469␟7533742878403628379:Allow User to manage podcasts`;let i;i=$localize`:␟c6a4ec52976cdbecfd1fa4f71a1d02244d341a8e␟9108342311725516140:Allow User to upload files`;let M;M=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`;let h;h=$localize`:␟244aae9346da82b0922506c2d2581373a15641cc␟4768749765465246664:Email`;let x;x=$localize`:␟9610487cbeb5796d34d8601b5ac0c0a65f9e1d19␟795890916060309463:Roles`;let $;$=$localize`:␟ca2283fc765b9f44b69f0175d685dc2443da6011␟2149300564474427551:Administrator`;let w;w=$localize`:␟f47ba1cd01c3dfd801fe7f66c3d28d698dcc0479␟1291164613191345064:Manage Podcasts`;let ne;ne=$localize`:␟c51fa359cb05f03964328ee48e72f6e3cba741ae␟9044866363915823667:Can Stream/Download`;let Y;Y=$localize`:␟1e9e022fd3deee0b16ced58938f6e2575909d144␟5645792403509214710:Can Upload`;let J;return J=$localize`:␟8df9ea304725ea9dc29de1e23673cbdf81f83d1b␟416924249936013759:Your Admin Password`,[["name",""],M,h,x,$,w,ne,Y,J,[1,"user-form-control"],["for","user-name"],["id","user-name","type","text","name","username",3,"ngModelChange","ngModelOptions","ngModel"],["for","user-mail"],["id","user-mail","type","email","name","mail",3,"ngModelChange","ngModelOptions","ngModel"],[1,"user-form-section"],[1,"user-form-roles"],["type","checkbox","title",e,3,"ngModelChange","ngModelOptions","ngModel"],["type","checkbox","title",t,3,"ngModelChange","ngModelOptions","ngModel"],["type","checkbox","title",n,3,"ngModelChange","ngModelOptions","ngModel"],["type","checkbox","title",i,3,"ngModelChange","ngModelOptions","ngModel"],["type","text","name","user","autocomplete","username",1,"dummy"],["for","admin-pass",1,"label-pass"],["id","admin-pass","name","pass","type","password","autocomplete","password",3,"ngModelChange","ngModelOptions","ngModel"]]},template:function(t,n){t&1&&C(0,vr,39,21,"div"),t&2&&p(n.edit?0:-1)},dependencies:[se,pe,Te,W,_e,j,le],styles:["[_nghost-%COMP%] > div[_ngcontent-%COMP%]{margin-left:15px;margin-right:15px}[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%], [_nghost-%COMP%]   input[type=email][_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{line-height:1.3em;padding:5px}[_nghost-%COMP%]   .label-pass[_ngcontent-%COMP%]{padding-right:15px;font-size:.8em}[_nghost-%COMP%]   .dummy[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .user-form-control[_ngcontent-%COMP%]{margin-bottom:8px;display:block}[_nghost-%COMP%]   .user-form-roles[_ngcontent-%COMP%]{margin-bottom:10px}[_nghost-%COMP%]   .user-form-roles[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:1.5em}"]})}return o})();var zt=(()=>{class o{user;userAvatar;hasChanged=!1;unsubscribe=new V;jam=f(F);notify=f(b);ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}dialogInit(e,t){this.user=t.data,this.setImageSource()}dialogResult(){return this.hasChanged}setImageSource(){this.userAvatar=this.user?`${this.jam.image.imageUrl({id:this.user.id,size:60,format:lt.webp})}?${Hn()}`:void 0}onDropFile(e){e.preventDefault(),this.uploadFile(e.dataTransfer?.files)}onDragOverFile(e){e.stopPropagation(),e.preventDefault()}selectFile(e){this.uploadFile(e.target.files)}uploadFile(e){if(!e||e.length===0||!this.user)return;let t=e[0];this.jam.user.uploadUserImage({id:this.user.id},t).pipe(R(this.unsubscribe)).subscribe(n=>{n.type===ke.UploadProgress||n instanceof it&&(this.setImageSource(),this.hasChanged=!0)},n=>{this.setImageSource(),this.notify.error(n)},()=>{this.notify.success("Upload done")})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-dialog-avatar"]],standalone:!1,decls:6,vars:1,consts:()=>{let e;e=$localize`:␟f6317c7ab4911427c272a59e837eed9a4cffae0d␟1388903157408573617:User Avatar`;let t;return t=$localize`:␟d833321cc90a0b0a52714c6d5ec97fbe6c7cfa5c␟2501989539336327542:Upload image`,[[1,"drop-zone",3,"drop","dragover"],[1,"root-form-control"],["alt",e,3,"src"],["type","file","placeholder",t,"accept",".png,.jpeg,.jpg",3,"change"]]},template:function(t,n){t&1&&(a(0,"div",0),S("drop",function(M){return n.onDropFile(M)})("dragover",function(M){return n.onDragOverFile(M)}),a(1,"form")(2,"div",1),c(3,"img",2),r()(),a(4,"form")(5,"input",3),S("change",function(M){return n.selectFile(M)}),r()()()),t&2&&(_(3),O("src",n.userAvatar,me))},dependencies:[se,_e,le],styles:["[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]{margin:10px 20px;border-width:2px;border-style:dotted;border-color:var(--secondary)}[_nghost-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .root-form-control[_ngcontent-%COMP%]{margin-bottom:8px;display:block;text-align:center}"]})}return o})();var eo=()=>({standalone:!0});function xr(o,l){if(o&1){let e=P();a(0,"div",2)(1,"form"),c(2,"input",3),a(3,"label",4),d(4,0),r(),a(5,"input",5),I("ngModelChange",function(n){m(e);let i=s();return A(i.data.password,n)||(i.data.password=n),g(n)}),r()(),a(6,"form"),c(7,"input",6),a(8,"label",7),D(9),d(10,1),L(),a(11,"span"),u(12),r()(),a(13,"input",8),I("ngModelChange",function(n){m(e);let i=s();return A(i.data.newPassword,n)||(i.data.newPassword=n),g(n)}),r()()()}if(o&2){let e=s();_(5),O("ngModelOptions",oe(5,eo)),N("ngModel",e.data.password),_(7),T(e.data.user.name),_(),O("ngModelOptions",oe(6,eo)),N("ngModel",e.data.newPassword)}}var Wt=(()=>{class o{data;dialogInit(e,t){this.data=t.data}dialogResult(){return!0}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-dialog-user-pass"]],standalone:!1,decls:1,vars:1,consts:()=>{let e;e=$localize`:␟8df9ea304725ea9dc29de1e23673cbdf81f83d1b␟416924249936013759:Your Admin Password`;let t;return t=$localize`:␟4775d5cec61d0551fdf66e8e117c3c5a92ff9d2c␟1578289766881417376:New Password for User`,[e,t,[1,"user-form-control"],["type","text","name","user","autocomplete","username",1,"dummy"],["for","admin-pass"],["id","admin-pass","name","pass","type","password","autocomplete","current-password",3,"ngModelChange","ngModelOptions","ngModel"],["type","text","name","new_name",1,"dummy"],["for","new-pass"],["id","new-pass","name","new_password","type","password","autocomplete","new-password",3,"ngModelChange","ngModelOptions","ngModel"]]},template:function(t,n){t&1&&C(0,xr,14,7,"div",2),t&2&&p(n.data?0:-1)},dependencies:[se,pe,W,_e,j,le],styles:["[_nghost-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:10px}[_nghost-%COMP%]   label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}[_nghost-%COMP%]   .dummy[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{line-height:1.3em;padding:5px;width:100%;margin-bottom:15px}"]})}return o})();var yr=(o,l)=>l.id;function wr(o,l){o&1&&(c(0,"i",22),a(1,"span",23),d(2,8),r())}function kr(o,l){o&1&&c(0,"i",22)}function $r(o,l){o&1&&(a(0,"span",23),d(1,9),r())}function Fr(o,l){o&1&&c(0,"i",22)}function Gr(o,l){o&1&&(a(0,"span",23),d(1,10),r())}function Ur(o,l){o&1&&c(0,"i",22)}function Vr(o,l){o&1&&(a(0,"span",23),d(1,11),r())}function Xr(o,l){if(o&1){let e=P();a(0,"tr",20),S("dblclick",function(){let n=m(e).$implicit,i=s(3);return g(i.editUser(n))})("keydown.enter",function(){let n=m(e).$implicit,i=s(3);return g(i.editUser(n))}),a(1,"td",14),c(2,"app-coverart-image",21),r(),a(3,"td",15),u(4),r(),a(5,"td",16),u(6),r(),a(7,"td",17),C(8,wr,3,0),r(),a(9,"td",17),C(10,kr,1,0,"i",22),C(11,$r,2,0,"span",23),r(),a(12,"td",17),C(13,Fr,1,0,"i",22),C(14,Gr,2,0,"span",23),r(),a(15,"td",17),C(16,Ur,1,0,"i",22),C(17,Vr,2,0,"span",23),r(),a(18,"td",18)(19,"div",24)(20,"button",25),S("click",function(){let n=m(e).$implicit,i=s(3);return g(i.editUserAvatar(n))}),c(21,"i",26),r(),a(22,"button",27),S("click",function(){let n=m(e).$implicit,i=s(3);return g(i.setUserPassword(n))}),c(23,"i",28),r(),a(24,"button",29),S("click",function(){let n=m(e).$implicit,i=s(3);return g(i.editUser(n))}),c(25,"i",30),r(),a(26,"button",31),S("click",function(){let n=m(e).$implicit,i=s(3);return g(i.deleteUser(n))}),c(27,"i",32),r()()()()}if(o&2){let e=l.$implicit;_(2),O("coverArtObj",e)("alt",e.name)("size",28)("round",!0),_(2),T(e.name),_(2),T(e.email),_(2),p(e.roles.admin?8:-1),_(2),p(e.roles.podcast?10:-1),_(),p(e.roles.admin?11:-1),_(2),p(e.roles.upload?13:-1),_(),p(e.roles.admin?14:-1),_(2),p(e.roles.stream?16:-1),_(),p(e.roles.stream?17:-1)}}function Hr(o,l){if(o&1&&(a(0,"table",12)(1,"tr",13)(2,"td",14),d(3,0),r(),a(4,"td",15),d(5,1),r(),a(6,"td",16),d(7,2),r(),a(8,"td",17),d(9,3),r(),a(10,"td",17),d(11,4),r(),a(12,"td",17),d(13,5),r(),a(14,"td",17),d(15,6),r(),a(16,"td",18),d(17,7),r()(),G(18,Xr,28,13,"tr",19,yr),r()),o&2){let e=s();_(18),U(e)}}function zr(o,l){o&1&&C(0,Hr,20,0,"table",12),o&2&&p(l.length>0?0:-1)}var jt=(()=>{class o{users=X([]);unsubscribe=new V;notify=f(b);dialogs=f(Re);userService=f(mt);dialogOverlay=f(Z);ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}editUser(e){let t={user:e,edit:{password:"",name:e.name,email:e.email||"",roleAdmin:e.roles.admin,rolePodcast:e.roles.podcast,roleStream:e.roles.stream,roleUpload:e.roles.upload}};this.dialogOverlay.open({childComponent:et,title:"Edit User",data:t,onOkBtn:()=>y(this,null,function*(){try{yield this.userService.applyDialogUser(t),this.notify.success("User edited")}catch(n){return this.notify.error(n),Promise.reject(n)}}),onCancelBtn:()=>y(this,null,function*(){return Promise.resolve()})})}editUserAvatar(e){this.dialogOverlay.open({childComponent:zt,title:"Edit User Avatar",data:e}).afterClosed().pipe(R(this.unsubscribe)).subscribe(()=>{this.userService.refreshUser(e.id)})}setUserPassword(e){let t={user:e,password:"",newPassword:""};this.dialogOverlay.open({childComponent:Wt,title:"Set User Password",data:t,onOkBtn:()=>y(this,null,function*(){try{yield this.userService.setPassword(e.id,t.password,t.newPassword),this.notify.success("Password changed")}catch(n){return this.notify.error(n),Promise.reject(n)}}),onCancelBtn:()=>y(this,null,function*(){return Promise.resolve()})})}deleteUser(e){this.dialogs.confirm("Delete User","Do you want to the delete the user?",()=>{this.userService.removeUser(e).then(()=>{this.notify.success("User deleted")}).catch(t=>{this.notify.error(t)})})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin-user-list"]],inputs:{users:[1,"users"]},standalone:!1,decls:1,vars:1,consts:()=>{let e;e=$localize`:␟cebb7f27b5028c62b4426da3bb3e3bd3f4a3443b␟6525109356951792180:Avatar`;let t;t=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`;let n;n=$localize`:␟244aae9346da82b0922506c2d2581373a15641cc␟4768749765465246664:Email`;let i;i=$localize`:␟ca2283fc765b9f44b69f0175d685dc2443da6011␟2149300564474427551:Administrator`;let M;M=$localize`:␟f47ba1cd01c3dfd801fe7f66c3d28d698dcc0479␟1291164613191345064:Manage Podcasts`;let h;h=$localize`:␟1e9e022fd3deee0b16ced58938f6e2575909d144␟5645792403509214710:Can Upload`;let x;x=$localize`:␟b928aec28578d70da7964d4344fd08467bedeaae␟9217475344633494369:Can Stream`;let $;$=$localize`:␟030b4423b92167200e39519599f9b863b4f7c62c␟3193976279273491157:Actions`;let w;w=$localize`:␟2258a8b85cfda587286e36f3236420a15bf9ba29␟5503535973615409737:Change Avatar`;let ne;ne=$localize`:␟4c27b7f16a6fc9c3f0ebd4a29a2b090ef72af63b␟6500919799852395758:Set Password`;let Y;Y=$localize`:␟2aa7c4367baad2832cb32bc21ba3b01ef2f278b9␟1211169124143348857:Edit User`;let J;J=$localize`:␟3c32a07710e402b2c056bd346e7c42f6015334a6␟4839682406703705780:Delete User`;let K;K=$localize`:␟ef9d1d5acce5a10059867bc0883438ebfdbef96f␟6284119778725231733:Is Admin`;let B;B=$localize`:␟8692ede58c19b2905ab9a276b61f8dc9d57e56c9␟1051345811582274933:Can manage podcast`;let Le;Le=$localize`:␟f51031955310593a68faf0820901072da7927c40␟970639177109356572:Can upload`;let be;return be=$localize`:␟33a9303f180a8e10778a031df3d0178786fd9280␟1869799973955909088:Can stream`,[e,t,n,i,M,h,x,$,K,B,Le,be,["appFocusKeyList","","role","list",1,"users"],[1,"user","heading"],[1,"avatar"],[1,"title"],[1,"email"],[1,"role"],[1,"actions"],["appFocusKeyListItem","","role","listitem",1,"user"],["appFocusKeyListItem","","role","listitem",1,"user",3,"dblclick","keydown.enter"],[3,"coverArtObj","alt","size","round"],["aria-hidden","true",1,"icon-checkmark"],[1,"visually-hidden"],[1,"action-buttons"],["title",w,3,"click"],["aria-hidden","true",1,"icon-picture"],["title",ne,3,"click"],["aria-hidden","true",1,"icon-key"],["title",Y,3,"click"],["aria-hidden","true",1,"icon-edit"],["title",J,3,"click"],["aria-hidden","true",1,"icon-remove"]]},template:function(t,n){if(t&1&&C(0,zr,1,1),t&2){let i;p((i=n.users())?0:-1,i)}},dependencies:[yn,Ne,Ae],styles:["[_nghost-%COMP%]{width:100%;overflow:auto;display:block}[_nghost-%COMP%]   .users[_ngcontent-%COMP%]{padding:15px;font-size:.9em;width:100%}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]{height:60px;border-bottom:1px solid var(--control-border)}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px 10px}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .user.selected[_ngcontent-%COMP%]{background-color:var(--background-active)}[_nghost-%COMP%]   .heading[_ngcontent-%COMP%]{font-size:.9em;height:40px}[_nghost-%COMP%]   .icon-checkmark[_ngcontent-%COMP%]{color:var(--primary)}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{width:100px}[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px;flex:50%;margin:0;display:inline-block;color:var(--on-control);border:1px solid transparent}[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--on-control-active);border:1px solid var(--control-active)}"]})}return o})();var Kt=(()=>{class o{users;unsubscribe=new V;notify=f(b);userService=f(mt);dialogOverlay=f(Z);getSortValue(e,t){switch(e){case"name":return t.name;case"email":return t.email;case"roleAdmin":return t.roles.admin?1:0;case"rolePodcast":return t.roles.podcast?1:0;case"roleUpload":return t.roles.upload?1:0;case"roleStream":return t.roles.stream?1:0;default:return}}ngOnInit(){this.userService.usersChange.pipe(R(this.unsubscribe)).subscribe(e=>{this.users=(e||[]).sort((t,n)=>t.name.localeCompare(n.name))},e=>{this.notify.error(e)}),this.userService.refreshUsers()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}refresh(){this.userService.refreshUsers()}newUser(){let e={edit:{password:"",name:"",email:"",roleAdmin:!1,rolePodcast:!1,roleStream:!0,roleUpload:!1}};this.dialogOverlay.open({title:"New User",childComponent:et,data:e,onOkBtn:()=>y(this,null,function*(){try{yield this.userService.applyDialogUser(e),this.notify.success("User created")}catch(t){return this.notify.error(t),Promise.reject(t)}}),onCancelBtn:()=>y(this,null,function*(){return Promise.resolve()})})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin-users"]],standalone:!1,decls:9,vars:1,consts:()=>{let e;e=$localize`:␟4d13a9cd5ed3dcee0eab22cb25198d43886942be␟4555457172864212828:Users`;let t;t=$localize`:␟c8d1785038d461ec66b5799db21864182b35900a␟1102717806459547726:Refresh`;let n;return n=$localize`:␟cd26ab47241f58b1af5990ff41f7f5dd0b9d297c␟4125725649492874522:New User…`,[[1,"users"],["section",e],[1,"actions"],["title",t,1,"button-on-control",3,"click"],[1,"icon-reload"],["title",n,1,"button-on-control",3,"click"],[1,"icon-plus"],[1,"content"],[3,"users"]]},template:function(t,n){t&1&&(a(0,"div",0)(1,"app-view-header-slim",1)(2,"div",2)(3,"button",3),S("click",function(){return n.refresh()}),c(4,"i",4),r(),a(5,"button",5),S("click",function(){return n.newUser()}),c(6,"i",6),r()()(),a(7,"div",7),c(8,"app-admin-user-list",8),r()()),t&2&&(_(8),O("users",n.users))},dependencies:[Ie,jt],styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow-y:auto;overflow-x:auto;display:block}[_nghost-%COMP%]   .users[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .users[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}[_nghost-%COMP%]   .users[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 5px 5px}[_nghost-%COMP%]   .users[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .users[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}"]})}return o})();var tt=[{path:"",component:Ot,children:[{path:"",pathMatch:"full",component:Ze,data:{name:"Admin"}},{path:"settings",component:Ht,data:{name:"Admin Settings"}},{path:"root",component:Xt,data:{name:"Roots",icon:"icon-root"}},{path:"user",component:Kt,data:{name:"Users",icon:"icon-user"}},{path:"folder",redirectTo:"folder/"},{path:"folder/:id",component:At,data:{id:"folder",name:"Folders",icon:"icon-folder",link:"folder"},children:[{path:"overview",component:$t},{path:"health",component:wt},{path:"sub-folders",component:Lt},{path:"tracks",component:Gt},{path:"tracks-health",component:Ft},{path:"tags",loadChildren:()=>y(null,null,function*(){return import("./chunk-RTX2NIVX.js").then(o=>o.TagEditorModule)})}]},{path:"radar",component:Ut,data:{name:"Health Radar",icon:"icon-health"}}]}],to=bn.forChild(tt);function jr(o,l){if(o&1&&u(0),o&2){let e=s(2);k(" (",e.folderService.current.count,") ")}}function Kr(o,l){if(o&1&&(a(0,"div",6)(1,"span",4),d(2,1),r(),u(3),r()),o&2){let e=s(2);_(3),k(" ",e.folderService.queue.length," ")}}function Br(o,l){if(o&1&&(a(0,"div",2)(1,"div",3)(2,"span",4),d(3,0),r(),c(4,"i",5),u(5),C(6,jr,1,1),r(),C(7,Kr,4,1,"div",6),r()),o&2){let e=s();_(5),k(" ",e.folderService.current.title," "),_(),p(e.folderService.current.count>1?6:-1),_(),p(e.folderService.queue.length>0?7:-1)}}var Bt=(()=>{class o{folderService=f(H);static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin-queue-requests"]],standalone:!1,decls:1,vars:1,consts:()=>{let e;e=$localize`:␟7fdc8522031bbeba05f9d0a020e0b18002243f03␟7531465938860815822:Current:`;let t;return t=$localize`:␟417f965faad1daa7b24b82f6a6940676e9caf278␟1235332800071827748:Other requests in queue:`,[e,t,[1,"queue-overlay"],[1,"current"],[1,"label"],[1,"icon-spin","icon-spinner"],[1,"other"]]},template:function(t,n){t&1&&C(0,Br,8,3,"div",2),t&2&&p(n.folderService.current?0:-1)},styles:["[_nghost-%COMP%]   .queue-overlay[_ngcontent-%COMP%]{position:fixed;right:16px;bottom:16px;padding:15px;background-color:var(--control);color:var(--on-control);border:1px solid var(--control-border);z-index:1000}[_nghost-%COMP%]   .queue-overlay[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{text-transform:uppercase;font-size:.8em;letter-spacing:1px;color:var(--on-control-ambient)}[_nghost-%COMP%]   .queue-overlay[_ngcontent-%COMP%]   .other[_ngcontent-%COMP%]{border-top:1px solid var(--background-border)}"]})}return o})();var Qt=(()=>{class o{sections=[];constructor(){let t=(tt[0].children||[]).filter(n=>n.path&&n.path.length>0&&n.data?.name).map(n=>({link:`/admin/${n.data&&n.data.link?n.data.link:n.path}`,name:n.data?n.data.name:"",icon:n.data&&n.data.icon?n.data.icon:"icon-admin"}));this.sections=[{name:"Administration",entries:t}]}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin-sidebar"]],standalone:!1,decls:1,vars:1,consts:[[3,"sections"]],template:function(t,n){t&1&&c(0,"app-sidebar",0),t&2&&O("sections",n.sections)},dependencies:[vn],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block}"]})}return o})();var Jr=o=>["/admin",o],Yr=(o,l)=>l.id;function Zr(o,l){if(o&1&&(a(0,"div",0)(1,"div",1),c(2,"app-iconart-image",2),r(),a(3,"div",3)(4,"div",4),u(5),r()()()),o&2){let e=l.$implicit;O("routerLink",te(3,Jr,e.id)),_(2),O("icon",e.icon),_(3),T(e.text)}}var qt=(()=>{class o{sections=[];constructor(){let e=tt[0];this.sections=(e.children||[]).filter(t=>t.path&&t.path.length>0&&t.data?.name).map(t=>({id:t.data&&t.data.link?t.data.link:t.path,text:t.data?t.data.name:"",icon:t.data&&t.data.icon?t.data.icon:"icon-admin"}))}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=E({type:o,selectors:[["app-admin-section-cards"]],standalone:!1,decls:2,vars:0,consts:[[1,"section-card","no-hover",3,"routerLink"],[1,"image"],[3,"icon"],[1,"footer"],[1,"footer-content"]],template:function(t,n){t&1&&G(0,Zr,6,5,"div",0,Yr),t&2&&U(n.sections)},dependencies:[kn,Me],styles:['[_nghost-%COMP%]{display:flex;flex-flow:row wrap}@media (max-width: 768px){[_nghost-%COMP%]{justify-content:space-around}}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]{margin:15px;width:calc(25% - 30px);position:relative;overflow:hidden;display:flex;cursor:pointer;tab-index:0}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]:before{content:"";display:block;margin-top:100%}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .fav[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{position:absolute;top:1px;padding:5px;transform:translateY(-31px);transition:transform .3s;-webkit-user-select:none;user-select:none;border-bottom-left-radius:3px}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .play[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);visibility:hidden;opacity:0;transition-property:opacity,visibility;transition-duration:.3s}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{left:50%;transform:translate(-50%,-31px);font-size:.8em}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .fav[_ngcontent-%COMP%]{left:1px;cursor:pointer}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{right:3px;cursor:pointer}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{padding:10px;position:absolute;bottom:1px;left:1px;right:1px;overflow:hidden;height:auto;transition:all .3s}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   .footer-buttons[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]:hover   .fav[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]:hover   .more[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]:focus-within   .fav[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]:focus-within   .more[_ngcontent-%COMP%]{transform:translateY(0)}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]:hover   .date[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]:focus-within   .date[_ngcontent-%COMP%]{transform:translate(-50%)}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]:hover   .play[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]:focus-within   .play[_ngcontent-%COMP%]{visibility:unset;opacity:1}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .fav[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]{background-color:var(--background-transparent);color:var(--on-background-highlight)}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .fav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .fav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .more[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background)}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .fav[_ngcontent-%COMP%]:hover{color:var(--on-background)}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .footer-subline[_ngcontent-%COMP%]{display:block;font-size:.8em}@media (max-width: 1600px){[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]{width:calc(25% - 30px)}}@media (max-width: 1200px){[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]{width:calc(33.3333333333% - 30px)}}@media (max-width: 522px){[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]{width:calc(50% - 30px)}}@media (max-width: 400px){[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]{margin:10px}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .footer[_ngcontent-%COMP%]{font-size:.8em}}[_nghost-%COMP%]   .section-card[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{min-height:135px;min-width:135px;display:flex;align-items:center;justify-content:center}']})}return o})();var t0=(()=>{class o{static \u0275fac=function(t){return new(t||o)};static \u0275mod=on({type:o});static \u0275inj=nn({imports:[Cn,Vn,Pn,Mn,An,Nn,Xn,to,ft]})}return o})();ht(Ot,function(){return[Mt,Ct,Bt,Qt]},[]);ht(Ze,function(){return[Ie,qt]},[]);export{t0 as AdminModule};
