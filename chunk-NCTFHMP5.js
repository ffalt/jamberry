import{a as Fe}from"./chunk-LLB732PA.js";import"./chunk-D2RFBPNV.js";import{a as H}from"./chunk-RQOW2HPH.js";import"./chunk-HH6YNG5B.js";import"./chunk-NFKXDL76.js";import{a as J}from"./chunk-BD47LOKC.js";import{$ as d,Ab as ue,Ba as r,Dd as Le,E as de,Ea as M,Fa as P,I as C,Ie as N,J as Se,O as U,P as x,Pe as Ve,Qa as m,Ra as y,Sa as D,Sb as he,Tb as Te,Ub as Ae,Va as X,Vb as Ne,Wa as z,Wb as Re,Wc as A,Xa as j,Xb as be,Xd as ke,Yb as ve,Zc as G,Zd as De,_ as a,_a as Ce,_b as Ge,_c as w,a as re,b as ce,be as Xe,cb as W,cd as L,db as pe,dc as Ue,eb as Me,f as K,ha as O,he as k,i as le,id as B,ka as u,ma as Pe,nd as xe,oa as S,od as ye,ra as V,rd as Ie,sa as F,se as ze,ta as s,te as Q,ua as i,ub as Ee,ue as je,va as l,vb as Oe,vd as $e,wa as h,wd as we,xa as T,yb as me,z as ge,za as $,zb as fe}from"./chunk-NKPKIXYP.js";function He(t,g){t&1&&l(0,"i",7)}function qe(t,g){t&1&&(s(0,"span"),r(1,2),i())}var ee=(()=>{class t{app;auth;jam;notify;refreshRandom;refreshing=!1;unsubscribe=new le;constructor(e,o,n,_){this.app=e,this.auth=o,this.jam=n,this.notify=_,this.refreshRandom=H()}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}onDropFile(e){e.preventDefault(),this.uploadFile(e.dataTransfer?.files)}onDragOverFile(e){e.stopPropagation(),e.preventDefault()}selectFile(e){this.uploadFile(e.target.files)}uploadFile(e){if(!e||e.length===0||!this.auth.user)return;let o=e[0];this.jam.user.uploadUserImage({id:this.auth.user.id},o).pipe(ge(this.unsubscribe)).subscribe(n=>{n.type===fe.UploadProgress||n instanceof ue},n=>{this.notify.error(n)},()=>{this.refreshRandom=H(),this.notify.success("Upload done")})}randomAvatar(){this.refreshing||!this.auth.user||(this.refreshing=!0,this.jam.user.generateUserImage({id:this.auth.user.id}).then(()=>{this.refreshing=!1,this.refreshRandom=H(),this.notify.success("Image randomized")}).catch(e=>{this.refreshing=!1,this.notify.error(e)}))}static \u0275fac=function(o){return new(o||t)(d(B),d(G),d(w),d(L))};static \u0275cmp=C({type:t,selectors:[["app-user-avatar"]],decls:11,vars:6,consts:()=>{let e;e=$localize`:␟d833321cc90a0b0a52714c6d5ec97fbe6c7cfa5c␟2501989539336327542:Upload image`;let o;o=$localize`:␟0966612784a5dcf0e05406cebe6e47c69999665a␟4001363701577936593: Drag an Image File here `;let n;n=$localize`:␟3a2a9bb12d904f3dd84e42cfad37afef4a6b35f6␟3825771792569625715:Choose a file`;let _;return _=$localize`:␟c1ba8ac278d9bdb189e23866675d475089dce2ae␟4360279154190126867:Random Image`,[o,n,_,[1,"drop-zone",3,"drop","dragover"],[1,"placeholder"],[3,"coverArtObj","size","round","refreshRandom"],[1,"button-primary",3,"click"],[1,"icon-spin","icon-spinner"],["id","file","type","file","placeholder",e,"accept",".png,.jpeg,.jpg",1,"inputfile",3,"change"],["for","file",1,"button-primary"]]},template:function(o,n){o&1&&(s(0,"div",3),M("drop",function(c){return n.onDropFile(c)})("dragover",function(c){return n.onDragOverFile(c)}),s(1,"div",4),r(2,0),i(),l(3,"app-coverart-image",5),s(4,"button",6),M("click",function(){return n.randomAvatar()}),O(5,He,1,0,"i",7)(6,qe,2,0,"span"),i(),s(7,"form")(8,"input",8),M("change",function(c){return n.selectFile(c)}),i(),s(9,"label",9),r(10,1),i()()()),o&2&&(a(3),u("coverArtObj",n.auth.user)("size",100)("round",!0)("refreshRandom",n.refreshRandom),a(2),S(n.refreshing?5:-1),a(),S(n.refreshing?-1:6))},dependencies:[ve,Ne,Re,De],styles:["[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]{vertical-align:bottom;display:inline-block;min-width:220px;min-height:140px;border-width:2px;margin-bottom:15px;margin-right:15px;border-style:dotted;border-color:var(--secondary);padding-left:15px;padding-right:15px;padding-bottom:15px;text-align:center}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   app-coverart-image[_ngcontent-%COMP%]{margin:0 auto 10px}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .inputfile[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:10px;min-width:80%;display:inline-block}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:inline-block;min-width:80%}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%;display:block}[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .placeholder[_ngcontent-%COMP%]{width:100%;padding-top:15px;padding-bottom:15px;text-align:center;color:var(--on-control-ambient);font-size:.8em;text-transform:uppercase}"]})}return t})();var Ye=(t,g)=>g.session.id;function Ze(t,g){if(t&1&&(s(0,"div",17),r(1,4),i(),s(2,"div")(3,"code"),m(4),i()()),t&2){let e=P(3);a(4),y(e.subsonicToken==null?null:e.subsonicToken.token)}}function en(t,g){if(t&1){let e=$();s(0,"div"),r(1,2),i(),s(2,"button",16),M("click",function(){U(e);let n=P(2);return x(n.generateSubsonicToken())}),r(3,3),i(),O(4,Ze,5,1)}if(t&2){let e=P(2);a(4),S(e.subsonicToken!=null&&e.subsonicToken.token?4:-1)}}function nn(t,g){if(t&1){let e=$();s(0,"div"),r(1,5),i(),s(2,"button",16),M("click",function(){U(e);let n=P(2);return x(n.unlockSubsonicToken())}),r(3,6),i()}}function tn(t,g){t&1&&(s(0,"span"),r(1,7),i())}function on(t,g){if(t&1&&(s(0,"span",25),r(1,8),i(),l(2,"br"),m(3),W(4,"date")),t&2){let e=P().$implicit;a(3),D(" ",Me(4,1,e.session.expires,"long")," ")}}function sn(t,g){if(t&1){let e=$();s(0,"div",18)(1,"div",19),m(2),l(3,"br"),s(4,"span"),m(5),i()(),s(6,"div",20),m(7),l(8,"br"),m(9),i(),s(10,"div",21),O(11,tn,2,0,"span")(12,on,5,4),i(),s(13,"div",22)(14,"button",23),M("click",function(){let n=U(e).$implicit,_=P(2);return x(_.remove(n.session))}),l(15,"i",24),i()()()}if(t&2){let e=g.$implicit;Pe("invalid",e.isExpired),a(2),D(" ",e.session.client,""),a(3),y(e.session.mode),a(2),D(" ",e.session.agent,""),a(2),D(" ",e.session.os," "),a(2),S(e.session.expires===void 0?11:12)}}function _n(t,g){if(t&1&&(s(0,"div",11)(1,"div",12)(2,"div",13),r(3,0),i(),O(4,en,5,1)(5,nn,4,0),i(),s(6,"div",14)(7,"div",13),r(8,1),i(),V(9,sn,16,7,"div",15,Ye),i()()),t&2){let e=P();a(4),S(e.isUnlocked?4:5),a(5),F(e.sessions)}}var ne=(()=>{class t{jam;auth;notify;dialogOverlay;sessions;isUnlocked=!1;lock={pass:""};subsonicToken;constructor(e,o,n,_){this.jam=e,this.auth=o,this.notify=n,this.dialogOverlay=_}generateSubsonicToken(){!this.isUnlocked||!this.auth.user||this.jam.user.generateSubsonicToken({id:this.auth.user.id,password:this.lock.pass}).then(e=>{this.subsonicToken=e,this.isUnlocked=!0,this.refresh(),this.notify.success("Token generated")}).catch(e=>{this.subsonicToken=void 0,this.isUnlocked=!1,this.notify.error(e)})}unlockSubsonicToken(){this.dialogOverlay.open({childComponent:Xe,data:this.lock,onOkBtn:()=>K(this,null,function*(){this.isUnlocked=!0}),onCancelBtn:()=>K(this,null,function*(){return Promise.resolve()})})}ngOnInit(){this.auth.isLoggedIn()&&this.refresh()}remove(e){let o=e.id;this.jam.session.remove({id:o}).then(()=>{this.sessions&&(this.sessions=this.sessions.filter(n=>n.session.id!==o)),this.notify.success("Session Login removed")}).catch(n=>{this.notify.error(n)})}refresh(){this.jam.session.list().then(e=>{this.sessions=e.map(o=>({session:o,isExpired:o.expires!==void 0&&o.expires<Date.now()}))}).catch(e=>{this.notify.error(e)})}static \u0275fac=function(o){return new(o||t)(d(w),d(G),d(L),d(ke))};static \u0275cmp=C({type:t,selectors:[["app-sessions-page"]],decls:3,vars:1,consts:()=>{let e;e=$localize`:␟ce54b0509275b0551de870b805c1bb5c426d723f␟877974575580185933:Session Logins`;let o;o=$localize`:␟68d17f5d1beeee03406372494fc0bc306ed24f72␟2707659021126588033:Subsonic Token`;let n;n=$localize`:␟2744dff891981e67dd84e3a8ceb430704b86ed6a␟721963055036507192:Sessions`;let _;_=$localize`:␟29fcf6bfc99e542abcb128de5a04337412c00b10␟5380285610371362253:Click to generate or update a Subsonic Token. Warning: Existing token will no longer be valid.`;let c;c=$localize`:␟7eac06d83d2276d35aa4dc8aa51324b891722583␟5034015365836681485:Generate New Subsonic Token`;let R;R=$localize`:␟b603efccecf2b3f80a7807d375cf44b1cdaa6403␟1776712759383883061:This is your Subsonic Token. Please copy and store, you can not see it here again.`;let b;b=$localize`:␟1d23380d15fcbebe8a5ee64117725125d2860c6e␟5629769933636183639:Enter your Jam password to generate or update a Subsonic Token.`;let v;v=$localize`:␟e13796974274fd6b6bbc61a60fac4e14e6e29b6d␟8191371354890763172:Enter Password`;let p;p=$localize`:␟a881e543b0df3a9620cb65a5e6da992c3f38382e␟1021529107572383199:Remove this login`;let E;E=$localize`:␟6c2d15914e6ea1e9bb2ec041d69ae3b5f89c73cf␟8896757418171595787:Does not expire`;let ae;return ae=$localize`:␟7ebcbdc49ec3e6c6354f788704a3b4fb5649b74b␟7222262636210875388:valid until:`,[o,n,_,c,R,b,v,E,ae,[1,"sessions"],["section",e],[1,"content"],[1,"subsonic"],[1,"section-title"],[1,"session-list"],[1,"session",3,"invalid"],[1,"button-primary",3,"click"],[1,"token"],[1,"session"],[1,"title"],[1,"agent"],[1,"expires"],[1,"remove"],["title",p,3,"click"],["aria-hidden","true",1,"icon-remove"],[1,"label"]]},template:function(o,n){o&1&&(s(0,"div",9),l(1,"app-view-header-slim",10),O(2,_n,11,1,"div",11),i()),o&2&&(a(2),S(n.sessions?2:-1))},dependencies:[k,Oe],styles:['[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]{padding-bottom:30px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]   .token[_ngcontent-%COMP%]{margin-top:20px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{padding:20px;display:inline-block;background-color:var(--control);color:var(--on-control-ambient)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .subsonic[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:15px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap;-webkit-user-select:none;user-select:none;width:100%;padding-top:5px;background-color:var(--background);color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{min-height:48px;display:flex;flex-flow:row nowrap;align-items:center;align-content:space-evenly;width:100%;padding:10px;line-height:1.25em;margin-bottom:1px;border-top-width:1px;border-top-style:solid;border-bottom-width:0;border-bottom-style:solid;border-bottom-color:var(--background-border);border-top-color:var(--background-border)}@media (max-width: 1000px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{height:auto}}@media (max-width: 522px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{font-size:.9em}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]:last-child{border-bottom-width:1px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .small-screen-icon[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--on-background-highlight)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--on-background);font-size:.8em}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;display:inline-block;margin:0 10px 0 0}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.8em;vertical-align:middle}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a.title-link[_ngcontent-%COMP%]{font-size:inherit;margin-right:10px;color:var(--on-background-highlight)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{width:0;margin-left:0;cursor:move}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]{display:inline-block;width:26px;height:8px;transform:rotate(90deg);margin-left:-8px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%], [_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]:before{background-image:radial-gradient(#7b7b7b 40%,transparent 40%);background-size:4px 4px;background-position:0 100%;background-repeat:repeat-x}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]:before{content:"";display:block;width:100%;height:33%}@media (max-width: 1000px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{height:auto;min-height:48px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-left:0}}@media (max-width: 400px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]{flex-flow:row wrap;align-items:inherit;width:100%;font-size:.9em}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .small-screen-icon[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{order:2;width:25%;text-align:center}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]{transform:rotate(0)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{order:6;margin-left:0;margin-right:0;padding-right:0;padding-left:0;width:100%}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:0;margin-right:0;padding-right:0;padding-left:0;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;margin-left:0;margin-right:0;overflow:hidden;text-overflow:ellipsis}}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%]{font-size:.8em;flex-grow:1;padding-right:10px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{width:260px;font-size:.8em;padding-right:10px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;color:var(--on-background)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:var(--on-background-hover)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-right:10px;width:140px}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.7em;text-transform:uppercase}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session.invalid[_ngcontent-%COMP%]{color:var(--on-control-ambient-disabled)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session.invalid[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{color:var(--accent)}@media (max-width: 400px){[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%], [_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{order:0;width:calc(100% - 30px)}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .remove[_ngcontent-%COMP%]{order:1}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .agent[_ngcontent-%COMP%]{order:2}[_nghost-%COMP%]   .sessions[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .session-list[_ngcontent-%COMP%]   .session[_ngcontent-%COMP%]   .expires[_ngcontent-%COMP%]{order:3}}']})}return t})();var rn=(t,g)=>g.name;function cn(t,g){if(t&1){let e=$();s(0,"label",10)(1,"input",14),j("ngModelChange",function(n){U(e);let _=P();return z(_.app.settings.theme,n)||(_.app.settings.theme=n),x(n)}),M("ngModelChange",function(){U(e);let n=P();return x(n.onChange())}),i(),m(2),W(3,"titlecase"),i()}if(t&2){let e=g.$implicit,o=P();a(),u("value",e.name),X("ngModel",o.app.settings.theme),a(),y(pe(3,3,e.name))}}var te=(()=>{class t{router;app;settings;player;themes=Fe.themes;public;constructor(e,o,n,_){this.router=e,this.app=o,this.settings=n,this.player=_}onChange(){this.settings.applySettings()}static \u0275fac=function(o){return new(o||t)(d(ye),d(B),d(we),d($e))};static \u0275cmp=C({type:t,selectors:[["app-page-settings"]],decls:25,vars:3,consts:()=>{let e;e=$localize`:␟121cc5391cd2a5115bc2b3160379ee5b36cd7716␟4930506384627295710:Settings`;let o;o=$localize`:␟8ba4f3fada9c0278b12e5dc72b25a9213a41f73e␟2696427906168966769:Show Waveform of Current Track`;let n;n=$localize`:␟09775f315171df8237e648a015ef8d926da48748␟4046137991643846566:Show Notifications On Tracks Change`;let _;_=$localize`:␟b307e817a013c5009ff98f7645834d503869db50␟8198980433602946702:Design`;let c;c=$localize`:␟59bdc3dfa4075f92c734588899485db702c8f120␟7683705529753923369:Player`;let R;R=$localize`:␟8ba4f3fada9c0278b12e5dc72b25a9213a41f73e␟2696427906168966769:Show Waveform of Current Track`;let b;b=$localize`:␟7096fbcea9ef94e1ae3e68c75250b6c9bd78b1bb␟3015012963934645778:Playing`;let v;v=$localize`:␟b9c15b2fd4b6fab0a947d1cf0843c3e1ed1cebf3␟2706303691969065868:Show Playing Track Name in Window Title`;let p;return p=$localize`:␟c4c1ee09a557adee6dd31c26dc1dc03fc106dffe␟3955518524911882320:Show Notification Popup On Track Change`,[_,c,R,b,v,p,[1,"settings"],["section",e],[1,"content"],[1,"section-title"],[1,"select"],["type","checkbox","title",o,3,"ngModelChange","ngModel"],["type","checkbox","value","1",3,"ngModelChange","ngModel"],["type","checkbox","value","1","title",n,3,"ngModelChange","ngModel"],["type","radio","name","theme",3,"ngModelChange","value","ngModel"]]},template:function(o,n){o&1&&(s(0,"div",6),l(1,"app-view-header-slim",7),s(2,"div",8)(3,"div",9),r(4,0),i(),s(5,"div")(6,"fieldset"),V(7,cn,4,5,"label",10,rn),i()(),s(9,"div",9),r(10,1),i(),s(11,"label")(12,"input",11),j("ngModelChange",function(c){return z(n.app.settings.showWaveform,c)||(n.app.settings.showWaveform=c),c}),M("ngModelChange",function(){return n.onChange()}),i(),h(13),r(14,2),T(),i(),s(15,"div",9),r(16,3),i(),s(17,"label")(18,"input",12),j("ngModelChange",function(c){return z(n.app.settings.playingTrackInTitle,c)||(n.app.settings.playingTrackInTitle=c),c}),M("ngModelChange",function(){return n.onChange()}),i(),h(19),r(20,4),T(),i(),s(21,"label")(22,"input",13),j("ngModelChange",function(c){return z(n.app.settings.notificationSong,c)||(n.app.settings.notificationSong=c),c}),M("ngModelChange",function(){return n.onChange()}),i(),h(23),r(24,5),T(),i()()()),o&2&&(a(7),F(n.themes),a(5),X("ngModel",n.app.settings.showWaveform),a(6),X("ngModel",n.app.settings.playingTrackInTitle),a(4),X("ngModel",n.app.settings.notificationSong))},dependencies:[Te,he,Ge,Ae,be,k,Ee],styles:["[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;padding-bottom:15px;color:var(--on-background)}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin-top:-1px;display:inline-block;vertical-align:middle}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{margin-bottom:15px;width:auto;display:inline}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label.select[_ngcontent-%COMP%]{width:auto;padding-top:4px;padding-bottom:4px}[_nghost-%COMP%]   .settings[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   label.select[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:10px}"]})}return t})();var oe=(()=>{class t{jam;auth;notify;base=[];favorites=[];played=[];constructor(e,o,n){this.jam=e,this.auth=o,this.notify=n}ngOnInit(){this.auth.isLoggedIn()&&this.refresh()}refresh(){this.jam.stats.user().then(e=>{this.favorites=t.buildStats(e.favorite,"/favorites"),this.played=t.buildStats(e.played,"/recently-played"),this.base=Q([{text:"Bookmarks",link:"/library/bookmarks",value:e.bookmark},{text:"Playlists",link:"/library/playlists",value:e.playlist}],!0)}).catch(e=>{this.notify.error(e)})}static buildStats(e,o=""){return Q([{text:"Artists",link:"artists",value:e.artistTypes.album},...[{type:N(A.album),value:e.albumTypes.album},{type:N(A.compilation),value:e.albumTypes.compilation}].map(n=>({text:n.type?.text,link:`${n.type?.id}`,value:n.value})),{text:"Series",link:"series",value:e.series},...[{type:N(A.audiobook),value:e.albumTypes.audiobook},{type:N(A.soundtrack),value:e.albumTypes.soundtrack},{type:N(A.live),value:e.albumTypes.live},{type:N(A.bootleg),value:e.albumTypes.bootleg},{type:N(A.ep),value:e.albumTypes.ep},{type:N(A.single),value:e.albumTypes.single}].map(n=>({text:n.type?.text,link:`${n.type?.id}`,value:n.value})),{text:"Folders",link:"folders",value:e.folder},{text:"Tracks",link:"tracks",value:e.track}].map(n=>ce(re({},n),{link:`/library/${n.link}${o}`})))}static \u0275fac=function(o){return new(o||t)(d(w),d(G),d(L))};static \u0275cmp=C({type:t,selectors:[["app-user-stats"]],decls:9,vars:3,consts:()=>{let e;e=$localize`:␟299f97b8ee9c62d45f2cc01961aa1e5101d6d05a␟4088311569349098646:Stats`;let o;o=$localize`:␟0add707baf7b167d0c0e9cdeb80f946aa1bd2223␟4085930761302974863:Favorites`;let n;return n=$localize`:␟73565b2d231303b7ff6f28663a72abb1b3bd1890␟7754730602038897709:Played`,[e,o,n,[1,"section-title"],[3,"stats"]]},template:function(o,n){o&1&&(s(0,"div",3),r(1,0),i(),l(2,"app-stats",4),s(3,"div",3),r(4,1),i(),l(5,"app-stats",4),s(6,"div",3),r(7,2),i(),l(8,"app-stats",4)),o&2&&(a(2),u("stats",n.base),a(3),u("stats",n.favorites),a(3),u("stats",n.played))},dependencies:[je],styles:["[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-top:15px;margin-bottom:10px;color:var(--on-control-ambient)}"]})}return t})();function gn(t,g){t&1&&(s(0,"div"),l(1,"i",16),h(2),r(3,3),T(),i())}function dn(t,g){t&1&&(s(0,"div"),l(1,"i",16),h(2),r(3,4),T(),i())}function Sn(t,g){t&1&&(s(0,"div"),l(1,"i",16),h(2),r(3,5),T(),i())}function Pn(t,g){t&1&&(s(0,"div"),l(1,"i",16),h(2),r(3,6),T(),i())}function Cn(t,g){if(t&1&&(s(0,"div",14)(1,"div",12),r(2,2),i(),s(3,"div",15),O(4,gn,4,0,"div")(5,dn,4,0,"div")(6,Sn,4,0,"div")(7,Pn,4,0,"div"),i()()),t&2){let e=P(2);a(4),S(e.auth.user.roles.stream?4:-1),a(),S(e.auth.user.roles.podcast?5:-1),a(),S(e.auth.user.roles.upload?6:-1),a(),S(e.auth.user.roles.admin?7:-1)}}function pn(t,g){if(t&1&&(s(0,"div",9)(1,"div",10)(2,"div",11)(3,"div",12),r(4,0),i(),l(5,"app-user-avatar"),i(),s(6,"div",13)(7,"div",14)(8,"div",12),r(9,1),i(),s(10,"div"),m(11),i()(),O(12,Cn,8,4,"div",14),i()(),s(13,"div",14),l(14,"app-user-stats"),i()()),t&2){let e=P();a(11),y(e.auth.user.name),a(),S(e.auth.user&&e.auth.user.roles?12:-1)}}var ie=(()=>{class t{auth;constructor(e){this.auth=e}static \u0275fac=function(o){return new(o||t)(d(G))};static \u0275cmp=C({type:t,selectors:[["app-user-page"]],decls:3,vars:1,consts:()=>{let e;e=$localize`:␟e08a77594f3d89311cdf6da5090044270909c194␟2392488717875840729:User`;let o;o=$localize`:␟cebb7f27b5028c62b4426da3bb3e3bd3f4a3443b␟6525109356951792180:Avatar`;let n;n=$localize`:␟cff1428d10d59d14e45edec3c735a27b5482db59␟8953033926734869941:Name`;let _;_=$localize`:␟70f45880fce6ac5d8e468e25e82aefbba8098cfe␟7314814725704332646:Permissions`;let c;c=$localize`:␟0c1153af20b06ee1f31e7d07eebfada81b9a19b2␟7231504695490320052:Stream Audio`;let R;R=$localize`:␟f47ba1cd01c3dfd801fe7f66c3d28d698dcc0479␟1291164613191345064:Manage Podcasts`;let b;b=$localize`:␟7876f698ec2db992452b14bd66e0ed1261d890e8␟5793950743388475134:Upload Audio`;let v;return v=$localize`:␟76046fa6f13fb0524ca1d3777247ab13d73660c8␟2210415377969858551:Server Administration`,[o,n,_,c,R,b,v,[1,"user"],["section",e],[1,"content"],[1,"row"],[1,"column","first"],[1,"section-title"],[1,"column"],[1,"section"],[1,"roles"],[1,"icon-checkmark"]]},template:function(o,n){o&1&&(s(0,"div",7),l(1,"app-view-header-slim",8),O(2,pn,15,2,"div",9),i()),o&2&&(a(2),S(n.auth.user?2:-1))},dependencies:[k,oe,ee],styles:["[_nghost-%COMP%]   .user[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px 15px 60px}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1.25px;font-size:13.2px;margin-bottom:10px;color:var(--on-control-ambient)}@media (max-width: 522px){[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:10px;padding-right:10px}}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{padding-bottom:30px}[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:5px}@media (max-width: 400px){[_nghost-%COMP%]   .user[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{flex-direction:column}}"]})}return t})();var q=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275cmp=C({type:t,selectors:[["app-user"]],decls:5,vars:0,consts:[[1,"left"],[1,"split-pane-divider-left"],["role","main",1,"middle"]],template:function(o,n){o&1&&(s(0,"aside",0),l(1,"app-user-sidebar"),i(),l(2,"app-splitter",1),s(3,"main",2),l(4,"router-outlet"),i())},styles:["[_nghost-%COMP%]{width:100%;height:100%;flex:1;display:flex;flex-flow:row nowrap;overflow:hidden;align-items:flex-start;align-content:flex-start}[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:15%;height:100%}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{width:60%;flex-grow:1;height:100%}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{width:25%;height:100%}@media (max-width: 1600px){[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:20%}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{width:55%;flex-grow:1;height:100%}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{width:25%;height:100%}}@media (max-width: 1400px){[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:25%}[_nghost-%COMP%]   .right[_ngcontent-%COMP%], [_nghost-%COMP%]   .split-pane-divider-right[_ngcontent-%COMP%]{display:none}}@media (max-width: 768px){[_nghost-%COMP%]{overflow:auto;flex-flow:row wrap}[_nghost-%COMP%]   app-splitter[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .left[_ngcontent-%COMP%]{width:100%!important;height:auto}[_nghost-%COMP%]   .middle[_ngcontent-%COMP%]{height:auto}[_nghost-%COMP%]   .right[_ngcontent-%COMP%]{width:100%!important;height:auto}}@media (max-width: 522px){[_nghost-%COMP%]{overflow:hidden;height:auto}}"]})}return t})();var se=[{path:"",component:q,children:[{path:"",pathMatch:"full",component:ie,canActivate:[J],data:{name:"User"}},{path:"settings",component:te,canActivate:[J],data:{name:"Settings"}},{path:"sessions",component:ne,canActivate:[J],data:{name:"Sessions",icon:"icon-laptop"}}]}],Be=Ie.forChild(se);var _e=(()=>{class t{sections=[];constructor(){let o=(se[0]?.children||[]).filter(_=>_.path&&_.path.length>0&&_.data?.name).map(_=>{let c=_.data?.link?_.data.link:_.path;return{name:_.data?_.data.name:"",icon:_.data&&_.data.icon?_.data.icon:"icon-admin",link:`/user/${c}`}}),n={name:"Profile",icon:"icon-user",link:"/user",options:{exact:!0}};this.sections=[{name:"User",entries:[n].concat(o)}]}static \u0275fac=function(o){return new(o||t)};static \u0275cmp=C({type:t,selectors:[["app-user-sidebar"]],decls:1,vars:1,consts:[[3,"sections"]],template:function(o,n){o&1&&l(0,"app-sidebar",0),o&2&&u("sections",n.sections)},dependencies:[Le],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:block}"]})}return t})();var Ct=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275mod=Se({type:t});static \u0275inj=de({imports:[Ue,Ve,me,Be]})}return t})();Ce(q,function(){return[ze,xe,_e]},[]);export{Ct as UserModule};
