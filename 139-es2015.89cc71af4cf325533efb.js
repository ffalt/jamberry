(self.webpackChunkjamberry=self.webpackChunkjamberry||[]).push([[139],{15139:function(t,e,n){"use strict";n.r(e),n.d(e,{TagEditorModule:function(){return xn}});var i=n(67232),o=n(61116),s=n(11462),r=n(10032),a=n(40704),c=n(94887),l=n(81073),u=n(14155),d=n(55959),g=n(25416),h=n(64762);class m{}var p=n(21225),f=n(64360),C=n(89955);const v=["2 Tone","2-Step Garage","4-Beat","A Cappella","Abstract","Acid","Acid Breaks","Acid House","Acid Jazz","Acid Punk","Acid Rock","Acid Techno","Acid Trance","Acousmatic Music","Acoustic","Adult Contemporary","African","African Blues","African Heavy Metal","African Hip Hop","Afro / Cosmic Disco","Afro-Cuban Jazz","Afrobeat","Aggrotech","Alternative","Alternative Country","Alternative Dance","Alternative Hip Hop","Alternative Metal","Alternative Rock","Ambient","Ambient Dub","Ambient House","American Folk Revival","Americana","Anarcho Punk","Anime","Anti-folk","Apala","Arab Pop","Art Punk","Art Rock","Asian","Asian American Jazz","Asian Underground","Atlanta Hip Hop","Audio Theatre","Audiobook","Australian Country Music","Australian Hip Hop","AustroPop","Avant-garde","Avant-garde Jazz","Avant-garde Metal","Avantgarde","Ax\xe9","Bachata","Background Music","Baila","Baithak Gana","Bakersfield sound","Balearic Beat","Balearic Trance","Ballad","Baltimore Club","Banda","Baroque","Baroque Pop","Bass","Bassline","Baul","Beat","Beat Music","Beautiful Music","Bebop","Benga","Berlin School","Bhangra","Big Band","Big Beat","Big Room","Bikutsi","BitPop","Black Metal","Blue-Eyed Soul","Bluegrass","Blues","Blues Country","Blues Rock","Blues Shouter","Bolero","Bongo Flava","Boogie","Boogie-Woogie","Booty Bass","Bossa Nova","Bounce Music","Bouncy House","Bouncy Techno","Bouyon","Brazilian","Brazilian Rock","Breakbeat","Breakbeat Hardcore","Breakcore","Breakstep","Brega","Brick City club","Brill Building","British Blues","British Dance Band","British Folk revival","British Hip Hop","BritPop","Broken Beat","Brostep","Bubblegum Dance","Bubblegum Pop","Bullerengue","C-Pop","Cabaret","Cadence-lypso","Cajun","Cajun fiddle tunes","Calypso","Canadian Blues","Canci\xf3n","Canterbury scene","Canzone","Cape Jazz","Caribbean","Celtic","Celtic Metal","Celtic Music","Celtic Punk","Cha Cha Cha","Chalga","Chamber Jazz","Chamber Music","Chanson","Chap Hop","Chicago Blues","Chicago Hip Hop","Chicago House","Chicano Rap","Chicha","Chill-out","Chillout","Chillstep","Chillwave","Chimurenga","Chinese Rock","Chiptune","Chopped & Screwed","Choro","Chorus","Christian Country Music","Christian Gangsta Rap","Christian Hip Hop","Christian Metal","Christian Pop","Christian Punk","Christian Rap","Christian Rock","Chutney","Chutney soca","Classic Country","Classic female Blues","Classic Rock","Classical","Classical crossover","Close harmony","Club","Club-House","Coldwave","Comedy","Compas","Complextro","Congolese rumba","Conscious Hip Hop","Contemporary Christian","Contemporary Folk","Contemporary R&B","Continental Jazz","Cool Jazz","Country","Country Blues","Country Pop","Country Rap","Country Rock","Country-Rap","Coup\xe9-D\xe9cal\xe9","Western Music","CowPunk","Criolla","Crossover","Crossover Jazz","Crossover Thrash","Crunk","Crunkcore","Crust Punk","Crustgrind","Cult","Cumbia","Cumbia Rap","Cybergrind","D-beat","Dance","Dance Hall","Dance-Pop","Dance-Punk","Dance-Rock","Dancehall","Dancehall Music","Dangdut","Dansband Music","Dark Ambient","Dark Cabaret","Dark Electro","Dark Wave","Darkcore","Darkcore jungle","Darkstep","Darkwave","Death 'n' roll","Death industrial","Death Metal","Death-Doom","Deathcore","DeathRock","Deep Funk","Deep House","Delta Blues","Desert Rock","Detroit Blues","Detroit Hip Hop","Detroit Techno","Digital hardcore","Disco","Disco polo","Diva House","Dixieland","Djent","Doom Metal","Doomcore","Downtempo","Dream","Dream Pop","Dream Trance","Drill","Drill & Bass","Drone Metal","Drone Music","Drum & Bass","Drum Solo","Drumstep","Dub","Dub Techno","Dubstep","Dubstyle","Dubtronica","Duet","Dunedin Sound","Dutch House","East Coast Hip Hop","Easy Listening","EBM","Eclectic","Electric Blues","Electro","Electro House","Electro Music","Electro Swing","Electro-Industrial","Electroacoustic","Electroacoustic Music","Electroclash","Electronic","Electronic Body Music","Electronic Rock","Electronica","Electronicore","ElectroPop","ElectroPunk","Elevator Music","Emo","Ethereal Wave","Ethnic","Ethnic electronica","Ethno Jazz","Euro Disco","Euro-House","Euro-Techno","Eurobeat","Eurodance","European free Jazz","EuroPop","Experimental","Experimental Hip Hop","Experimental Music","Experimental Rock","Fado","Fann at-Tanbura","Fast Fusion","Fidget House","Fijiri","Filk Music","Filmi","Flamenco","Florida Breaks","Folk","Folk Metal","Folk Pop","Folk Punk","Folk Rock","Folk-Rock","Folklore","Folktronica","Forr\xf3","Franco-Country","Freak Folk","Freakbeat","Free Funk","Free Improvisation","Free Jazz","Free Tekno","Freestyle","Freestyle Music","Freestyle Rap","French House","French Pop","Frevo","Fuji Music","Full On","Funk","Funk Carioca","Funk Metal","Funkstep","Funktronica","Funky House","Furniture Music","Fusion","Future Garage","Future House","FuturePop","G-Funk","Gabba","Game","Game Boy Music","Gamelan","Gangsta Rap","Garage","Garage House","Garage Punk","Garage Rock","Genge","Ghetto House","Ghettotech","Glam Metal","Glam Rock","Glitch","Glitch Hop","Global","Go-go","Goa","Goa Trance","Golden Age Hip Hop","Goregrind","Gospel","Gospel Blues","Gothic","Gothic Metal","Gothic Rock","Grime","Grindcore","Grindie","Groove Metal","Grunge","Grupera","Guajira","Gypsy Jazz","Gypsy Punk","Happy Hardcore","Hard Bop","Hard House","Hard NRG","Hard Rock","Hard Trance","Hardbag","Hardcore","Hardcore Rap","Hardcore Hip Hop","Hardcore Punk","Hardstep","Hardstyle","Heavy Metal","Hellbilly Music","Hi-NRG","Highlife","Hill Country Blues","Hip Hop","Hip Hop Soul","Hip House","Hip Pop","Hip Hop","Hiplife","Hokum","Hokum Blues","Honky Tonk","Horror Punk","Horrorcore","House","House Music","Houston Hip Hop","Huayno","Humour","Hyphy","IDM","Igbo highlife","Igbo Rap","Illbient","Indian Pop","Indie","Indie Folk","Indie Pop","Indie Rock","Indietronica","Industrial","Industrial Folk","Industrial Hip Hop","Industrial Metal","Industrial Music","Industrial Rock","Industro-Goth","Instrumental","Instrumental Country","Instrumental Hip Hop","Instrumental Pop","Instrumental Rock","Iranian Pop","Isicathamiya","Isolationism","Italo Dance","Italo Disco","Italo House","J-Pop","Jam Band","Jangle Pop","Japanoise","Jazz","Jazz Blues","Jazz Fusion","Jazz House","Jazz Rap","Jazz Rock","Jazz-Funk","Jazz+Funk","Jerkin'","Jersey Club","Jit","JPop","J\xf9j\xfa","Jump Blues","Jump-up","Jumpstyle","Jungle","K-Pop","Kadongo Kamu","Kansas City Blues","Kansas City Jazz","Kapuka","Keroncong","Khaliji","Kizomba","Krautrock","Kuduro","Kwaito","Kwassa Kwassa","Kwela","La\xefk\xf3","Lambada","Laptronica","Latin","Latin alternative","Latin ballad","Latin Christian","Latin House","Latin Jazz","Latin Metal","Latin Pop","Latin Rock","Latin Swing","Lavani","Leftfield","Lento Violento","Liquid Dubstep","Liquid Funk","Livetronica","Liwa","Lo-fi","Lo-Fi","Louisiana Blues","Louisiana Swamp Pop","Lounge","Lounge Music","Lovers Rock","Low Bap","Lowercase","Luk Krung","Luk Thung","Lyrical Hip Hop","M-Base","Mafioso Rap","Mainstream Jazz","M\xe1kina","Makossa","Maloya","Mambo","MandoPop","Manila Sound","Maracatu","Mariachi","Marrabenta","Math Rock","Mathcore","Mbalax","Mbaqanga","Mbube","Medieval Metal","Meditative","Melbourne Bounce","Melodic Death Metal","Melodic Metalcore","Memphis Blues","Merengue","MerenRap","M\xe9ringue","Metal","Metalcore","Mexican Pop","Mexican Son","Miami Bass","Microhouse","Middle of the road","Midwest Hip Hop","Minimal Techno","Minimal Wave","Modal Jazz","Moombahcore","Moombahton","Morlam","Morna","Mosambique","Motswako","M\xfasica Criolla","M\xfasica Popular Brasileira","M\xfasica Sertaneja","Musical","Musique Concr\xe8te","Nagoya Kei","Nashville Sound","National Folk","Native American","NDW","Ndombolo","NederPop","Neo Soul","Neo-Bop Jazz","Neo-Psychedelia","Neo-Swing","Neoclassical","Neoclassical Metal","Neofolk","Neotraditional Country","Nerdcore","Neue Deutsche Welle","NeuroFunk","Neurohop","New Age","New Beat","New jack swing","New Jersey Hip Hop","New Prog","New Rave","New Romantic","New Romanticism","New School Hip Hop","New Wave","New-age Music","Nintendocore","Nitzhonot","No wave","Noise","Noise Rock","Noisegrind","Nortec","Norte\xf1o","Northern Soul","Novelty Ragtime","Nu Jazz","Nu Metal","Nu Skool Breaks","Nu-Breakz","Nu-Disco","Nu-Funk","Nu-Gaze","Nu-NRG","Nueva canci\xf3n","Old School Hip Hop","Oldies","Opera","Operatic Pop","Orchestral Jazz","Original Pilipino Music","Other","Outlaw Country","Outsider House","P-Funk","Pagan Metal","Pagode","Paisley Underground","Palm-wine","Piedmont Blues","Pinoy Pop","Podcast","Political Hip Hop","Polka","Polsk Punk","Pop","Pop Punk","Pop Rap","Pop Rock","Pop Soul","Pop Sunda","Pop-Folk","Pop-Funk","Porn Groove","Porro","Post-Bop","Post-Disco","Post-Grunge","Post-Hardcore","Post-Metal","Post-Punk","Post-Punk Revival","Post-Rock","Power Ballad","Power Electronics","Power Metal","Power Noise","Power Pop","Powerviolence","Pranks","Primus","Progressive Bluegrass","Progressive Country","Progressive Folk","Progressive House","Progressive Metal","Progressive Pop","Progressive Rock","Progressive Trance","Protest Song","Psybient","Psychedelic","Psychedelic Folk","Psychedelic Pop","Psychedelic Rock","Psychedelic Trance","Psychobilly","Punkabilly","Psytrance","Punk","Punk Blues","Punk Jazz","Punk Rock","Punta","Punta Rock","R&B","Raga Rock","Ragga","Ragga Jungle","Raggacore","Ragini","Ragtime","Ra\xef","Ranchera","Rap","Rap Metal","Rap Music","Rap Opera","Rap Rock","Rapcore","Rara tech","Rasin","Rave","Reactionary Bluegrass","Rebetiko","Red Dirt","Reggae","Reggae Espa\xf1ol","Spanish Reggae","Reggae Fusion","Reggaestep","Reggaeton","Regional Mexican","Retro","Revival","Rhythm & Blues","Rhythmic Soul","Riot grrrl","Rock","Rock & Roll","Rock en Espa\xf1ol","Rock in Opposition","Rockabilly","Rocksteady","Rumba","Russian Pop","Sadcore","Sakara","Salsa","Salsa rom\xe1ntica","Samba","Samba Rock","Sambass","Satire","Sawt","Schlager","Screamo","Sega","Seggae","Semba","Sertanejo","Shangaan electro","Shibuya-kei","Shoegaze","Showtunes","Singer-songwriter","Ska","Ska Jazz","Ska Punk","Skate Punk","Skiffle","Skweee","Slow Jam","Slow Rock","Slowcore","Sludge Metal","Smooth Jazz","Snap Music","Soca","Soft Rock","Son","Son Cubano","Sonata","Songo","Songo-Salsa","Sophisti-Pop","Soukous","Soul","Soul Blues","Soul Jazz","Sound Clip","Soundtrack","Southern Hip Hop","Southern Rock","Southern Soul","Space","Space Age Pop","Space Disco","Space Music","Space Rock","Speech","Speed garage","Speed Metal","Speedcore","St.Louis Blues","St.Louis Hip Hop","Stoner Rock","Straight-ahead Jazz","Street Punk","Stride Jazz","Sufi Rock","SungPoetry","Sunshine Pop","Suomisaundi","Surf Pop","Surf Rock","Swamp Blues","Swing","Symphonic black Metal","Symphonic Metal","Symphonic Rock","Symphony","Synthpop","SynthPop","Synthwave","Taarab","Tango","Tech House","Tech Trance","Techdombe","Technical death Metal","Techno","Techno-Industrial","Techstep","Tecno Brega","Tecnobrega","Teen Pop","Tejano","Terror","Texas Blues","Texas Country","Thai Pop","Third stream","Thrash Metal","Thrashcore","Timba","Top 40","Trad Jazz","Traditional Country Music","Traditional Pop Music","Trailer","Trance","Trance Music","TRap","TRapstep","Tribal","Tribal House","Trip hop","Trip-Hop","Trival","Trop Rock","Tropical","Tropical House","Tropicalia","TropiPop","Truck-driving Country","Turkish Pop","Turntablism","Twin Cities Hip Hop","Twoubadou","UK Funky","UK Garage","UK Hardcore","Unblack Metal","Underground Hip Hop","Uplifting Trance","Urban Pasifika","V-Pop","Vallenato","Vaporwave","Video game Music","Viking Metal","VisPop","Visual Kei","Vocal","Vocal Jazz","Vocal Trance","War Metal","Weltmusik","West Coast Blues","West Coast Hip Hop","West Coast Jazz","Western swing","Witch House","Wonky","Wonky Pop","World Fusion","World Music","Worldbeat","Zouglou","Zouk","Zouk-Lambada","Zydeco"];var M=function(t){return t[t.Filename=1]="Filename",t[t.IdText=2]="IdText",t[t.IdBin=3]="IdBin",t[t.Text=4]="Text",t[t.TextList=5]="TextList",t[t.LangDescText=6]="LangDescText",t[t.PlayCounter=7]="PlayCounter",t[t.Popularimeter=8]="Popularimeter",t[t.MusicCDId=9]="MusicCDId",t[t.EventTimingCodes=10]="EventTimingCodes",t[t.SYLT=11]="SYLT",t[t.GEOB=12]="GEOB",t[t.ETCO=13]="ETCO",t[t.PCST=14]="PCST",t[t.LINK=15]="LINK",t[t.AENC=16]="AENC",t[t.Pic=17]="Pic",t[t.RVAD=18]="RVAD",t[t.RGAD=19]="RGAD",t[t.RVAD2=20]="RVAD2",t[t.CTOC=21]="CTOC",t[t.CHAP=22]="CHAP",t[t.Bool=23]="Bool",t[t.Unknown=24]="Unknown",t}({});const T={internal_file:{title:"Filename",versions:[2,3,4],impl:M.Filename},UFI:{title:"Unique file identifier",versions:[2],impl:M.IdText,upgrade:"UFID"},TOT:{title:"Original album/Movie/Show title",versions:[2],impl:M.Text,upgrade:"TOAL"},CDM:{title:"Compressed Data Metaframe",versions:[2],impl:M.Unknown},CRM:{title:"Encrypted meta",versions:[2],impl:M.Unknown},TT1:{title:"Content group",versions:[2],impl:M.Text,upgrade:"TIT1"},TT2:{title:"Title",versions:[2],impl:M.Text,upgrade:"TIT2"},TT3:{title:"Subtitle",versions:[2],impl:M.Text,upgrade:"TIT3"},TP1:{title:"Artist",versions:[2],impl:M.Text,upgrade:"TPE1"},TP2:{title:"Album Artist",versions:[2],impl:M.Text,upgrade:"TPE2"},TP3:{title:"Conductor",versions:[2],impl:M.Text,upgrade:"TPE3"},TP4:{title:"Remixer",versions:[2],impl:M.Text,upgrade:"TPE4"},TCM:{title:"Composer",versions:[2],impl:M.Text,upgrade:"TCOM"},TXT:{title:"Lyricist",versions:[2],impl:M.Text,upgrade:"TEXT"},TLA:{title:"Languages",versions:[2],impl:M.Text,upgrade:"TLAN"},TCO:{title:"Genre",versions:[2],impl:M.Text,upgrade:"TCON"},TAL:{title:"Album",versions:[2],impl:M.Text,upgrade:"TALB"},TPA:{title:"Part of a set",versions:[2],impl:M.Text,upgrade:"TPOS"},TRK:{title:"Track number",versions:[2],impl:M.Text,upgrade:"TRCK"},TRC:{title:"ISRC (international standard recording code)",versions:[2],impl:M.Text,upgrade:"TSRC"},TYE:{title:"Year",versions:[2],impl:M.Text,upgrade:"TYER"},TDA:{title:"Date",versions:[2],impl:M.Text,upgrade:"TDAT"},TIM:{title:"Time",versions:[2],impl:M.Text,upgrade:"TIME"},TRD:{title:"Recording dates",versions:[2],impl:M.Text,upgrade:"TRDA"},TMT:{title:"Media type",versions:[2],impl:M.Text,upgrade:"TMED"},TBP:{title:"BPM",versions:[2],impl:M.Text,upgrade:"TBPM"},TCR:{title:"Copyright message",versions:[2],impl:M.Text,upgrade:"TCOP"},TPB:{title:"Publisher",versions:[2],impl:M.Text,upgrade:"TPUB"},TEN:{title:"Encoded by",versions:[2],impl:M.Text,upgrade:"TENC"},TSS:{title:"Encoding Software/Hardware",versions:[2],impl:M.Text,upgrade:"TSSE"},TOF:{title:"Original filename",versions:[2],impl:M.Text,upgrade:"TOFN"},TLE:{title:"Length",versions:[2],impl:M.Text,upgrade:"TLEN"},TSI:{title:"Size",versions:[2],impl:M.Text,upgrade:"TSIZ"},TDY:{title:"Playlist delay",versions:[2],impl:M.Text,upgrade:"TDLY"},TKE:{title:"Initial key",versions:[2],impl:M.Text,upgrade:"TKEY"},TOL:{title:"Original lyricist",versions:[2],impl:M.Text,upgrade:"TOLY"},TOA:{title:"Original artist",versions:[2],impl:M.Text,upgrade:"TOPE"},TOR:{title:"Original release year",versions:[2],impl:M.Text,upgrade:"TORY"},TXX:{title:"User defined text",versions:[2],impl:M.IdText,upgrade:"TXXX"},WAF:{title:"Official audio file webpage",versions:[2],impl:M.Text,upgrade:"WOAF"},WAR:{title:"Official artist/performer webpage",versions:[2],impl:M.Text,upgrade:"WOAR"},WAS:{title:"Official audio source webpage",versions:[2],impl:M.Text,upgrade:"WOAS"},WCM:{title:"Commercial information",versions:[2],impl:M.Text,upgrade:"WCOM"},WCP:{title:"Copyright/Legal information",versions:[2],impl:M.Text,upgrade:"WCOP"},WPB:{title:"Publishers official webpage",versions:[2],impl:M.Text,upgrade:"WPUB"},WXX:{title:"User defined URL link frame",versions:[2],impl:M.IdText,upgrade:"WXXX"},IPL:{title:"Involved people list",versions:[2],impl:M.TextList,upgrade:"IPLS"},ETC:{title:"Event timing codes",versions:[2],impl:M.EventTimingCodes,upgrade:"ETCO"},MLL:{title:"MPEG location lookup table",versions:[2],impl:M.Unknown,upgrade:"MLLT"},STC:{title:"Synchronised tempo codes",versions:[2],impl:M.Unknown,upgrade:"SYTC"},ULT:{title:"Lyrics",versions:[2],impl:M.LangDescText,upgrade:"USLT"},SLT:{title:"Synchronised Lyrics",versions:[2],impl:M.SYLT,upgrade:"SYLT"},COM:{title:"Comments",versions:[2],impl:M.LangDescText,upgrade:"COMM"},RVA:{title:"Relative volume adjustment",versions:[2],impl:M.RVAD,upgrade:"RVAD"},EQU:{title:"Equalisation",versions:[2],impl:M.Unknown,upgrade:"EQUA"},REV:{title:"Reverb",versions:[2],impl:M.Unknown,upgrade:"RVRB"},PIC:{title:"Attached picture",versions:[2],impl:M.Pic,upgrade:"APIC"},GEO:{title:"General encapsulated object",versions:[2],impl:M.GEOB,upgrade:"GEOB"},CNT:{title:"Play counter",versions:[2],impl:M.PlayCounter,upgrade:"PCNT"},POP:{title:"Popularimeter",versions:[2],impl:M.Popularimeter,upgrade:"POPM"},BUF:{title:"Recommended buffer size",versions:[2],impl:M.Unknown,upgrade:"RBUF"},CRA:{title:"Audio encryption",versions:[2],impl:M.AENC,upgrade:"AENC"},LNK:{title:"Linked information",versions:[2],impl:M.LINK,upgrade:"LINK"},NCO:{title:"MusicMatch Binary",versions:[2],impl:M.Unknown,upgrade:"NCON"},PRI:{title:"Private frame",versions:[2],impl:M.IdBin,upgrade:"PRIV"},TCP:{title:"iTunes Compilation Flag",versions:[2],impl:M.Bool,upgrade:"TCMP"},TST:{title:"Title sort order",versions:[2],impl:M.Text,upgrade:"XSOT"},TSP:{title:"Artist sort order",versions:[2],impl:M.Text,upgrade:"XSOP"},TSA:{title:"Album sort order",versions:[2],impl:M.Text,upgrade:"XSOA"},TS2:{title:"Album Artist sort order",versions:[2],impl:M.Text,upgrade:"TSO2"},TSC:{title:"Composer sort order",versions:[2],impl:M.Text,upgrade:"TSOC"},TDR:{title:"Release time",versions:[2],impl:M.Text,upgrade:"TDRL"},TDS:{title:"iTunes podcast description",versions:[2],impl:M.Text,upgrade:"TDES"},TID:{title:"Podcast URL",versions:[2],impl:M.Text,upgrade:"TGID"},WFD:{title:"Podcast feed URL",versions:[2],impl:M.Text,upgrade:"WFED"},PCS:{title:"iTunes podcast marker",versions:[2],impl:M.PCST,upgrade:"PCST"},XSOA:{title:"Album sort order",versions:[3],impl:M.Text,upgrade:"TSOA"},XSOP:{title:"Performer sort order",versions:[3],impl:M.Text,upgrade:"TSOP"},XSOT:{title:"Title sort order",versions:[3],impl:M.Text,upgrade:"TSOT"},XDOR:{title:"Original release time",versions:[3],impl:M.Text,upgrade:"TDOR"},TIT1:{title:"Group",versions:[3,4],impl:M.Text},TIT2:{title:"Title",versions:[3,4],impl:M.Text},TIT3:{title:"Subtitle",versions:[3,4],impl:M.Text},TALB:{title:"Album",versions:[3,4],impl:M.Text},TOAL:{title:"Original album",versions:[3,4],impl:M.Text},TRCK:{title:"Track number",versions:[3,4],impl:M.Text},TPOS:{title:"Part of a set",versions:[3,4],impl:M.Text},TSRC:{title:"ISRC (international standard recording code)",versions:[3,4],impl:M.Text},TPE1:{title:"Artist",versions:[3,4],impl:M.Text},TPE2:{title:"Album Artist",versions:[3,4],impl:M.Text},TPE3:{title:"Conductor",versions:[3,4],impl:M.Text},TPE4:{title:"Remixer",versions:[3,4],impl:M.Text},TOPE:{title:"Original artist",versions:[3,4],impl:M.Text},TEXT:{title:"Lyricist",versions:[3,4],impl:M.Text},TOLY:{title:"Original lyricist",versions:[3,4],impl:M.Text},TCOM:{title:"Composer",versions:[3,4],impl:M.Text},TENC:{title:"Encoded by",versions:[3,4],impl:M.Text},TBPM:{title:"BPM",versions:[3,4],impl:M.Text},TLEN:{title:"Length",versions:[3,4],impl:M.Text},TKEY:{title:"Initial key",versions:[3,4],impl:M.Text},TLAN:{title:"Languages",versions:[3,4],impl:M.Text},TCON:{title:"Genre",versions:[3,4],impl:M.Text},TFLT:{title:"File type",versions:[3,4],impl:M.Text},TMED:{title:"Media type",versions:[3,4],impl:M.Text},TCOP:{title:"Copyright message",versions:[3,4],impl:M.Text},TPUB:{title:"Publisher",versions:[3,4],impl:M.Text},TOWN:{title:"File owner",versions:[3,4],impl:M.Text},TRSN:{title:"Internet radio station name",versions:[3,4],impl:M.Text},TRSO:{title:"Internet radio station owner",versions:[3,4],impl:M.Text},TOFN:{title:"Original filename",versions:[3,4],impl:M.Text},TDLY:{title:"Playlist delay",versions:[3,4],impl:M.Text},TSSE:{versions:[3,4],title:"Encoding Software/Hardware",impl:M.Text},TSST:{versions:[3,4],title:"Set subtitle",impl:M.Text},TDAT:{title:"Date",versions:[3],impl:M.Text},TIME:{title:"Time",versions:[3],impl:M.Text},TORY:{title:"Original release year",versions:[3],impl:M.Text},TRDA:{title:"Recording dates",versions:[3],impl:M.Text},TSIZ:{title:"Size",versions:[3],impl:M.Text},TYER:{title:"Year",versions:[3],impl:M.Text},TMCL:{versions:[4],title:"Musician credits list",impl:M.TextList},TIPL:{versions:[4],title:"Involved people list",impl:M.TextList},TMOO:{title:"Mood",versions:[4],impl:M.Text},TPRO:{title:"Produced notice",versions:[4],impl:M.Text},TDOR:{title:"Original release time",versions:[4],impl:M.Text},TDRC:{versions:[4],title:"Recording time",impl:M.Text},TDRL:{versions:[3,4],title:"Release time",impl:M.Text},TDTG:{versions:[4],title:"Tagging time",impl:M.Text},TSOA:{versions:[4],title:"Album sort order",impl:M.Text},TSOP:{versions:[4],title:"Artist sort order",impl:M.Text},TSOT:{versions:[4],title:"Title sort order",impl:M.Text},WCOM:{title:"Commercial information",versions:[3,4],impl:M.Text},WCOP:{title:"Copyright/Legal information",versions:[3,4],impl:M.Text},WOAF:{title:"Official audio file webpage",versions:[3,4],impl:M.Text},WOAR:{title:"Official artist/performer webpage",versions:[3,4],impl:M.Text},WOAS:{title:"Official audio source webpage",versions:[3,4],impl:M.Text},WORS:{title:"Official internet radio station homepage",versions:[3,4],impl:M.Text},WPAY:{title:"Payment",versions:[3,4],impl:M.Text},WPUB:{title:"Publishers official webpage",versions:[3,4],impl:M.Text},TXXX:{title:"User defined text",versions:[3,4],impl:M.IdText},WXXX:{title:"User defined URL link frame",versions:[3,4],impl:M.IdText},UFID:{title:"Unique file identifier",versions:[3,4],impl:M.IdText},MCDI:{title:"Music CD identifier",versions:[3,4],impl:M.MusicCDId},ETCO:{title:"Event timing codes",versions:[3,4],impl:M.ETCO},MLLT:{title:"MPEG location lookup table",versions:[3,4],impl:M.Unknown},SYTC:{title:"Synchronised tempo codes",versions:[3,4],impl:M.Unknown},USLT:{title:"Lyrics",versions:[3,4],impl:M.LangDescText},SYLT:{title:"Synchronised Lyrics",versions:[3,4],impl:M.SYLT},COMM:{title:"Comments",versions:[3,4],impl:M.LangDescText},RVAD:{title:"Relative volume adjustment",versions:[3,4],impl:M.RVAD},RVA2:{title:"Relative volume adjustment 2",versions:[4],impl:M.RVAD2},EQUA:{title:"Equalisation",versions:[3,4],impl:M.Unknown},RVRB:{title:"Reverb",versions:[3,4],impl:M.Unknown},APIC:{title:"Attached picture",versions:[3,4],impl:M.Pic},GEOB:{title:"General encapsulated object",versions:[3,4],impl:M.GEOB},PCNT:{title:"Play counter",versions:[3,4],impl:M.PlayCounter},POPM:{title:"Popularimeter",versions:[3,4],impl:M.Popularimeter},RBUF:{title:"Recommended buffer size",versions:[3,4],impl:M.Unknown},AENC:{title:"Audio encryption",versions:[3,4],impl:M.AENC},LINK:{title:"Linked information",versions:[3,4],impl:M.LINK},POSS:{title:"Position synchronisation",versions:[3,4],impl:M.Unknown},USER:{title:"Terms of use",versions:[3,4],impl:M.Unknown},OWNE:{title:"Ownership",versions:[3,4],impl:M.Unknown},COMR:{title:"Commercial",versions:[3,4],impl:M.Unknown},ENCR:{title:"Encryption method registration",versions:[3,4],impl:M.Unknown},GRID:{title:"Group ID registration",versions:[3,4],impl:M.Unknown},PRIV:{title:"Private frame",versions:[3,4],impl:M.IdBin},IPLS:{title:"Involved people list",versions:[3],impl:M.TextList},SIGN:{title:"Signature",versions:[4],impl:M.Unknown},SEEK:{title:"Seek",versions:[4],impl:M.Unknown},ASPI:{title:"Audio seek point index",versions:[4],impl:M.Unknown},RGAD:{title:"Replay Gain Adjustment",versions:[3,4],impl:M.RGAD},TCMP:{title:"iTunes Compilation Flag",versions:[3,4],impl:M.Bool},TSO2:{title:"Album Artist sort order",versions:[3,4],impl:M.Text},TSOC:{title:"Composer sort order",versions:[3,4],impl:M.Text},PCST:{title:"iTunes podcast marker",versions:[3,4],impl:M.PCST},TDES:{title:"iTunes podcast description",versions:[3,4],impl:M.Text},TKWD:{title:"iTunes podcast keywords",versions:[3,4],impl:M.Unknown},TGID:{title:"Podcast URL",versions:[3,4],impl:M.Text},TDEN:{title:"Encoding time",versions:[3,4],impl:M.Text},WFED:{title:"Podcast feed URL",versions:[3,4],impl:M.Text},GRP1:{title:"Group Number",versions:[3,4],impl:M.Text},NCON:{title:"MusicMatch Binary",versions:[3,4],impl:M.Unknown},CTOC:{title:"Chapter TOC",versions:[4],impl:M.CTOC},CHAP:{title:"Chapter",versions:[4],impl:M.CHAP},XHD3:{title:"mp3hd",versions:[3,4],impl:M.Unknown},CM1:{title:"User defined text",versions:[2],impl:M.Text,upgrade:"TXXX"}},O={ASIN:"ASIN Id",CATALOGNUMBER:"Catalog Nr",SCRIPT:"Script",BARCODE:"Barcode",originalyear:"Original Year",replaygain_track_gain:"Replaygain track gain",replaygain_album_gain:"Replaygain album gain",replaygain_track_peak:"Replaygain track peak",replaygain_album_peak:"Replaygain album peak",Artists:"Artists",Supplier:"Supplier","Release type":"Release type","Acoustid Id":"Acoustid Id","MusicBrainz Track Disambiguation":"MusicBrainz Track Disambiguation","MusicBrainz Album Type":"MusicBrainz Album Type","MusicBrainz Album Artist Id":"MusicBrainz Album Artist Id","MusicBrainz Artist Id":"MusicBrainz Artist Id","MusicBrainz Album Id":"MusicBrainz Album Id","MusicBrainz Release Track Id":"MusicBrainz Release Track Id","MusicBrainz Release Group Id":"MusicBrainz Release Group Id","MusicBrainz Recording Id":"MusicBrainz Recording Id","MusicBrainz Album Status":"MusicBrainz Album Status","MusicBrainz Album Release Country":"MusicBrainz Album Release Country","MusicBrainz TRM Id":"MusicBrainz TRM Id","Discogs Artist ID":"Discogs Artist Id","Discogs Label ID":"Discogs Label Id","Discogs Master Release ID":"Discogs Master Release Id","Discogs Release ID":"Discogs Master Release Id","Discogs Votes":"Discogs Votes","Discogs Rating":"Discogs Rating"},P={"http://musicbrainz.org":"MusicBrainz Track Id"},b={"http://musicbrainz.org":"MusicBrainz Track Id","":"Default Comment"},x=[{id:"internal_file",width:200,force:!0},{id:"TRCK",width:60,force:!0},{id:"TIT2",width:200,force:!0},{id:"TALB",width:200,force:!0},{id:"TPE1",width:140,force:!0},{id:"TPE2",width:140,force:!0},{id:"TOPE",width:140},{id:"TCON",width:100,force:!0},{id:"TPOS",width:60,force:!0},{id:"TIT1",width:200,force:!0},{id:"GRP1",width:60,force:!0},{id:"TMOO",width:100},{id:"APIC",width:100,force:!0},{id:"USLT",width:200,force:!0},{id:"TSOP",width:140},{id:"TSO2",width:140},{id:"TXXX",subid:"Artists",width:140},{id:"IPLS",width:140},{id:"TIPL",width:140},{id:"TMCL",width:140},{id:"TYER",width:100},{id:"TDOR",width:100,force:!0},{id:"TDRC",width:100,force:!0},{id:"TDRL",width:80},{id:"TDAT",width:60},{id:"TORY",width:60},{id:"TXXX",subid:"originalyear",width:60},{id:"TXXX",subid:"MusicBrainz Album Type",width:100,force:!0},{id:"TXXX",subid:"MusicBrainz Album Status",width:60,force:!0},{id:"TXXX",subid:"MusicBrainz Album Release Country",width:60},{id:"TXXX",subid:"MusicBrainz Track Disambiguation",width:100},{id:"TXXX",subid:"Release type",width:100},{id:"TXXX",subid:"SCRIPT",width:60},{id:"TLAN",width:60},{id:"TMED",width:40},{id:"TLEN",width:60},{id:"TIME",width:60},{id:"TKEY",width:60},{id:"TBPM",width:60},{id:"APIC",width:80},{id:"TPUB",width:140},{id:"WPUB",width:140},{id:"WCOP",width:140},{id:"TCOP",width:140},{id:"TCOM",width:140},{id:"TSOC",width:140},{id:"MCDI",width:40},{id:"TXXX",subid:"Acoustid Id",width:40},{id:"TXXX",subid:"ASIN",width:100},{id:"UFID",subid:"http://musicbrainz.org",width:80},{id:"TXXX",subid:"MusicBrainz Release Track Id",width:80},{id:"TXXX",subid:"MusicBrainz Album Id",width:80},{id:"TXXX",subid:"MusicBrainz Album Artist Id",width:80},{id:"TXXX",subid:"MusicBrainz Artist Id",width:80},{id:"TXXX",subid:"MusicBrainz Release Group Id",width:80},{id:"TSSE",width:80},{id:"TFLT",width:80},{id:"TSST",width:80},{id:"TXXX",subid:"Ripping tool",width:80},{id:"TXXX",subid:"Ripping date",width:80},{id:"TDEN",width:80},{id:"TXXX",subid:"Rip date",width:80},{id:"TXXX",subid:"Source",width:80},{id:"TXXX",subid:"Supplier",width:80},{id:"TENC",width:80},{id:"TXXX",subid:"ASIN",width:110},{id:"TSRC",width:110},{id:"TXXX",subid:"BARCODE",width:110},{id:"PRIV",subid:"http://www.cdtag.com",width:100},{id:"TXXX",subid:"CATALOGNUMBER",width:110},{id:"TCMP",width:40},{id:"COMM",width:140},{id:"WXXX",width:140},{id:"GEOB",width:140}],_={0:"Other",1:"32x32 pixels 'file icon' (PNG only)",2:"Other file icon",3:"Cover (front)",4:"Cover (back)",5:"Leaflet page",6:"Media (e.g. lable side of CD)",7:"Lead artist/lead performer/soloist",8:"Artist/performer",9:"Conductor",10:"Band/Orchestra",11:"Composer",12:"Lyricist/text writer",13:"Recording Location",14:"During recording",15:"During performance",16:"Movie/video screen capture",17:"A bright coloured fish",18:"Illustration",19:"Band/artist logotype",20:"Publisher/Studio logotype"};var k=n(13763);function y(t){const e={};for(const n of t.cells)if("internal_file"!==n.column.def.id)for(const t of n.frames){const i=e[n.column.def.id]||[];i.push(t),e[n.column.def.id]=i}return{version:4,frames:e}}function w(t){let e=(0,k.RQ)(t);if(e=e.filter(t=>!isNaN(Number(t))),e.length>0)return e[0]}function A(t){const e=t.cells.find(t=>"TPOS"===t.column.def.id);return`${t.track.parentID}|${e&&e.frames.length>0?e.frames[0].value.text:""}`}function R(t,e){const n=[];let i="";if(e.frames.TPOS&&e.frames.TPOS.length>0){const t=e.frames.TPOS[0];let n=(t.value.text||"").split("/")[0];const o=(t.value.text||"").split("/")[1]||"99";if(Number(o)>1){for(;n.length<o.length;)n=`0${n}`;i+=`${n}-`}}if(e.frames.TRCK&&e.frames.TRCK.length>0){const t=e.frames.TRCK[0];let n=(t.value.text||"").split("/")[0];const o=(t.value.text||"").split("/")[1]||"99";for(;n.length<o.length;)n=`0${n}`;i+=n}n.push(i),e.frames.TIT2&&e.frames.TIT2.length>0&&n.push(e.frames.TIT2[0].value.text),e.frames.TPE1&&e.frames.TPE1.length>0&&n.push(e.frames.TPE1[0].value.text);const o=`.${(0,k.VI)(t.name)}`;return`${(0,k.kQ)(n.join(" - "),"")}${o}`}class I{constructor(t){this.jam=t,this.columns=[],this.edits=[]}removeColumnText(t,e){const n=this.columns.indexOf(t);for(const i of this.edits){const o=i.cells[n],s=o.frames.length>0?o.frames[0].value.text:void 0;s&&this.updateEditTextCell(i,t,s.replace(e,""))}}updateEditTextCell(t,e,n){const i=this.columns.indexOf(e),o=t.cells[i],s=n||"";let r=[];s.length>0&&(r=[{id:o.column.def.id,value:M.LangDescText===e.def.impl?{id:"",language:"",text:s}:{id:o.column.def.subid,text:s}}]),0!==o.frames.length&&o.frames[0].value.text===s||(t.cells[i]={parent:t,track:o.track,column:e,frames:r,changed:!0},t.changed=!0)}setColumnTrackNrFromFile(t){const e={};for(const n of this.edits){const t=A(n);e[t]=(e[t]||0)+1}for(const n of this.edits){const i=w(n.track.name);if(i){const o=`${i}/${(e[A(n)]||0).toString()}`;this.updateEditTextCell(n,t,o)}}}setColumnFilenames(t){const e=this.columns.indexOf(t);for(const n of this.edits){const i=R(n.cells[e].track,y(n));this.updateEditTextCell(n,t,i)}}setColumnTrackNrByIndex(t){const e={},n={};for(const i of this.edits){const t=A(i);e[t]=(e[t]||0)+1}for(const i of this.edits){const o=A(i);n[o]=(n[o]||0)+1;const s=`${(n[o]||0).toString()}/${(e[o]||0).toString()}`;this.updateEditTextCell(i,t,s)}}addIndexToTitleCol(t){const e=this.columns.indexOf(t);this.edits.forEach((n,i)=>{const o=n.cells[e];let s=o.frames.length>0?o.frames[0].value.text:"";s=`${s} ${(i+1).toString()}`.trim(),this.updateEditTextCell(n,t,s)})}setColumnPartOfSet(t){const e=this.columns.indexOf(t),n=[];for(const i of this.edits)n.includes(i.track.parentID)||n.push(i.track.parentID);for(const i of this.edits){const o=`${(n.indexOf(i.cells[e].track.parentID)+1).toString()}/${n.length.toString()}`;this.updateEditTextCell(i,t,o)}}setColumnTotalTrack(t){const e={};for(const i of this.edits)e[i.track.parentID]=(e[i.track.parentID]||0)+1;const n=this.columns.indexOf(t);this.edits.forEach((i,o)=>{const s=i.cells[n];let r;s.frames.length>0?(r=s.frames[0].value.text.split("/")[0],isNaN(Number(r))||(r=Number(r).toString())):r=w(i.track.name),r||(r=(o+1).toString());const a=`${r||""}/${(e[i.track.parentID]||0).toString()}`;this.updateEditTextCell(i,t,a)})}setAlbumArtistFrames(t){const e=this.columns.findIndex(t=>"TPE1"===t.def.id);if(e>=0)for(const n of this.edits){const i=n.cells[e],o=i.frames.length>0?i.frames[0].value.text:void 0;o&&this.updateEditTextCell(n,t,o)}}setReleaseDateFromYearFrames(t){this.copyColumn(this.columns.findIndex(t=>"TYER"===t.def.id),t)}getCellText(t){return t.frames.length>0?t.frames[0].value.text:void 0}findMissingLyrics(t){var e;return(0,h.mG)(this,void 0,void 0,function*(){const n=this.columns.findIndex(t=>"USLT"===t.def.id),i=t||this.columns[n],o=this.columns.findIndex(t=>"TPE1"===t.def.id),s=this.columns.findIndex(t=>"TIT2"===t.def.id);for(const t of this.edits)if(!this.getCellText(t.cells[n])){const n=this.getCellText(t.cells[o]),r=this.getCellText(t.cells[s]);if(r&&n){const o=yield this.jam.metadata.lyricsovhSearch({title:r,artist:n});(null===(e=null==o?void 0:o.data)||void 0===e?void 0:e.lyrics)&&this.updateEditTextCell(t,i,o.data.lyrics)}}})}insertFromColumn(t,e,n){const i=this.columns.indexOf(n);if(t>=0)for(const o of this.edits){const s=this.getCellText(o.cells[t]),r=this.getCellText(o.cells[i])||"";if(s){const t=r.slice(0,e)+s+r.slice(e);this.updateEditTextCell(o,n,t)}}}copyColumn(t,e){if(t>=0)for(const n of this.edits){const i=n.cells[t],o=i.frames.length>0?i.frames[0].value.text:void 0;o&&this.updateEditTextCell(n,e,o)}}appendFromColumn(t,e){const n=this.columns.indexOf(e);if(t>=0)for(const i of this.edits){const o=this.getCellText(i.cells[t]);if(o){const t=this.getCellText(i.cells[n])||"";this.updateEditTextCell(i,e,t+o)}}}setColumnText(t,e){for(const n of this.edits)this.updateEditTextCell(n,t,e)}appendColumnText(t,e){const n=this.columns.indexOf(t);for(const i of this.edits){const o=this.getCellText(i.cells[n])||"";this.updateEditTextCell(i,t,o+e)}}setColumnFromTitleFrames(t){this.copyColumn(this.columns.findIndex(t=>"TIT2"===t.def.id),t)}clearColumn(t){const e=this.columns.indexOf(t);for(const n of this.edits)n.cells[e].frames.length>0&&(n.cells[e]={parent:n,track:n.cells[e].track,column:n.cells[e].column,frames:[],changed:!0},n.changed=!0)}setAudiobookFrames(){const t=this.columns.find(t=>"TCON"===t.def.id),e=this.columns.find(t=>"TXXX"===t.def.id&&"MusicBrainz Album Type"===t.def.subid);for(const n of this.edits)t&&this.updateEditTextCell(n,t,"Audiobook"),e&&this.updateEditTextCell(n,e,"album/audiobook")}setAudioSeriesFrames(){const t=this.columns.find(t=>"TCON"===t.def.id),e=this.columns.find(t=>"TXXX"===t.def.id&&"MusicBrainz Album Type"===t.def.subid);for(const n of this.edits)t&&this.updateEditTextCell(n,t,"Audio Series"),e&&this.updateEditTextCell(n,e,"album/audiodrama")}setSoundtrackFrames(){const t=this.columns.find(t=>"TCON"===t.def.id),e=this.columns.find(t=>"TXXX"===t.def.id&&"MusicBrainz Album Type"===t.def.subid);for(const n of this.edits)t&&this.updateEditTextCell(n,t,"Soundtrack"),e&&this.updateEditTextCell(n,e,"album/soundtrack")}setBootlegFrames(){const t=this.columns.find(t=>"TXXX"===t.def.id&&"MusicBrainz Album Status"===t.def.subid),e=this.columns.find(t=>"TXXX"===t.def.id&&"MusicBrainz Album Type"===t.def.subid);for(const n of this.edits)t&&this.updateEditTextCell(n,t,"bootleg"),e&&this.updateEditTextCell(n,e,"album/live")}build(t){this.edits=[],this.upgradeTrackTags(t),this.buildColumns(t),this.buildEdits(t)}upgradeTrackTags(t){for(const e of t)this.upgradeTrackTag(e)}upgradeTrackTag(t){const e=t.tagRaw;if(e&&void 0!==e.version&&e.version<4){let n=I.getRawTagFrames(e);const i={version:4,frames:{}},o=this.upgradeDateFramesTov24Date(n);o&&(n=n.filter(t=>!o.dateFrames.includes(t)),n.push(o.newFrame));for(const t of n){const e=this.ensureID3v2FrameVersionDef(t.id,4);e?(t.id=e,i.frames[e]=i.frames[e]||[],i.frames[e].push(t)):console.error("upgradeTrackTag","missing id3v2 update",t.id,"=>",e)}t.tagRaw=i}}ensureID3v2FrameVersionDef(t,e){const n=T[t];if(!n)return;if(n.versions.indexOf(e)>=0)return t;if(n.versions[0]>e){const i=Object.keys(T).find(e=>T[e].upgrade===t);if(!i)return void console.error(`ensureID3v2FrameVersionDef: Missing v2.${n.versions} -> v2.${e} mapping ${t}`);const o=T[i];return o.versions.indexOf(e)<0?o.versions[0]>e?this.ensureID3v2FrameVersionDef(i,e):void 0:i}if(!n.upgrade)return void console.error(`ensureID3v2FrameVersionDef: Missing v2.${n.versions} -> v2.${e} mapping ${t}`);const i=n.upgrade,o=T[i];return o.versions.indexOf(e)<0?o.versions[0]<e?this.ensureID3v2FrameVersionDef(i,e):void 0:i}upgradeDateFramesTov24Date(t){const e=t.find(t=>["TYER","TYE"].indexOf(t.id)>=0),n=t.find(t=>["TDAT","TDA"].indexOf(t.id)>=0),i=t.find(t=>["TIME","TIM"].indexOf(t.id)>=0);if(!e&&!n&&!i)return;const o=[],s=[];return e&&e.value&&Object.prototype.hasOwnProperty.call(e.value,"text")&&(o.push(e),s.push(e.value.text)),n&&n.value&&Object.prototype.hasOwnProperty.call(n.value,"text")&&(o.push(n),s.push(n.value.text)),i&&i.value&&Object.prototype.hasOwnProperty.call(i.value,"text")&&(o.push(i),s.push(i.value.text)),{newFrame:{id:"TDRC",value:{text:s.join("-")}},dateFrames:o}}updateColumns(t,e){const n=[],i=[];for(const o of this.columns)e.find(t=>t.id===o.def.id&&t.subid===o.def.subid)||n.push(o);for(const o of e)if(!this.columns.find(t=>t.def.id===o.id&&t.def.subid===o.subid)){const t=this.frameDef2Column(o.id,o.subid,o.frameDef,0);i.push(t)}this.columns=this.columns.filter(t=>!n.includes(t)).concat(i),this.buildEdits(t)}static getRawTagFrames(t){let e=[];return Object.keys(t.frames).forEach(n=>{e=e.concat(t.frames[n])}),e}static getFrameDefName(t,e,n){let i=n.title;const o=e||"";return n.impl===M.IdText?"TXXX"===t&&O[o]?i=O[o]:"UFID"===t&&P[o]?i=P[o]:e&&(i+=` (${e})`):n.impl===M.LangDescText?"COMM"===t&&b[o]?i=b[o]:e&&(i+=` (${e})`):n.impl===M.IdBin&&e&&(i+=` (${e})`),i}static matchColumn(t,e){return!!(!e.subid||t.value&&t.value.id&&t.value.id===e.subid)&&t.id===e.id}getAutoCompleteList(t,e){if("TCON"===t.def.id)return v;if("TXXX"===t.def.id&&"MusicBrainz Album Type"===t.def.subid)return["album","album/compilation","album/soundtrack","album/spokenword","album/interview","album/audiobook","album/audiodrama","album/live","album/remix","album/dj-mix","album/mixtape/street","single","ep","broadcast","other","other/spokenword","other/audiodrama","other/interview"];if("TXXX"===t.def.id&&"MusicBrainz Album Status"===t.def.subid)return["official","promotional","bootleg","pseudo-release"];if("TPOS"===t.def.id)return["1/1","1/2","2/2","1/3","2/3","3/3","1/4","2/4","3/4","4/4"];const n=this.columns.indexOf(t),i=[];for(const o of this.edits){const t=o.cells[n];if(t!==e&&t.frames.length>0&&t.frames[0].value&&t.frames[0].value.text){const e=t.frames[0].value.text;i.includes(e)||i.push(e)}}return"TPE2"!==t.def.id||i.includes(C.HF)||i.push(C.HF),i}setColumnActions(t,e,n,i){const o=[];[M.IdText,M.Text,M.LangDescText].includes(i)&&(t.multi=!0,"TRCK"===e?(o.push({icon:"icon-down-thin",title:"Set Track Nr by Index",click:()=>{this.setColumnTrackNrByIndex(t)}}),o.push({icon:"icon-down-thin",title:"Set Track Nr by Filename",click:()=>{this.setColumnTrackNrFromFile(t)}}),o.push({icon:"icon-down-thin",title:"Set Total Tracks",click:()=>{this.setColumnTotalTrack(t)}})):"TPOS"===e?o.push({icon:"icon-down-thin",title:"Try find Part of Set",click:()=>{this.setColumnPartOfSet(t)}}):"TIT2"===e?o.push({icon:"icon-down-thin",title:"Add Index Nr to Title",click:()=>{this.addIndexToTitleCol(t)}}):"TPE2"===e?o.push({icon:"icon-down-thin",title:"Copy from Artist Column",click:()=>{this.setAlbumArtistFrames(t)}}):"TALB"===e?o.push({icon:"icon-down-thin",title:"Copy from Title Column",click:()=>{this.setColumnFromTitleFrames(t)}}):"TDOR"===e?o.push({icon:"icon-down-thin",title:"Copy from Year Column",click:()=>{this.setReleaseDateFromYearFrames(t)}}):"USLT"===e&&o.push({icon:"icon-down-thin",title:"Search for missing Lyrics",click:()=>{this.findMissingLyrics(t).catch(t=>{console.error(t)})}})),i!==M.Filename?o.push({icon:"icon-remove",title:"Clear all Cells in this Column",click:()=>{this.clearColumn(t)}}):i===M.Filename&&o.push({icon:"icon-down-thin",title:"Set Filenames by Meta Data",click:()=>{this.setColumnFilenames(t)}}),t.actions=o}frameDef2Column(t,e,n,i){const o=I.getFrameDefName(t,e,n);let s=n.impl;"UFID"===t&&P[e||""]&&(s=M.IdText);const r={def:{id:t,subid:e,name:o,width:i>=0?x[i].width:100,impl:s},sort:i>=0?i+1:-1,actions:[]};return this.setColumnActions(r,t,e,s),r.getAutoCompleteList=t=>this.getAutoCompleteList(r,t),r}frame2Column(t,e){const n={def:{id:t.id,name:t.id+(t.value&&t.value.id?` - ${t.value.id}`:""),subid:t.value&&t.value.id?t.value.id:void 0,width:e>=0?x[e].width:100,impl:M.Unknown},sort:e,actions:[]};return n.getAutoCompleteList=t=>this.getAutoCompleteList(n,t),n}buildColumns(t){this.columns=[],t&&0!==t.length&&(x.forEach((t,e)=>{if(t.force){const n=this.frameDef2Column(t.id,t.subid,T[t.id],e);this.columns.push(n)}}),t.forEach(t=>{if(!t.tagRaw||!t.tagRaw.frames)return;const e=I.getRawTagFrames(t.tagRaw);e.unshift({id:"internal_file",value:{text:t.name}});for(const n of e)if(!this.columns.find(t=>I.matchColumn(n,t.def))){const t=T[n.id],e=x.findIndex(t=>I.matchColumn(n,t));if(t){let t;n.value&&void 0!==n.value.id&&(t=n.value.id),this.columns.push(this.frameDef2Column(n.id,t,T[n.id],e))}else this.columns.push(this.frame2Column(n,e))}}))}buildEdits(t){this.columns.sort((t,e)=>t.sort<0?1:e.sort<0?-1:t.sort-e.sort);const e=(t,e,n,i,o)=>this.columns.map(s=>{const r=o?o.cells.find(t=>t.column.def.id===s.def.id&&t.column.def.subid===s.def.subid):void 0;return{parent:i,track:t,tag:e,column:s,frames:r?r.frames:n.filter(t=>I.matchColumn(t,s.def)),changed:!!r&&r.changed}}),n=this.edits||[];this.edits=t.map(t=>{let i=[];i.push({id:"internal_file",value:{text:t.name}}),t.tagRaw&&Object.keys(t.tagRaw.frames).forEach(e=>{var n;i=i.concat((null===(n=t.tagRaw)||void 0===n?void 0:n.frames[e])||[])});const o=n.find(e=>e.track===t),s={track:t,tag:t.tagRaw,cells:[],editing:!1,changed:!!o&&o.changed,saving:!1};return s.cells=e(t,t.tagRaw,i,s,o),s})}}var Z=n(35366),S=n(27813),D=n(35380),B=n(60304),N=n(40904),F=n(22102);function E(t,e){if(1&t&&(Z.TgZ(0,"app-autocomplete-option-header"),Z._uU(1),Z.qZA()),2&t){const t=Z.oxw().$implicit;Z.xp6(1),Z.Oqu(t.header)}}function J(t,e){if(1&t&&(Z.ynx(0),Z.YNc(1,E,2,1,"app-autocomplete-option-header",5),Z.TgZ(2,"app-autocomplete-option",6),Z._uU(3),Z.qZA(),Z.BQk()),2&t){const t=e.$implicit,n=Z.oxw().$implicit;Z.xp6(1),Z.Q6J("ngIf",t.header),Z.xp6(1),Z.Q6J("option",t)("control",n),Z.xp6(1),Z.Oqu(t.data.text)}}function L(t,e){1&t&&Z.YNc(0,J,4,4,"ng-container",4),2&t&&Z.Q6J("ngForOf",e.$implicit.options)}const q=function(){return{allowEmpty:!0}};let U=(()=>{class t{constructor(){this.list=[],this.focused=!1,this.edit="",this.standalone=!1,this.field="text",this.value="",this.valueChange=new Z.vpe}ngOnChanges(t){t.value&&t.value.currentValue&&t.value.currentValue!==this.edit&&(this.edit=t.value.currentValue)}autocompleteGetData(t){return(0,h.mG)(this,void 0,void 0,function*(){return 0===t.length?this.list.map(t=>({data:t})):this.list.filter(e=>e.text.includes(t)).map(t=>({data:t}))})}autocompleteSelectResult(t){return this.edit=t.data.text,this.edit}autocompleteEnter(t){this.edit=t}onValueChange(){this.value!==this.edit&&this.valueChange.emit(this.edit)}onFocus(){this.focused=!0,void 0===this.edit&&(this.edit=""),this.getList&&(this.list=this.getList(this.data).map(t=>({text:t})))}onBlur(){this.focused=!1,this.list=[]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-tag-editor-autocomplete"]],inputs:{standalone:"standalone",field:"field",value:"value",data:"data",getList:"getList",onAutoComplete:"onAutoComplete"},outputs:{valueChange:"valueChange"},features:[Z.TTD],decls:5,vars:10,consts:[["autocomplete","appAutocomplete"],["appAutocompleteContent",""],[1,"input-group"],["type","text","name","auto","autocomplete","off",3,"ngModel","value","appAutocomplete","appAutocompleteControl","appAutocompleteSettings","ngModelChange","change","focus","blur"],[4,"ngFor","ngForOf"],[4,"ngIf"],[3,"option","control"]],template:function(t,e){if(1&t&&(Z.TgZ(0,"app-autocomplete",null,0),Z.YNc(2,L,1,1,"ng-template",1),Z.qZA(),Z.TgZ(3,"div",2),Z.TgZ(4,"input",3),Z.NdJ("ngModelChange",function(t){return e.edit=t})("change",function(){return e.onValueChange()})("focus",function(){return e.onFocus()})("blur",function(){return e.onBlur()}),Z.qZA(),Z.qZA()),2&t){const t=Z.MAs(1);Z.xp6(3),Z.ekj("focused",e.focused)("cell",!e.standalone),Z.xp6(1),Z.Q6J("ngModel",e.edit)("value",e.edit)("appAutocomplete",t)("appAutocompleteControl",e)("appAutocompleteSettings",Z.DdM(9,q))}},directives:[S.Y,D.G,s.Fj,s.JJ,s.On,B.oK,o.sg,o.O5,N.x,F.B],styles:["[_nghost-%COMP%]{width:100%}[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:100%;width:100%;background-color:var(--input);color:var(--on-input);border-radius:3px;padding-left:3px;padding-right:3px}[_nghost-%COMP%]   .input-group.cell[_ngcontent-%COMP%]{display:block;border:none}[_nghost-%COMP%]   .input-group.cell[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:0;padding-right:0;border-radius:0;border:none;color:inherit;background-color:inherit}"],changeDetection:0}),t})();const X=function(){return{standalone:!0}};function G(t,e){if(1&t&&(Z.TgZ(0,"div",1),Z.TgZ(1,"input",2),Z.NdJ("ngModelChange",function(t){return e.$implicit.enabled=t}),Z.qZA(),Z.TgZ(2,"label"),Z._uU(3),Z.qZA(),Z.TgZ(4,"app-tag-editor-autocomplete",3),Z.NdJ("valueChange",function(t){return e.$implicit.value=t}),Z.qZA(),Z.qZA()),2&t){const t=e.$implicit;Z.xp6(1),Z.Q6J("ngModel",t.enabled)("ngModelOptions",Z.DdM(6,X)),Z.xp6(2),Z.Oqu(t.title),Z.xp6(1),Z.Q6J("value",t.value)("getList",t.getList)("standalone",!0)}}let z=(()=>{class t{constructor(){this.edit={title:{title:"Album Title",value:"",enabled:!0,autocomplete:[]},artist:{title:"Artist",value:"",enabled:!1,autocomplete:[]},albumArtist:{title:"Album Artist",value:"",enabled:!0,autocomplete:[]},originalReleaseTime:{title:"Original Release Time",value:"",enabled:!0,autocomplete:[]},recordingTime:{title:"Recording Time",value:"",enabled:!0,autocomplete:[]},genre:{title:"Genre",value:"",enabled:!0,autocomplete:[]},part:{title:"Part of Set",value:"",enabled:!0,autocomplete:[]},status:{title:"Album Status",value:"",enabled:!0,autocomplete:[]},type:{title:"Album Type",value:"",enabled:!0,autocomplete:[]}},this.edits=Object.keys(this.edit).map(t=>{const e=this.edit[t];return e.getList=()=>this.getAutoCompleteList(e),e})}getAutoCompleteList(t){return t.autocomplete}dialogInit(t,e){this.data=e.data}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-dialog-album"]],decls:3,vars:1,consts:[["class","user-form-control",4,"ngFor","ngForOf"],[1,"user-form-control"],["type","checkbox",3,"ngModel","ngModelOptions","ngModelChange"],[3,"value","getList","standalone","valueChange"]],template:function(t,e){1&t&&(Z.TgZ(0,"div"),Z.TgZ(1,"form"),Z.YNc(2,G,5,7,"div",0),Z.qZA(),Z.qZA()),2&t&&(Z.xp6(2),Z.Q6J("ngForOf",e.edits))},directives:[s._Y,s.JL,s.F,o.sg,s.Wl,s.JJ,s.On,U],styles:["[_nghost-%COMP%]   .user-form-control[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{width:100%}"]}),t})();function H(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div",7),Z.TgZ(1,"div",8),Z.TgZ(2,"label"),Z.TgZ(3,"input",9),Z.NdJ("ngModelChange",function(t){return e.$implicit.checked=t})("change",function(){const e=Z.CHM(t).$implicit;return Z.oxw().checkChange(e)}),Z.qZA(),Z._uU(4),Z.qZA(),Z.qZA(),Z.TgZ(5,"div",10),Z._uU(6),Z.qZA(),Z.qZA()}if(2&t){const t=e.$implicit;Z.xp6(3),Z.Q6J("ngModel",t.checked)("checked",t.checked),Z.xp6(1),Z.hij(" ",t.name||t.frameDef.title," "),Z.xp6(2),Z.hij(" ",t.id," ")}}let Q,Y=(()=>{class t{constructor(){this.filteredColumns=[],this.allColumns=[],this.version=4,this.urls={2:"http://id3.org/id3v2-00",3:"http://id3.org/id3v2.3.0",4:"http://id3.org/id3v2.4.0-frames"}}checkChange(t){this.setResult()}setResult(){this.data&&(this.data.resultColumns=this.filteredColumns.filter(t=>t.checked))}refresh(){this.filteredColumns=this.allColumns.filter(t=>t.frameDef.versions.includes(this.version)),this.setResult()}setVersion(t){this.version=t,this.refresh()}dialogInit(t,e){var n;this.data=e.data,this.allColumns=[];const i=(null===(n=this.data)||void 0===n?void 0:n.columns)||[];Object.keys(T).forEach(t=>{const e="TXXX"===(n=t)?Object.keys(O).map(t=>({subid:t,name:O[t]})):"UFID"===n?Object.keys(P).map(t=>({subid:t,name:P[t]})):"COMM"===n?Object.keys(b).map(t=>({subid:t,name:b[t]})):[];var n;if(0===e.length){const e=i.find(e=>e.def.id===t);this.allColumns.push({id:t,frameDef:T[t],column:e,checked:!!e})}else for(const o of e){const e=i.find(e=>e.def.id===t&&e.def.subid===o.subid);this.allColumns.push({id:t,subid:o.subid,name:o.name,frameDef:T[t],column:e,checked:!!e})}}),this.allColumns=this.allColumns.sort((t,e)=>(t.name||t.frameDef.title).localeCompare(e.name||e.frameDef.title)),this.refresh()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-dialog-choose-columns"]],decls:19,vars:6,consts:[[1,"choose-version"],[1,"select"],["type","radio","name","release",3,"checked","click"],["target","_blank","rel","noopener",3,"href"],[1,"icon-info"],[1,"columns"],["class","column",4,"ngFor","ngForOf"],[1,"column"],[1,"title"],["type","checkbox",3,"ngModel","checked","ngModelChange","change"],[1,"id"]],template:function(t,e){1&t&&(Z.TgZ(0,"form",0),Z.TgZ(1,"fieldset"),Z.TgZ(2,"span"),Z._uU(3,"ID3v2 Tag Version"),Z.qZA(),Z.TgZ(4,"label",1),Z.TgZ(5,"input",2),Z.NdJ("click",function(){return e.setVersion(4)}),Z.qZA(),Z._uU(6," 2.4"),Z.qZA(),Z.TgZ(7,"label",1),Z.TgZ(8,"input",2),Z.NdJ("click",function(){return e.setVersion(3)}),Z.qZA(),Z._uU(9," 2.3"),Z.qZA(),Z.TgZ(10,"label",1),Z.TgZ(11,"input",2),Z.NdJ("click",function(){return e.setVersion(2)}),Z.qZA(),Z._uU(12," 2.2"),Z.qZA(),Z._UZ(13,"br"),Z.TgZ(14,"a",3),Z._UZ(15,"i",4),Z._uU(16),Z.qZA(),Z.qZA(),Z.qZA(),Z.TgZ(17,"div",5),Z.YNc(18,H,7,4,"div",6),Z.qZA()),2&t&&(Z.xp6(5),Z.Q6J("checked",4==e.version),Z.xp6(3),Z.Q6J("checked",3==e.version),Z.xp6(3),Z.Q6J("checked",2==e.version),Z.xp6(3),Z.Q6J("href",e.urls[e.version],Z.LSH),Z.xp6(2),Z.hij(" ",e.urls[e.version],""),Z.xp6(2),Z.Q6J("ngForOf",e.filteredColumns))},directives:[s._Y,s.JL,s.F,o.sg,s.Wl,s.JJ,s.On],styles:["[_nghost-%COMP%]   .choose-version[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:15px}[_nghost-%COMP%]   .choose-version[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   .columns[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap}[_nghost-%COMP%]   .column[_ngcontent-%COMP%]{width:33%;border-left-color:var(--control-border);border-bottom:0 solid var(--control-border);border-right-color:var(--control-border);border-top:1px solid var(--control-border);padding-top:5px;padding-bottom:5px;padding-right:15px;display:flex;flex-flow:row nowrap;align-items:center;font-size:.8em}[_nghost-%COMP%]   .column[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--on-control-hover)}[_nghost-%COMP%]   .column[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.8em;color:var(--on-control)}[_nghost-%COMP%]   .column[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{margin-left:auto;width:80px;padding-right:15px;text-align:right;font-size:.8em}[_nghost-%COMP%]   .column[_ngcontent-%COMP%]:last-child{border-bottom-width:1px}@media (max-width:1400px){[_nghost-%COMP%]   .column[_ngcontent-%COMP%]{width:50%}}@media (max-width:768px){[_nghost-%COMP%]   .column[_ngcontent-%COMP%]{width:100%}}"]}),t})();function j(t,e){const n=[];if(t)for(const i of t)if(i.recordings)for(const t of i.recordings)if(t.releasegroups&&t.id)for(const o of t.releasegroups)if(o.id&&o.releases)for(const s of o.releases)if(s.id&&s.mediums)for(const r of s.mediums)n.push({releaseGroupID:o.id,releaseGroupName:o.title,releaseID:s.id,releaseName:s.title,mediaNr:r.position,mediaTrackCount:r.track_count,recordingID:t.id,recordingName:t.title,recordingDuration:t.duration,trackID:e.id,trackName:e.name,trackDuration:e.duration,score:i.score,acoustID:i.id});return n}class ${constructor(){this.releasegroups=[]}add(t){let e=this.releasegroups.find(e=>e.id===t.releaseGroupID);e||(e={id:t.releaseGroupID,name:t.releaseGroupName,releases:[],score:0},this.releasegroups.push(e));let n=e.releases.find(e=>e.id===t.releaseID);n||(n={id:t.releaseID,name:t.releaseName,mediums:[],score:0},e.releases.push(n));let i=n.mediums.find(e=>e.nr===t.mediaNr);i||(i={nr:t.mediaNr,recordings:[],trackCount:t.mediaTrackCount,score:0},n.mediums.push(i));let o=i.recordings.find(e=>e.id===t.recordingID);o||(o={id:t.recordingID,name:t.recordingName,duration:t.recordingDuration,matches:[]},i.recordings.push(o));const s=o.matches.find(e=>e.trackID===t.trackID);s?s.score<t.score&&(s.score=t.score):o.matches.push({trackID:t.trackID,trackName:t.trackName,trackDuration:t.trackDuration,score:t.score,acoustID:t.acoustID})}}function V(t){return t.replace(/[& \-.]/g,"").toLowerCase()}function W(t){const e=V(t);return Q||(Q={},v.forEach(t=>{Q[V(t)]=t})),Q[e]}function K(t,e){const n=t.slice(0);for(const i of e){const t=n.find(t=>t.name===i.name);t?t.count+=i.count:n.push(i)}return n}function tt(t){if(!t)return[];const e=[];for(const n of t){const t=W(n.name);if(t){const n=e.find(e=>e.name===t);n?n.count+=1:e.push({name:t,count:1})}}return e}function et(t){return t.replace(/[ .\-()[\]]/g,"").toLowerCase()}class nt{constructor(t,e,n){this.mbTrack=t,this.index=n,this.matchings=[],this.matchings=this.createMatchingScores(e),this.currentMatch=this.matchings[0]}createMatchingScores(t){let e=[];return t.forEach((t,n)=>{const i={match:t,score:0,scores:this.createScores(t,n)};i.score=function(t){const e=t.map(t=>[t.score*t.weight,t.weight]).reduce((t,e)=>[t[0]+e[0],t[1]+e[1]],[0,0]);return e[0]/e[1]}(i.scores),e.push(i)}),e=e.filter(t=>t.score>0).sort((t,e)=>e.score-t.score),e}createScores(t,e){const n=[];return this.scoreTitle(t,n),this.scoreTrackNr(t,n),this.scoreDuration(t,n),this.scoreAcoustid(t,n),n.push({name:"index",score:e===this.index?1:0,weight:.1}),n}scoreAcoustid(t,e){var n;if(t.acoustidEntries&&(null===(n=this.mbTrack.recording)||void 0===n?void 0:n.id)){const n=this.mbTrack.recording.id,i=t.acoustidEntries.find(t=>t.recordingID===n);i&&e.push({name:"acoustid",score:i.score,weight:1})}}scoreDuration(t,e){if(void 0!==this.mbTrack.length){const n=Math.abs(1e3*Math.round(t.track.duration||0)-(this.mbTrack.length||0));let i=0;0===n?i=1:n<1e3?i=.8:n<1e4&&(i=.2),e.push({name:"duration",score:i,weight:.2})}}scoreTrackNr(t,e){var n;const i=(null===(n=t.track.tag)||void 0===n?void 0:n.trackNr)||(0,k.Cb)(t.track.name);i>0&&e.push({name:"trackNr",score:i===this.mbTrack.position?1:0,weight:.2})}scoreTitle(t,e){var n,i,o;const s=(null===(n=t.track.tag)||void 0===n?void 0:n.title)||(0,k.f_)(t.track.name);if(s&&s.trim().length>0){const t=[et(this.mbTrack.title||(null===(i=this.mbTrack.recording)||void 0===i?void 0:i.title)||"Unknown")];for(const e of(null===(o=this.mbTrack.recording)||void 0===o?void 0:o.aliases)||[]){const n=et(e.name);t.push(n)}const n=t.map(t=>({title:t,score:(0,k.C6)(s,t)})).sort((t,e)=>e.score-t.score);n.length>0&&e.push({name:"title",score:n[0].score,weight:1})}}}class it{constructor(t,e,n){this.mbMedia=t,this.tracks=[],this.score=0,this.complete=!1,this.tracks=(t.tracks||[]).map((t,i)=>new nt(t,e,n+i))}updateScore(){this.score=0,this.complete=this.tracks.length>0;for(const t of this.tracks)t.currentMatch?this.score+=t.currentMatch.score:this.complete=!1;this.tracks.length>0?this.score=this.score/this.tracks.length:this.complete=!1}}class ot{constructor(t){this.mbRelease=t,this.media=[],this.score=0,this.loaded=!1,this.isLoading=!1,this.sortDate=0,this.totalTrack=0,this.sortDate=function(t){const e=(t||"").split("-");return new Date(e[0]?Number(e[0]):9999,e[1]?Number(e[1]):12,e[2]?Number(e[2]):31).valueOf()}(t.date),this.totalTrack=this.mbRelease.media.reduce((t,e)=>t+e.trackCount,0)}updateScore(){this.score=0,this.complete=this.media.length>0;for(const t of this.media)t.updateScore(),this.score=Math.max(t.score,this.score),t.complete||(this.complete=!1)}setLookupRelease(t,e){this.mbRelease=t,this.totalTrack=this.mbRelease.media.reduce((t,e)=>t+e.trackCount,0);let n=0;this.media=t.media.map(t=>{const i=new it(t,e,n);return n+=t.trackCount,i}),this.cleanDuplicateMatchings(),this.updateScore()}cleanDuplicateMatchings(){const t={};for(const e of this.media)for(const n of e.tracks)n.currentMatch&&(t[n.currentMatch.match.track.id]=t[n.currentMatch.match.track.id]||[],t[n.currentMatch.match.track.id].push(n));for(const e of Object.keys(t)){let n=t[e];if(n.length>1){n=n.sort((t,e)=>{var n,i;return((null===(n=e.currentMatch)||void 0===n?void 0:n.score)||0)-((null===(i=t.currentMatch)||void 0===i?void 0:i.score)||0)}),n.shift();for(const t of n)t.currentMatch=void 0}}}}class st{constructor(t){this.mbGroup=t,this.releases=[],this.score=0;for(const e of t.releases||[])this.releases.push(new ot(e));this.releases=this.releases.sort((t,e)=>t.sortDate-e.sortDate)}findRelease(t){return this.releases.find(e=>e.mbRelease.id===t)}updateScore(){for(const t of this.releases)t.updateScore();this.score=this.currentRelease?this.currentRelease.score:0}enough(t){return!(!this.currentRelease||this.currentRelease.totalTrack!==t||!this.currentRelease.complete)}}class rt{constructor(){this.groups=[]}enough(t){return!!this.groups.find(e=>e.enough(t))}addReleaseGroup(t){const e=new st(t);return this.groups.push(e),e}findReleaseGroup(t){return this.groups.find(e=>e.mbGroup.id===t)}sort(){for(const t of this.groups)t.updateScore();this.groups=this.groups.sort((t,e)=>e.score-t.score)}}class at{constructor(){this.frameValues={}}build(){return this.frameValues}text(t,e){return e&&(this.frameValues[t]=[{id:t,value:{text:e}}]),this}idText(t,e,n){if(n){const i={id:t,value:{id:e,text:n}},o=(this.frameValues[t]||[]).filter(t=>t.value.id!==e);this.frameValues[t]=o.concat([i])}return this}nrAndTotal(t,e,n){if(e){const i=e.toString()+(n?`/${n.toString()}`:"");this.frameValues[t]=[{id:t,value:{text:i}}]}return this}keyTextList(t,e,n){if(n){const i=this.frameValues[t]||[],o=i.length>0?i[0]:{id:t,value:{list:[]}};o.value.list.push(e),o.value.list.push(n),this.frameValues[t]=[o]}return this}bool(t,e){return void 0!==e&&(this.frameValues[t]=[{id:t,value:{bool:e}}]),this}idLangText(t,e,n,i){if(e){const o=i||"",s=(this.frameValues[t]||[]).filter(t=>t.value.id!==o);this.frameValues[t]=s.concat([{id:t,value:{id:o,language:n||"",text:e}}])}return this}addPicture(t,e,n,i,o){return this.frameValues[t]=(this.frameValues[t]||[]).concat([{id:t,value:{description:n||"",pictureType:e,bin:o,mimeType:i}}]),this}addChapter(t,e,n,i,o,s,r){return this.frameValues[t]=(this.frameValues[t]||[]).concat([{id:t,value:{id:e,start:n,end:i,offset:o,offsetEnd:s},subframes:r}]),this}}class ct{constructor(){this.rawBuilder=new at}buildFrames(){return this.rawBuilder.build()}artist(t){return this.rawBuilder.text("TPE1",t),this}artistSort(t){return this.rawBuilder.text("TSOP",t),this}albumArtist(t){return this.rawBuilder.text("TPE2",t),this}albumArtistSort(t){return this.rawBuilder.text("TSO2",t),this}album(t){return this.rawBuilder.text("TALB",t),this}albumSort(t){return this.rawBuilder.text("TSOA",t),this}originalAlbum(t){return this.rawBuilder.text("TOAL",t),this}originalArtist(t){return this.rawBuilder.text("TOPE",t),this}originalDate(t){return this.rawBuilder.text("TDOR",t),this}title(t){return this.rawBuilder.text("TIT2",t),this}work(t){return this.rawBuilder.text("TIT1",t),this}titleSort(t){return this.rawBuilder.text("TSOT",t),this}genre(t){return this.rawBuilder.text("TCON",t),this}bmp(t){return this.rawBuilder.text("TBPM",t?t.toString():void 0),this}mood(t){return this.rawBuilder.text("TMOO",t),this}media(t){return this.rawBuilder.text("TMED",t),this}language(t){return this.rawBuilder.text("TLAN",t),this}grouping(t){return this.rawBuilder.text("GRP1",t),this}date(t){return this.rawBuilder.text("TDRC",t),this}track(t,e){return this.rawBuilder.nrAndTotal("TRCK",t,e),this}disc(t,e){return this.rawBuilder.nrAndTotal("TPOS",t,e),this}year(t){return this.rawBuilder.text("TORY",t?t.toString():void 0),this}artists(t){return this.rawBuilder.idText("TXXX","Artists",t),this}isCompilation(t){return void 0!==t&&this.rawBuilder.bool("TCMP",1===t||"true"===t||!0===t),this}originalYear(t){return this.rawBuilder.text("TYER",t),this}composer(t){return this.rawBuilder.text("TCOM",t),this}composerSort(t){return this.rawBuilder.text("TSOC",t),this}remixer(t){return this.rawBuilder.text("TPE4",t),this}label(t){return this.rawBuilder.text("TPUB",t),this}subtitle(t){return this.rawBuilder.text("TIT3",t),this}discSubtitle(t){return this.rawBuilder.text("TSST",t),this}lyricist(t){return this.rawBuilder.text("TEXT",t),this}lyrics(t,e,n){return this.rawBuilder.idLangText("USLT",t,e,n),this}encoder(t){return this.rawBuilder.text("TENC",t),this}encoderSettings(t){return this.rawBuilder.text("TSSE",t),this}key(t){return this.rawBuilder.text("TKEY",t),this}copyright(t){return this.rawBuilder.text("TCOP",t),this}isrc(t){return this.rawBuilder.text("TSRC",t),this}barcode(t){return this.rawBuilder.idText("TXXX","BARCODE",t),this}asin(t){return this.rawBuilder.idText("TXXX","ASIN",t),this}catalogNumber(t){return this.rawBuilder.idText("TXXX","CATALOGNUMBER",t),this}script(t){return this.rawBuilder.idText("TXXX","SCRIPT",t),this}license(t){return this.rawBuilder.idText("TXXX","LICENSE",t),this}website(t){return this.rawBuilder.text("WOAR",t),this}movement(t){return this.rawBuilder.text("MVNM",t),this}movementNr(t,e){return this.rawBuilder.nrAndTotal("MVIN",t,e),this}writer(t){return this.rawBuilder.idText("TXXX","Writer",t),this}custom(t,e){return this.rawBuilder.idText("TXXX","VERSION",e),this}musicianCredit(t,e){return this.rawBuilder.keyTextList("TMCL",t,e),this}involved(t,e){return this.rawBuilder.keyTextList("TIPL",t,e),this}discogsArtistID(t){return this.rawBuilder.idText("TXXX","Discogs Artist ID",t),this}discogsAlbumArtistID(t){return this.rawBuilder.idText("TXXX","Discogs Album Artist ID",t),this}discogsLabelID(t){return this.rawBuilder.idText("TXXX","Discogs Label ID",t),this}discogsMasterReleaseID(t){return this.rawBuilder.idText("TXXX","Discogs Master Release ID",t),this}discogsReleaseID(t){return this.rawBuilder.idText("TXXX","Discogs Release ID",t),this}discogsVotes(t){return this.rawBuilder.idText("TXXX","Discogs Votes",t),this}discogsRating(t){return this.rawBuilder.idText("TXXX","Discogs Rating",t),this}mbAlbumStatus(t){return this.rawBuilder.idText("TXXX","MusicBrainz Album Status",t),this}mbAlbumType(t){return this.rawBuilder.idText("TXXX","MusicBrainz Album Type",t),this}mbAlbumReleaseCountry(t){return this.rawBuilder.idText("TXXX","MusicBrainz Album Release Country",t),this}mbTrackID(t){return this.rawBuilder.idText("UFID","http://musicbrainz.org",t),this}mbReleaseTrackID(t){return this.rawBuilder.idText("TXXX","MusicBrainz Release Track Id",t),this}mbAlbumID(t){return this.rawBuilder.idText("TXXX","MusicBrainz Album Id",t),this}mbOriginalAlbumID(t){return this.rawBuilder.idText("TXXX","MusicBrainz Original Album Id",t),this}mbArtistID(t){return this.rawBuilder.idText("TXXX","MusicBrainz Artist Id",t),this}mbOriginalArtistID(t){return this.rawBuilder.idText("TXXX","MusicBrainz Original Artist Id",t),this}mbAlbumArtistID(t){return this.rawBuilder.idText("TXXX","MusicBrainz Album Artist Id",t),this}mbReleaseGroupID(t){return this.rawBuilder.idText("TXXX","MusicBrainz Release Group Id",t),this}mbWorkID(t){return this.rawBuilder.idText("TXXX","MusicBrainz Work Id",t),this}mbTRMID(t){return this.rawBuilder.idText("TXXX","MusicBrainz TRM Id",t),this}mbDiscID(t){return this.rawBuilder.idText("TXXX","MusicBrainz Disc Id",t),this}acoustidID(t){return this.rawBuilder.idText("TXXX","Acoustid Id",t),this}acoustidFingerprint(t){return this.rawBuilder.idText("TXXX","Acoustid Fingerprint",t),this}musicIPPUID(t){return this.rawBuilder.idText("TXXX","MusicIP PUID",t),this}comment(t,e){return this.rawBuilder.idText("COMM",t,e),this}trackLength(t){return this.rawBuilder.text("TLEN",t?t.toString():void 0),this}mbTrackDisambiguation(t){return this.rawBuilder.idText("TXXX","MusicBrainz Track Disambiguation",t),this}addPicture(t,e,n,i){return this.rawBuilder.addPicture("APIC",t,e,n,i),this}chapter(t,e,n,i,o,s){return this.rawBuilder.addChapter("CHAP",t,e,n,i,o,s),this}}function lt(t,e,n){if(!t.mbTrack)return;const i=t.mbTrack,o=t.mbRelease,s=t.mbGroup,r=t.mbMedia,a=new ct;return function(t,e,n,i,o,s){var r,a,c,l;t.mbTrackID(null===(r=n.recording)||void 0===r?void 0:r.id).date(null==i?void 0:i.date).originalDate(null==o?void 0:o.firstReleaseDate).album(null==i?void 0:i.title).albumSort(null==i?void 0:i.sortName).title(n.title).media(null==s?void 0:s.format).track(n.position,null==s?void 0:s.trackCount).disc(null==s?void 0:s.position,null==i?void 0:i.media.length).trackLength(n.length).language(null==i?void 0:i.textRepresentation.language).script(null==i?void 0:i.textRepresentation.script).barcode(null==i?void 0:i.barcode).isrc((null===(a=n.recording)||void 0===a?void 0:a.isrcs)&&n.recording.isrcs.length>0?n.recording.isrcs[0]:void 0).mbAlbumStatus((null==i?void 0:i.status)?i.status.toLowerCase():void 0).mbAlbumReleaseCountry(null==i?void 0:i.country).mbAlbumID(null==i?void 0:i.id).mbReleaseTrackID(n.id).mbReleaseGroupID(null==i?void 0:i.releaseGroup.id).mbTrackDisambiguation(null===(c=n.recording)||void 0===c?void 0:c.disambiguation).asin(null==i?void 0:i.asin).discSubtitle(null==s?void 0:s.title),(null===(l=n.recording)||void 0===l?void 0:l.aliases)&&n.recording.aliases.length>0&&n.recording.aliases[0].sortName&&n.recording.aliases[0].sortName!==n.title&&t.titleSort(n.recording.aliases[0].sortName);const u=null==i?void 0:i.artistCredit[0];if(u&&t.albumArtist(u.name).albumArtistSort(u.artist.sortName).mbAlbumArtistID(u.artist.id),n.artistCredit&&n.artistCredit.length>0){const e=n.artistCredit.map(t=>`${t.artist.name} ${t.joinphrase}`).join(" ").replace(/ {2}/g," ").trim(),i=n.artistCredit.map(t=>(t.artist.sortName?t.artist.sortName:"").trim()).filter(t=>t.length>0).join(" & ").replace(/ {2}/g," ").trim();t.artist(e).artistSort(i).mbArtistID(n.artistCredit[0].artist.id)}else u&&t.artist(u.name).artistSort(u.artist.sortName).mbArtistID(u.artist.id);const d=null==i?void 0:i.labelInfo[0];d&&(d.label&&t.label(d.label.name),t.catalogNumber(d.catalogNumber))}(a,0,i,o,s,r),function(t,e,n,i){let o=[];(null==i?void 0:i.releaseGroup.primaryType)&&o.push(i.releaseGroup.primaryType),(null==i?void 0:i.releaseGroup.secondaryTypes)&&(o=o.concat(i.releaseGroup.secondaryTypes)),o.length>0&&t.mbAlbumType(o.map(t=>t.toLowerCase()).join("/")),o.includes("compilation")&&t.isCompilation(!0)}(a,0,0,o),function(t,e,n){if(n&&n.length>0)t.genre(n.slice(0,2).join("/"));else if(e.track.tagRaw){const n=e.track.tagRaw.frames.TCON;if(n){const e=n.map(t=>t.value.text);t.genre(e.slice(0,2).join("/"))}}}(a,t,e),function(t,e,n){if(n&&n.length>0)for(const i of n){let e=0;i.image.types.includes("Medium")?e=6:i.image.types.includes("Booklet")?e=5:i.image.types.includes("Front")?e=3:i.image.types.includes("Back")&&(e=4),i.base64&&t.addPicture(e,"",i.base64.mimeType,i.base64.base64)}else if(e.track.tagRaw){const n=e.track.tagRaw.frames.APIC;if(n)for(const e of n)t.addPicture(e.value.pictureType,e.value.description,e.value.mimeType,e.value.bin)}}(a,t,n),function(t,e){var n;(null===(n=e.abdata)||void 0===n?void 0:n.moods)&&e.abdata.moods.length>0&&t.mood(e.abdata.moods.join("/"))}(a,t),function(t,e,n){var i;if(e.acoustidEntries&&(null===(i=n.recording)||void 0===i?void 0:i.id)){const i=e.acoustidEntries.find(t=>{var e;return t.recordingID===(null===(e=n.recording)||void 0===e?void 0:e.id)});i&&t.acoustidID(i.acoustID)}}(a,t,i),t.lyrics&&a.lyrics(t.lyrics.lyrics),{version:4,frames:a.buildFrames()}}var ut=n(32242),dt=n(79745),gt=n(12192);function ht(t,e){if(1&t&&Z._UZ(0,"img",1),2&t){const t=Z.oxw();Z.Q6J("src",t.src,Z.LSH)}}let mt=(()=>{class t{ngOnChanges(t){this.src=void 0,this.image&&(this.src=`data:${this.image.mimeType||"image/jpeg"};base64,${this.image.base64}`)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-image-base64"]],inputs:{image:"image"},features:[Z.TTD],decls:1,vars:1,consts:[[3,"src",4,"ngIf"],[3,"src"]],template:function(t,e){1&t&&Z.YNc(0,ht,1,1,"img",0),2&t&&Z.Q6J("ngIf",e.src)},directives:[o.O5],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto}"]}),t})();function pt(t,e){1&t&&Z._UZ(0,"i",7)}function ft(t,e){if(1&t&&(Z.ynx(0),Z.TgZ(1,"div",14),Z._UZ(2,"app-image-base64",15),Z.qZA(),Z.TgZ(3,"div",16),Z.TgZ(4,"div",17),Z.TgZ(5,"label"),Z._UZ(6,"input",18),Z._uU(7),Z.qZA(),Z.qZA(),Z.qZA(),Z.BQk()),2&t){const t=Z.oxw().$implicit;Z.xp6(2),Z.Q6J("image",t.base64),Z.xp6(4),Z.Q6J("checked",t.checked),Z.xp6(1),Z.hij(" ",t.image.types,"")}}function Ct(t,e){if(1&t&&(Z.TgZ(0,"div",12),Z.YNc(1,ft,8,3,"ng-container",13),Z.qZA()),2&t){const t=e.$implicit;Z.xp6(1),Z.Q6J("ngIf",t.base64)}}function vt(t,e){if(1&t&&(Z.TgZ(0,"div",8),Z._UZ(1,"app-background-text-list",9),Z.TgZ(2,"div",10),Z.YNc(3,Ct,2,1,"div",11),Z.qZA(),Z.qZA()),2&t){const t=Z.oxw();Z.xp6(1),Z.Q6J("list",t.images),Z.xp6(2),Z.Q6J("ngForOf",t.images)}}let Mt=(()=>{class t{constructor(t,e,n){this.app=t,this.jam=e,this.notify=n,this.isImageSearchRunning=!1,this.showFrontImagesOnly=!0}ngOnChanges(t){this.data?this.loadCoverartImages(this.data).catch(t=>{this.notify.error(t)}):(this.images=void 0,this.coverArtArchive=void 0)}onToggleShowFrontImagesOnly(){if(!this.showFrontImagesOnly&&this.coverArtArchive)for(const t of this.coverArtArchive)t.base64||t.requested||this.getBase64Image(t).catch(t=>{console.error(t)});this.coverArtArchive&&(this.images=this.coverArtArchive.filter(t=>t.image.front||!this.showFrontImagesOnly))}getChecked(){return this.coverArtArchive?this.coverArtArchive.filter(t=>t.checked&&t.base64):[]}loadImages(t){return(0,h.mG)(this,void 0,void 0,function*(){if(t.images){this.coverArtArchive=t.images.map(t=>{if(0===t.types.length&&t.types.push("Other"),t.image&&(t.image=t.image.replace("http:","https:")),t.thumbnails){const e=t.thumbnails;Object.keys(e).forEach(t=>{e[t]=e[t].replace("http:","https:")})}return{image:t,checked:!1}});const e=this.coverArtArchive.filter(t=>t.image.front||t.image.types.includes("Front")).sort((t,e)=>t.image.types.length-e.image.types.length);this.images=this.showFrontImagesOnly?e:this.coverArtArchive,this.images.forEach(t=>{this.getBase64Image(t).catch(t=>{console.error(t)})});let n=e.find(t=>1===t.image.types.length);n||(n=e[0]),n&&(n.checked=!0)}else this.images=void 0,this.coverArtArchive=[]})}loadCoverartImages(t){return(0,h.mG)(this,void 0,void 0,function*(){if(t.mbReleaseID){this.isImageSearchRunning=!0;let e=yield this.jam.metadata.coverartarchiveLookup({type:f.xB.release,mbID:t.mbReleaseID});yield this.loadImages(e.data),this.coverArtArchive&&0===this.coverArtArchive.length&&t.mbReleaseGroupID?(this.images=void 0,this.coverArtArchive=void 0,e=yield this.jam.metadata.coverartarchiveLookup({type:f.xB.releaseGroup,mbID:t.mbReleaseGroupID}),yield this.loadImages(e.data),this.isImageSearchRunning=!1):this.isImageSearchRunning=!1}})}getBase64Image(t){return(0,h.mG)(this,void 0,void 0,function*(){if(t.requested)return;const e=t.image.thumbnails[500]||t.image.thumbnails.small;let n;t.requested=!0;try{n=yield this.jam.metadata.coverartarchiveImageBinary({url:e})}catch(i){console.error(i)}t.requested=!1,n?t.base64={mimeType:n.contentType,base64:(0,ut.q)(n.buffer)}:this.notify.error({error:"Invalid result from https://coverartarchive.org"})})}}return t.\u0275fac=function(e){return new(e||t)(Z.Y36(dt.zi),Z.Y36(f.K4),Z.Y36(dt.c))},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-match-coverart"]],inputs:{data:"data"},features:[Z.TTD],decls:9,vars:4,consts:[[1,"match-album-images"],[1,"front-only-choice"],["type","checkbox",3,"ngModel","checked","ngModelChange","change"],[1,"section"],["href","https://coverartarchive.org/","rel","noopener","target","_blank"],["class","icon-spin icon-spinner",4,"ngIf"],["class","match-images",4,"ngIf"],[1,"icon-spin","icon-spinner"],[1,"match-images"],["name","Images",3,"list"],[1,"media-cards"],["class","media-card no-hover",4,"ngFor","ngForOf"],[1,"media-card","no-hover"],[4,"ngIf"],[1,"image"],[3,"image"],[1,"footer"],[1,"footer-content"],["type","checkbox",3,"checked"]],template:function(t,e){1&t&&(Z.TgZ(0,"div",0),Z.TgZ(1,"label",1),Z.TgZ(2,"input",2),Z.NdJ("ngModelChange",function(t){return e.showFrontImagesOnly=t})("change",function(){return e.onToggleShowFrontImagesOnly()}),Z.qZA(),Z._uU(3," Front only "),Z.qZA(),Z.TgZ(4,"div",3),Z.TgZ(5,"a",4),Z._uU(6,"Coverart"),Z.qZA(),Z.qZA(),Z.YNc(7,pt,1,0,"i",5),Z.YNc(8,vt,4,2,"div",6),Z.qZA()),2&t&&(Z.xp6(2),Z.Q6J("ngModel",e.showFrontImagesOnly)("checked",e.showFrontImagesOnly),Z.xp6(5),Z.Q6J("ngIf",e.isImageSearchRunning),Z.xp6(1),Z.Q6J("ngIf",e.images&&!e.isImageSearchRunning))},directives:[s.Wl,s.JJ,s.On,o.O5,gt.$,o.sg,mt],styles:["[_nghost-%COMP%]{padding-top:15px}[_nghost-%COMP%]   .section[_ngcontent-%COMP%]{text-transform:uppercase;padding-bottom:10px;white-space:nowrap}[_nghost-%COMP%]   .section[_ngcontent-%COMP%], [_nghost-%COMP%]   .section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background-active)}[_nghost-%COMP%]   .section[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background)}[_nghost-%COMP%]   .front-only-choice[_ngcontent-%COMP%]{float:right;font-size:.8em}[_nghost-%COMP%]   .match-images[_ngcontent-%COMP%]{min-height:200px;display:flex;flex-flow:row wrap}@media (max-width:768px){[_nghost-%COMP%]   .match-images[_ngcontent-%COMP%]{justify-content:space-around}}[_nghost-%COMP%]   .match-images[_ngcontent-%COMP%]   .image[_ngcontent-%COMP%]{max-width:200px;max-height:200px}"]}),t})();var Tt=n(42693),Ot=n(86402),Pt=n(72e3);function bt(t,e){if(1&t&&(Z.TgZ(0,"span",1),Z.ALo(1,"number"),Z.O4$(),Z.TgZ(2,"svg",2),Z._UZ(3,"rect",3),Z.qZA(),Z.qZA()),2&t){const t=Z.oxw();Z.MGl("title","Score: ",Z.lcZ(1,3,t.score),""),Z.xp6(3),Z.uIk("y",12-10*t.score)("fill",t.color)}}let xt=(()=>{class t{getMatchColor(t){return t>.7?"green":t>.3?"yellow":"red"}ngOnChanges(t){this.color=void 0===this.score?void 0:this.getMatchColor(this.score)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-score-box"]],inputs:{score:"score"},features:[Z.TTD],decls:1,vars:1,consts:[[3,"title",4,"ngIf"],[3,"title"],["xmlns","http://www.w3.org/2000/svg","width","10","height","12"],["height","12","width","10"]],template:function(t,e){1&t&&Z.YNc(0,bt,4,5,"span",0),2&t&&Z.Q6J("ngIf",e.score)},directives:[o.O5],pipes:[o.JJ],styles:["[_nghost-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{overflow:hidden;vertical-align:middle;background-color:var(--background-hover);border:1px solid var(--background-border)}"]}),t})();var _t=n(11931),kt=n(766),yt=n(28567);let wt=(()=>{class t{transform(t){return JSON.stringify(t,void 0," ")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Z.Yjl({name:"json",type:t,pure:!0}),t})();function At(t,e){1&t&&(Z.TgZ(0,"a",12),Z._UZ(1,"i",13),Z._uU(2," Show Tracks"),Z.qZA())}function Rt(t,e){1&t&&(Z.TgZ(0,"a",12),Z._UZ(1,"i",14),Z._uU(2," Show Matchings"),Z.qZA())}function It(t,e){if(1&t&&(Z.TgZ(0,"div"),Z.TgZ(1,"span",20),Z._uU(2,"Moods:"),Z.qZA(),Z._uU(3,"\xa0"),Z.TgZ(4,"span",22),Z._uU(5),Z.qZA(),Z.qZA()),2&t){const t=Z.oxw(2).$implicit;Z.xp6(5),Z.Oqu(t.abdata.moods)}}function Zt(t,e){1&t&&(Z.TgZ(0,"div"),Z.TgZ(1,"span",20),Z._uU(2,"Lyrics:"),Z.qZA(),Z._uU(3,"\xa0"),Z.TgZ(4,"span",22),Z._uU(5,"yes"),Z.qZA(),Z.qZA())}function St(t,e){if(1&t&&(Z.TgZ(0,"div"),Z.TgZ(1,"span",20),Z._uU(2,"TrackNr:"),Z.qZA(),Z._uU(3,"\xa0"),Z.TgZ(4,"span",21),Z._uU(5),Z.qZA(),Z._uU(6,"\xa0 "),Z.TgZ(7,"span",20),Z._uU(8,"Title:"),Z.qZA(),Z._uU(9,"\xa0"),Z.TgZ(10,"span",22),Z._uU(11),Z.qZA(),Z._uU(12,"\xa0 "),Z.TgZ(13,"span",20),Z._uU(14,"Artist:"),Z.qZA(),Z._uU(15,"\xa0"),Z.TgZ(16,"span",22),Z._uU(17),Z.ALo(18,"mbArtistCredits"),Z.qZA(),Z._uU(19,"\xa0 "),Z.TgZ(20,"span",20),Z._uU(21,"Album:"),Z.qZA(),Z._uU(22,"\xa0"),Z.TgZ(23,"span",22),Z._uU(24),Z.qZA(),Z._uU(25,"\xa0 "),Z.YNc(26,It,6,1,"div",19),Z.YNc(27,Zt,6,0,"div",19),Z.qZA()),2&t){const t=Z.oxw().$implicit;Z.xp6(5),Z.Oqu(t.mbTrack.position),Z.xp6(6),Z.Oqu(t.mbTrack.title||"?"),Z.xp6(6),Z.Oqu(Z.lcZ(18,6,t.mbTrack.artistCredit)),Z.xp6(7),Z.Oqu((null==t.mbRelease?null:t.mbRelease.title)||"?"),Z.xp6(2),Z.Q6J("ngIf",t.abdata),Z.xp6(1),Z.Q6J("ngIf",t.lyrics)}}function Dt(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div",15),Z.NdJ("dragstart",function(e){const n=Z.CHM(t).$implicit;return Z.oxw().drag(e,n)}),Z.TgZ(1,"div",16),Z._UZ(2,"span",17),Z.qZA(),Z.TgZ(3,"div",18),Z._uU(4),Z.YNc(5,St,28,8,"div",19),Z.qZA(),Z.qZA()}if(2&t){const t=e.$implicit;Z.xp6(4),Z.hij(" ",t.track.name," "),Z.xp6(1),Z.Q6J("ngIf",t.mbTrack)}}function Bt(t,e){1&t&&Z._UZ(0,"i",30)}function Nt(t,e){if(1&t&&(Z.TgZ(0,"label",35),Z.TgZ(1,"input",33),Z.NdJ("ngModelChange",function(t){return e.$implicit.checked=t}),Z.qZA(),Z._uU(2),Z.qZA()),2&t){const t=e.$implicit;Z.MGl("title","Usage Count: ",t.tag.count,""),Z.xp6(1),Z.Q6J("ngModel",t.checked),Z.xp6(1),Z.AsE(" ",t.tag.name," [",t.tag.count,"] ")}}function Ft(t,e){if(1&t){const t=Z.EpF();Z.ynx(0),Z.YNc(1,Nt,3,4,"label",31),Z.TgZ(2,"label",32),Z.TgZ(3,"input",33),Z.NdJ("ngModelChange",function(e){return Z.CHM(t),Z.oxw(2).customGenre.checked=e}),Z.qZA(),Z.TgZ(4,"input",34),Z.NdJ("ngModelChange",function(e){return Z.CHM(t),Z.oxw(2).customGenre.text=e}),Z.qZA(),Z.qZA(),Z.BQk()}if(2&t){const t=Z.oxw(2);Z.xp6(1),Z.Q6J("ngForOf",t.genres),Z.xp6(2),Z.Q6J("ngModel",t.customGenre.checked),Z.xp6(1),Z.Q6J("ngModel",t.customGenre.text)}}function Et(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div",23),Z.TgZ(1,"div",24),Z.TgZ(2,"div"),Z.TgZ(3,"div",25),Z._uU(4,"Genres"),Z.qZA(),Z.YNc(5,Bt,1,0,"i",26),Z.YNc(6,Ft,5,3,"ng-container",19),Z.qZA(),Z._UZ(7,"app-match-coverart",27),Z.TgZ(8,"div",28),Z.TgZ(9,"div",25),Z._uU(10,"More"),Z.qZA(),Z.TgZ(11,"button",29),Z.NdJ("click",function(){Z.CHM(t);const e=Z.oxw();return e.loadLyrics(e.current.group.currentRelease)}),Z._uU(12,"Load Lyrics"),Z.qZA(),Z.TgZ(13,"button",29),Z.NdJ("click",function(){Z.CHM(t);const e=Z.oxw();return e.loadMoods(e.current.group.currentRelease)}),Z._uU(14,"Load AcousticBrainz Moods"),Z.qZA(),Z.qZA(),Z.qZA(),Z.qZA()}if(2&t){const t=Z.oxw();Z.xp6(5),Z.Q6J("ngIf",t.isGenreSearchRunning),Z.xp6(1),Z.Q6J("ngIf",t.genres&&!t.isGenreSearchRunning),Z.xp6(1),Z.Q6J("data",t.coverArtSearch),Z.xp6(4),Z.ekj("disabled",!t.isRunning),Z.xp6(2),Z.ekj("disabled",!t.isRunning)}}function Jt(t,e){if(1&t&&(Z.TgZ(0,"span",22),Z._uU(1),Z.qZA()),2&t){const t=Z.oxw(2).$implicit;Z.xp6(1),Z.Oqu(t.mbGroup.artistCredit[0].name)}}function Lt(t,e){if(1&t&&(Z.ynx(0),Z._uU(1),Z.BQk()),2&t){const t=e.$implicit;Z.xp6(1),Z.hij("/",t,"")}}function qt(t,e){if(1&t&&(Z.ynx(0),Z.YNc(1,Lt,2,1,"ng-container",48),Z.BQk()),2&t){const t=Z.oxw(2).$implicit;Z.xp6(1),Z.Q6J("ngForOf",t.mbGroup.secondaryTypes)}}function Ut(t,e){1&t&&Z._UZ(0,"i",51)}function Xt(t,e){1&t&&Z._UZ(0,"i",52)}function Gt(t,e){if(1&t&&(Z.ynx(0),Z.TgZ(1,"span",22),Z._uU(2),Z.YNc(3,Ut,1,0,"i",49),Z.YNc(4,Xt,1,0,"i",50),Z.qZA(),Z.BQk()),2&t){const t=e.$implicit;Z.xp6(2),Z.hij("",t.tracks.length," "),Z.xp6(1),Z.Q6J("ngIf",t.complete),Z.xp6(1),Z.Q6J("ngIf",!t.complete)}}function zt(t,e){if(1&t&&(Z.ynx(0),Z.TgZ(1,"span",20),Z._uU(2,"Total Tracks:"),Z.qZA(),Z.TgZ(3,"span",22),Z._uU(4),Z.qZA(),Z.BQk()),2&t){const t=Z.oxw(2).$implicit;Z.xp6(4),Z.Oqu(t.currentRelease.totalTrack)}}function Ht(t,e){if(1&t&&(Z.TgZ(0,"div",45),Z.TgZ(1,"span",20),Z._uU(2,"Score:"),Z.qZA(),Z.TgZ(3,"span",22),Z._UZ(4,"app-score-box",46),Z.qZA(),Z.TgZ(5,"span",20),Z._uU(6,"Artist: "),Z.qZA(),Z.YNc(7,Jt,2,1,"span",47),Z.TgZ(8,"span",20),Z._uU(9,"Type: "),Z.qZA(),Z.TgZ(10,"span",22),Z._uU(11),Z.YNc(12,qt,2,1,"ng-container",19),Z.qZA(),Z._UZ(13,"br"),Z.TgZ(14,"span",20),Z._uU(15,"Date:"),Z.qZA(),Z.TgZ(16,"span",22),Z._uU(17),Z.qZA(),Z.TgZ(18,"span",20),Z._uU(19,"Country:"),Z.qZA(),Z.TgZ(20,"span",22),Z._uU(21),Z.qZA(),Z._UZ(22,"br"),Z.TgZ(23,"span",20),Z._uU(24,"Tracks:"),Z.qZA(),Z.YNc(25,Gt,5,3,"ng-container",48),Z.YNc(26,zt,5,1,"ng-container",19),Z.qZA()),2&t){const t=Z.oxw().$implicit;Z.xp6(4),Z.Q6J("score",t.currentRelease.score),Z.xp6(3),Z.Q6J("ngIf",t.mbGroup.artistCredit),Z.xp6(4),Z.hij("",t.mbGroup.primaryType," "),Z.xp6(1),Z.Q6J("ngIf",t.mbGroup.secondaryTypes),Z.xp6(5),Z.Oqu(t.currentRelease.mbRelease.date||"?"),Z.xp6(4),Z.Oqu(t.currentRelease.mbRelease.country||"?"),Z.xp6(4),Z.Q6J("ngForOf",t.currentRelease.media),Z.xp6(1),Z.Q6J("ngIf",t.currentRelease.media.length>1)}}function Qt(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"button",29),Z.NdJ("click",function(){Z.CHM(t);const e=Z.oxw().$implicit;return e.expanded=!e.expanded}),Z._uU(1,"Tracks"),Z.qZA()}}function Yt(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"button",29),Z.NdJ("click",function(){Z.CHM(t);const e=Z.oxw().$implicit;return e.selecting=!e.selecting}),Z._uU(1,"Releases"),Z.qZA()}}const jt=function(t,e){return{"button-primary":t,"button-on-background":e}};function $t(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"button",53),Z.NdJ("click",function(){Z.CHM(t);const e=Z.oxw().$implicit;return Z.oxw(2).chooseRelease(e,e.currentRelease)}),Z._uU(1,"Choose"),Z.qZA()}if(2&t){const t=Z.oxw().$implicit;Z.Q6J("ngClass",Z.WLB(1,jt,t.currentRelease.complete,!t.currentRelease.complete))}}function Vt(t,e){1&t&&(Z.ynx(0),Z._uU(1,"/"),Z.BQk())}function Wt(t,e){if(1&t&&(Z.ynx(0),Z.YNc(1,Vt,2,0,"ng-container",19),Z._uU(2),Z.BQk()),2&t){const t=e.$implicit,n=e.index;Z.xp6(1),Z.Q6J("ngIf",n>0),Z.xp6(1),Z.hij(" ",t.trackCount,"")}}function Kt(t,e){if(1&t&&(Z.ynx(0),Z.YNc(1,Wt,3,2,"ng-container",48),Z.BQk()),2&t){const t=Z.oxw().$implicit;Z.xp6(1),Z.Q6J("ngForOf",t.mbRelease.media)}}function te(t,e){1&t&&(Z.ynx(0),Z._uU(1,"?"),Z.BQk())}function ee(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"label",55),Z.NdJ("click",function(){const e=Z.CHM(t).$implicit,n=Z.oxw(2).$implicit;return Z.oxw(2).setRelease(n,e)}),Z._UZ(1,"input",56),Z.TgZ(2,"span",20),Z._uU(3,"Score:"),Z.qZA(),Z.TgZ(4,"span",22),Z._UZ(5,"app-score-box",46),Z.qZA(),Z.TgZ(6,"span",20),Z._uU(7,"Date:"),Z.qZA(),Z.TgZ(8,"span",22),Z._uU(9),Z.qZA(),Z.TgZ(10,"span",20),Z._uU(11,"Country:"),Z.qZA(),Z.TgZ(12,"span",22),Z._uU(13),Z.qZA(),Z.TgZ(14,"span",20),Z._uU(15,"Tracks:"),Z.qZA(),Z.TgZ(16,"span",22),Z.YNc(17,Kt,2,1,"ng-container",19),Z.YNc(18,te,2,0,"ng-container",19),Z.qZA(),Z.qZA()}if(2&t){const t=e.$implicit,n=Z.oxw(2).$implicit;Z.xp6(1),Z.Q6J("checked",t===n.currentRelease),Z.xp6(4),Z.Q6J("score",t.score),Z.xp6(4),Z.Oqu(t.mbRelease.date||"?"),Z.xp6(4),Z.Oqu(t.mbRelease.country||"?"),Z.xp6(4),Z.Q6J("ngIf",t.mbRelease.media),Z.xp6(1),Z.Q6J("ngIf",!t.mbRelease.media)}}function ne(t,e){if(1&t&&(Z.TgZ(0,"div"),Z.TgZ(1,"form"),Z.TgZ(2,"fieldset"),Z.YNc(3,ee,19,6,"label",54),Z.qZA(),Z.qZA(),Z.qZA()),2&t){const t=Z.oxw().$implicit;Z.xp6(3),Z.Q6J("ngForOf",t.releases)}}function ie(t,e){1&t&&Z._UZ(0,"i",51)}function oe(t,e){1&t&&Z._UZ(0,"i",52)}function se(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div",59),Z.NdJ("click",function(){Z.CHM(t);const e=Z.oxw().$implicit;return e.expanded=!e.expanded}),Z.TgZ(1,"i"),Z.ALo(2,"stringToggle"),Z.qZA(),Z._uU(3),Z.YNc(4,ie,1,0,"i",49),Z.YNc(5,oe,1,0,"i",50),Z.qZA()}if(2&t){const t=Z.oxw().$implicit;Z.xp6(1),Z.Tol(Z.Dn7(2,5,t.expanded,"icon-minus","icon-plus")),Z.xp6(2),Z.hij(" Media ",t.mbMedia.position," "),Z.xp6(1),Z.Q6J("ngIf",t.complete),Z.xp6(1),Z.Q6J("ngIf",!t.complete)}}function re(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div",63),Z.ALo(1,"number"),Z.ALo(2,"json"),Z._UZ(3,"app-score-box",46),Z.TgZ(4,"a",64),Z.NdJ("click",function(){Z.CHM(t);const e=Z.oxw().$implicit,n=Z.oxw(4).$implicit;return Z.oxw(2).removeMatching(n,n.currentRelease,e)}),Z._UZ(5,"i",65),Z.qZA(),Z._uU(6),Z.qZA()}if(2&t){const t=Z.oxw().$implicit;Z.hYB("title","Score: ",Z.lcZ(1,4,t.currentMatch.score)," ",Z.lcZ(2,6,t.currentMatch.scores),""),Z.xp6(3),Z.Q6J("score",t.currentMatch.score),Z.xp6(3),Z.hij(" ",t.currentMatch.match.track.name," ")}}const ae=function(t){return{missing:t}};function ce(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div",61),Z.NdJ("drop",function(e){const n=Z.CHM(t).$implicit,i=Z.oxw(4).$implicit;return Z.oxw(2).drop(e,i,i.currentRelease,n)})("dragover",function(e){return Z.CHM(t),Z.oxw(6).allowDrop(e)}),Z._uU(1),Z.ALo(2,"mbArtistCredits"),Z.YNc(3,re,7,8,"div",62),Z.qZA()}if(2&t){const t=e.$implicit;Z.Q6J("ngClass",Z.VKq(7,ae,!t.currentMatch)),Z.xp6(1),Z.lnq(" ",t.mbTrack.position," - ",t.mbTrack.title," - ",Z.lcZ(2,5,t.mbTrack.artistCredit)," "),Z.xp6(2),Z.Q6J("ngIf",t.currentMatch)}}function le(t,e){if(1&t&&(Z.TgZ(0,"div"),Z.YNc(1,ce,4,9,"div",60),Z.qZA()),2&t){const t=Z.oxw().$implicit;Z.xp6(1),Z.Q6J("ngForOf",t.tracks)}}function ue(t,e){if(1&t&&(Z.TgZ(0,"div"),Z.YNc(1,se,6,9,"div",58),Z.YNc(2,le,2,1,"div",19),Z.qZA()),2&t){const t=e.$implicit,n=Z.oxw(2).$implicit;Z.xp6(1),Z.Q6J("ngIf",n.currentRelease.media.length>1),Z.xp6(1),Z.Q6J("ngIf",t.expanded||n.currentRelease.media.length<2)}}function de(t,e){if(1&t&&(Z.TgZ(0,"div",57),Z.YNc(1,ue,3,2,"div",48),Z.qZA()),2&t){const t=Z.oxw().$implicit;Z.xp6(1),Z.Q6J("ngForOf",t.currentRelease.media)}}function ge(t,e){if(1&t&&(Z.TgZ(0,"div",38),Z.TgZ(1,"div",39),Z.TgZ(2,"span",22),Z._uU(3),Z.qZA(),Z.qZA(),Z.YNc(4,Ht,27,8,"div",40),Z.TgZ(5,"div",41),Z.YNc(6,Qt,2,0,"button",42),Z.YNc(7,Yt,2,0,"button",42),Z.YNc(8,$t,2,4,"button",43),Z.YNc(9,ne,4,1,"div",19),Z.qZA(),Z.YNc(10,de,2,1,"div",44),Z.qZA()),2&t){const t=e.$implicit,n=Z.oxw(2);Z.xp6(3),Z.Oqu(t.mbGroup.title),Z.xp6(1),Z.Q6J("ngIf",t.currentRelease),Z.xp6(2),Z.Q6J("ngIf",!n.isRunning),Z.xp6(1),Z.Q6J("ngIf",!n.isRunning&&t.releases.length>1),Z.xp6(1),Z.Q6J("ngIf",!n.isRunning&&t.currentRelease),Z.xp6(1),Z.Q6J("ngIf",t.selecting),Z.xp6(1),Z.Q6J("ngIf",t.expanded&&t.currentRelease)}}function he(t,e){if(1&t&&(Z.TgZ(0,"div",23),Z.TgZ(1,"div",36),Z.YNc(2,ge,11,7,"div",37),Z.qZA(),Z.qZA()),2&t){const t=Z.oxw();Z.xp6(2),Z.Q6J("ngForOf",t.matchTree.groups)}}function me(t,e){if(1&t&&(Z.TgZ(0,"div",66),Z._UZ(1,"i",30),Z._uU(2),Z.qZA()),2&t){const t=Z.oxw();Z.xp6(2),Z.hij(" ",t.currentAction,"")}}function pe(t,e){1&t&&(Z.TgZ(0,"button",72),Z._UZ(1,"i",30),Z.qZA())}function fe(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"button",73),Z.NdJ("click",function(){return Z.CHM(t),Z.oxw(2).apply()}),Z._uU(1,"Apply"),Z.qZA()}}function Ce(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div",67),Z.TgZ(1,"div",68),Z.YNc(2,pe,2,0,"button",69),Z.YNc(3,fe,2,0,"button",70),Z.TgZ(4,"button",71),Z.NdJ("click",function(){return Z.CHM(t),Z.oxw().stopApply()}),Z._uU(5,"Cancel"),Z.qZA(),Z.qZA(),Z.qZA()}if(2&t){const t=Z.oxw();Z.xp6(2),Z.Q6J("ngIf",t.isRunning),Z.xp6(1),Z.Q6J("ngIf",!t.isRunning)}}function ve(t,e){1&t&&Z._uU(0,"Manual Search with MusicBrainz")}function Me(t,e){1&t&&Z._uU(0,"Match with AcoustID")}function Te(t,e){1&t&&Z._uU(0,"Match with MusicBrainz (Text)")}function Oe(t,e){1&t&&Z._uU(0,"Match with MusicBrainz (Musicbrainz IDs)")}function Pe(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div"),Z.TgZ(1,"button",75),Z.NdJ("click",function(){Z.CHM(t);const e=Z.oxw(3);return e.start(e.RunType.auto)}),Z._uU(2,"Auto Match"),Z.qZA(),Z.TgZ(3,"button",76),Z._uU(4,"\xa0\u2026\xa0"),Z.qZA(),Z.qZA()}if(2&t){Z.oxw(3);const t=Z.MAs(14);Z.xp6(3),Z.Q6J("contextMenu",t)("contextMenuTriggerLeft",!0)}}function be(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div"),Z.TgZ(1,"button",71),Z.NdJ("click",function(){return Z.CHM(t),Z.oxw(3).stop()}),Z._uU(2,"Stop"),Z.qZA(),Z.qZA()}}function xe(t,e){if(1&t&&(Z.TgZ(0,"div",68),Z.YNc(1,Pe,5,2,"div",19),Z.YNc(2,be,3,0,"div",19),Z.qZA()),2&t){const t=Z.oxw(2);Z.xp6(1),Z.Q6J("ngIf",!t.isRunning),Z.xp6(1),Z.Q6J("ngIf",t.isRunning)}}function _e(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div"),Z.TgZ(1,"button",73),Z.NdJ("click",function(){return Z.CHM(t),Z.oxw(3).manualSearch()}),Z._uU(2,"Search"),Z.qZA(),Z.TgZ(3,"button",71),Z.NdJ("click",function(){return Z.CHM(t),Z.oxw(3).clear()}),Z._uU(4,"Clear"),Z.qZA(),Z.TgZ(5,"button",71),Z.NdJ("click",function(){return Z.CHM(t),Z.oxw(3).manual=!1}),Z._uU(6,"Close"),Z.qZA(),Z.qZA()}}function ke(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div"),Z.TgZ(1,"button",71),Z.NdJ("click",function(){return Z.CHM(t),Z.oxw(3).stop()}),Z._uU(2,"Stop"),Z.qZA(),Z.qZA()}}function ye(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div",68),Z.TgZ(1,"div",77),Z.TgZ(2,"div"),Z.TgZ(3,"div"),Z._uU(4,"Album Name"),Z.qZA(),Z.TgZ(5,"app-tag-editor-autocomplete",78),Z.NdJ("valueChange",function(e){return Z.CHM(t),Z.oxw(2).manualSearchData.releaseGroup=e}),Z.qZA(),Z.qZA(),Z.TgZ(6,"div"),Z.TgZ(7,"div"),Z._uU(8,"Artist"),Z.qZA(),Z.TgZ(9,"app-tag-editor-autocomplete",78),Z.NdJ("valueChange",function(e){return Z.CHM(t),Z.oxw(2).manualSearchData.artist=e}),Z.qZA(),Z.qZA(),Z.qZA(),Z.YNc(10,_e,7,0,"div",19),Z.YNc(11,ke,3,0,"div",19),Z.qZA()}if(2&t){const t=Z.oxw(2);Z.xp6(5),Z.Q6J("value",t.manualSearchData.releaseGroup)("getList",t.manualSearchData.getAutoCompleteAlbumList)("standalone",!0),Z.xp6(4),Z.Q6J("value",t.manualSearchData.artist)("getList",t.manualSearchData.getAutoCompleteArtistList)("standalone",!0),Z.xp6(1),Z.Q6J("ngIf",!t.isRunning),Z.xp6(1),Z.Q6J("ngIf",t.isRunning)}}function we(t,e){if(1&t&&(Z.TgZ(0,"div",67),Z.YNc(1,xe,3,2,"div",74),Z.YNc(2,ye,12,8,"div",74),Z.qZA()),2&t){const t=Z.oxw();Z.xp6(1),Z.Q6J("ngIf",!t.manual),Z.xp6(1),Z.Q6J("ngIf",t.manual)}}function Ae(t){let e=t.indexOf("("),n=t;return e>1&&(n=n.slice(0,e)),e=n.indexOf("["),e>1&&(n=n.slice(0,e)),n=n.trim(),0===n.length?t:n}class Re{constructor(t){this.q=t,this.matchings=[],this.id=`musicbrainz-${JSON.stringify(t)}`,this.name=`MusicBrainz Search for ${Object.keys(t).filter(t=>"type"!==t).map(e=>`${e}: "${t[e]}"`).join(", ")}`}}var Ie=function(t){return t[t.acoustID=0]="acoustID",t[t.musicbrainzRefresh=1]="musicbrainzRefresh",t[t.musicbrainzByTags=2]="musicbrainzByTags",t[t.auto=3]="auto",t}({});let Ze=(()=>{class t{constructor(t,e,n,i,o){this.app=t,this.jam=e,this.notify=n,this.client=i,this.cd=o,this.isRunning=!1,this.isGenreSearchRunning=!1,this.isAborted=!1,this.customGenre={text:"",checked:!0},this.rightActive=!0,this.matchings=[],this.matchTree=new rt,this.manual=!1,this.manualSearchData={artists:[],albums:[],artist:"",releaseGroup:"",getAutoCompleteAlbumList:()=>{var t,e;if(0===this.manualSearchData.albums.length)for(const n of this.matchings){const i=((null===(e=null===(t=n.track)||void 0===t?void 0:t.tag)||void 0===e?void 0:e.album)||"").trim();i.length>0&&!this.manualSearchData.albums.includes(i)&&this.manualSearchData.albums.push(i)}return this.manualSearchData.albums},getAutoCompleteArtistList:()=>{var t,e;if(0===this.manualSearchData.artists.length)for(const n of this.matchings){const i=((null===(e=null===(t=n.track)||void 0===t?void 0:t.tag)||void 0===e?void 0:e.artist)||"").trim();i.length>0&&!this.manualSearchData.artists.includes(i)&&this.manualSearchData.artists.push(i)}return this.manualSearchData.artists}},this.RunType=Ie}ngOnChanges(t){this.data?(this.matchings=this.data.matchings.map(t=>({track:t.track})),this.isRunning||(this.isAborted=!1)):(this.matchings=[],this.isAborted=!0)}ngOnDestroy(){this.isAborted=!0}allowDrop(t){t.preventDefault()}drag(t,e){this.cd.markForCheck(),t.dataTransfer&&t.dataTransfer.setData("text",e.track.id)}drop(t,e,n,i){if(t.preventDefault(),!t.dataTransfer)return;const o=t.dataTransfer.getData("text"),s=this.matchings.find(t=>t.track.id===o);if(!s)return;let r=i.matchings.find(t=>t.match.track.id===o);r||(r={match:s,score:1,scores:[]},i.matchings.push(r)),r.score=1,r.scores.find(t=>"Manual Match"===t.name)||r.scores.push({name:"Manual Match",score:1,weight:1});for(const a of n.media)for(const t of a.tracks)t.currentMatch&&t.currentMatch.match.track.id===s.track.id&&(t.currentMatch=void 0);i.currentMatch=r,e.updateScore()}start(t){this.isRunning||(this.isAborted=!1,this.isRunning=!0,this.run(t).then(()=>{this.matchTree.sort(),this.isRunning=!1,this.isAborted=!1,this.currentAction=""}).catch(t=>{this.notify.error(t),this.isRunning=!1,this.isAborted=!1,this.currentAction=""}))}setManualSearch(){var t;if(this.manual=!0,0===this.manualSearchData.artist.length){const t=this.manualSearchData.getAutoCompleteArtistList();t.length>0&&(this.manualSearchData.artist=t[0])}if(0===this.manualSearchData.releaseGroup.length){const e=this.manualSearchData.getAutoCompleteAlbumList();e.length>0?this.manualSearchData.releaseGroup=e[0]:(null===(t=this.data)||void 0===t?void 0:t.folder)&&(this.manualSearchData.releaseGroup=this.data.folder.name)}}clear(){this.isRunning||(this.matchTree=new rt)}manualSearch(){this.isRunning||(this.isAborted=!1,this.isRunning=!0,this.searchManual().then(()=>{this.isRunning=!1,this.isAborted=!1,this.currentAction=""}).catch(t=>{this.notify.error(t),this.isRunning=!1,this.isAborted=!1,this.currentAction=""}))}stop(){this.isRunning&&(this.isAborted=!0)}apply(){const t=(this.genres||[]).filter(t=>t.checked).map(t=>t.tag.name);this.customGenre.checked&&this.customGenre.text.trim().length>0&&t.push(this.customGenre.text.trim());for(const e of this.matchings)e.genres=t;if(this.data){const e=this.coverArt?this.coverArt.getChecked():[];for(const n of this.data.matchings){const i=this.matchings.find(t=>t.track.id===n.track.id);n.rawTag=i?lt(i,t,e):void 0}this.data.apply&&this.data.apply(),this.data.close&&this.data.close()}}setRelease(t,e){t.currentRelease=e,e.loaded||this.loadRelease(e).catch(t=>{this.notify.error(t)})}chooseRelease(t,e){this.stopApply(),this.current={group:t,release:e},this.coverArtSearch={mbReleaseID:e.mbRelease.id,mbReleaseGroupID:t.mbGroup.id};for(const n of e.media)for(const i of n.tracks)i.currentMatch&&(i.currentMatch.match.mbTrack=i.mbTrack,i.currentMatch.match.mbMedia=n.mbMedia,i.currentMatch.match.mbRelease=e.mbRelease,i.currentMatch.match.mbGroup=t.mbGroup);this.loadGenres(t,e).catch(t=>{this.notify.error(t)})}stopApply(){this.current=void 0,this.genres=void 0;for(const t of this.matchings)t.mbTrack=void 0,t.mbMedia=void 0,t.mbRelease=void 0,t.mbGroup=void 0,t.genres=void 0}setRunning(t){this.currentAction=t,this.isRunning=!0}stopRunning(){this.isRunning=!1,this.currentAction=""}loadMoods(t){!this.isRunning&&t&&(this.setRunning("Searching Moods"),this.loadAcousticBrainz(t).then(()=>{this.stopRunning()}).catch(t=>{this.stopRunning(),this.notify.error(t)}))}loadLyrics(t){!this.isRunning&&t&&(this.setRunning("Searching Lyrics"),this.loadLyricsOVH(t).then(()=>{this.stopRunning()}).catch(t=>{this.stopRunning(),this.notify.error(t)}))}removeMatching(t,e,n){n.currentMatch=void 0,t.updateScore()}shouldStop(){return this.matchTree.enough(this.matchings.length)||this.isAborted}searchManual(){return(0,h.mG)(this,void 0,void 0,function*(){const t={type:f.xI.releaseGroup};if(this.manualSearchData.artist&&this.manualSearchData.artist.trim().length>0&&(t.artist=this.manualSearchData.artist),this.manualSearchData.releaseGroup&&this.manualSearchData.releaseGroup.trim().length>0&&(t.releasegroup=this.manualSearchData.releaseGroup),Object.keys(t).length>1){const e=new Re(t);yield this.runQuery(e,[])}})}run(t){return(0,h.mG)(this,void 0,void 0,function*(){switch(t){case Ie.acoustID:yield this.acoustId();break;case Ie.musicbrainzByTags:if(yield this.musicBrainzByQuickTags(),this.shouldStop())return;yield this.musicBrainzByTags();break;case Ie.musicbrainzRefresh:yield this.musicBrainzRefresh();break;case Ie.auto:if(yield this.musicBrainzRefresh(),this.shouldStop())return;if(yield this.musicBrainzByQuickTags(),this.shouldStop())return;if(yield this.acoustId(),this.shouldStop())return;yield this.musicBrainzByTags()}})}loadGenres(t,e){var n;return(0,h.mG)(this,void 0,void 0,function*(){if(!this.data)return;this.isGenreSearchRunning=!0;const i=[];t.mbGroup.secondaryTypes&&t.mbGroup.secondaryTypes.find(t=>["audiobook","audio drama","spokenword"].includes(t))&&i.push({count:1,name:"Audiobook"});for(const t of this.data.matchings)if((null===(n=t.track.tag)||void 0===n?void 0:n.genres)&&t.track.tag.genres.length>0){const e=t.track.tag.genres[0],n=i.find(t=>t.name===e);n?n.count++:i.push({count:1,name:e})}let o=function(t){if(!t||!t.length)return[];const e=[];for(const n of t){const t=n.name.split("/").map(t=>t.trim()).filter(t=>t.length>0);for(const i of t){const t=W(i);if(t){const i=e.find(e=>e.name===t);i?i.count+=n.count:e.push({name:t,count:n.count})}}}return e.sort((t,e)=>e.count-t.count)}(i),s=[];e.mbRelease.tags&&(s=s.concat(e.mbRelease.tags)),t.mbGroup.tags&&(s=s.concat(t.mbGroup.tags)),o=K(o,function(t){if(!t||!t.length)return[];const e=[];for(const n of t){const t=n.name.split(";").map(t=>t.trim()).filter(t=>t.length>0);for(const i of t){const t=W(i);if(t){const i=e.find(e=>e.name===t);i?i.count+=n.count:e.push({name:t,count:n.count})}}}return e.sort((t,e)=>e.count-t.count)}(s));const r=(yield this.jam.metadata.lastfmLookup({type:f.WQ.album,mbID:e.mbRelease.id})).data;var a,c;if(r.album&&(o=K(o,(a=r.album).tags?tt(a.tags):[])),0===o.length&&e.mbRelease.artistCredit.length>0){const t=(yield this.jam.metadata.lastfmLookup({type:f.WQ.artist,mbID:e.mbRelease.artistCredit[0].artist.id})).data;t&&t.artist&&(o=K(o,(c=t.artist)?tt(c.tags):[]))}this.genres=o.sort((t,e)=>e.count-t.count).map((t,e)=>({tag:t,checked:0===e})),this.isGenreSearchRunning=!1})}loadAcousticBrainz(t){var e,n,i,o;return(0,h.mG)(this,void 0,void 0,function*(){for(const s of t.media)for(const t of s.tracks)if(!t.abData&&(null===(o=null===(i=null===(n=null===(e=t.currentMatch)||void 0===e?void 0:e.match)||void 0===n?void 0:n.mbTrack)||void 0===i?void 0:i.recording)||void 0===o?void 0:o.id)){const e=(yield this.jam.metadata.acousticbrainzLookup({mbID:t.currentMatch.match.mbTrack.recording.id})).data;if(e.highlevel){const n=[],i=[],o=[],s=[],r=Object.keys(e.highlevel);for(const t of r){const r=e.highlevel[t].value;e.highlevel[t].probability>.8&&!r.includes("not_")&&(t.startsWith("mood_")||"timbre"===t||"danceability"===t?i.includes(r)||i.push(r):t.startsWith("genre_")?n.includes(r)||n.push(r):t.startsWith("tonal_")||"voice_instrumental"===t?o.includes(r)||o.push(r):s.includes(r)||s.push(r))}const a={genres:n,moods:i,tonal:o,other:s};t.abData=a,t.currentMatch.match.abdata=a}}})}loadLyricsOVH(t){return(0,h.mG)(this,void 0,void 0,function*(){for(const e of t.media)for(const t of e.tracks)if(t.currentMatch&&!t.currentMatch.match.lyrics&&t.mbTrack.artistCredit&&t.mbTrack.artistCredit.length>0){const e=t.mbTrack.artistCredit[0].name,n=t.mbTrack.title;t.currentMatch.match.lyrics=(yield this.jam.metadata.lyricsovhSearch({title:n,artist:e})).data}})}loadRelease(t){var e;return(0,h.mG)(this,void 0,void 0,function*(){if(t&&!t.loaded&&!t.isLoading){t.isLoading=!0;try{this.currentAction=`Loading MusicBrainz Release: ${t.mbRelease.id}`;const n=yield this.jam.metadata.musicbrainzLookup({type:f.ej.release,mbID:t.mbRelease.id});if(!(null===(e=n.data)||void 0===e?void 0:e.release))return Promise.reject(Error("Got empty data"));t.setLookupRelease(n.data.release,this.matchings),t.loaded=!0,t.isLoading=!1}catch(n){return t.isLoading=!1,Promise.reject(n)}}})}addReleaseGroupByReleaseID(t){return(0,h.mG)(this,void 0,void 0,function*(){this.currentAction=`Loading MusicBrainz Release: ${t}`;const e=yield this.jam.metadata.musicbrainzLookup({type:f.ej.release,mbID:t});return e.data.release?this.addReleaseGroupByID(e.data.release.releaseGroup.id):Promise.reject(Error("Got empty data"))})}addReleaseGroupByID(t){return(0,h.mG)(this,void 0,void 0,function*(){let e=this.matchTree.findReleaseGroup(t);if(!e){this.currentAction=`Loading MusicBrainz Release Group: ${t}`;const n=yield this.jam.metadata.musicbrainzLookup({type:f.ej.releaseGroup,mbID:t});e=this.matchTree.addReleaseGroup(n.data.releaseGroup)}return e})}acoustId(){return(0,h.mG)(this,void 0,void 0,function*(){this.currentAction="Checking files with AcoustID";let t=[];for(const i of this.matchings){if(!i.acoustidEntries){this.currentAction=`Checking files with AcoustID: ${i.track.name}`;try{const t=yield this.jam.metadata.acoustidLookup({trackID:i.track.id});i.acoustidEntries=j(t.data,i.track)}catch(n){console.error(n)}if(this.isAborted)return}i.acoustidEntries&&(t=t.concat(i.acoustidEntries))}const e=new $;for(const i of t)e.add(i);for(const i of e.releasegroups){if(this.shouldStop())return;let t=this.matchTree.findReleaseGroup(i.id);if(t||(t=yield this.addReleaseGroupByID(i.id)),t&&!t.currentRelease&&(yield this.loadBestMatchingCurrentRelease(t),this.shouldStop()))return;this.matchTree.sort()}})}buildQuickQueries(){var t,e;const n=[],i=[],o=[];for(const s of this.matchings)if(s.track.tag&&s.track.tag.album){const t=Ae(s.track.tag.album);s.track.tag.album&&!i.includes(t)&&i.push(t),s.track.tag.artist&&!o.includes(s.track.tag.artist)&&o.push(s.track.tag.artist)}return 1===i.length&&n.push(new Re({type:f.xI.releaseGroup,releasegroup:i[0],artist:o.length>0?o[0]:void 0})),(null===(e=null===(t=this.data)||void 0===t?void 0:t.folder)||void 0===e?void 0:e.tag)&&n.push(new Re({type:f.xI.releaseGroup,releasegroup:this.data.folder.name,artist:this.data.folder.tag.artist})),n}buildQueries(){var t,e,n,i,o,s,r,a,c,l,u,d,g,h,m,p;const C=[],v=(t,e,n)=>{const i={type:t.type};for(const o of Object.keys(t)){const e=t[o];if(void 0===e||""===e||""===e.toString().trim())return;const n=e.toString().split("(");n.length>0&&(i[o]=n[0])}n&&(i.tracks=this.matchings.length),((t,e)=>{const n=C.find(e=>e.id===t.id);n?n.matchings.push(e):(t.matchings.push(e),C.push(t))})(new Re(i),e)};for(const M of this.matchings)v({type:f.xI.releaseGroup,releasegroup:null===(t=M.track.tag)||void 0===t?void 0:t.album,artist:null===(e=M.track.tag)||void 0===e?void 0:e.artist},M);for(const M of this.matchings)v({type:f.xI.release,release:null===(n=M.track.tag)||void 0===n?void 0:n.album,artist:null===(i=M.track.tag)||void 0===i?void 0:i.artist},M,!0);for(const M of this.matchings)v({type:f.xI.release,release:null===(o=M.track.tag)||void 0===o?void 0:o.album,artist:null===(s=M.track.tag)||void 0===s?void 0:s.artist},M);for(const M of this.matchings)if(null===(r=M.track.tag)||void 0===r?void 0:r.title)v({type:f.xI.recording,recording:M.track.tag.title,release:M.track.tag.album,artist:M.track.tag.artist},M);else{const t=(0,k.f_)(M.track.name);v({type:f.xI.recording,recording:t,release:null===(a=M.track.tag)||void 0===a?void 0:a.album,artist:null===(c=M.track.tag)||void 0===c?void 0:c.artist},M)}for(const M of this.matchings)if(null===(l=M.track.tag)||void 0===l?void 0:l.title)v({type:f.xI.recording,recording:M.track.tag.title,release:M.track.tag.album},M),v({type:f.xI.recording,recording:M.track.tag.title,artist:M.track.tag.artist},M);else{const t=(0,k.f_)(M.track.name);v({type:f.xI.recording,recording:t,release:null===(u=M.track.tag)||void 0===u?void 0:u.album},M),v({type:f.xI.recording,recording:t,artist:null===(d=M.track.tag)||void 0===d?void 0:d.artist},M)}for(const M of this.matchings)v({type:f.xI.releaseGroup,releasegroup:null===(g=M.track.tag)||void 0===g?void 0:g.album},M),v({type:f.xI.release,release:null===(h=M.track.tag)||void 0===h?void 0:h.album},M,!0),v({type:f.xI.release,release:null===(m=M.track.tag)||void 0===m?void 0:m.album},M);for(const M of this.matchings)if(null===(p=M.track.tag)||void 0===p?void 0:p.title)v({type:f.xI.recording,recording:M.track.tag.title},M);else{const t=(0,k.f_)(M.track.name);v({type:f.xI.recording,recording:t},M)}return C}loadBestMatchingCurrentRelease(t){return(0,h.mG)(this,void 0,void 0,function*(){const e=t.releases.sort((t,e)=>{const n=Math.abs((t.totalTrack||0)-this.matchings.length),i=Math.abs((e.totalTrack||0)-this.matchings.length);return n===i?t.sortDate-e.sortDate:n-i});for(const n of e){if(this.shouldStop())return;if(yield this.loadRelease(n),n.complete)return void(t.currentRelease=n)}t.releases.length>0&&(yield this.loadRelease(t.releases[0]),t.currentRelease=t.releases[0])})}loadByReleaseGroups(t){return(0,h.mG)(this,void 0,void 0,function*(){for(const e of t){if(this.shouldStop())return;let t=this.matchTree.findReleaseGroup(e.id);t||(t=yield this.addReleaseGroupByID(e.id)),t&&!t.currentRelease&&(yield this.loadBestMatchingCurrentRelease(t))}})}loadByReleases(t){return(0,h.mG)(this,void 0,void 0,function*(){for(const e of t){if(this.shouldStop())return;let t=this.matchTree.findReleaseGroup(e.releaseGroup.id);t||(t=yield this.addReleaseGroupByID(e.releaseGroup.id)),t&&!t.currentRelease&&(yield this.loadBestMatchingCurrentRelease(t))}})}loadByRecordings(t){return(0,h.mG)(this,void 0,void 0,function*(){for(const e of t){if(this.shouldStop())return;if(e.releases)for(const t of e.releases){if(this.shouldStop())return;let e=this.matchTree.findReleaseGroup(t.releaseGroup.id);e||(e=yield this.addReleaseGroupByID(t.releaseGroup.id)),e&&!e.currentRelease&&(yield this.loadBestMatchingCurrentRelease(e))}}})}runQuery(t,e){return(0,h.mG)(this,void 0,void 0,function*(){if(this.shouldStop())return;this.currentAction=t.name;const n=(yield this.jam.metadata.musicbrainzSearch(t.q)).data;if(n.releaseGroups?yield this.loadByReleaseGroups(n.releaseGroups):n.releases?yield this.loadByReleases(n.releases):n.recordings?yield this.loadByRecordings(n.recordings):console.error("TODO",n),this.matchTree.sort(),this.shouldStop())return;const i=e.shift();i&&(yield this.runQuery(i,e))})}musicBrainzByQuickTags(){return(0,h.mG)(this,void 0,void 0,function*(){const t=this.buildQuickQueries(),e=t.shift();e&&(yield this.runQuery(e,t))})}musicBrainzByTags(){return(0,h.mG)(this,void 0,void 0,function*(){const t=this.buildQueries(),e=t.shift();e&&(yield this.runQuery(e,t))})}musicBrainzRefresh(){return(0,h.mG)(this,void 0,void 0,function*(){for(const t of this.matchings){if(this.shouldStop())return;if(t.track.tag){let e;if(t.track.tag.mbReleaseGroupID&&(e=yield this.addReleaseGroupByID(t.track.tag.mbReleaseGroupID)),!e&&t.track.tag.mbReleaseID&&(e=yield this.addReleaseGroupByReleaseID(t.track.tag.mbReleaseID)),e){if(t.track.tag.mbReleaseID){const n=e.findRelease(t.track.tag.mbReleaseID);n?yield this.loadRelease(n):console.error("Could not find the release with id",t.track.tag.mbReleaseID),e.currentRelease=n,e.enough(this.matchings.length)||(e.currentRelease=void 0)}e.currentRelease||(yield this.loadBestMatchingCurrentRelease(e))}}}})}}return t.\u0275fac=function(e){return new(e||t)(Z.Y36(dt.zi),Z.Y36(f.K4),Z.Y36(dt.c),Z.Y36(Tt.eN),Z.Y36(Z.sBO))},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-match-release"]],viewQuery:function(t,e){if(1&t&&Z.Gf(Mt,5),2&t){let t;Z.iGM(t=Z.CRH())&&(e.coverArt=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&Z.ekj("right-active",e.rightActive)},inputs:{data:"data"},features:[Z.TTD],decls:20,vars:9,consts:[[1,"toggle",3,"click"],["class","button-on-control",4,"ngIf"],[1,"content"],[1,"match-files"],[1,"match-file-list"],[1,"match-file-list-header"],["class","match-file","draggable","true",3,"dragstart",4,"ngFor","ngForOf"],["class","match-releases",4,"ngIf"],["class","current-log",4,"ngIf"],["class","buttons",4,"ngIf"],["actionMenu",""],["contextMenuItem","",3,"execute"],[1,"button-on-control"],[1,"icon-left"],[1,"icon-right"],["draggable","true",1,"match-file",3,"dragstart"],[1,"handle"],[1,"grippy"],[1,"title"],[4,"ngIf"],[1,"label"],[1,"currentRelease"],[1,"value"],[1,"match-releases"],[1,"match-apply"],[1,"section"],["class","icon-spin icon-spinner",4,"ngIf"],[3,"data"],[1,"match-track-moods"],[1,"button-on-background",3,"click"],[1,"icon-spin","icon-spinner"],["class","select",3,"title",4,"ngFor","ngForOf"],[1,"select"],["type","checkbox",3,"ngModel","ngModelChange"],["type","text",3,"ngModel","ngModelChange"],[1,"select",3,"title"],[1,"match-results"],["class","match-releasegroup",4,"ngFor","ngForOf"],[1,"match-releasegroup"],[1,"match-releasegroup-title"],["class","match-release-info",4,"ngIf"],[1,"match-select-releases"],["class","button-on-background",3,"click",4,"ngIf"],["class","button-primary",3,"ngClass","click",4,"ngIf"],["class","match-tracks-info",4,"ngIf"],[1,"match-release-info"],[3,"score"],["class","value",4,"ngIf"],[4,"ngFor","ngForOf"],["class","icon-checkmark","title","All tracks matched",4,"ngIf"],["title","Unmatched tracks!","class","icon-warning",4,"ngIf"],["title","All tracks matched",1,"icon-checkmark"],["title","Unmatched tracks!",1,"icon-warning"],[1,"button-primary",3,"ngClass","click"],["class","select",3,"click",4,"ngFor","ngForOf"],[1,"select",3,"click"],["type","radio","name","release",3,"checked"],[1,"match-tracks-info"],[3,"click",4,"ngIf"],[3,"click"],["class","match-track-info",3,"ngClass","drop","dragover",4,"ngFor","ngForOf"],[1,"match-track-info",3,"ngClass","drop","dragover"],[3,"title",4,"ngIf"],[3,"title"],["title","Remove Matching",3,"click"],[1,"icon-trash"],[1,"current-log"],[1,"buttons"],[1,"match-actions"],["class","button-primary",4,"ngIf"],["class","button-primary",3,"click",4,"ngIf"],[1,"button-accent",3,"click"],[1,"button-primary"],[1,"button-primary",3,"click"],["class","match-actions",4,"ngIf"],[1,"button-on-control","button-with-add-on",3,"click"],[1,"button-on-control","button-add-on",3,"contextMenu","contextMenuTriggerLeft"],[1,"match-search"],[3,"value","getList","standalone","valueChange"]],template:function(t,e){1&t&&(Z.TgZ(0,"div",0),Z.NdJ("click",function(){return e.rightActive=!e.rightActive}),Z.YNc(1,At,3,0,"a",1),Z.YNc(2,Rt,3,0,"a",1),Z.qZA(),Z.TgZ(3,"div",2),Z.TgZ(4,"div",3),Z.TgZ(5,"div",4),Z.TgZ(6,"div",5),Z._uU(7),Z.qZA(),Z.YNc(8,Dt,6,2,"div",6),Z.qZA(),Z.qZA(),Z.YNc(9,Et,15,7,"div",7),Z.YNc(10,he,3,1,"div",7),Z.qZA(),Z.YNc(11,me,3,1,"div",8),Z.YNc(12,Ce,6,2,"div",9),Z.TgZ(13,"context-menu",null,10),Z.YNc(15,ve,1,0,"ng-template",11),Z.NdJ("execute",function(){return e.setManualSearch()}),Z.YNc(16,Me,1,0,"ng-template",11),Z.NdJ("execute",function(){return e.start(e.RunType.acoustID)}),Z.YNc(17,Te,1,0,"ng-template",11),Z.NdJ("execute",function(){return e.start(e.RunType.musicbrainzByTags)}),Z.YNc(18,Oe,1,0,"ng-template",11),Z.NdJ("execute",function(){return e.start(e.RunType.musicbrainzRefresh)}),Z.qZA(),Z.YNc(19,we,3,2,"div",9)),2&t&&(Z.xp6(1),Z.Q6J("ngIf",e.rightActive),Z.xp6(1),Z.Q6J("ngIf",!e.rightActive),Z.xp6(5),Z.hij("",e.matchings.length," Tracks"),Z.xp6(1),Z.Q6J("ngForOf",e.matchings),Z.xp6(1),Z.Q6J("ngIf",e.current),Z.xp6(1),Z.Q6J("ngIf",!e.current),Z.xp6(1),Z.Q6J("ngIf",e.isRunning),Z.xp6(1),Z.Q6J("ngIf",e.current),Z.xp6(7),Z.Q6J("ngIf",!e.current))},directives:[o.O5,o.sg,Ot.G,Pt.n,Mt,s.Wl,s.JJ,s.On,s.Fj,xt,o.mk,s._Y,s.JL,s.F,_t.l,U],pipes:[kt.N,yt.C,o.JJ,wt],styles:['[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;overflow:hidden}[_nghost-%COMP%]   .toggle[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex:1 1 auto;overflow-y:auto}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{padding-right:4px;font-size:.9em;text-transform:uppercase}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]{padding-top:2px;padding-bottom:2px;display:block;font-size:.9em}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:4px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .select[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:auto;display:block;height:100%;width:50%;font-size:.8em;padding-right:15px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%;padding-top:5px;background-color:var(--background);color:var(--on-background);margin-bottom:15px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file-list-header[_ngcontent-%COMP%]{text-align:center;padding-bottom:5px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]{min-height:48px;display:flex;flex-flow:row nowrap;align-items:center;align-content:space-evenly;width:100%;line-height:1.25em;border-bottom:0 solid var(--background-border);border-top:1px solid var(--background-border);padding:10px 10px 10px 0}@media (max-width:1000px){[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]{height:auto}}@media (max-width:522px){[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]{font-size:.9em}}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{min-width:32px;text-align:right}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .play-count[_ngcontent-%COMP%]{min-width:20px;text-align:right}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{min-width:30px;text-align:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .play-date[_ngcontent-%COMP%]{min-width:100px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .fav[_ngcontent-%COMP%]{min-width:30px;text-align:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{flex-grow:1}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .length[_ngcontent-%COMP%]{min-width:80px;text-align:right}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:15px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type{margin-right:15px}@media (max-width:400px){[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:0}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:last-of-type{margin-right:0}}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]:hover{background-color:var(--background-hover)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]:last-child{border-bottom-width:1px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .small-screen-icon[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:var(--on-background-active)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--on-background);font-size:.8em}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding:0;display:inline-block;margin:0 10px 0 0}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:.8em;vertical-align:middle}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a.title-link[_ngcontent-%COMP%]{font-size:inherit;margin-right:10px;color:var(--on-background-active)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--on-background)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--on-background-hover)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{width:0;margin-left:0;cursor:move}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]{display:inline-block;width:26px;height:8px;transform:rotate(90deg);margin-left:-8px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%], [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]:before{background-image:radial-gradient(#7b7b7b 40%,transparent 0);background-size:4px 4px;background-position:0 100%;background-repeat:repeat-x}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]:before{content:"";display:block;width:100%;height:33%}@media (max-width:1000px){[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]{height:auto;min-height:48px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:inline-block;margin-left:0}}@media (max-width:400px){[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]{flex-flow:row wrap;align-items:inherit;width:100%;font-size:.9em}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .small-screen-icon[_ngcontent-%COMP%]{display:inline-block}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{order:2;width:25%;text-align:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]   span.grippy[_ngcontent-%COMP%]{transform:rotate(0deg)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{order:6;margin-left:0;margin-right:0;padding-right:0;padding-left:0;width:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-left:0;margin-right:0;padding-right:0;padding-left:0;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{width:100%;margin-left:0;margin-right:0;overflow:hidden;text-overflow:ellipsis}}@media (max-width:1200px){[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .fav[_ngcontent-%COMP%]{display:none}}@media (max-width:400px){[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .length[_ngcontent-%COMP%], [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%], [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .play-count[_ngcontent-%COMP%], [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .play-date[_ngcontent-%COMP%], [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{margin-left:0;margin-right:0;padding-right:0;padding-left:0;font-size:.8em;width:30%;flex-grow:1;text-align:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{order:1;width:25%;text-align:left}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .play-count[_ngcontent-%COMP%]{order:2}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .rating[_ngcontent-%COMP%]{order:3}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .play-date[_ngcontent-%COMP%]{order:4}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .length[_ngcontent-%COMP%]{order:5;width:25%;text-align:right}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{order:6}}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:11px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .match-file-list[_ngcontent-%COMP%]   .match-file[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   span.value[_ngcontent-%COMP%]{color:var(--on-background-active);padding-right:5px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]{border-left:1px solid var(--background-border);display:flex;flex-direction:column;flex:1 1 auto;width:50%;font-size:.9em}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .icon-checkmark[_ngcontent-%COMP%]{color:var(--primary)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .icon-warning[_ngcontent-%COMP%]{color:var(--accent)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:var(--on-background-active);padding-right:5px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-results[_ngcontent-%COMP%]{flex:1 1 auto;overflow-y:auto;overflow-x:auto}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-results[_ngcontent-%COMP%]   .match-releasegroup[_ngcontent-%COMP%]{padding:5px 5px 5px 15px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-results[_ngcontent-%COMP%]   .match-releasegroup[_ngcontent-%COMP%]   .match-release-info[_ngcontent-%COMP%], [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-results[_ngcontent-%COMP%]   .match-releasegroup[_ngcontent-%COMP%]   .match-tracks-info[_ngcontent-%COMP%]{font-size:.8em}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-results[_ngcontent-%COMP%]   .match-releasegroup[_ngcontent-%COMP%]   .match-release-info[_ngcontent-%COMP%], [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-results[_ngcontent-%COMP%]   .match-releasegroup[_ngcontent-%COMP%]   .match-select-releases[_ngcontent-%COMP%], [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-results[_ngcontent-%COMP%]   .match-releasegroup[_ngcontent-%COMP%]   .match-tracks-info[_ngcontent-%COMP%]{padding-top:4px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-results[_ngcontent-%COMP%]   .match-releasegroup[_ngcontent-%COMP%]   .match-select-releases[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.7em;line-height:.7em;vertical-align:top}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-results[_ngcontent-%COMP%]   .match-releasegroup[_ngcontent-%COMP%]   app-image-base64[_ngcontent-%COMP%]{height:32px;width:32px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-results[_ngcontent-%COMP%]   .match-releasegroup[_ngcontent-%COMP%]   .match-track-info[_ngcontent-%COMP%]{padding-top:2px;padding-bottom:2px;border-top:1px solid var(--background-border)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-results[_ngcontent-%COMP%]   .match-releasegroup[_ngcontent-%COMP%]   .match-track-info.missing[_ngcontent-%COMP%]{color:var(--accent)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-results[_ngcontent-%COMP%]   .match-releasegroup[_ngcontent-%COMP%]   .match-release[_ngcontent-%COMP%]{white-space:nowrap;padding:5px 5px 5px 42px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-apply[_ngcontent-%COMP%]{flex:1 1 auto;overflow-y:auto;overflow-x:auto;padding:15px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-apply[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding-bottom:10px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .section[_ngcontent-%COMP%]{color:var(--on-background-active);text-transform:uppercase;padding-bottom:10px;white-space:nowrap}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   app-match-coverart[_ngcontent-%COMP%]{border-top:1px solid var(--background-border)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-album-images[_ngcontent-%COMP%]{border-top:1px solid var(--background-border);padding-top:15px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-album-images[_ngcontent-%COMP%]   .front-only-choice[_ngcontent-%COMP%]{float:right;font-size:.8em}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-album-images[_ngcontent-%COMP%]   .match-images[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap}@media (max-width:768px){[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-album-images[_ngcontent-%COMP%]   .match-images[_ngcontent-%COMP%]{justify-content:space-around}}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]   .match-track-moods[_ngcontent-%COMP%]{border-top:1px solid var(--background-border);padding-top:15px}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]{flex:0 0 auto;padding:5px;display:flex;align-items:center;justify-content:center;border-top:1px solid var(--background-border)}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   .match-actions[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;margin-top:10px;margin-bottom:30px}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   .match-actions[_ngcontent-%COMP%]   app-tag-editor-autocomplete[_ngcontent-%COMP%]{height:28px;display:block}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   .match-actions[_ngcontent-%COMP%]   .match-search[_ngcontent-%COMP%]{display:flex;flex-direction:row;text-align:left;margin-bottom:10px}@media (max-width:768px){[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   .match-actions[_ngcontent-%COMP%]   .match-search[_ngcontent-%COMP%]{flex-direction:column}}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   .match-actions[_ngcontent-%COMP%]   .match-search[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{flex:1;padding-left:10px;padding-right:10px}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   .match-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   .match-actions[_ngcontent-%COMP%]   .match-progress[_ngcontent-%COMP%]{display:block;font-size:.9em}[_nghost-%COMP%]   .current-log[_ngcontent-%COMP%]{font-size:.8em;padding:5px}@media (max-width:768px){[_nghost-%COMP%]   .toggle[_ngcontent-%COMP%]{display:block;position:relative;width:100%;height:auto;text-align:center;padding-top:5px;padding-bottom:5px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{overflow-y:auto}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]{height:auto;width:100%;overflow-y:inherit;display:block;padding-right:0}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]   .handle[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]{height:auto;width:100%;display:none;border-left:none}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releasegroup[_ngcontent-%COMP%]{padding-left:0}.right-active[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-releases[_ngcontent-%COMP%]{display:block}.right-active[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .match-files[_ngcontent-%COMP%]{display:none}}']}),t})(),Se=(()=>{class t{constructor(){this.unsubscribe=new d.xQ}dialogInit(t,e){this.data=e.data,this.data&&(this.data.close=()=>{t.close()}),t.beforeClose().pipe((0,g.R)(this.unsubscribe)).subscribe(()=>{this.data=void 0})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-dialog-match-release"]],decls:1,vars:1,consts:[[3,"data"]],template:function(t,e){1&t&&Z._UZ(0,"app-match-release",0),2&t&&Z.Q6J("data",e.data)},directives:[Ze],styles:[""]}),t})();var De=n(55625),Be=n(40044);function Ne(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div",7),Z._uU(1," Column Text "),Z.TgZ(2,"div",8),Z.TgZ(3,"app-tag-editor-autocomplete",14),Z.NdJ("valueChange",function(e){return Z.CHM(t),Z.oxw(2).multiStr=e}),Z.qZA(),Z.qZA(),Z.TgZ(4,"button",11),Z.NdJ("click",function(){Z.CHM(t);const e=Z.oxw(2);return e.editor.setColumnText(e.activeCol,e.multiStr)}),Z._uU(5,"Set"),Z.qZA(),Z.TgZ(6,"button",11),Z.NdJ("click",function(){Z.CHM(t);const e=Z.oxw(2);return e.editor.appendColumnText(e.activeCol,e.multiStr)}),Z._uU(7,"Append"),Z.qZA(),Z.TgZ(8,"button",11),Z.NdJ("click",function(){Z.CHM(t);const e=Z.oxw(2);return e.editor.removeColumnText(e.activeCol,e.multiStr)}),Z._uU(9,"Remove"),Z.qZA(),Z.qZA()}if(2&t){const t=Z.oxw(2);Z.xp6(3),Z.Q6J("value",t.multiStr)("getList",t.activeCol.getAutoCompleteList)}}function Fe(t,e){if(1&t&&(Z.TgZ(0,"option",15),Z._uU(1),Z.qZA()),2&t){const t=e.$implicit;Z.Q6J("value",e.index),Z.xp6(1),Z.Oqu(t.def.name)}}function Ee(t,e){if(1&t&&(Z.TgZ(0,"div",7),Z._uU(1),Z._UZ(2,"br"),Z.TgZ(3,"button",11),Z.NdJ("click",function(){return e.$implicit.click()}),Z._UZ(4,"i",16),Z.qZA(),Z.qZA()),2&t){const t=e.$implicit;Z.xp6(1),Z.hij(" ",t.title,"")}}function Je(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div",1),Z.TgZ(1,"div",2),Z.TgZ(2,"div",3),Z.TgZ(3,"a",4),Z.NdJ("click",function(){return Z.CHM(t),Z.oxw().close()}),Z.qZA(),Z.qZA(),Z._uU(4," Current Column: "),Z.TgZ(5,"span"),Z._uU(6),Z.qZA(),Z.qZA(),Z.TgZ(7,"div",5),Z.YNc(8,Ne,10,2,"div",6),Z.TgZ(9,"div",7),Z._uU(10," Column Source "),Z.TgZ(11,"div",8),Z.TgZ(12,"select",9),Z.NdJ("ngModelChange",function(e){return Z.CHM(t),Z.oxw().sourceColumnIndex=e}),Z.YNc(13,Fe,2,2,"option",10),Z.qZA(),Z.qZA(),Z.TgZ(14,"button",11),Z.NdJ("click",function(){Z.CHM(t);const e=Z.oxw();return e.editor.copyColumn(e.sourceColumnIndex,e.activeCol)}),Z._uU(15,"Copy"),Z.qZA(),Z.TgZ(16,"button",11),Z.NdJ("click",function(){Z.CHM(t);const e=Z.oxw();return e.editor.appendFromColumn(e.sourceColumnIndex,e.activeCol)}),Z._uU(17,"Append"),Z.qZA(),Z.TgZ(18,"button",11),Z.NdJ("click",function(){Z.CHM(t);const e=Z.oxw();return e.editor.insertFromColumn(e.sourceColumnIndex,0,e.activeCol)}),Z._uU(19,"Insert at "),Z._UZ(20,"input",12),Z.qZA(),Z.qZA(),Z.YNc(21,Ee,5,1,"div",13),Z.qZA(),Z.qZA()}if(2&t){const t=Z.oxw();Z.xp6(6),Z.Oqu(t.activeCol.def.name),Z.xp6(2),Z.Q6J("ngIf",t.activeCol.multi),Z.xp6(4),Z.Q6J("ngModel",t.sourceColumnIndex),Z.xp6(1),Z.Q6J("ngForOf",t.editor.columns),Z.xp6(8),Z.Q6J("ngForOf",t.activeCol.actions)}}let Le=(()=>{class t{constructor(){this.requestClose=new Z.vpe,this.sourceColumnIndex=0,this.multiStr=""}close(){this.requestClose.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-admin-tag-editor-column-tool"]],inputs:{editor:"editor",activeCol:"activeCol"},outputs:{requestClose:"requestClose"},decls:1,vars:1,consts:[["class","column-tools",4,"ngIf"],[1,"column-tools"],[1,"column-tools-title"],[1,"close-panel"],[1,"close",3,"click"],[1,"column-tool-content"],["class","column-tool",4,"ngIf"],[1,"column-tool"],[1,"input-box"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"button-on-background",3,"click"],["type","number"],["class","column-tool",4,"ngFor","ngForOf"],[3,"value","getList","valueChange"],[3,"value"],[1,"icon-down-thin"]],template:function(t,e){1&t&&Z.YNc(0,Je,22,5,"div",0),2&t&&Z.Q6J("ngIf",e.activeCol&&e.editor)},directives:[o.O5,s.EJ,s.JJ,s.On,o.sg,U,s.YN,s.Kr],styles:['[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]{border:1px solid var(--control-border);padding-bottom:15px}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   .close-panel[_ngcontent-%COMP%]{float:right;display:inline-block;overflow:hidden;width:2.5rem;height:2.5rem;max-width:2.5rem;max-height:2.5rem;margin-top:-15px}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   .close-panel[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:2.5rem;height:2.5rem;border:none;background-color:transparent;font-size:1.5rem;transition:.25s linear}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   .close-panel[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:after, [_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   .close-panel[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:before{position:absolute;content:"";width:.75rem;height:.125rem;background-color:var(--on-control-hover);overflow:hidden}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   .close-panel[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:before{transform:rotate(-45deg)}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   .close-panel[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:after{transform:rotate(45deg)}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   .close-panel[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover{transform:rotate(1turn)}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   .close-panel[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover:after, [_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   .close-panel[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]:hover:before{background-color:var(--accent)}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   .column-tools-title[_ngcontent-%COMP%]{padding-top:15px;padding-left:15px;padding-right:15px}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   .column-tools-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--on-control-active)}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{border-radius:3px;padding-left:3px;padding-right:3px;align-items:center;background-color:var(--input);border:1px solid var(--input-border)}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;outline:none;min-height:20px;background-color:var(--input);color:var(--on-input)}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:var(--on-input);font-size:14px;cursor:pointer}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:var(--on-input-hover)}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   .input-box[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   app-tag-editor-autocomplete[_ngcontent-%COMP%]{min-height:24px}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   app-tag-editor-autocomplete[_ngcontent-%COMP%], [_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:1;border:none;outline:none;height:24px;background-color:var(--input);color:var(--on-input)}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   .column-tool-content[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}[_nghost-%COMP%]   .column-tools[_ngcontent-%COMP%]   .column-tool[_ngcontent-%COMP%]{padding:15px 15px 0;font-size:.8em;align-self:center}']}),t})();var qe=n(24401);const Ue=["inputEl"];let Xe=(()=>{class t{constructor(){this.original="",this.val="",this.navigKeyDownRequest=new Z.vpe,this.navigBlur=new Z.vpe,this.navigChange=new Z.vpe}ngOnChanges(t){this.changeCell(this.cell)}onNavigKeyDown(t){this.cell&&this.navigKeyDownRequest.emit({cell:this.cell,event:t})}changeCell(t){t&&(this.original=0!==t.frames.length&&t.frames[0].value&&t.frames[0].value.text?this.original=t.frames[0].value.text:"",this.val=this.original)}ngAfterViewInit(){setTimeout(()=>{var t;(null===(t=this.input)||void 0===t?void 0:t.nativeElement)&&this.input.nativeElement.focus()},0)}onEnter(){this.onChange(),this.navigBlur.emit()}onChange(){this.cell&&this.val!==this.original&&(0===this.cell.frames.length&&this.cell.frames.push({id:this.cell.column.def.id,value:{id:this.cell.column.def.subid,text:this.val}}),this.cell.frames[0].value.text=this.val,this.navigChange.emit())}onBlur(){this.onChange(),this.navigBlur.emit()}autocompleteEnter(t){this.val=t}autocompleteGetData(t){return(0,h.mG)(this,void 0,void 0,function*(){return[]})}autocompleteSelectResult(t){return this.val=t.data,this.val}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-cell-editor-txt"]],viewQuery:function(t,e){if(1&t&&Z.Gf(Ue,7),2&t){let t;Z.iGM(t=Z.CRH())&&(e.input=t.first)}},inputs:{cell:"cell"},outputs:{navigKeyDownRequest:"navigKeyDownRequest",navigBlur:"navigBlur",navigChange:"navigChange"},features:[Z.TTD],decls:2,vars:1,consts:[["type","text","autocomplete","off",3,"ngModel","ngModelChange","blur","keydown.enter"],["inputEl",""]],template:function(t,e){1&t&&(Z.TgZ(0,"input",0,1),Z.NdJ("ngModelChange",function(t){return e.val=t})("blur",function(){return e.onBlur()})("keydown.enter",function(){return e.onEnter()}),Z.qZA()),2&t&&Z.Q6J("ngModel",e.val)},directives:[s.Fj,s.JJ,s.On],styles:["[_nghost-%COMP%], [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{text-align:left}"]}),t})();function Ge(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"image-cropper",4),Z.NdJ("cropperReady",function(){return Z.CHM(t),Z.oxw().cropperReady()})("loadImageFailed",function(){return Z.CHM(t),Z.oxw().loadImageFailed()})("imageLoaded",function(){return Z.CHM(t),Z.oxw().imageLoaded()})("imageCropped",function(e){return Z.CHM(t),Z.oxw().imageCropped(e)}),Z.qZA()}if(2&t){const t=Z.oxw();Z.Q6J("maintainAspectRatio",t.maintainAspectRatio)("format","jpeg")("imageBase64",t.current.source)}}let ze=(()=>{class t{constructor(){this.maintainAspectRatio=!0,this.current={}}dialogInit(t,e){this.edit=e.data,this.edit&&(this.edit.result=this.edit.frames.map(t=>({id:t.id,value:Object.assign({},t.value)})),this.edit.result.length>0&&this.displayFrame(this.edit.result[0]))}displayFrame(t){const e=`data:${t.value.mimeType||"image/jpeg"};base64,${t.value.bin}`;this.current.frame=t,this.current.source=e}onDropFile(t){var e;t.preventDefault(),this.uploadFile(null===(e=t.dataTransfer)||void 0===e?void 0:e.files)}selectFile(t){this.uploadFile(t.target.files)}onDragOverFile(t){t.stopPropagation(),t.preventDefault()}splitBase64(t){return{mimeType:t.slice(5,t.indexOf(";")),base64:t.slice(t.indexOf("base64,")+7)}}buildFrame(t){const{mimeType:e,base64:n}=this.splitBase64(t);return{id:"APIC",value:{mimeType:e,description:"",bin:n,pictureType:3}}}uploadFile(t){if(!t||0===t.length)return;const e=t[0],n=new FileReader;n.readAsDataURL(e),n.onload=t=>{var e;const n=t.target.result;this.current.frame||(this.current.frame=this.buildFrame(n),(null===(e=this.edit)||void 0===e?void 0:e.result)&&this.edit.result.push(this.current.frame)),this.current.source=n;const{mimeType:i,base64:o}=this.splitBase64(n);this.current.frame.value.mimeType=i,this.current.frame.value.bin=o},n.onerror=t=>{console.error(t)}}loadImageFailed(){}cropperReady(){}imageLoaded(){}imageCropped(t){var e;if((null===(e=this.current)||void 0===e?void 0:e.frame)&&t.base64){const{mimeType:e,base64:n}=this.splitBase64(t.base64);this.current.frame.value.mimeType=e,this.current.frame.value.bin=n}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-dialog-tag-image"]],decls:7,vars:3,consts:[["type","checkbox",3,"ngModel","checked","ngModelChange"],[1,"drop-zone",3,"drop","dragover"],[3,"maintainAspectRatio","format","imageBase64","cropperReady","loadImageFailed","imageLoaded","imageCropped",4,"ngIf"],["type","file","placeholder","Upload image","accept",".png,.jpeg,.jpg",3,"change"],[3,"maintainAspectRatio","format","imageBase64","cropperReady","loadImageFailed","imageLoaded","imageCropped"]],template:function(t,e){1&t&&(Z.TgZ(0,"label"),Z.TgZ(1,"input",0),Z.NdJ("ngModelChange",function(t){return e.maintainAspectRatio=t}),Z.qZA(),Z._uU(2," Maintain Aspect Ratio\n"),Z.qZA(),Z.TgZ(3,"div",1),Z.NdJ("drop",function(t){return e.onDropFile(t)})("dragover",function(t){return e.onDragOverFile(t)}),Z.YNc(4,Ge,1,3,"image-cropper",2),Z.TgZ(5,"form"),Z.TgZ(6,"input",3),Z.NdJ("change",function(t){return e.selectFile(t)}),Z.qZA(),Z.qZA(),Z.qZA()),2&t&&(Z.xp6(1),Z.Q6J("ngModel",e.maintainAspectRatio)("checked",e.maintainAspectRatio),Z.xp6(3),Z.Q6J("ngIf",e.current.source))},directives:[s.Wl,s.JJ,s.On,o.O5,s._Y,s.JL,s.F,l.ap],styles:["[_nghost-%COMP%]   .drop-zone[_ngcontent-%COMP%]{padding:10px 20px;border:2px dotted var(--secondary)}"]}),t})();function He(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"textarea",1),Z.NdJ("ngModelChange",function(e){return Z.CHM(t),Z.oxw().currentLyrics.value.text=e}),Z.qZA()}if(2&t){const t=Z.oxw();Z.Q6J("ngModel",t.currentLyrics.value.text)}}let Qe=(()=>{class t{dialogInit(t,e){this.edit=e.data,this.edit&&(this.edit.result=this.edit.frames.map(t=>({id:t.id,value:Object.assign({},t.value)})),0===this.edit.result.length&&this.edit.result.push({id:"USLT",value:{id:"",language:"",text:""}}),this.currentLyrics=this.edit.result[0])}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-dialog-tag-lyrics"]],decls:1,vars:1,consts:[["autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",3,"ngModel","ngModelChange",4,"ngIf"],["autocomplete","off","autocorrect","off","autocapitalize","off","spellcheck","false",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&Z.YNc(0,He,1,1,"textarea",0),2&t&&Z.Q6J("ngIf",e.currentLyrics)},directives:[o.O5,s.Fj,s.JJ,s.On],styles:["[_nghost-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})();function Ye(t,e){if(1&t&&(Z.TgZ(0,"div",1),Z._uU(1),Z.qZA()),2&t){const t=e.$implicit;Z.Q6J("title",t),Z.xp6(1),Z.Oqu(t)}}let je=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-cell-editor-display"]],inputs:{lines:"lines"},decls:1,vars:1,consts:[[3,"title",4,"ngFor","ngForOf"],[3,"title"]],template:function(t,e){1&t&&Z.YNc(0,Ye,2,2,"div",0),2&t&&Z.Q6J("ngForOf",e.lines)},directives:[o.sg],styles:["[_nghost-%COMP%]   div[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-align:left;padding-left:6px;padding-right:6px}"],changeDetection:0}),t})();const $e=["cellContainer"];function Ve(t,e){if(1&t&&Z._UZ(0,"app-cell-editor-display",2),2&t){const t=Z.oxw();Z.Q6J("lines",t.lines)}}function We(t,e){1&t&&Z.GkF(0,null,3)}let Ke=(()=>{class t extends m{constructor(t,e){super(),this.dialogOverlay=t,this.resolver=e,this.navigKeyDownRequest=new Z.vpe,this.lines=[],this.inactive=!0,this.unsubscribe=new d.xQ}ngOnDestroy(){this.clearEdit(),this.unsubscribe.next(),this.unsubscribe.complete()}clickEvent(t){this.edit()}onCellEditorNavigationKeyDown(t){this.navigKeyDownRequest.emit(t)}ngOnChanges(t){t.cell&&this.display()}navigTo(){}static picFrameToString(t){return _[t.value.pictureType]||"image"}static popularimeterFrameToString(t){return`${t.value.rating} - ${t.value.email} - ${t.value.count}`}static boolFrameToString(t){return`${t.value.bool}`}static textListFrameToString(t){return t.value.list.join("\n")}static textFrameToString(t){return t.value.text}static idTextFrameToString(t){return t.value.text}static playCounterFrameToString(t){return`${t.value.num}`}static geobFrameToString(t){return`Binary ${t.value&&t.value.bin?t.value.bin.length:0} bytes`}static idBinFrameToString(t){return`Binary ${t.value&&t.value.bin?t.value.bin.length:0} bytes`}static langDescFrameToString(t){return t.value.text}edit(){var t;switch(null===(t=this.cell)||void 0===t?void 0:t.column.def.impl){case M.Filename:case M.IdText:case M.LangDescText:case M.Text:"USLT"===this.cell.column.def.id?this.editLyrics():this.startEdit(Xe);break;case M.Bool:this.editBool();break;case M.Pic:this.editPictures()}}startEdit(t){this.inactive&&(this.inactive=!1,setTimeout(()=>{this.createComponent(t),this.componentRef&&(this.componentRef.instance.cell=this.cell,this.componentRef.instance.ngOnChanges&&this.componentRef.instance.ngOnChanges({cell:{current:this.cell}}),this.componentRef.instance.navigBlur&&this.componentRef.instance.navigBlur.pipe((0,g.R)(this.unsubscribe)).subscribe(()=>{this.clearEdit(),this.inactive=!0}),this.componentRef.instance.navigChange&&this.componentRef.instance.navigChange.pipe((0,g.R)(this.unsubscribe)).subscribe(()=>{this.setChanged()}))}))}clearEdit(){this.componentRef&&this.componentRef.destroy(),this.container&&this.container.clear()}createComponent(t){if(this.clearEdit(),this.container){const e=this.resolver.resolveComponentFactory(t);this.componentRef=this.container.createComponent(e)}}editBool(){this.cell&&(0===this.cell.frames.length&&this.cell.frames.push({id:this.cell.column.def.id,value:{bool:!1}}),this.cell.frames[0].value.bool=!this.cell.frames[0].value.bool,this.setChanged())}setChanged(){this.cell&&(this.cell.changed=!0,this.cell.parent.changed=!0,this.display())}editPictures(){const t=this.cell;if(t){const e={frames:t.frames};this.dialogOverlay.open({title:"Tag Pictures",childComponent:ze,data:e,onOkBtn:()=>(0,h.mG)(this,void 0,void 0,function*(){return t.frames=e.result||[],this.setChanged(),Promise.resolve()}),onCancelBtn:()=>(0,h.mG)(this,void 0,void 0,function*(){return Promise.resolve()})})}}editLyrics(){const t=this.cell;if(t){const e={frames:t.frames};this.dialogOverlay.open({title:"Tag Lyrics",childComponent:Qe,data:e,panelClass:"overlay-panel-large-buttons",onOkBtn:()=>(0,h.mG)(this,void 0,void 0,function*(){return t.frames=e.result?e.result.filter(t=>t.value.text.length>0):[],this.setChanged(),Promise.resolve()}),onCancelBtn:()=>(0,h.mG)(this,void 0,void 0,function*(){return Promise.resolve()})})}}display(){this.lines=this.cell?this.cell.frames.map(t=>this.frameToString(t)):[]}frameToString(e){var n,i;switch(null===(n=this.cell)||void 0===n?void 0:n.column.def.impl){case M.Filename:case M.Text:return t.textFrameToString(e);case M.LangDescText:return t.langDescFrameToString(e);case M.IdText:return t.idTextFrameToString(e);case M.Pic:return t.picFrameToString(e);case M.TextList:return t.textListFrameToString(e);case M.IdBin:return t.idBinFrameToString(e);case M.GEOB:return t.geobFrameToString(e);case M.Bool:return t.boolFrameToString(e);case M.Popularimeter:return t.popularimeterFrameToString(e);case M.PlayCounter:return t.playCounterFrameToString(e);case M.MusicCDId:case M.EventTimingCodes:case M.SYLT:case M.ETCO:case M.PCST:case M.LINK:case M.AENC:case M.RVAD:case M.RGAD:case M.RVAD2:case M.CTOC:case M.CHAP:case M.Unknown:default:return`TODO CELLEDITOR: ${null===(i=this.cell)||void 0===i?void 0:i.column.def.name}`}}}return t.\u0275fac=function(e){return new(e||t)(Z.Y36(De.SL),Z.Y36(Z._Vd))},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-cell-editor"]],viewQuery:function(t,e){if(1&t&&Z.Gf($e,5,Z.s_b),2&t){let t;Z.iGM(t=Z.CRH())&&(e.container=t.first)}},hostBindings:function(t,e){1&t&&Z.NdJ("click",function(t){return e.clickEvent(t)})},inputs:{cell:"cell"},outputs:{navigKeyDownRequest:"navigKeyDownRequest"},features:[Z._Bn([{provide:m,useExisting:(0,Z.Gpc)(()=>t)}]),Z.qOj,Z.TTD],decls:2,vars:2,consts:[[3,"lines",4,"ngIf"],[4,"ngIf"],[3,"lines"],["cellContainer",""]],template:function(t,e){1&t&&(Z.YNc(0,Ve,1,1,"app-cell-editor-display",0),Z.YNc(1,We,2,0,"ng-container",1)),2&t&&(Z.Q6J("ngIf",e.inactive),Z.xp6(1),Z.Q6J("ngIf",!e.inactive))},directives:[o.O5,je],styles:[""]}),t})();function tn(t,e){1&t&&Z._UZ(0,"app-loading")}function en(t,e){1&t&&(Z._UZ(0,"i",3),Z._uU(1," Choose Columns"))}function nn(t,e){1&t&&(Z._UZ(0,"i",4),Z._uU(1," Set Fixed Audiobook Frames"))}function on(t,e){1&t&&(Z._UZ(0,"i",4),Z._uU(1," Set Fixed Audio Series Frames"))}function sn(t,e){1&t&&(Z._UZ(0,"i",4),Z._uU(1," Set Fixed Soundtrack Frames"))}function rn(t,e){1&t&&(Z._UZ(0,"i",4),Z._uU(1," Set Fixed Bootleg Frames"))}function an(t,e){1&t&&(Z._UZ(0,"i",4),Z._uU(1," Search Missing Lyrics"))}function cn(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div",9),Z._uU(1," This folder does not contain any tracks with tags."),Z._UZ(2,"br"),Z._uU(3,"Do you want to load all tracks from subfolders?"),Z._UZ(4,"br"),Z.TgZ(5,"button",10),Z.NdJ("click",function(){return Z.CHM(t),Z.oxw(2).loadRecursive()}),Z._UZ(6,"i",11),Z._uU(7," Load recursive"),Z.qZA(),Z.qZA()}}function ln(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"button",19),Z.NdJ("click",function(){return Z.CHM(t),Z.oxw(3).save()}),Z._UZ(1,"i",20),Z.qZA()}}function un(t,e){1&t&&(Z.TgZ(0,"button",21),Z._UZ(1,"i",22),Z.qZA())}function dn(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"div",12),Z.TgZ(1,"button",13),Z.NdJ("click",function(){return Z.CHM(t),Z.oxw(2).refresh()}),Z._UZ(2,"i",11),Z.qZA(),Z.TgZ(3,"button",14),Z.NdJ("click",function(){return Z.CHM(t),Z.oxw(2).brainz()}),Z._UZ(4,"app-mb-icon",15),Z.qZA(),Z.YNc(5,ln,2,0,"button",16),Z.YNc(6,un,2,0,"button",17),Z.TgZ(7,"button",18),Z._uU(8,"\u2026"),Z.qZA(),Z.qZA()}if(2&t){const t=Z.oxw(2),e=Z.MAs(2);Z.xp6(4),Z.Q6J("size",12),Z.xp6(1),Z.Q6J("ngIf",!t.isSaving),Z.xp6(1),Z.Q6J("ngIf",t.isSaving),Z.xp6(1),Z.Q6J("contextMenu",e)("contextMenuTriggerLeft",!0)}}function gn(t,e){1&t&&Z._UZ(0,"app-loading")}function hn(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"th",28),Z.NdJ("click",function(){const e=Z.CHM(t).$implicit;return Z.oxw(3).activeCol=e}),Z.TgZ(1,"div"),Z.TgZ(2,"span",29),Z._uU(3),Z.qZA(),Z.qZA(),Z.qZA()}if(2&t){const t=e.$implicit;Z.xp6(2),Z.Q6J("title",t.def.id),Z.xp6(1),Z.Oqu(t.def.name)}}function mn(t,e){1&t&&Z._UZ(0,"col"),2&t&&Z.Udp("min-width",e.$implicit.def.width||60,"px")}function pn(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"i",34),Z.NdJ("click",function(){Z.CHM(t);const e=Z.oxw(2).$implicit;return Z.oxw(3).saveEdit(e)}),Z.qZA()}}function fn(t,e){1&t&&Z._UZ(0,"i",35)}function Cn(t,e){if(1&t&&(Z.ynx(0),Z.YNc(1,pn,1,0,"i",32),Z.YNc(2,fn,1,0,"i",33),Z.BQk()),2&t){const t=Z.oxw().$implicit;Z.xp6(1),Z.Q6J("ngIf",!t.saving),Z.xp6(1),Z.Q6J("ngIf",t.saving)}}function vn(t,e){if(1&t){const t=Z.EpF();Z.TgZ(0,"td"),Z.TgZ(1,"app-cell-editor",36),Z.NdJ("navigKeyDownRequest",function(e){return Z.CHM(t),Z.oxw(4).onCellEditorNavigationKeyDown(e)}),Z.qZA(),Z.qZA()}if(2&t){const t=e.$implicit;Z.xp6(1),Z.ekj("changed",t.changed),Z.Q6J("cell",t)}}function Mn(t,e){if(1&t&&(Z.TgZ(0,"tr"),Z.TgZ(1,"td",30),Z.TgZ(2,"div",31),Z.YNc(3,Cn,3,2,"ng-container",0),Z.qZA(),Z.qZA(),Z.YNc(4,vn,2,3,"td",27),Z.qZA()),2&t){const t=e.$implicit,n=Z.oxw(3);Z.xp6(3),Z.Q6J("ngIf",t.changed),Z.xp6(1),Z.Q6J("ngForOf",t.cells)("ngForTrackBy",n.trackByCellFn)}}function Tn(t,e){if(1&t&&(Z.TgZ(0,"div",23),Z.TgZ(1,"table"),Z.TgZ(2,"thead"),Z.TgZ(3,"tr",24),Z._UZ(4,"th"),Z.YNc(5,hn,4,2,"th",25),Z.qZA(),Z.qZA(),Z.TgZ(6,"colgroup"),Z._UZ(7,"col"),Z.YNc(8,mn,1,2,"col",26),Z.qZA(),Z.TgZ(9,"tbody"),Z.YNc(10,Mn,5,3,"tr",27),Z.qZA(),Z.qZA(),Z.qZA()),2&t){const t=Z.oxw(2);Z.xp6(5),Z.Q6J("ngForOf",t.editor.columns)("ngForTrackBy",t.trackByColumnFn),Z.xp6(2),Z.Udp("min-width",60,"px"),Z.xp6(1),Z.Q6J("ngForOf",t.editor.columns)("ngForTrackBy",t.trackByColumnFn),Z.xp6(2),Z.Q6J("ngForOf",t.editor.edits)("ngForTrackBy",t.trackByEditFn)}}function On(t,e){if(1&t){const t=Z.EpF();Z.ynx(0),Z.YNc(1,cn,8,0,"div",5),Z.YNc(2,dn,9,5,"div",6),Z.TgZ(3,"app-admin-tag-editor-column-tool",7),Z.NdJ("requestClose",function(){return Z.CHM(t),Z.oxw().activeCol=void 0}),Z.qZA(),Z.YNc(4,gn,1,0,"app-loading",0),Z.YNc(5,Tn,11,8,"div",8),Z.BQk()}if(2&t){const t=Z.oxw();Z.xp6(1),Z.Q6J("ngIf",t.canLoadRecursive),Z.xp6(1),Z.Q6J("ngIf",t.tracks&&t.tracks.length>0&&t.editor.edits),Z.xp6(1),Z.Q6J("editor",t.editor)("activeCol",t.activeCol),Z.xp6(1),Z.Q6J("ngIf",!t.tracks),Z.xp6(1),Z.Q6J("ngIf",t.tracks&&t.tracks.length>0&&t.editor.edits)}}let Pn=(()=>{class t{constructor(t,e,n,i,o){this.app=t,this.folderService=e,this.jam=n,this.notify=i,this.dialogOverlay=o,this.canLoadRecursive=!1,this.isSaving=!1,this.editor=new I(n)}onScroll(){}canDeactivate(){return!this.isSaving}ngOnChanges(t){this.refresh()}refresh(){this.folder=void 0,this.tracks=void 0,this.activeCol=void 0,this.id&&this.jam.folder.id({id:this.id,folderIncFolders:!0,folderIncTracks:!0,folderIncParents:!0,folderIncTag:!0,trackIncTag:!0,trackIncRawTag:!0,folderChildIncTag:!0}).then(t=>{this.display(t)}).catch(t=>{this.notify.error(t)})}trackByEditFn(t,e){return e.track.id}trackByColumnFn(t,e){return`${e.def.id}${e.def.subid}`}trackByCellFn(t,e){return`${e.column.def.id}${e.column.def.subid}`}loadRecursive(){this.folder&&(this.canLoadRecursive=!1,this.tracks=void 0,this.jam.track.search({childOfID:this.folder.id,trackIncTag:!0,trackIncRawTag:!0,orderBy:f.zj.filename}).then(t=>{this.tracks=t.items,this.editor.build(this.tracks)}).catch(t=>{this.notify.error(t)}))}onCellEditorNavigationKeyDown(t){if((0,p.o)(t.event)){const e=this.editor.edits.findIndex(e=>e===t.cell.parent),n=this.editor.edits[e+((0,p.up)(t.event)?1:-1)];if(n){const e=n.cells[t.cell.parent.cells.indexOf(t.cell)];if(e){const t=this.cellEditors.find(t=>t.cell===e);t&&setTimeout(()=>{t.navigTo()})}}}else if((0,p.ME)(t.event)){const e=t.cell.parent.cells[t.cell.parent.cells.indexOf(t.cell)+((0,p.V8)(t.event)?1:-1)];if(e){const t=this.cellEditors.find(t=>t.cell===e);t&&setTimeout(()=>{t.navigTo()})}}}save(){if(this.isSaving)return;const t=this.editor.edits.filter(t=>t.changed);if(0===t.length)return;const e=[];for(const i of t)i.saving=!0,e.push(this.prepareEditSave(i));const n=e.shift();n&&(this.isSaving=!0,this.runSave(n,e).then(()=>{this.isSaving=!1}).catch(e=>{this.isSaving=!1;for(const n of t)n.saving=!1;this.notify.error(e)}))}prepareEditSave(t){const e={edit:t,track:t.track};let n=t.cells.filter(t=>t.changed);const i=n.find(t=>"internal_file"===t.column.def.id);if(i){n=n.filter(t=>"internal_file"!==t.column.def.id);const o=i.frames[0].value.text;o&&t.track.name!==o&&(e.filename=o)}return n.length>0&&(e.rawTag=y(t)),e}saveEdit(t){if(!t.changed||this.isSaving)return;this.isSaving=!0;const e=this.prepareEditSave(t);this.runSave(e,[]).then(()=>{this.isSaving=!1}).catch(t=>{this.isSaving=!1,this.notify.error(t)})}chooseColumns(){this.isSaving&&this.notify.error(Error("Saving is in progress"));const t={columns:this.editor.columns,resultColumns:[]};this.dialogOverlay.open({title:"Choose Columns",childComponent:Y,panelClass:"overlay-panel-large-buttons",data:t,onOkBtn:()=>(0,h.mG)(this,void 0,void 0,function*(){try{this.tracks&&this.editor.updateColumns(this.tracks,t.resultColumns)}catch(e){return this.notify.error(e),Promise.reject(e)}}),onCancelBtn:()=>(0,h.mG)(this,void 0,void 0,function*(){return Promise.resolve()})})}brainz(){if(!this.folder||!this.tracks)return;this.canDeactivate()||this.notify.error(Error("Saving is in progress"));const t={folder:this.folder,matchings:this.tracks.map(t=>({track:t})),apply:()=>{for(const e of t.matchings)e.track&&e.rawTag&&(e.track.tagRaw=e.rawTag);if(this.tracks){this.editor.build(this.tracks);for(const e of t.matchings)if(e.track&&e.rawTag){const t=this.editor.edits.find(t=>t.track===e.track);if(t){t.changed=!0;for(const e of t.cells)"internal_file"!==e.column.def.id&&(e.changed=!0)}}}}};this.dialogOverlay.open({title:"Release Matching",childComponent:Se,data:t,panelClass:"overlay-panel-large"})}editAlbumValues(){this.canDeactivate()||this.notify.error(Error("Saving is in progress")),this.tracks&&this.dialogOverlay.open({title:"Edit Album Values",childComponent:z,data:{tracks:this.tracks},onOkBtn:()=>(0,h.mG)(this,void 0,void 0,function*(){return Promise.resolve()}),onCancelBtn:()=>(0,h.mG)(this,void 0,void 0,function*(){return Promise.resolve()})})}runSave(t,e){return(0,h.mG)(this,void 0,void 0,function*(){try{if(t.filename){const e=yield this.jam.track.rename({id:t.track.id,name:t.filename});this.folderService.waitForQueueResult("Renaming Track",e,[t.track.parentID],[],[t.track.id])}if(t.rawTag){const e=yield this.jam.track.rawTagSet({id:t.track.id,tag:t.rawTag});this.folderService.waitForQueueResult("Writing Track Tag",e,[t.track.parentID],[],[t.track.id])}t.edit.saving=!1,t.rawTag&&(t.edit.tag=t.rawTag),t.edit.changed=!1}catch(i){return Promise.reject(i)}const n=e.shift();n&&(yield this.runSave(n,e))})}display(t){this.folder=t,this.tracks=t.tracks||[],this.editor.build(this.tracks),this.canLoadRecursive=0===this.tracks.length&&(t.folders||[]).length>0,this.canLoadRecursive&&t.type===f.Sr.multialbum&&this.loadRecursive()}}return t.\u0275fac=function(e){return new(e||t)(Z.Y36(dt.zi),Z.Y36(dt.Cr),Z.Y36(f.K4),Z.Y36(dt.c),Z.Y36(De.SL))},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-admin-tag-editor"]],viewQuery:function(t,e){if(1&t&&Z.Gf(m,5),2&t){let t;Z.iGM(t=Z.CRH())&&(e.cellEditors=t)}},hostBindings:function(t,e){1&t&&Z.NdJ("beforeunload",function(){return e.canDeactivate()},!1,Z.Jf7)},inputs:{id:"id"},features:[Z.TTD],decls:10,vars:2,consts:[[4,"ngIf"],["actionMenu",""],["contextMenuItem","",3,"execute"],[1,"icon-list-add"],[1,"icon-edit"],["class","load-recursive",4,"ngIf"],["class","actions",4,"ngIf"],[3,"editor","activeCol","requestClose"],["class","editor",4,"ngIf"],[1,"load-recursive"],["title","Load all Tracks",1,"button-on-control",3,"click"],[1,"icon-reload"],[1,"actions"],["title","Refresh",1,"button-on-control",3,"click"],["title","Match with MusicBrainz",1,"button-on-control",3,"click"],[3,"size"],["class","button-on-control","title","Save",3,"click",4,"ngIf"],["class","button-on-control","title","Save",4,"ngIf"],["title","More",1,"button-on-control",3,"contextMenu","contextMenuTriggerLeft"],["title","Save",1,"button-on-control",3,"click"],[1,"icon-floppy"],["title","Save",1,"button-on-control"],[1,"icon-spin","icon-spnner"],[1,"editor"],[1,"header-row"],["class","header-row-title",3,"click",4,"ngFor","ngForOf","ngForTrackBy"],[3,"min-width",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"header-row-title",3,"click"],[3,"title"],[1,"col-state"],[1,"cell-editor"],["class","icon-floppy",3,"click",4,"ngIf"],["class","icon-spin icon-spinner",4,"ngIf"],[1,"icon-floppy",3,"click"],[1,"icon-spin","icon-spinner"],[1,"cell-editor",3,"cell","navigKeyDownRequest"]],template:function(t,e){1&t&&(Z.YNc(0,tn,1,0,"app-loading",0),Z.TgZ(1,"context-menu",null,1),Z.YNc(3,en,2,0,"ng-template",2),Z.NdJ("execute",function(){return e.chooseColumns()}),Z.YNc(4,nn,2,0,"ng-template",2),Z.NdJ("execute",function(){return e.editor.setAudiobookFrames()}),Z.YNc(5,on,2,0,"ng-template",2),Z.NdJ("execute",function(){return e.editor.setAudioSeriesFrames()}),Z.YNc(6,sn,2,0,"ng-template",2),Z.NdJ("execute",function(){return e.editor.setSoundtrackFrames()}),Z.YNc(7,rn,2,0,"ng-template",2),Z.NdJ("execute",function(){return e.editor.setBootlegFrames()}),Z.YNc(8,an,2,0,"ng-template",2),Z.NdJ("execute",function(){return e.editor.findMissingLyrics()}),Z.qZA(),Z.YNc(9,On,6,6,"ng-container",0)),2&t&&(Z.Q6J("ngIf",!e.folder),Z.xp6(9),Z.Q6J("ngIf",e.folder))},directives:[o.O5,Ot.G,Pt.n,Be.N,Le,qe.J,_t.l,o.sg,Ke],styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow:hidden;display:flex;flex-direction:column}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%]{padding:10px 15px 0;border-bottom:1px solid var(--background-border)}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}[_nghost-%COMP%]   .actions[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1px;font-size:11px;margin-left:5px;margin-right:5px}[_nghost-%COMP%]   .load-recursive[_ngcontent-%COMP%]{text-align:center;margin-top:30px;margin-left:30px;margin-right:30px}[_nghost-%COMP%]   .load-recursive[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:10px}[_nghost-%COMP%]   .editor[_ngcontent-%COMP%]{width:100%;height:100%;display:block;position:relative;overflow:auto}[_nghost-%COMP%]   .editor[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{table-layout:fixed;border-width:0;width:auto}[_nghost-%COMP%]   .editor[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .cell-editor[_ngcontent-%COMP%]{width:100%;height:34px;text-align:left;padding-bottom:1px;padding-top:1px;font-size:11px;color:var(--on-background);border-left:1px solid var(--background-border);border-bottom-color:var(--background-border);border-right-color:var(--background-border);border-top:1px solid var(--background-border);overflow:hidden;display:flex;align-items:center}[_nghost-%COMP%]   .editor[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .cell-editor.changed[_ngcontent-%COMP%]{padding-bottom:0;padding-top:0;border-left-width:1px;border-top-width:1px;border-left:2px solid var(--background-box);border-bottom:1px solid var(--background-box);border-right:1px solid var(--background-box);border-top:2px solid var(--background-box)}[_nghost-%COMP%]   .editor[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   .cell-editor[_ngcontent-%COMP%]:focus-within{padding-bottom:0;padding-top:0;border-style:solid;border-width:2px 1px 1px 2px;color:var(--on-background-active)}[_nghost-%COMP%]   .editor[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border-right:1px solid var(--background-border)}[_nghost-%COMP%]   .editor[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.header-row[_ngcontent-%COMP%]{border-top:1px solid var(--background-border)}[_nghost-%COMP%]   .editor[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.header-row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;font-size:.8em;padding-left:4px;padding-right:4px;border-top:none;border-bottom:none;color:var(--on-background-active);background-color:var(--background);position:sticky}[_nghost-%COMP%]   .editor[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.header-row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:0;visibility:hidden}[_nghost-%COMP%]   .editor[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr.header-row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:hover   .actions[_ngcontent-%COMP%]{visibility:inherit}[_nghost-%COMP%]   .editor[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th.header-row-title[_ngcontent-%COMP%]{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;user-select:none}[_nghost-%COMP%]   .editor[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:none;max-width:200px}[_nghost-%COMP%]   .editor[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.col-state[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .editor[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td.col-state[_ngcontent-%COMP%]   .cell-editor[_ngcontent-%COMP%]{padding-top:6px;font-size:18px}[_nghost-%COMP%]   .editor[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-of-type   .cell-editor[_ngcontent-%COMP%]{border-bottom:1px solid var(--background-border)}"]}),t})();const bn=u.Bz.forChild([{path:"",component:(()=>{class t{constructor(t){this.route=t,this.unsubscribe=new d.xQ}ngOnInit(){var t,e;(null===(e=null===(t=this.route.parent)||void 0===t?void 0:t.parent)||void 0===e?void 0:e.params)&&this.route.parent.parent.params.pipe((0,g.R)(this.unsubscribe)).subscribe(t=>{this.id=t.id})}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}canDeactivate(){return!(!this.child||!this.child.canDeactivate())}}return t.\u0275fac=function(e){return new(e||t)(Z.Y36(u.gz))},t.\u0275cmp=Z.Xpm({type:t,selectors:[["app-admin-folder-tag-editor"]],viewQuery:function(t,e){if(1&t&&Z.Gf(Pn,7),2&t){let t;Z.iGM(t=Z.CRH())&&(e.child=t.first)}},decls:1,vars:1,consts:[[3,"id"]],template:function(t,e){1&t&&Z._UZ(0,"app-admin-tag-editor",0),2&t&&Z.Q6J("id",e.id)},directives:[Pn],styles:["[_nghost-%COMP%]{height:100%;width:100%;overflow:hidden;display:block}"]}),t})()}]);let xn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Z.oAB({type:t}),t.\u0275inj=Z.cJS({providers:[],imports:[[o.ez,c.m,s.u5,l.QG,a.vI,i.Cl,r.In,bn]]}),t})()}}]);