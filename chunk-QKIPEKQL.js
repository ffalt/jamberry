import{a as W}from"./chunk-QMOZLFND.js";import{a as z}from"./chunk-GVMVJAFS.js";import{b as j}from"./chunk-JNPRJ3MQ.js";import{a as X}from"./chunk-6WAGYCOA.js";import"./chunk-24DMSAFT.js";import{b as D,d as w,g as F,o as $}from"./chunk-Y5Z5ITNC.js";import{a as V}from"./chunk-PZTZCA44.js";import"./chunk-4HNSRH53.js";import{G as K}from"./chunk-ZVKVGF76.js";import{k as G}from"./chunk-T6GM3CFW.js";import{$d as B,Ac as I,Ba as M,Hb as P,Ib as T,Lb as k,Mb as A,Nb as c,Ob as l,Pb as a,Qb as d,Ub as E,Vb as S,Y as C,_b as v,ab as r,ac as H,dc as _,fc as N,ia as h,na as g,nb as u,oa as f,rb as O,tc as y,vc as b,wd as x,yc as L,zc as R}from"./chunk-H2EXZDP6.js";var J=(o,i)=>i.track.id;function U(o,i){o&1&&d(0,"app-loading")}function q(o,i){if(o&1){let s=v();l(0,"div",8)(1,"div",9),y(2),a(),l(3,"div",10)(4,"app-track-health",11),_("resolvedEvent",function(){let n=g(s).$implicit,t=N();return f(t.trackHealthResolved(n))}),a()()()}if(o&2){let s=i.$implicit;r(2),b(" ",s.track.name," "),r(2),c("trackHealth",s)}}var _e=(()=>{let i=class i extends z{constructor(){super(...arguments),this.modes=[],this.mediaCheck=!1,this.jam=h(B),this.notify=h(K),this.folderService=h(j)}ngOnInit(){super.ngOnInit(),this.folderService.foldersChange.pipe(C(this.unsubscribe)).subscribe(e=>{e.id===this.id&&this.refresh()})}ngOnDestroy(){super.ngOnDestroy()}checkChange(){this.refresh()}trackHealthResolved(e){this.all&&(this.all=this.all.filter(n=>n!==e),this.reDisplay())}refresh(){this.hints=void 0,this.id&&this.jam.track.health({folderIDs:[this.id],healthMedia:this.mediaCheck}).then(e=>{this.display(e)}).catch(e=>{this.notify.error(e)})}reDisplay(){this.hints=!this.filter||!this.all?this.all:this.all.filter(e=>e.health.find(n=>n.name===this.filter))}display(e){this.all=e,this.modes=[];for(let n of e)for(let t of n.health)this.modes.includes(t.name)||this.modes.push(t.name);this.reDisplay()}};i.\u0275fac=(()=>{let e;return function(t){return(e||(e=M(i)))(t||i)}})(),i.\u0275cmp=u({type:i,selectors:[["app-admin-tracks-health"]],features:[O],decls:13,vars:4,consts:()=>{let e;e=$localize`:␟e9e69aab6530b06f07d62019e95496e5c974a35d␟4008496035123032607:Refresh List`;let n;return n=$localize`:␟fc25452275680509933bd62f7ff2f4f14a5949d8␟79910036711821960:Check Media`,[n,[1,"health"],[1,"actions"],["title",e,1,"button-on-control",3,"click"],[1,"icon-reload"],["type","checkbox",3,"change","ngModelChange","ngModel","checked"],[1,"content"],["name","Track Health Issues",3,"list"],[1,"track"],[1,"meta"],[1,"track-health"],[3,"resolvedEvent","trackHealth"]]},template:function(n,t){n&1&&(l(0,"div",1)(1,"div",2)(2,"button",3),_("click",function(){return t.refresh()}),d(3,"i",4),a(),l(4,"label")(5,"input",5),_("change",function(){return t.checkChange()}),I("ngModelChange",function(m){return R(t.mediaCheck,m)||(t.mediaCheck=m),m}),a(),E(6),H(7,0),S(),a()(),l(8,"div",6),P(9,U,1,0,"app-loading"),d(10,"app-background-text-list",7),k(11,q,5,2,"div",8,J),a()()),n&2&&(r(5),L("ngModel",t.mediaCheck),c("checked",t.mediaCheck),r(4),T(t.hints?-1:9),r(),c("list",t.hints),r(),A(t.hints))},dependencies:[x,G,$,D,w,F,W,X,V],styles:["[_nghost-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{padding:10px 15px 0;border-bottom-color:var(--background-border);border-bottom-width:1px;border-bottom-style:solid}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-right:5px;margin-bottom:10px}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:1px;font-size:11px;margin-left:5px;margin-right:5px}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:15px;overflow-y:auto;overflow-x:auto}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]{flex-flow:row nowrap}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{width:30%;overflow:hidden;padding-right:15px;text-overflow:ellipsis}[_nghost-%COMP%]   .health[_ngcontent-%COMP%]   .track[_ngcontent-%COMP%]   .track-health[_ngcontent-%COMP%]{width:70%}"]});let o=i;return o})();export{_e as AdminTracksHealthComponent};
